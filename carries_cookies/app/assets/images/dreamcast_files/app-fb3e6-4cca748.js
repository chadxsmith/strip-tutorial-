webpackJsonp([2],[function(e,t,n){n(1224),e.exports=n(1194)},,,,,,function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=c[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(s(i.parts[o],t))}else{for(var a=[],o=0;o<i.parts.length;o++)a.push(s(i.parts[o],t));c[i.id]={id:i.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],o=r[0],s=r[1],a=r[2],l=r[3],u={css:s,media:a,sourceMap:l};n[o]?n[o].parts.push(u):t.push(n[o]={id:o,parts:[u]})}return t}function o(){var e=document.createElement("style"),t=p();return e.type="text/css",t.appendChild(e),e}function s(e,t){var n,i,r;if(t.singleton){var s=g++;n=f||(f=o()),i=l.bind(null,n,s,!1),r=l.bind(null,n,s,!0)}else n=o(),i=u.bind(null,n),r=function(){n.parentNode.removeChild(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function a(e,t,n){var i=["/** >>"+t+" **/","/** "+t+"<< **/"],r=e.lastIndexOf(i[0]),o=n?i[0]+n+i[1]:"";if(e.lastIndexOf(i[0])>=0){var s=e.lastIndexOf(i[1])+i[1].length;return e.slice(0,r)+o+e.slice(s)}return e+o}function l(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=a(e.styleSheet.cssText,t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function u(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(r&&"function"==typeof btoa)try{n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(r))+" */",n='@import url("data:stylesheet/css;base64,'+btoa(n)+'")'}catch(o){}if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var c={},d=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},h=d(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),p=d(function(){return document.head||document.getElementsByTagName("head")[0]}),f=null,g=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=h());var n=r(e);return i(n,t),function(e){for(var o=[],s=0;s<n.length;s++){var a=n[s],l=c[a.id];l.refs--,o.push(l)}if(e){var u=r(e);i(u,t)}for(var s=0;s<o.length;s++){var l=o[s];if(0===l.refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete c[l.id]}}}}},,,,,,,,,,,,,,function(e,t,n){"use strict";e.exports=n(2679)},,function(e,t,n){(function(t){"use strict";function i(e,n){var i=n.serviceCustomSettings,s=void 0===i?{}:i,a=e.url,l=e.headers,u=e.method,c=e.timeout,d=e.dataType,h="json"===d,p="get"!==u,f=h&&p?JSON.stringify(e.data):e.data,g=h?"application/json":null;return t.ajax({url:a,headers:l,type:u,data:f,contentType:g,processData:p,timeout:s.timeout||c}).then(r,o)}function r(e,t,n){return{body:e,status:n.status,headers:{}}}function o(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.responseJSON,n=void 0===t?{}:t,i=e.status;return{body:n,status:i,headers:{}}}function s(e){return e.replace(l,"/$&")||"/"}function a(e,t,i,r,o){return n(62).stringify({scheme:e,host:t,port:i,path:s(r),query:o})}var l=/^[^\/]/;e.exports=n(1171)({endpoints:n(1140),services:n(1222)},i,a)}).call(t,n(1))},,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/statistics/jumpmonth-a98e52.png"},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){s["default"](e)}t.__esModule=!0,t.registerDefaultDecorators=r;var o=n(2680),s=i(o)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){s["default"](e),l["default"](e),c["default"](e),h["default"](e),f["default"](e),m["default"](e),v["default"](e)}t.__esModule=!0,t.registerDefaultHelpers=r;var o=n(2681),s=i(o),a=n(2682),l=i(a),u=n(2683),c=i(u),d=n(2684),h=i(d),p=n(2685),f=i(p),g=n(2686),m=i(g),_=n(2687),v=i(_)},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(r.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){var t=r.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;n>o;o++)i[o-1]=arguments[o];console[t].apply(console,i)}}};t["default"]=r,e.exports=t["default"]},function(e,t,n){function i(e,t){return o.t(e,t.hash,{comment:t.hash._comment,context:t.hash._context})}function r(e){return o.t(s.cleanBlockText(e.fn()),e.hash,{comment:e.hash._comment,context:e.hash._context})}var o=n(51),s=n(916);e.exports=function(){var e=arguments.length;if(2===e)return i.apply(this,arguments);if(1===e)return r.apply(this,arguments);throw new Error("Invalid signature to t helper, expected 1 or 2 arguments, got "+e)}},function(e,t,n){"use strict";function i(e,t,i){i=i||{};var r=s.t(e,t,i.context,i.comment);return r="asterisk"===a?o(r):r,new(n(20).SafeString)(r)}function r(e,t,i,r,l){l=l||{};var u=s.tp(e,t,i,r,l.context,l.comment);return u="asterisk"===a?o(u):u,new(n(20).SafeString)(u)}function o(e){var t=!1;return e.split("").map(function(e){return"<"===e||">"===e?(t="<"===e,e):t||!e.match(/[a-z]/i)?e:"*"}).join("")}var s,a;e.exports={initialize:function(){var e=window.__sc_locale||{};a=window.document.documentElement.getAttribute("lang"),s=s||new(n(1175)),s.setLocale(a),s.extend(e[a]),this.numberHelper=s.number,this.dateTimeHelper=s.dateTime},t:i,tp:r,tPending:i,tpPending:r,getLocale:function(){return a},getCurrentLanguage:function(){return n(1164).experimentalAndPublicLanguages[a]},getD3LocaleData:function(){return s.getLocaleDataFor("d3")},getDatePickerLocaleData:function(){return s.getLocaleDataFor("jquery.datepicker")}}},function(e,t,n){var i=n(20),r=n(523);e.exports=function(){return new i.SafeString(r.handlebarHelper.apply(this,arguments))}},function(e,t,n){(function(t){"use strict";function i(e,t){for(var n=this;n&&!t.isPropagationStopped();)n.trigger(e,t),n=n._parentView}function r(e,t){return n(3).defaults(t,e.prototype.defaults),e===v?t:r(e.__super__.constructor,t)}function o(e,t){var n=this,i=e?"on":"off",r=t.source,o=e?s.call(this,t):null;c(t).forEach(function(e){r[i]("change:"+e,o,n)})}function s(e){return e.options.nestedAttributes?function(t,n,i,r){this._lastEventId!==r&&(this._lastEventId=r,a.call(this,e)&&this.onModelChange(t,n,i))}:this._onModelChange}function a(e){var t=e.source,i=e.options.nestedAttributes,r=t.changed,o=c(e),s=o.some(function(e){return!i[e]&&n(3).has(r,e)});if(s)return!0;var a=t.previousAttributes();return n(3).some(i,function(e,t){return r[t]?a[t]?e.some(function(e){return a[t][e]!==r[t][e]}):!0:!1})}function l(e,t){var n=t.source,i=e?"on":"off";n[i]("add",this.onAdd,this)[i]("remove",this.onRemove,this)[i]("reset",this.onCollectionReset,this)[i]("add remove reset",this.onCollectionChange,this)}function u(e){var t=e.source,n=e.options.isModel,i=n?o:l;i.call(this,!1,e),t.release()}function c(e){var t=h(e.source,e.options.observedAttributes),n=d(e);return t?t.concat(n):n}function d(e){var t=e.options,n=e.source;return h(n,t.requiredAttributes)||[]}function h(e,t){return t&&!Array.isArray(t)?t[e.resource_type]:t}function p(e){var t=e.options.observedAttributes,n=e.source;return t&&t.length&&!n.isPopulated()&&!n.hasDataForView(t)}function f(e,t){var n=void 0,i=void 0,r=h(e,t.requiredAttributes),o=h(e,t.observedAttributes),s=(r||[]).concat(o||[]).reduce(function(e,t){var n="string"==typeof t?t.split("."):[t],i=n[0],r=n[1];n[2];return r&&(e||(e={}),e[i]=[r].concat(e[i]||[])),e},null);return s?(n=g(r),i=g(o)):(n=r,i=o),{requiredAttributes:n,observedAttributes:i,nestedAttributes:s}}function g(e){return e?n(3).uniq(e.map(function(e){return e.split(".")[0]})):null}var m=46,_=47,v=e.exports=n(22).View.extend(n(322),n(1314),{ModelClass:null,requiredAttributes:null,observedAttributes:null,css:null,template:n(3).noop,LoadingView:null,loadingViewArgs:null,loadingTemplate:function(){return""},element2selector:null,_element2selector_cache:null,defaults:{bulkFetch:0},bubbleEvents:null,disposed:!1,subviews:null,_subviews_keys:null,_lastEventId:null,constructorArguments:null,_whenInsertedDefer:null,_deferreds:null,_dataSources:null,initialize:function(e){var t;e=this.options=r(this.constructor,e||{}),this.constructorArguments=n(3).clone(e),e.resource_id&&this.ModelClass&&(this.model=t=this.getModel(e.resource_id,e.resource_type)),this._deferreds=[],this.subviews=[],this._subviews_keys=[],this._dataSources=[],this.resetElementCache(),this._setupBubbleListeners(),this._setup(e),t&&this.model!==t&&t.release(),this.model?this.addDataSource(this.model,{observedAttributes:this.observedAttributes,requiredAttributes:this.requiredAttributes}):this.collection&&this.addDataSource(this.collection)},_setup:function(e){this.setup(e)},setup:n(3).noop,_dispose:function(){if(!this.disposed){for(this._teardown(),this.dispose(),this.disposed=!0;this._deferreds.length;)"number"==typeof this._deferreds[0]?window.clearTimeout(this._deferreds.shift()):this._deferreds[0].reject("viewDisposed");for(this.off(),this.stopListening();this._dataSources.length;)u.call(this,this._dataSources.shift());this.destroyElement(),["el","$el","model","collection","constructorArguments"].forEach(function(e){this[e]&&(this[e]=null)},this)}},destroyElement:function(){this.$el.remove()},dispose:n(3).noop,_teardown:function(){this.disposeSubviews(),this._whenInsertedDefer&&(this._whenInsertedDefer.reject(),this._whenInsertedDefer=null),this.teardown(),this.resetElementCache()},teardown:n(3).noop,disposeSubviews:function(){for(;this.subviews.length;)this.subviews.pop()._dispose();this.subviews=[],this._subviews_keys=[]},getModel:function(e,t,n){var i,r,o,s,a;return s={id:e,resource_type:t},o=this.ModelClass.getClass?this.ModelClass.getClass(s):this.ModelClass,i=o.hashFn(s,n),r=o.instances.get(i),r?r.hold():(a={id:e},t&&(a.resource_type=t),r=new o(a)),r},_setupBubbleListeners:function(){var e,t;for(t in this.bubbleEvents)this.bubbleEvents.hasOwnProperty(t)&&(e=this.bubbleEvents[t],n(3).isFunction(e)||(e=this[e]),this.on(t,e,this))},addDeferred:function(e){var t=this;return"number"==typeof e?this._deferreds.push(e):e.reject&&"pending"===e.state()&&(e.always(function(){var n=t._deferreds.indexOf(e);n>-1&&t._deferreds.splice(n,1)}),this._deferreds.push(e)),e},addTimeout:function(e,t){return this.addDeferred(window.setTimeout(e,t))},addDataSource:function(e,t){var i=e instanceof n(65),r=void 0;i?(t=n(3).assign({isModel:!0},f(e,t||{})),r=o):(t=n(3).assign({isCollection:!0},t),r=l);var s={source:e,options:t};return this._dataSources.push(s),r.call(this,!0,s),e},removeDataSource:function(e){this._dataSources.some(function(t,n){return t.source===e?(u.call(this,t),this._dataSources.splice(n,1),!0):void 0},this)},addSubview:function(e,t){return e._parentView=this,this.subviews.push(e),this._subviews_keys.push(t),t&&(this.subviews[t]=e),e},removeSubview:function(e){for(var t=this.subviews.length;t--;)if(this.subviews[t]===e)return this._subviews_keys[t]&&delete this.subviews[this._subviews_keys[t]],e._parentView=null,this.subviews.splice(t,1),void this._subviews_keys.splice(t,1)},getAncestorSubviews:function(){var e=[];return this.subviews.forEach(function(t){e.push(t),e=e.concat(t.getAncestorSubviews())}),e},getElement:function(e){var t;return this._element2selector_cache[e]===t&&(this._element2selector_cache[e]=this.$(this.element2selector[e])),this._element2selector_cache[e]},resetElementCache:function(){this._element2selector_cache={}},render:function(){var e,t=this,i=this.hasData(),r=this.getTemplate(i);return r&&(e=this._getTemplateData(i),n(252).render(r.bind(this),e,this.el),n(252).subviews(this)),i?!function(){t.renderDecorate();var e=t._dataSources.filter(p);e.length&&t.addTimeout(function(){n(3).invoke(n(3).pluck(e,"source"),"fetch")},0)}():(!r&&this.LoadingView&&this.addSubview(new this.LoadingView(n(3).result(this,"loadingViewArgs")),"loading").render().$el.appendTo(this.el),this.fetchData().fail(this.removeLoader.bind(this))),this},hasData:function(){return!this._dataSources.some(this.missingRequiredData,this)},fetchData:function(){var e,t,i=this,r=this._fetchDeferred;return r&&"pending"===r.state()||(e=this._dataSources.filter(this.missingRequiredData,this),t=e.length,t?(this._fetchDeferred=r=t>1?n(55).settled(e.map(this.fetchDataFromSource,this)):this.fetchDataFromSource(e[0]),r.always(function(){i._fetchDeferred=null})):r=n(55).resolve()),r},missingRequiredData:function(e){var t=e.source,n=e.options;if(n.isModel){var i=d(e);return i.length?!t.hasDataForView(i):!1}return!t.hasDataForView(n)},fetchDataFromSource:function(e){var t=e.source,n=this.options.bulkFetch;return e.options.isCollection&&n?t.bulkFetch(n):t.fetch({attrs:c(e),reset:!0})},renderDecorate:n(3).noop,rerender:function(){this.disposed||(this._teardown(),this.render())},getTemplate:function(e){return e||!this.LoadingView&&!this.loadingTemplate?this.template:this.LoadingView?null:this.loadingTemplate},_getTemplateData:function(e){var t={};return this.model?t=this.getModelData()||t:this.collection&&(t=this.getCollectionData()||t),t._options=n(3).clone(this.options),e&&(t=this.getTemplateData(t)||t),t},getTemplateData:n(3).noop,getCollectionData:function(){return this.collection.toJSON()},getModelData:function(){return this.model.toJSON()},bubble:function(e,t){var r=new(n(1284))(t);return i.call(this,e,r),r},getContextData:function(){return this.bubble("contextrequest").data},removeLoader:function(){var e=this.subviews.loading;e&&(e._dispose(),this.removeSubview(e))},scrollIntoView:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=e.position,r=void 0===i?"auto":i,o=e.force,s=void 0===o?!1:o,a=e.topOffset,l=void 0===a?20:a,u=e.bottomOffset,c=void 0===u?20:u,d=e.internalSelector,h=d?this.$(d):this.$el,p=h.offset(),f=n(55).defer(),g=0;if(!p)return f.reject();var v=t(".g-main-scroll-area").first();v.length||(v=t("#content"),g=m);var y=t(window.document).scrollTop(),b=v.offset().top,w=t(window).height()-_,x=y+b,k=y+w,S=h.height(),T=Math.floor(p.top),E=Math.floor(T+S),A=T>x&&k>E,C=S>w;if(!A||s){var I="top"===r||C||"auto"===r&&x>T?T-b-l-g:E-w+c;n(223).visible()?t("body,html").animate({scrollTop:I},{complete:f.resolve,duration:300}):(t("body,html").prop({scrollTop:I}),f.resolve())}else f.resolve();return f},isEquivalentTo:function(e,t){var i=t||{};return this.constructor===e&&n(3).isEqual(r(e,i),this.constructorArguments)},whenInserted:function(e){return this._whenInsertedDefer||(this._whenInsertedDefer=n(148).whenInserted(this.el,{root:e,timeout:3e4})),this._whenInsertedDefer},_onModelChange:function(e,t,n,i){this._lastEventId!==i&&(this._lastEventId=i,this.onModelChange(e,t,n))},onModelChange:function(){this.shouldViewRerender()&&this.rerender()},onCollectionChange:function(e,t){2===arguments.length&&(t=e),this.disposed||this.trigger("update:collection",t.length)},shouldViewRerender:function(){return!0},onCollectionReset:function(){this.shouldViewRerender()&&this.rerender()},onAdd:n(3).noop,onRemove:n(3).noop})}).call(t,n(1))},function(e,t,n){"use strict";var i=e.exports=new(n(251));n(943).applyTo(i),n(3).each({app_id:1e3*String(Date.now()).substr(-8)+Math.floor(1e3*Math.random()),app_version:null,public_api_host:"https://api.soundcloud.com/",api_v2_host:"https://api-v2.soundcloud.com/",client_application_id:46941,client_id:"02gUJC0hH2ct1EGOcYXQIzRFU91c72Ea",eventlogger_tracking_url:"https://l9bjkkhaycw6f8f4.soundcloud.com",experiments:null,geoip:null,fb_app_id:"19507961798",google_client_id:"984739005367.apps.googleusercontent.com",recaptcha_public_key:"6LeABsUSAAAAABLOEF92U0unfhlGLynYlhvJRFue",adyen_url:"https://test.adyen.com/hpp/cse/js/7814235253800464.shtml",playHistoryLength:50,maxComments:200,me:null,mixi_api_key:"1403ed11563185e9cff6cfeedf4f2ecf77fa459e",notifications:null,notificationsUri:"wss://pushers.soundcloud.com/",oauth_token:null,preferFlashAudio:!0,promotedContentServer:"https://promoted.soundcloud.com/promo",promotedContentAccessToken:"web",restoreToSound:null,rollouts:null,router:null,songkick_api_key:"ZWsLr2h7FF5sHG54",facebook_api_key:"a7309b9a9a85963579f7e8bcffd36d2a",versionUpdateInterval:36e5,visualsQueueHost:"https://visuals-queue.soundcloud.com/visuals",wisHost:"https://wis.sndcdn.com",systemUserId:193},function(e,t){i.set(t,e,{silent:!0})}),i.finalize()},function(e,t,n){"use strict";var i=n(1).Deferred().resolve(),r=n(1).Deferred().reject(),o=e.exports={defer:function(){return n(1).Deferred()},promise:function(e){var t=o.defer(),n=t.promise();return e.call(n,t.resolve,t.reject),n},deferFrom:function(e){var t=o.defer();return e.then(t.resolve,t.reject),t},settled:function(e){if(!e||!e.length)return i;var t=function(){var t=n(1).Deferred(),i=e.length,r=Array(i),o=!1,s=function(){o=!0};return e.forEach(function(e,n){e.fail(s).always(function(){for(var e=arguments.length,s=Array(e),a=0;e>a;a++)s[a]=arguments[a];r[n]=s,0===--i&&(o?t.reject.apply(t,r):t.resolve.apply(t,r))})}),{v:t}}();return"object"==typeof t?t.v:void 0},all:function(e){return n(1).when.apply(n(1),e)},resolve:function(e){return void 0===e?i:n(1).Deferred().resolve(e)},reject:function(e){return void 0===e?r:n(1).Deferred().reject(e)},value:function(e){return i.then(function(){return e})},promisify:function(e){return function(){for(var t=arguments.length,i=Array(t),r=0;t>r;r++)i[r]=arguments[r];var o=n(1).Deferred();return i.push(function(e,t){e?o.reject(e):o.resolve(t)}),e.apply(void 0,i),o.promise()}},call:function(e){var t=n(1).Deferred();try{for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;i>o;o++)r[o-1]=arguments[o];t.resolve(e.apply(void 0,r))}catch(s){t.reject(s)}return t.promise()},mapEither:function(e,t){return t.then(e,e)},sequential:function(e){return e.reduce(function(e,t){return e.then(t,function(){return t().then(o.reject)})},i)},delay:function(e){var t=o.defer();return window.setTimeout(function(){t.resolve()},e),t}}},function(e,t,n){"use strict";var i,r,o=new(n(111))("broadcast"),s=n(54).get("app_id");o.on("broadcast",function(e){var t=e.current;t&&t.appId!==s&&r.call(a,t)});var a=e.exports=n(3).assign({},n(22).Events,{broadcast:function(e,t){var n,s;return"string"==typeof e?(n=[].slice.call(arguments,1),t=e,e={}):n=[].slice.call(arguments,2),s=i(t,n),o.set("broadcast",s),e.excludeThis||r.call(this,s),this}});i=function(e,t){return{type:e,timestamp:Date.now(),appId:s,args:t}},r=function(e){this.trigger.apply(this,["broadcast:"+e.type].concat(e.args||[]))}},function(e,t,n){var i=n(61);e.exports=function(){var e=Array.prototype.slice.call(arguments,0,-1);return i.getRoute.apply(i,e)}},function(e,t,n){"use strict";function i(e){var t=n(54).get("me"),i=e&&e.args;return i&&t.id&&t.hasPermalink(i.userPermalink)}function r(){return n(54).get("me").id||null}function o(e,t){return t=t||"subpage",e&&e[t]?e[t]:"main"}function s(e,t){var i=n(62).getQueryParam("in",t),r=["sounds"];return i?r.push(["sets","sets/track_page"]):e.playlistPermalink?r.push(["sets","sets/"+o(e)]):r.push(["sounds","sounds/"+o(e)]),r}function a(e){var t=n(54).get("me").attributes;return t.permalink===e.userPermalink?["you",["you","you/"+o(e)]]:["users",["users","users/"+o(e)]]}function l(e){var t=e.user;return e.type="user",e.userPermalink=t.get("permalink"),e.userId=t.id,e}function u(e){var t=e.audible,n="sound"===t.resource_type;return e.type=t.resource_type,e.userId=t.get("user_id"),n?e.soundId=t.id:(e.playlistId=t.id,e.playlistPermalink=t.get("permalink")),e}function c(e){return e&&e.attribution?n(3).extend({},e,{attribution:n(3).pick(e.attribution,"queryUrn","position")}):e}function d(e,t,n){return t||(n&&"pause"===e?"pause":null)}function h(e,t){return t&&"promoted"===t.campaign&&(e.ad_urn=t.ad_urn,e.monetization_type="promoted",e.promoted_by=t.promoted_by_urn),e}function p(e,t){var i,r,c,d,h,p,f,g,m;switch(e){case"tracking:search":x.trackPageView("search",["search","search/"+t.category],{queryUrn:t.queryUrn});break;case"tracking:charts":x.trackPageView("charts",["charts"],{queryUrn:t.queryUrn});break;case"tracking:userLayout":t=l(t),p=a(t),x.trackPageView(p[0],p[1]);break;case"tracking:listenLayout":t=u(t),f=s(t),x.trackPageView(f[0],f[1]);break;case"tracking:front:genre":t.click_category="frontpage",t.click_name="genre_grid",t.click_target=t.genreUrn,x.trackClick(null,t);break;case"tracking:stats":x.trackStats(t);break;case"layout:change":switch(n(1328).include(),i=t.args,t.layoutName){case"stream":case"activity":x.trackPageView("stream",["stream","stream/"+("stream"===t.layoutName?"main":t.layoutName)]);break;case"collection":x.trackPageView("collection",["collection",i.subpage]);break;case"user":case"user-network":break;case"listen":case"listen-network":break;case"tags":x.trackPageView("tags",["tags","tags/main"]);break;case"search":break;case"charts":break;case"premium":!i||i.secondary&&"gifts"!==i.secondary||(g=n(62).getQueryParam("ref"),x.trackPageView("premium",["premium",n(62).stringify({path:["premium","main",i.secondary,g]})]));break;case"explore":x.trackPageView("explore",["explore","explore/"+o(i,"category")]);break;case"upload":x.trackPageView("upload",["upload","upload/main"]);break;case"people":m=o(i,"tab"),x.trackPageView("people_"+m,["people","people/"+m]);break;case"home":case"front":x.trackPageView("homepage",["home","home/main"]);break;case"inbox":x.trackPageView("messages",["messages",o(i,"conversationId")]);break;case"stats":case"track-stats":x.trackPageView("stats",["default",window.location]);break;case"track-manager":x.trackPageView("track-manager",["track-manager","main"]);break;case"error":x.trackPageView("error",["error"]);break;case"logout":x.trackPageView("logout");break;case"static-page":x.trackPageView("static",["static",o(i,"pageName")]);break;case"mobile":x.trackPageView("static",["static","mobile/main"]);break;case"mobile-pulse":x.trackPageView("static",["static","mobile-pulse"]);break;default:x.trackPageView("default",["default",window.location])}break;case"exception":c=t.get("streamInfo"),c&&(d=t.get("errorCode"),h={protocol:c.protocol||"undefined-protocol",browser:n(501).getBrowser(),flash:n(501).getFlashPlugin(),os:n(501).getOperatingSystem(),bitrate:c.bitrate||"undefined-bitrate",format:c.extension||"undefined-extension",url:c.url||"undefined-url"},d&&(h.error_code=d),x.trackAudioError(h));break;case"premium:pageView":r=arguments[1],x.trackPageView("premium",["premium",r]);break;case"tracking:expandStats":x.trackStatsClick("expand_stats_view");break;case"tracking:appLoad":x.trackAppLoad(t)}}function f(e){var t=e.type,i=e.sound,r=e.ad,o=e.context,s=e.checkpointInterval,a=e.external_media,l=e.userInitiated,u=e.pause_reason,p=e.isRepeating,f=e.currentMetadata,g=["duration","monetization_model","policy"],m=["user_id"],_=i.playlist,v=n(54).get("router").getLayoutInfo(),y=v&&v.tracking||{},b=f.sourceInfo,w=f.reposterUrn,x=f.queryPosition,k=f.promotedInfo,S=n(3).defaults({},o&&o.attribution,{position:x,queryUrn:b.queryUrn}),T=Math.round(i.currentTime()),E=i.attrExists(g),A=i.attrExists(m);n(171).trackAudioEvent(n(55).all([!E&&i.fetch(),!A&&i.fetch()].filter(Boolean)).then(function(){var e=c({action:"playStart"===t?"play":t,attribution:S,checkpointInterval:s,external_media:a,id:i.id,in_playlist:_?_.getUrn():null,monetization_model:i.get("monetization_model"),page_name:y.pageName,page_urn:y.pageUrn,pause_reason:d(t,u,l),playheadPosition:T,playlist_position:_?_.getSoundIndex(i):null,policy:i.get("policy"),protocol:i.audio&&i.audio.streamInfo&&i.audio.streamInfo.protocol,reposted_by:w,source:b.type||null,sourceVersion:b.version||null,track_length:i.getMediaDuration(),trackOwnerId:i.get("user_id"),trigger:l?"manual":p?"repeat":"auto"});return k?(h(e,k),"playStart"===t&&n(80).trackEvent("play",k)):r&&(e.ad_urn=r.get("audio").ad_urn,e.monetization_type="audio_ad",e.monetized_object=r.getMonetizableTrack().getUrn(),e.policy=null),e}))}function g(e,t){t&&t.click_category?_(t):m(e,t)}function m(e,t){var o=n(54).get("router").getLayoutInfo(),s=r(),a=n(3).compact(e),l=o&&o.layoutName||"user",u=o&&o.tracking||{},d=u.pageName,h=u.pageUrn,p=i(o)?"you":l,f=w[p],g=n(3).defaults({page_name:d,page_urn:h},c(t||{}));a.length<1&&g.page_name&&(a=g.page_name.split(":")),n(171).trackV0Click(f,a,s,g)}function _(e){var t=n(54).get("router").getLayoutInfo(),i=t&&t.tracking||{},r=i.pageName,o=i.pageUrn,s=n(3).defaults({page_name:r,page_urn:o},c(e||{})),a=s.context&&s.context.scope&&s.context.scope.join(":");n(171).trackClick("1.16.0",n(3).extend({page_context:a},n(3).omit(s,"context")))}function v(e){var t=n(54).get("router").getLayoutInfo(),i=t&&t.tracking||{},o=r(),s=e.urn,a=e.originView;e.page_name=i.pageName,e.page_urn=i.pageUrn,e.useAudioFinishHandler?(b[a]||(b[a]={}),b[a][s]||!function(){var t=function(i){var r=parseInt(e.urn.split(":").pop(),10),o=i.sound.id;r===o&&(delete b[a][s],n(56).off("audio:finish",t))};b[a][s]=!0,n(56).on("audio:finish",t),n(171).trackImpression(o,e)}()):(e.context&&"promoted"===e.context.campaign&&(e.ad_urn=e.context.ad_urn,e.monetization_type="promoted",e.impression_object=e.context.urn,e.promoted_by=e.context.promoted_by_urn),n(171).trackImpression(o,e))}function y(e,t){return function(i){return t(n(3).defaults({},e,i))}}var b={},w={listen:"sounds","listen-network":"sounds",activity:"stream",stream:"stream",user:"users","user-network":"users",tags:"tags",search:"search",you:"you",explore:"explore",home:"homepage",front:"homepage",premium:"premium",people:"people",upload:"upload",inbox:"messages",onboarding:"onboarding","track-manager":"track-manager",collection:"collection","personal-recommended":"personal-recommended",history:"history",charts:"charts",station:"station"},x=e.exports={initialize:function(e){n(171).initialize(),k(e,!0)},dispose:function(e){n(171).dispose(),k(e,!1)},trackClick:g,trackV1Click:_,trackV0Click:m,trackV0ClickWithPromotedParams:function(e,t){m(e,h(t))},trackAuthEvent:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.target,i=void 0===n?"":n,r=t.object,o=void 0===r?"":r;_({click_category:"authentication",click_name:e,click_target:i,click_object:o})},trackAuthFunnel:function(e){v({impression_category:"auth_funnel",impression_object:e})},trackFrontPageClick:y({click_category:"frontpage"},_),trackShareClick:y({click_name:"share"},function(e){return m(null,e)}),trackUploadFunnel:function(e,t){m(["upload_funnel"].concat(e),t)},trackClickThrough:function(e){var t=e.context;m(null,h(n(3).defaults({click_name:"item_navigation",click_object:t.urn,click_target:e.target||t.urn},e)))},trackPlayStart:f,trackPause:f,trackPageView:function(e,t,i){var o=n(54).get("router").getLayoutInfo(),s=o&&o.tracking||{},a=n(3).compact(t||[]),l=r(),u={};u.page_name=s.pageName,u.page_urn=s.pageUrn,u.locale=n(51).getLocale(),i&&i.queryUrn&&(u.query_urn=i.queryUrn),a.length<1&&u.page_name&&(a=u.page_name.split(":")),n(171).trackPageView(e,a,l,u)},trackAppLoad:function(e){var t=e.latency,o=n(54).get("router").getLayoutInfo(),s=o&&o.layoutName||"user",a=i(o)?"you":s,l=w[a],u=r();n(171).trackAppLoad(l,u,t)},trackImpression:v,trackStats:function(e){n(171).trackStats(r(),e)},trackStatsClick:function(e){var t="stats",i=r(),o=[e],s=n(54).get("router").getLayoutInfo().layoutName,a={stats:"main","track-stats":"track"},l={context:{scope:["stats",a[s]]}};n(171).trackV0Click(t,o,i,l)},trackAudioError:function(e){n(171).trackAudioError(e)}},k=function(){var e=n(3).map({".header__logoLink":["header","logo"],".header__mainMenu-home":["header","home"],".header__mainMenu-stream":["header","stream"],".header__mainMenu-explore":["header","explore"],'.moreMenu__link[href$="/community-guidelines"]':["header","community_guidelines"],'.moreMenu__link[href$="/terms-of-use"]':["header","terms_of_use"],'.moreMenu__link[href$="/creators"]':["header","creators"],'.moreMenu__link[href$="/pages/privacy"]':["header","privacy_policy"],'.moreMenu__link[href$="/pages/copyright"]':["header","copyright_information"],'.moreMenu__link[href$="/imprint"]':["header","company_information"],'.moreMenu__link[href$="/pages/contact"]':["header","about_us"],'.moreMenu__link[href="http://blog.soundcloud.com"]':["header","blog"],'.moreMenu__link[href="http://soundcloud.com/jobs"]':["header","jobs"],'.moreMenu__link[href="http://developers.soundcloud.com"]':["header","developers"],'.moreMenu__link[href="http://help.soundcloud.com"]':["header","help"],".moreMenu__keyboard":["header","keyboard_shortcuts"],".profileMenu__profile":["header","you","profile"],".profileMenu__likes":["header","you","likes"],".profileMenu__following":["header","you","following"],".profileMenu__sets":["header","you","sets"],".profileMenu__stats":["header","you","stats"],".profileMenu__friends":["header","you","who_to_follow"],".profileMenu__settings":["header","you","settings"],".profileMenu__logout":["header","you","logout"],".playbackTitle":["play_controls","title"],".playControls .playControl:not(.playing)":["play_controls","pause"],".playControls .playControl.playing":["play_controls","play"],".playControls .skipControl__previous":["play_controls","skip_back"],".playControls .skipControl__next":["play_controls","skip_forward"],".header__inner a.outgoing-messages":["outgoing","messages"],".header__inner a.outgoing-record":["outgoing","record"],".chooser__record":["outgoing","record"],".profileMenu a.outgoing-settings":["outgoing","settings"],".profileMenu a.outgoing-stats":["outgoing","you_stats"],".statsModule a.outgoing-stats-module":["outgoing","all_stats"],".userInfo a.sc-button-message":["outgoing","new_message"],".whoToFollowModule a.refresh-wtf":["outgoing","who_to_follow_refresh"],".soundActions__edit":["edit","main"],".latestActivities__viewAll":["header","activity","view_all"],".headerMessages__viewAll":["header","messages","view_all"],".listenContent__inner .listenContent__parentLink a":["sets","trackview","set_button"],".listenContent__inner a.listenContent__prevLink":["sets","trackview","previous_track"],".listenContent__inner a.listenContent__nextLink":["sets","trackview","next_track"],".explore__bucket .carousel__next":["explore","skip_next"],".explore__bucket .carousel__prev":["explore","skip_prev"],".signupButton":["signup","start"],".loginButton":["login","start"],".signupTeaser .signupButton":["signup-teaser","signup"]},function(e,t){return["click",t,function(t){x.trackClick(e,t)}]});return function(t,i){var r=i?"on":"off";n(56)[r]("all",p),e.forEach(function(e){this[r].apply(this,e)},t)}}()},,function(e,t,n){(function(t){"use strict";function i(e,t){return e.get?e.get(t):e[t]}function r(e,t){this.has(e)&&this.set(e,Math.max(0,this.get(e)+(t?1:-1)))}function o(e,t){r.call(this,e.isPrivate()?"private_tracks_count":"track_count",t)}function s(e){n(3).each({follow:e.onFollow,like:e.onLikesChanged,repost:e.onReposted,comment:e.onComment,destroy:e.onDeleteResource,createPlaylist:e.onPlaylistCreate},function(t,i){e.listenTo(n(73),i+":origin:user:"+e.id,t)})}function a(e){r.call(this,"followers_count",e.state)}function l(){return{product:{id:p,name:""},recurring:!1}}function u(){return{product:{id:g,name:"Free"},recurring:!1}}function c(){var e=this.isCPPEnabled()&&this.get("cpp").rightsholder_links;if(!e||!e.length)return!0;var t=e[0].rightsholder_urn;return n(3).every(e,{rightsholder_urn:t})}function d(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){return t.some(this.get,this)}}var h=n(69).productIds,p=h.CONSUMER_SUBSCRIPTION_FREE,f=h.CONSUMER_SUBSCRIPTION_HIGH_TIER,g=h.CREATOR_SUBSCRIPTION_FREE,m=[{emitter:n(73),event:"follow",getInstance:function(e,t){var n=t.target;return e.id===n},handler:a}];e.exports=n(65).extend(n(939),n(940),n(941).withOptions({types:n(1163).user}),n(248).withOptions({attr:"username"}),n(247).withOptions({
read:"avatar_url",write:"avatar_data"}),n(507),n(194).withOptions({events:m}),{resource_type:"user",urnPrefix:"soundcloud:users",saveFormat:"json",saveWithWrapper:!1,_connections:null,setup:function(){var e=this;this.has("subscriptions")&&!this.has("creator_subscriptions")&&this.set("creator_subscriptions",this.get("subscriptions")),this.options.isMe&&(this.id?s(this):this.once("change:id",function(){s(e)}))},baseUrl:function(){var e=this.id;return e?this.getEndpointUrl("user",{id:e}):"you"===this.get("permalink")?this.getEndpointUrl("me"):void 0},ownerUrl:function(){return this.getEndpointUrl("userAsOwner",{urn:this.getUrn()})},getImageSaveUrl:function(){return this.getEndpointUrl("userImageUpdate",{id:this.id})},ownerAttributes:["default_tracks_feedable","cpp","downloads_disabled","hidden_tracks_count","blocked_tracks_count","default_license","primary_email","primary_email_confirmed","date_of_birth","gender"],parse:function(e){return e.primary_email_confirmed=e.primary_email_confirmed!==!1,e.subscriptions&&!e.creator_subscriptions&&(e.creator_subscriptions=e.subscriptions),"undefined"==typeof e.country_code&&"undefined"!=typeof e.country&&(e.country_code=n(92).countryToCode(e.country)),e},onLikesChanged:function(e){r.call(this,"likes_count",e.state)},onFollow:function(e){r.call(this,"followings_count",e.state)},onReposted:function(e){r.call(this,"reposts_count",e.state)},onComment:function(e){e.state&&r.call(this,"comments_count",!0)},onDeleteResource:function(e){var t=e.targetModel;switch(t.resource_type){case"sound":this.adjustUploadSeconds(t),this.owns("sound",t)&&o.call(this,t,!1);break;case"comment":this.owns("comment",t)&&r.call(this,"comments_count",!1)}},onPlaylistCreate:function(e){var t="private"===e.object.get("sharing")?"private_playlists_count":"playlist_count";this.set(t,(this.get(t)||0)+1)},owns:function(e,t){void 0===t&&(t=e,e=t.resource_type);var n=this.id;if(!n)return!1;switch(e){case"comment":case"playlist":case"sound":return n===i(t,"user_id");case"user":return n===i(t,"id");case"sound-upload-edit":case"playlist-upload":case"playlist-edit":case"profile-settings":return!0}return!1},canDownload:function(e){return"sound"===e.resource_type&&e.get("downloadable")&&e.get("has_downloads_left")!==!1},getCountry:function(){var e=this.get("country_code");return e?n(92).codeToCountry(e):this.get("country")},getCountryCode:function(){var e=this.get("country");return e?n(92).countryToCode(e):this.get("country_code")},getPlan:function(){return this.getCreatorSubscription().product.id},getConsumerPlan:function(){return this.getConsumerSubscription().product.id},getPlanName:function(){return this.getCreatorSubscription().product.name},isCPPEnabled:function(){return!!this.get("cpp")},canRequestISRCGeneration:function(){return this.getCPPOption("indie",!1)===!0&&this.hasMonetization()===!0},canBulkUploadAsPlaylist:function(){return!this.isCPPEnabled()||c.call(this)},hasOnlyOneRightsholderLink:function(){return c.call(this)},getCPPOption:function(e,t){var n=this.get("cpp");return null!=(n&&n.config&&n.config[e])?n.config[e]:t},canEditMonetization:function(){return this.getCPPOption("can_edit_monetization",!0)},canEditDownloadable:function(){return this.getCPPOption("can_edit_downloadable",!0)},canEditRssEnabled:function(){return this.getCPPOption("can_edit_rss_enabled",!0)},hasGeoblocking:function(){return this.isCPPEnabled()||n(54).get("rollouts").get("geo_blocking_settings")},hasMonetization:function(){return this.getCPPOption("has_monetization_form")},hasFullScheduling:function(){return this.isCPPEnabled()||n(54).get("rollouts").get("scheduled_publishings")},hasToPublicScheduling:function(){return this.isCPPEnabled()||n(54).get("rollouts").get("scheduled_publishings_only_sunrise_to_public")},hasAnyScheduling:function(){return this.hasFullScheduling()||this.hasToPublicScheduling()},hasMonthlyPlan:function(){return this.getCreatorSubscription().recurring},hasCreatorSubHug:function(){var e=this.get("creator_subscription");return!(!e||!e.hug)},isPremium:function(){var e=this.getPlan();return e&&e!==g},hasHighTier:function(){return this.getConsumerPlan()===f},hasProPlanLevel:function(){return 1===this.getPerk("planLevel")},getConsumerSubscription:function(){return this.get("consumer_subscription")||l()},getCreatorSubscription:function(){var e=this.get("creator_subscription"),t=this.get("creator_subscriptions");return e?e:t&&t[0]?t[0]:u()},getPerk:function(e){return n(1141).get(this.getPlan(),this.getConsumerPlan(),e)},getPermalink:function(){return this.get("permalink_url").replace(/^https?:.+?\w\//,"/")},isMe:function(){return this===n(54).get("me")&&!!this.id},isSystemUser:function(){return this.id===n(54).get("systemUserId")},hasConnection:function(e){var i=this,r=n(55).defer(),o=this.isMe();return this._connections||!o?r.resolve(o&&this._connections.indexOf(e)>-1):t.ajax({url:this.getEndpointUrl("meConnections"),dataType:"json"}).done(function(t){i._connections=t.map(function(e){return e.type}),r.resolve(i._connections.indexOf(e)>-1)}).fail(r.resolve.bind(r,!1)),r},getNumTracks:function(e){var t=this.get("track_count")||0,n=this.get("private_tracks_count")||0,i=this.get("blocked_tracks_count")||0,r=this.get("hidden_tracks_count")||0;switch(e){case"public":return t;case"private":return n;case"hidden":return r;case"blocked":return i;default:return t+n+r+i}},getNumPlaylists:function(e){var t=this.get("playlist_count")||0,n=this.get("private_playlists_count")||0;switch(e){case"public":return t;case"private":return n;default:return t+n}},hasPlaylists:d("playlist_count","private_playlists_count"),hasLikes:d("likes_count","public_favorites_count"),hasFollowings:d("followings_count"),hasPublicSounds:d("track_count","playlist_count","reposts_count"),hasTracks:d("track_count","private_tracks_count"),hasOwnSounds:d("track_count","private_tracks_count","playlist_count","private_playlists_count"),hasSounds:d("track_count","private_tracks_count","playlist_count","private_playlists_count","reposts_count"),adjustUploadSeconds:function(e,t){var n,i,r,o=e.get("duration");o&&(n=Math.round(o/1e3)*(t?-1:1),i=this.getUploadSecondsLeft()+n,r=this.getUploadSecondsUsed()-n,this.setUploadSeconds(i,r))},setUploadSeconds:function(e,t){var i=n(3).clone(this.get("quota"));i&&(i.upload_seconds_used=t,i.unlimited_upload_quota||(i.upload_seconds_left=e),this.set("quota",i))},getUploadSecondsLeft:function(){var e=this.get("quota");return e?e.unlimited_upload_quota?1/0:e.upload_seconds_left:void 0},getUploadSecondsUsed:function(){var e=this.get("quota");return e?e.upload_seconds_used:0},getUploadSeconds:function(){var e=this.getUploadSecondsLeft();return e===1/0?e:e+this.getUploadSecondsUsed()},hasUnlimitedUpload:function(){return this.getUploadSecondsLeft()===1/0},getUploadMinutesLeft:function(){var e=this.getUploadSecondsLeft();return(0>e?Math.floor:Math.ceil)(e/60)},getUploadMinutesUsed:function(){return Math.round(this.getUploadSecondsUsed()/60)},isOverQuota:function(){return this.getUploadSecondsLeft()<0},getRSSFeedUrl:function(){return"http://feeds.soundcloud.com/users/"+this.getUrn()+"/sounds.rss"}},{normalize:function(e){return e.avatar_url&&(e.avatar_url=e.avatar_url.replace("http:","https:").replace(/\?.*/,"")),e},resolve:function(e){return"you"===e?n(55).resolve(n(54).get("me")):n(65)._resolve(this,e,function(t){return t.hasPermalink(e)})}})}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function i(e,i){var r,o;this.currentLayout&&(e!==this.currentLayout&&this.currentLayout.dispose(),n(56).trigger("layout:beforeChange",this._currentLayoutInfo)),this.currentLayout=e,o=this._currentLayoutInfo=e.getChangeEventData(i),r=t("#content"),e.render(),r.children()[0]!==e.el&&r.empty()[0].appendChild(e.el),n(56).trigger("layout:change",o)}function r(e){return e._navigationBlocks.filter(o).map(function(e){return e.callback}).filter(n(3).identity).reduce(function(e,t){return t(e)!==!1&&e},!0)}function o(e){return!e.condition||e.condition()}function s(){return n(98).pushState?window.location.href:"https://"+window.location.hostname+"/"+window.location.hash.replace(/^[#\/]/,"")}function a(e,t){("popstate"!==t.type||r(e))&&n(22).History.prototype.checkUrl.call(this,t)}var l,u,c,d=300,h=e.exports=n(22).Router.extend({currentLayout:null,_currentLayoutInfo:null,_navigationBlocks:null,_navCount:0,initialize:function(){this._navigationBlocks=[],n(3).bindAll(this,"onBeforeUnload","detachCurrentLayout"),n(22).history.checkUrl=a.bind(n(22).history,this)},setRoutes:function(e,t){var n=this;l=e,u=t,c=l.slice(0).reverse(),e.forEach(function(e){var t=e.route,i=e.name,r=e.handler;n.route(t,i,r)})},setLoader:function(e){this.loader=e},reload:function(){this.match(window.location.href.replace(/^https?:\/\/[^\/]+\//,""))},addNavigationBlock:function(e,i,r){var o,s=n(3).uniqueId();return o=this._navigationBlocks.unshift({id:s,exitSiteMessage:e,callback:i,condition:r}),1===o&&t(window).on("beforeunload",this.onBeforeUnload),s},removeNavigationBlock:function(e){var n,i=this._navigationBlocks;for(n=i.length;n--;)if(i[n].id===e){i.splice(n,1);break}i.length||t(window).off("beforeunload",this.onBeforeUnload)},isNavigationBlocked:function(){return this._navigationBlocks.some(o)},onBeforeUnload:function(){var e=n(3).find(this._navigationBlocks,o);return e&&e.exitSiteMessage},navigateToRoute:function(e,t,n){var i,r=[e];t&&t.length&&(r=r.concat(t)),i=h.getRoute.apply(h,r),this.navigate(i,n)},navigate:function(e,t){r(this)&&(t&&t.hard?window.location.href=e:n(22).Router.prototype.navigate.call(this,e,t))},match:function(e){return n(22).history.loadUrl(e)},getUrlInfo:function(e){var t,i,r,o=n(62).parse(e);return o.path?(t=o.path.substring(1),r=n(3).find(c,function(e){return e.route.test(t)}),r&&(i={name:r.name,params:this._extractParameters(r.route,t)}),i):void 0},getLocation:function(){return s()},apply:function(e,t){var r,o,s=this,a="layouts/"+e;t=t||{},++this._navCount,this.setupDeferred&&this.setupDeferred.reject(),this.setupDeferred=o=n(55).defer(),r=window.setTimeout(this.detachCurrentLayout,d),this.loader.loadLayout(a).always(window.clearTimeout.bind(window,r)).done(function(n){if("rejected"!==o.state()){var r=s.currentLayout instanceof n?s.currentLayout:new n;r.setArgs(t),s.setupDeferred=r.setup(t).done(i.bind(s,r,e,t))}})},notImplemented:function(e){var t=s();e&&(t=e(t)),window.open(t),window.history.go(-1)},isLoggedIn:function(){return n(63).isLoggedIn()},getRolloutValue:function(e){return n(54).get("rollouts").get(e)},getExperimentValue:function(e,t){return n(54).get("experiments").get(e,t)},getCurrentUserPermalink:function(){return n(54).get("me").get("permalink")},getQueryParams:function(e){return n(62).getQueryParams(e)},getQueryString:function(e){return n(62).getQueryString(e)},getLayoutInfo:function(){return this._currentLayoutInfo},getRouteInfo:function(e){return n(3).find(l,function(t){return t.name===e})},getNavCount:function(){return this._navCount},unauthenticated:function(){n(58).trackAuthEvent(n(103).initiate,{target:"implicit:navigate"});var e=n(62).parse(window.location.href).relative;this.navigateToRoute("signin",e,{replace:!0,trigger:!0})},detachCurrentLayout:function(){this.currentLayout&&this.currentLayout.$el.detach()}},{getRoute:function(e){var t=u[e];return t?t.apply(this,[].slice.call(arguments,1)):void 0},includeSecretTokenForSound:function(e){var t=n(54).get("me");return!(!e.secret_token||t.owns("sound",e))},includeSecretTokenForPlaylist:function(e){var t=n(54).get("me");return!(!e.secret_token||t.owns("playlist",e))},removeFragmentParams:function(){if(n(98).pushState){for(var e=window.location.href,t=e,i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];t=r.length?r.reduce(function(e,t){return n(62).removeFragmentParam(t,e)},e):n(62).modify(e,{fragment:null}),t!==e&&window.history.replaceState(null,null,t)}}})}).call(t,n(1))},function(e,t,n){"use strict";var i;i=n(98).pushState?n(3).identity:function(e){return e&&e.replace(/#/,"")};var r=e.exports=n(3).defaults({parse:function(e,t){return e=i(e),n(470).parse(i(e),t)},getQueryParam:function(e,t){return r.getQueryParams(t)[e]},getFragmentParam:function(e){return n(98).pushState?r.parseQueryString(window.location.hash.substring(1))[e]:void 0},removeFragmentParam:function(e,t){return t=t||window.location.href,t.replace(new RegExp("#(?:(.+)&?)?"+n(202).regexpEscape(e)+"(?:=[^&]*(?:&|$))?"),"#$1").replace(/#$/,"")},getQueryParams:function(){var e,t;return function(i){var o=i||(n(98).pushState?window.location.search:window.location.hash.replace(/^[^?]*/,""));return o!==e&&(e=o,t=r.parseQueryString(o)),t}}(),getQueryString:function(e){return e?e.replace(/^[^?#]*(\?[^#]*)?(?:#.*)?$/,"$1"):n(98).pushState?window.location.search:window.location.hash.replace(/^[^?]*/,"")},getWindowOrigin:function(){var e=window.location,t=e.protocol,n=e.hostname,i=e.port;return t+"//"+n+(i?":"+i:"")}},n(470))},function(e,t,n){(function(t){"use strict";function i(){return v=v||n(192).get(h)}function r(){return t.ajax({url:"https://soundcloud.com/logout",type:"DELETE",dataType:"text"}).promise()}function o(){return["auth_token","p","v"].some(function(e){return void 0!==n(192).get(e)})}function s(e){n(192).set(n(3).assign({},p,{value:e,expirationInDays:365}))}function a(){var e=n(54).get("me"),t=n(55).defer();return e.lastFetchTime?t.resolve():n(56).once("connect:hasUserData",function(){t.resolve()}),t}var l=n(58).trackV0Click,u=n(58).trackAuthEvent,c=void 0,d=void 0,h="oauth_token",p={name:h,secure:!0,domainStrict:!0},f="authentication:tokenChange",g="non-expiring fast-connect purchase upload",m="https://soundcloud.com/connect/token",_=new(n(111))("anonymous-user"),v=null;n(56).on("broadcast:"+f,function(e){e?(v=e,n(56).trigger("connect:login","login")):(n(56).trigger("connect:logout",{isOriginator:!1}),l(["header","you_log_out"]))}),(v=i())&&(n(192).unset(n(3).assign({},p,{domainStrict:!1})),s(v));var y=e.exports=n(3).assign({},n(22).Events,{_redirectAfterSignupRoute:null,setAuthToken:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t.excludeThis,r=void 0===i?!0:i;n(56).broadcast({excludeThis:r},f,e),s(e)},getAuthToken:i,isLoggedIn:function(){return!!this.getAuthToken()},setSigninView:function(e){c=e},login:function(e){e=e||{};var t=e.redirectRoute;if(null!==t&&(this._redirectAfterSignupRoute=t),e.implicitAction?u(n(103).initiate,{target:"implicit:"+e.implicitAction,object:e.implicitTarget}):u(n(103).initiate,{target:"explicit:"+(e.signup?"create_account":"sign_in")}),!d)if(d=n(55).defer().fail(function(){d=null}),this.isLoggedIn())d.resolve();else if(e.facebook&&e.fb_token)n(227).signinWithFacebook(e.fb_token).then(function(e){var t=e.session&&e.session.access_token;t&&(y.setAuthToken(t,{excludeThis:!1}),d.resolve())});else{var i={onToken:function(e){y.setAuthToken(e,{excludeThis:!1})},onSigninFinish:function(e){d&&d.resolve(),e&&y.hasSignedUp()}};c.openSigninModal({signinArgs:i,onCancel:function(){d.reject()}})}return d},hasSignedUp:function(){var e=this._redirectAfterSignupRoute;e?n(54).get("router").navigateToRoute(e,null,{trigger:!0}):e!==!1&&a().then(function(){return n(56).trigger("onboarding:start")}),a().then(function(){return n(56).trigger("signup:successful")}),n(1327).include(),this._redirectAfterSignupRoute=null},loginWithFacebook:function(e){return y.login({facebook:!0,fb_token:e})},logout:function(){return r().always(function(){y.clearUserData(),u(n(103).sign_out),n(56).trigger("connect:logout",{isOriginator:!0})})},clearUserData:function(){n(192).unset(p),n(56).broadcast({excludeThis:!0},f,"")},currentUserId:function(){return n(54).get("me").id},getUserIdentifier:function(){var e;return e=y.isLoggedIn()?y.currentUserId():y.getAnonymousUserIdentifier()},getAnonymousUserIdentifier:function(){for(var e=_.get("id");!e||1e3>e;)e=Math.floor(1e9*Math.random()),_.set("id",e);return e},loginWithCookies:function(){var e,i=n(55).defer();return o()?(e=n(62).modify(m,{query:{client_id:n(54).get("client_id"),scope:g}}),t.ajax(e,{type:"POST",dataType:"json",contentType:"application/json"}).done(function(e){y.setAuthToken(e.access_token),i.resolve()}).fail(i.reject)):i.reject(),i},loginToClassicSoundCloud:function(){o()||t.ajax({type:"post",url:"https://soundcloud.com/session",data:{access_token:y.getAuthToken(),format:"json"}})}})}).call(t,n(1))},function(e,t,n){"use strict";function i(){this._visuals||(this._visuals=new(n(880))(null,{resource_id:this.id})),this._visuals.reset(this.get("visuals"),{parse:!0}),this._visuals.lastFetchTime=Date.now()}function r(){var e=!this.isBlocked()&&this._streamsExist;e!==this._playable&&(this._playable=e,this.trigger("change:playable",e))}function o(e){return e&&(e.currentMetadata=n(71).getCurrentMetadata()),e}var s=n(3).constant(1),a=function(){return this},l=n(3).constant(void 0),u=.25,c="BLOCK",d="SNIP",h="MONETIZE",p="ALLOW",f=function(e,t){var n=t.target,i=t.targetType;return e.id===n&&"sound"===i},g=[{emitter:n(73),event:"like",getInstance:f,handler:function(e){this.onLike(e)}},{emitter:n(73),event:"repost",getInstance:f,handler:function(e){this.onRepost(e)}},{emitter:n(73),event:"comment",getInstance:f,handler:function(e){this.onComment(e)}}],m=n(938).withOptions({batchEndpoint:"trackBatch",getBatchParams:function(e){var t=e.playlist;return t&&"public"!==t.get("sharing")&&!n(54).get("me").owns(t)?{playlistId:t.id,playlistSecretToken:t.get("secret_token")}:null}}),_=(e.exports=n(65).extend(m,n(937),n(939),n(940),n(1311),n(248).withOptions({attr:"title"}),n(247).withOptions({read:"artwork_url",write:"artwork_data"}),n(507),n(942),n(194).withOptions({events:g}),{resource_type:"sound",urnPrefix:"soundcloud:tracks",getEndpointForMethod:function(e){return"read"===e?"track":null},audio:null,_visuals:null,submodelMap:{user:n(60),created_with:n(962)},timeOffset:0,playlist:null,originalSound:null,ownerAttributes:["scheduled_public_date","scheduled_private_date","scheduled_timezone","geo_blockings","managed_by_feeds","reveal_comments","reveal_stats"],_streamsExist:!0,_playable:!0,setup:function(e,t){var o=!(!t||!t.suppressGlobalEvents);this.on("play",_("play",o),this).on("pause",_("pause",o),this).on("seeked",_("seeked",o),this).on("finish",_("finish",o),this).on("playStart",_("playStart",!0),this),this.getSounds=n(3).memoize(this.getSounds),this.listenTo(this,"change:visuals",i).listenTo(this,"change:policy",r),this.attrExists("visuals")&&i.call(this),r.call(this)},getSubmodelOptions:function(e){return"user"===e?{parse:!0}:null},ownerUrl:function(){return this.getEndpointUrl("trackAsOwner",{urn:this.getUrn()})},parse:function(e){var t=e.schedule;return e.scheduled_timezone=t&&t.timezone,e.scheduled_public_date=t&&Date.parse(t.sunrise),e.scheduled_private_date=t&&Date.parse(t.sunset),e},baseUrl:function(){return this.getEndpointUrl("track",{urn:this.getUrn()})},destroyUrl:function(){return this.getEndpointUrl("trackDelete",{id:this.id})},streamsUrl:function(){return this.getEndpointUrl("trackStreams",{id:this.id})},getImageSaveUrl:function(){return this.getEndpointUrl("trackPatchUpdate",{id:this.id})},extractSecretToken:function(e){return n(62).parse(e.uri).query.secret_token},play:function(e){this.playlist?(this.playlist.setCurrentSound(this),this.playlist.play(e)):this.createAudio().play(e)},pause:function(e){this.playlist?this.playlist.pause(e):this.audio&&this.audio.pause(e)},seek:function(e){this.createAudio().seek(e)},seekRelative:function(e){this.createAudio().seekRelative(e)},getSounds:function(){return[this]},getCurrentSound:a,getFirstSound:a,getLastSound:a,getNumSounds:s,getPrevSound:l,getNextSound:l,getSoundIndex:function(e){return e===this?0:-1},isBuffering:function(){return!!this.audio&&this.audio.isBuffering()},isPlaying:function(){return!!this.audio&&this.audio.isPlaying()},loadProgress:function(){return this.audio?this.audio.loadProgress():0},currentTime:function(){return this.audio?this.audio.currentTime():0},getListenTime:function(){return this.audio?this.audio.getListenTime():0},isNowPlaying:function(){return n(71).getCurrentSound()===this},progress:function(){return this.currentTime()/this.duration()},duration:function(){return this.get("full_duration")||this.get("duration")},getMediaDuration:function(){return this.get("duration")},isPlayable:function(){return this._playable},setHasStreamInfo:function(e){this._streamsExist!==e&&(this._streamsExist=e,r.call(this))},isProcessing:function(){var e=this.get("state");return"finished"!==e&&null!=e},isEditing:function(){return!1},isCommentable:function(){return this.get("commentable")!==!1},isManagedByFeeds:function(){return!!this.get("managed_by_feeds")},isMonetizable:function(){return!!this.get("monetization_enabled")},isMonetizablePending:function(){var e=this.get("monetization");return!this.isMonetizable()&&!!(e&&e.territories&&e.territories.length>0)},hasScheduledPrivacy:function(){return!(!this.get("scheduled_public_date")&&!this.get("scheduled_private_date"))},isGeoblocked:function(){var e=this.get("geo_blockings");return!(!e||!e.length)},isBlocked:function(){return this.get("policy")===c},isSnippetized:function(){return this.get("policy")===d},isMonetized:function(){return this.get("policy")===h},isAllowed:function(){return this.get("policy")===p},isAd:function(){return!!this.get("ad_type")},isExternal:function(){return"external"===this.get("ad_type")},getOriginalSound:function(){return this.originalSound||this},hasMinPlayTime:function(){return this.getListenTime()>=u*this.getMediaDuration()},createAudio:function(){return this.audio||(this.audio=n(490).createAudioFromSound(this)),this.audio},initAudio:function(){this.createAudio().initAudio()},disposeAudio:function(){this.audio&&(this.audio.dispose(),this.audio=null)},toJSON:function(){var e=n(65).prototype.toJSON.apply(this,arguments);return e._playlist={},this.playlist&&n(3).each(["id","permalink","permalink_url","secret_token","user_id"],function(t){e._playlist[t]=this.playlist.get(t)},this),e},saveUrl:function(e){return e?this.getEndpointUrl("trackPatchUpdate",{id:this.id}):this.isNew()?this.getEndpointUrl("trackCreate"):this.getEndpointUrl("trackUpdate",{urn:this.getUrn()})},saveFormat:"json",getAttributesToBeSaved:function(){var e=["api_streamable","commentable","description","downloadable","embeddable","feedable","genre","isrc","isrc_generate","label_name","license","monetization","original_filename","permalink","purchase_title","purchase_url","release_date","replacing_uid","replacing_original_filename","reveal_comments","reveal_stats","sharing","shared_to","tag_list","title","uid","geo_blockings","publisher_metadata","restrictions","rightsholders"].reduce(function(e,t){return null!=this[t]&&(e[t]=this[t]),e}.bind(this.attributes),{});return n(3).assign(e,n(3).pick(this.attributes,["scheduled_private_date","scheduled_public_date","scheduled_timezone","scheduled_public_timezone"])),e},setMonetizableTrack:function(e){e.hold(),this.addSubmodel(e),this._monetizableTrack=e},getMonetizableTrack:function(){return this._monetizableTrack}},{states:{READY:"ready",PROCESSING:"processing",FAILED:"failed",FINISHED:"finished"},hashFn:function(e){var t=e.resource_id;if(t){if("object"==typeof t){if("playlist_id"in t)return[t.playlist_id,t.sound_id].join("_");if("ad_target_id"in t)return["ad",t.ad_target_id,t.sound_id].join("_")}return t}return e.id||null},resolve:function(e,t,i){return n(65)._resolve(this,[e,t,i],function(n){var i=n.get("user");return i&&n.get("permalink")===t&&i.permalink===e})},normalize:function(e){var t=e.waveform_url;return t&&t.indexOf("/w1.")>-1&&(e.waveform_url=t.replace(/\/w1\./,"/wis.")),e},onCleanup:function(e){return e._visuals&&(e._visuals.release(),e._visuals=null),e.disposeAudio(),n(65).onCleanup.apply(this,arguments)}}),n(3).memoize(function(e,t){return function(i){var r=n(3).toArray(arguments);switch(i&&i.sound===n(93).getCurrentSound()&&(i.ad=n(93).getCurrentAd()),t||n(56).trigger.apply(n(56),["audio:"+e].concat(r)),e){case"playStart":n(58).trackPlayStart(o(i));break;case"pause":n(58).trackPause(o(i))}}},function(e,t){return e+(t?"":"-global")}))},function(e,t,n){"use strict";function i(e,t){return!(e&&e.last_modified&&t&&t.last_modified&&Date.parse(e.last_modified)>Date.parse(t.last_modified))}var r=n(22).Model.extend(n(1310),{resource_type:null,lastFetchTime:null,_submodels:null,submodelMap:null,getEndpointUrl:n(23).getUrlForEndpoint,getEndpointForMethod:function(e){return null},initialize:function(e,t){var i=this;this._submodels=this._submodels||[],this.options=t||{},n(3).each(this.submodelMap,function(e,t){i.on("change:"+t,function(){i.createSubmodel(e,t)})}),this.setup.apply(this,arguments),n(3).each(this.submodelMap,function(e,t){i.get(t)&&i.createSubmodel(e,t)})},setup:n(3).noop,getSubmodelOptions:function(e){return null},createSubmodel:function(e,t){var n=this,i=this.getSubmodelOptions(t);[].concat(this.get(t)).forEach(function(t){var r=new e(t,i);r.lastFetchTime=Date.now(),n.addSubmodel(r)})},addSubmodel:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];n.forEach(function(t){-1===e._submodels.indexOf(t)?e._submodels.push(t):t.release()})},getAttributesToBeSaved:function(){return this.toJSON()},save:function(e,t){var i,r=this,o="json"===n(3).result(this,"saveFormat"),s=n(3).result(this,"saveWithWrapper"),a=o?"application/json":void 0,l=this.getAttributesToBeSaved(),u=e?n(3).pick(l,Object.keys(e)):l,c=s?(i={},i[n(903).toAPIResource(this.resource_type)]=u,i):u,d=o?JSON.stringify(c):n(62).param(c);return n(22).Model.prototype.save.call(this,e,n(3).assign({url:this.saveUrl(e,t),data:d,contentType:a},t)).done(function(e){r.set(e),r.updateResourceId()})},set:function(e,t,r){var o,s;if(null==e)return this;if("object"==typeof e)o=e,r=t;else{var a;a={},a[e]=t,o=a}return!i(this.attributes,o)&&(o=n(3).pick(o,n(3).difference(n(3).keys(o),n(3).keys(this.attributes))),n(3).isEmpty(o))?this:(s=this.constructor.normalize?this.constructor.normalize(n(3).clone(o)):o,n(3).each(this.submodelMap,function(e,t){var i=o[t];i&&e&&e.normalize&&!n(3).isArray(i)&&(s[t]=e.normalize(n(3).clone(i)))}),n(22).Model.prototype.set.call(this,s,r))},saveUrl:function(){return n(3).result(this,"baseUrl")},saveFormat:"param",saveWithWrapper:!0,destroy:function(e){var t=n(22).Model.prototype.destroy.call(this,n(3).assign({url:this.isNew()?null:this.destroyUrl()},e));return this.constructor.removeInstance(this),t},destroyUrl:function(){return n(3).result(this,"baseUrl")},baseUrl:n(3).noop,url:function(){var e=arguments.length<=0||void 0===arguments[0]?"baseUrl":arguments[0];return n(3).result(this,e)},toJSON:function(){var e=n(22).Model.prototype.toJSON.apply(this,arguments);return e._resource_id=this.resource_id,e._resource_type=this.resource_type,e},toString:function(){return this.resource_type?this.resource_type+" ("+(this.isNew()?"new":this.resource_id)+"): "+(this.attributes.permalink||this.attributes.title||this.attributes.name):Object.prototype.toString.call(this)},hasDataForView:function(e){return this.attrExists(e)},updateResourceId:function(){var e=this.constructor.hashFn(this.attributes),t=this.resource_id;e&&(this.resource_id=e,this.constructor.instances.changeKey(t,e))},attrExists:function(e){var t=Object.prototype.hasOwnProperty;return n(3).isArray(e)?e.every(t,this.attributes):t.call(this.attributes,e)},equivalentTo:function(e){return this===e||this.id&&this.id===e.id},getUrn:function(){var e=this.urnPrefix,t=this.id;return e&&t?e+":"+t:void 0},isPopulated:function(){return!!this.lastFetchTime},forceChange:function(e){var t=this.get(e);return this.unset(e,{silent:!0}),this.set(e,t),this}},{_resolve:function(e,t,i){var r=e.instances.find(i);if(r)return n(55).resolve(r);var o=n(62).stringify({scheme:"https",host:n(54).get("public_api_host").replace(/^https?:\/\/api\./,""),path:t});return n(23).callEndpoint("resolve",{},{url:o}).then(function(t){var n=t.body,i=new e(n);return i.release(),i})}});e.exports=n(522).applyTo(r,{hashFn:function(e){return e&&(e.id||e.resource_id)||null},onCleanup:function(e){var t=e._submodels;t&&t.length&&(n(3).invoke(t,"release"),t.length=0)},prepareArgs:function(e,t){return t=t||{},e=e||{},t.parse&&(e=this.parse(e),t=n(3).clone(t),t.parse=!1),[e,t]},prepareInstance:function(e,t){return t=t||{},t.collection&&(this.lastFetchTime=Date.now()),n(3).isEmpty(e)||this.set(e),delete this.attributes.resource_id,this},getIncrementValue:function(e,t){var n=t&&t.collection;return n?n.constructor.instances.countFor(n.resource_id):1}})},,function(e,t,n){"use strict";function i(e){return null==e||0===e.length}e.exports=n(97).extend({nullable:!1,message:n(51).t("This field must not be empty"),shouldCheck:function(){return!0},check:function(e,t){var n=this.shouldCheck.call(this._form)&&i(e);t(!n)}})},,function(e,t,n){"use strict";function i(){var e=n(54).get("geoip");return e&&"US"===e.get("country_code")}function r(e){var t=[n(282).codes.AUD,n(282).codes.NZD];return t.indexOf(e.getCurrency())>-1}function o(e,t){return e.getPlan()!==t||e.hasCreatorSubHug()}function s(e){return e.subscriptions}var a=e.exports={productIds:n(254),planNames:{CONSUMER_SUBSCRIPTION_HIGH_TIER_NAME:"go"},htDiscount:{AUD:"10",CAD:"8",EUR:"8",GBP:"8",NZD:"11",USD:"8"},htPrice:{AUD:"11.99",CAD:"9.99",EUR:"9.99",GBP:"9.99",NZD:"12.99",USD:"9.99"},proUnlimitedHtPrice:{AUD:"1.99",CAD:"1.99",EUR:"1.99",GBP:"1.99",NZD:"1.99",USD:"1.99"},isUSPurchase:i,isIntroductoryTerritory:r,userEligibleToBuyPro:function(e){return o(e,a.productIds.CREATOR_SUBSCRIPTION_PRO)},userEligibleToBuyProUnlimited:function(e){return o(e,a.productIds.CREATOR_SUBSCRIPTION_PRO_UNLIMITED)},isEligibleToBuy:o,getIcon:function(e,t){var i=s(e),r=i&&i.product.name,o=i&&i.product.id;return o===this.productIds.CREATOR_SUBSCRIPTION_PRO||o===this.productIds.CREATOR_SUBSCRIPTION_PRO_UNLIMITED?(t=n(3).assign({},t,{prefix:"sc-status-icon",title:r||"",type:"creator"}),n(917).render(t)):""},getIconLink:function(e,t){var i,r,o,a,l=this.getIcon(e,t);return l?(o=n(61).getRoute("premium",null,null,t&&t.referral),i=s(e),r=i&&i.product.name,a=n(51).t("[[planName]] user",{planName:r}),'<a class="premiumIconLink" href="'+o+'" title="'+a+'">'+l+"</a>"):l},getNextLevelProductId:function(e){var t=e.getPlan();return t===this.productIds.CREATOR_SUBSCRIPTION_FREE||"lite"===t||void 0===t?this.productIds.CREATOR_SUBSCRIPTION_PRO:this.productIds.CREATOR_SUBSCRIPTION_PRO_UNLIMITED},getQuotaInfo:function(e,t){var i,r,o=e.getUploadSecondsLeft(),s=e.getUploadSecondsUsed(),a=e.getUploadMinutesLeft(),l=e.getUploadMinutesUsed(),u=e.hasProPlanLevel()?n(51).t("Pro plan"):n(51).t("free"),c=e.isOverQuota();return e.hasUnlimitedUpload()?!1:(i=Math.round((o+s)/60),r=i/60,t?{minutesLeft:a,minutesUsed:l,limitInMinutes:i,limitInHours:r,isOverQuota:c}:0>o?n(51).tp("Youre over your [[planName]] [[limitInHours]]-hour limit by <strong>1</strong> minute.","Youre over your [[planName]] [[limitInHours]]-hour limit by <strong>%d</strong> minutes.",-a,{planName:u,limitInHours:r}):n(51).tp("You have 1 minute left.","You have %d minutes left.",a))}}},,function(e,t,n){"use strict";function i(){o.forEach(function(e){a[e]=function(){return r(),a[e].apply(a,arguments)}})}function r(){n(54).get("rollouts").get("play_queue")?s.forEach(function(e){a[e]=n(949)[e].bind(n(949))}):o.forEach(function(e){a[e]=n(521)[e].bind(n(521))})}var o=n(3).functions(n(521)),s=o.filter(function(e){return"_"!==e[0]}),a=e.exports={_resetProxy:i};i()},function(e,t,n){"use strict";function i(e,t){return n(3).defaults(t,e.prototype.defaults),e===s?t:i(e.__super__.constructor,t)}function r(e){this.next_href&&(this.next_href=n(62).modify(this.next_href,{query:e}))}var o={},s=e.exports=n(522).applyTo(n(22).Collection.extend({next_href:null,lastFetchTime:null,model:o,getEndpointUrl:n(23).getUrlForEndpoint,getEndpointForMethod:function(e){return null},defaults:{offset:0,limit:10,secret_token:null,maxPageSize:100},initialize:function(e,t){this.options=i(this.constructor,t||{}),this.setup(this.options)},setup:n(3).noop,_prepareModel:function(e){var t=e instanceof n(22).Model,i=n(22).Collection.prototype._prepareModel.apply(this,arguments);
return i&&i.hold(this._usageCount()-(t?0:1)),i},_removeReference:function(e){return e.release(this._usageCount()),n(22).Collection.prototype._removeReference.apply(this,arguments)},fetch:function(e){var t=this,i=e&&e.url||n(3).result(this,"url");return i?this._requests&&this._requests[i]||n(22).Collection.prototype.fetch.call(this,e).done(function(){!t.isFullyPopulated()||0!==t.length||e&&e.reset||t.reset([])}):n(55).defer().done(e&&e.success).resolve({})},fetchUntilResults:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=this.options.limit,r=this.length,o=n(3).defaults({reset:!1},t),s=function(t){return e.fetch(t).then(a)},a=function(){var t=e.length,n=t>r,i=e.isFullyPopulated();return n||i?void 0:(e.setLimit(Math.min(2*e.options.limit,e.options.maxPageSize)),s(o))};return s(t).always(function(){e.setLimit(i)})},fetchUntilLength:function(e){var t=this,i=function(){return t.length<e&&!t.isFullyPopulated()};if(!i())return n(55).resolve();var r=20,o=this.options.limit,s=0,a=function(e){return t.fetch(e).then(l)},l=function(){if(i()){var o=e-t.length;return t.setLimit(n(176).clamp(o,r,t.options.maxPageSize)),a({reset:0===s++&&!t.isPopulated(),add:!0,remove:!1})}};return n(55).resolve().then(l).always(function(){t.setLimit(o)})},bulkFetch:function(e){var t,i,o=this,s=arguments[1],a=arguments[2];if(!s){if(this._requests=this._requests||{},this._requests.bulk)return this._requests.bulk;this._requests.bulk=s=n(55).defer(),s.always(function(){delete o._requests.bulk}),a=this.length,t=this.options.limit,this.next_href||(this.options.limit=e-this.length),s.always(function(){o.options.limit=t,r.call(o,{limit:t})})}return this.length<e&&this.url()?(i=this.lastFetchTime?{add:!0,reset:!1,remove:!1}:{reset:!0},i.silent=!0,r.call(this,{limit:e-this.length}),this.fetch(i).done(function(){o.bulkFetch(e,s,a)}).fail(s.reject)):(a?this.rest(a).forEach(function(e){o.trigger("add",e,o,{})}):this.trigger("reset",this,{}),s.resolve()),s},removeWhere:function(e){var t=this.models.filter(e,this);return t.length&&this.remove(t),t},url:function(){if(null!==this.next_href)return this.next_href;var e=n(62).parse(n(3).result(this,"baseUrl"));return n(3).assign(e.query,{limit:this.options.limit,offset:this.options.offset,linked_partitioning:1}),this.options.secret_token&&(e.query.secret_token=this.options.secret_token),n(62).stringify(e)},parse:function(e){return e.collection},empty:function(){this.next_href=null,this.lastFetchTime=null,this.options.offset&&(this.options.offset=0),this.reset(null,{silent:!0})},setToFullyPopulated:function(){this.lastFetchTime=Date.now(),this.next_href=!1},hasDataForView:function(e){return this.lastFetchTime?e&&e.minModels?this.isFullyPopulated()||this.length>=e.minModels:!0:!1},isPopulated:function(){return!!this.lastFetchTime},isFullyPopulated:function(){return this.next_href===!1},setLimit:function(e){this.options.limit=e,r.call(this,{limit:e})},indexOfEquivalentModel:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?this.models:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=-1;return i&&(n=n.slice(i)),n.some(function(n,o){return t.compareModels(e,n)?(r=o+i,!0):void 0}),r},indexesOfEquivalentModels:function(e,t){for(var n=[],i=0;-1!==(i=this.indexOfEquivalentModel(e,t,i));)n.push(i),i++;return n},compareModels:function(e,t){return e===t||e.equivalentTo(t)}}),{hashFn:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.resource_id,i=void 0===n?null:n;return i},onHold:function(e,t,n){e.length&&e.at(0).hold&&e.invoke("hold",n)},onRelease:function(e,t,n){e.length&&e.at(0).release&&e.invoke("release",n)}})},function(e,t,n){"use strict";function i(e){var t=!1,o=e.state,s=e.list,a=e.target,l=e.origin,c="user"!==e.originType||l===n(63).currentUserId(),d=n(55).defer();if(c&&!n(63).isLoggedIn())n(63).login({context:e.context,implicitAction:e.action,implicitTarget:n(100).generate(e.targetType,e.target)}).done(function(){e.origin=n(63).currentUserId(),i(e).done(d.resolve).fail(d.reject)}).fail(d.reject);else{if(s&&c){var h=function(){if(s.get(a)!==o){if(s.toggle(a,o),e.state=o=s.get(a),e.persist){var l=s.setRemote(a,o,e.listOptions);l&&l.fail(function(t,s){"abort"!==s&&r(n(3).assign({xhr:t},e)),i(n(3).defaults({persist:!1,state:!o},e))})}}else t=!0};s.fetch().done(h).done(d.resolve).fail(d.reject)}else d.resolve();d.done(function(){t||u(e)})}return d}function r(e){var t=n(3).some(h._errHandlers,function(t){return t(e)===!1});t||h.trigger("error",e)}function o(e){return e=e||{},{state:e.state,origin:e.origin,originType:e.originType,object:e.object,target:e.target,targetType:e.targetType,targetModel:e.targetModel,context:e.context,attribution:e.context&&e.context.attribution}}function s(e){return"user"===e.originType&&e.origin===n(54).get("me").id}function a(e,t,i){if(s(i)){var r=i.state!==!1,o=n(3).defaults(t||{},{object:n(100).generate(i.targetType,i.target),target:null,clickNameOn:"add",clickNameOff:"remove"});i.click_name=e+"::"+o[r?"clickNameOn":"clickNameOff"],i.click_object=o.object,i.click_target=o.target,c(null,i)}}function l(e){var t=o(e),i=t.targetType;"comment"===i&&(t.target=t.targetModel.get("track_id"),t.targetType="track"),("comment"===i||"playlist"===i)&&a(i,null,n(3).assign({},t,{state:!1}))}function u(e){var t=e.action,n=e.origin,i=e.target,r=e.originType,s=e.targetType;h.trigger([t,t+":origin:"+r+":"+n,i?t+":target:"+s+":"+i:""].join(" "),o(e))}var c=n(58).trackV0ClickWithPromotedParams,d={blockings:new(n(340)),followers:new(n(968)),followings:new(n(443)),likedStations:new(n(969)),playlistLikes:new(n(549)),playlistReposts:new(n(550)),soundLikes:new(n(552)),soundReposts:new(n(553))},h=e.exports=n(3).assign({},n(22).Events,{bindErrorHandler:function(e){return h._errHandlers.unshift(e),this},unbindErrorHandler:function(e){var t=h._errHandlers;return t.splice(t.indexOf(e),1),this},_errHandlers:[],notify:function(e,t){t=n(3).defaults({},t,{action:e,origin:n(63).currentUserId(),originType:"user",object:null,target:null,targetType:null,targetModel:null,state:!0});var i=o(t);switch(e){case"comment":a(e,null,i);break;case"createPlaylist":a("playlist",{object:i.object.getUrn()},i);break;case"addToPlaylist":a("track_to_playlist",{object:i.object.getUrn(),target:n(100).generate(i.targetType,i.target)},i)}u(t)},follow:function(e,t,r){var s=n(63).currentUserId();r=n(3).defaults({},r,{action:"follow",origin:s,originType:"user",target:e,targetType:"user",state:t,persist:!0});var l=r,u=l.origin,c=l.target,h=l.state;if(u===c)return n(55).resolve();if(c!==s)return r.list=u===s?d.followings:null,a("follow",null,o(r)),i(r);var p=function(){var e=n(55).defer(),t=d.followers;return t.fetch().done(function(){t.get(u)!==h&&(t.toggle(u,h),r.state=t.get(u),i(r).done(function(){a("follow",null,o(r)),e.resolve()}).fail(e.reject))}),{v:e}}();return"object"==typeof p?p.v:void 0},destroy:function(e,t){return t=n(3).defaults({},t,{action:"destroy",origin:n(63).currentUserId(),originType:"user",target:e.id,targetType:e.resource_type,targetModel:e,state:!0}),l(t),u(t),e.destroy()},like:function(e,t,r,s){return s=n(3).defaults({},s,{action:"like",origin:n(63).currentUserId(),originType:"user",target:e,targetType:t,state:r,persist:!0,list:"playlist"===t?d.playlistLikes:d.soundLikes}),a("like",null,o(s)),i(s)},addToPlayHistory:function(e,t,i){if(n(63).isLoggedIn()){var r={context:t,targetType:"sound",target:e,state:i},o=n(3).omit({context_urn:t?t.resourceUrn:null,track_urn:"soundcloud:tracks:"+e},n(3).isNull);h.notify("addToPlayHistory",r),n(23).callEndpoint("playHistoryAdd",null,null,null,o)}},clearPlayHistory:function(){n(63).isLoggedIn()&&(h.notify("clearPlayHistory"),n(23).callEndpoint("playHistoryClear"))},likeStation:function(e,t,r){return r=n(3).defaults({},r,{action:"likeStation",origin:n(63).currentUserId(),originType:"user",target:e,targetType:"station",object:e,state:t,persist:!0,list:d.likedStations}),a("like",null,o(r)),i(r)},repost:function(e,t,r,s){return s=n(3).defaults({},s,{action:"repost",origin:n(63).currentUserId(),originType:"user",target:e,targetType:t,state:r,persist:!0,list:"playlist"===t?d.playlistReposts:d.soundReposts}),a("repost",null,o(s)),i(s)},block:function(e,t,r,o,s){r=!(!t||!r),s=n(3).defaults({},s,{action:"block",origin:n(63).currentUserId(),originType:"user",target:e,targetType:"user",state:t,persist:!0,list:d.blockings,listOptions:{reported:r,remove_activities:o}});var a=i(s);return t&&n(63).isLoggedIn()&&h.follow(n(63).currentUserId(),!1,{origin:e}),a}})},,,function(e,t,n){"use strict";var i=e.exports=function(e,t){var r=i.getClass(e);return e=n(3).omit(e,"resource_type"),new r(e,t)};i.getClass=function(e){var t=e.resource_type||e.kind;return n("playlist"===t?85:"sound"===t||"track"===t?64:64)}},,,,function(e,t,n){"use strict";function i(e){return e&&e.sc_a_id}function r(e){o.set("sc_a_id",e.sc_a_id)}var o=new(n(111))("promoted-persistent"),s={addToSet:["add_to_set_click"],follow:["follow_click"],like:["like_click"],play:["sound_play","SCAudioStart"],skip:["sound_skip"],finish:["sound_finish"],impression:["impression"],repost:["repost_click"],share:["share_click"],adClick:["ad_click"],soundClickThrough:["sound_click"],sponsorClickThrough:["sponsor_click"],userClickThrough:["profile_click"],purchaseClickThrough:["purchase_click"],pause:["SCAudioPause"],resume:["SCAudioResume"],first_quartile:["SCAudioFirstQuartile"],second_quartile:["SCAudioSecondQuartile"],third_quartile:["SCAudioThirdQuartile"]},a={search:"promotedSearch",suggestedUsers:"promotedUsers",uploadTakeover:"promotedUploadTakeover",uploadText:"promotedUploadText"},l={dashboxListen:"listen",dashboxNotifications:"notifications",dashboxStream:"stream",dashboxTags:"tags",dashboxUserProfile:"profile"},u=[],c=e.exports={getAdUrl:function(e,t){var i=n(3).assign(c._getPromotedQueryParams(),t),r=a[e];return n(23).getUrlForEndpoint(r,{},i)},getAudioAdsUrl:function(e){var t=c._getPromotedQueryParams();e&&e.trackId&&(t.track_id=e.trackId);var i=n(1298).segments();return i&&i.length&&(t.krux_segments=i.join(",")),n(23).getUrlForEndpoint("audioAd",{},t)},getDashboxUrl:function(e,t){var i=c._getPromotedQueryParams();i.locale=t;var r={path:"/dashbox/"+l[e],query:i};return n(62).stringify(r,n(54).get("api_v2_host"))},getAdUrlQuery:function(){var e=c._getPromotedQueryParams();return e.user_urn=n(54).get("me").getUrn(),e.promoted_playlist=!0,{query:e}},extractPromotedAttrs:function(e){return e&&e.isPromoted&&e.isPromoted()?e.pick("ad_urn","campaign","promoted_by","promoted_by_urn","tracking"):void 0},parseResponse:function(e){var t=n(3).first(e.promoted);return i(t)?(r(t),t):{}},parseDashboxResponse:function(e){return i(e)&&r(e),e&&e.data?e.data.dashbox:e},parseStreamResponse:function(e){return e&&e.collection&&e.collection.filter(function(e){return e.promoted}).forEach(function(e){i(e.promoted)&&r(e.promoted),e.promoted&&(e.promoted.ad_urn&&(e.ad_urn=e.promoted.ad_urn),e.promoted.tracking&&(e.tracking=e.promoted.tracking),e.campaign="promoted",delete e.promoted),e.user&&(e.promoted_by=e.user,e.promoted_by_urn=n(100).generate(e.promoted_by.kind,e.promoted_by.id),delete e.user)}),e},trackEvent:function(e,t){var n="impression"===e?c._sendRequestOnce:c._sendRequest;c._getTrackingUrls(e,t).forEach(n)},_getTrackingUrls:function(e,t){var i=s[e]||[],r=t&&t.tracking||{},o=n(3).flatten(i.map(function(e){return r[e]||[]}));return n(3).isArray(o)?o:[o]},_getPromotedQueryParams:function(){return{sc_a_id:o.get("sc_a_id"),device_locale:n(51).getLocale()&&n(51).getLocale().replace(/_/g,"-")}},_sendRequest:function(e){var t=new window.Image;t.src=e},_sendRequestOnce:function(e){-1===u.indexOf(e)&&(c._sendRequest(e),u.push(e))}}},function(e,t,n){"use strict";function i(e){switch(e){case u:return"consumer-subscription";case p:case f:case g:return"creator-gift";case c:case d:case h:return"creator-subscription"}}function r(e){switch(e){case u:return"go";case p:case c:return"free";case f:case d:return"pro";case g:case h:return"pro-unlimited"}}function o(){n(56).off("connect:hasUserData",s),a=n(3).once(function(){n(63).isLoggedIn()||n(56).once("connect:hasUserData",s)})}function s(){m.clearRequestCache(),m.instances.invoke("fetch")}var a=void 0,l=n(69).productIds,u=l.CONSUMER_SUBSCRIPTION_HIGH_TIER,c=l.CREATOR_SUBSCRIPTION_FREE,d=l.CREATOR_SUBSCRIPTION_PRO,h=l.CREATOR_SUBSCRIPTION_PRO_UNLIMITED,p=l.CREATOR_GIFT_FREE,f=l.CREATOR_GIFT_PRO,g=l.CREATOR_GIFT_PRO_UNLIMITED;o();var m=e.exports=n(65).extend({resource_type:"product",setup:function(){a()},fetch:function(e){var t=this;return _(i(this.id),this.options.ref).then(function(n){var i=n.body.plans;t.lastFetchTime=Date.now(),t.populateFromPlans(i,e)})},populateFromPlans:function(e,t){var i=n(3).findWhere(e,{id:r(this.id)});i?this.set(this.parse(i,t),t):this.set("active",!1)},parse:function(e){return n(3).extend({active:!0},n(3).omit(e,"id"))},isActive:function(){return!!this.get("active")},isPromoAvailable:function(){var e="soundcloud:payments:promotions:consumer-subscription",t=this.getPromotion();return t.urn&&0===t.urn.indexOf(e)||!1},isAvailable:function(){return this.isFree()||!!this.get("preselected_term")},isGift:function(){return this.id.indexOf("gift")>-1},isPro:function(){return-1===this.id.indexOf("unlimited")&&!this.isFree()},isProUnlimited:function(){return this.id.indexOf("unlimited")>-1},isRenewal:function(){return"renewal"===this.get("use_case")},isFree:function(){return this.id.indexOf("free")>-1},isCurrency:function(e){return this.getCurrency()===e},isTrial:function(){return!!this.get("trial")},getPromotion:function(){return this.get("promotion")||{}},getPromotionDurationInMonths:function(){var e=this.get("promotion");return e?e.duration_in_days/30:0},getTrialDuration:function(){var e=this.get("trial");return e?e.duration_in_days:0},getTrackingUseCase:function(){var e=this.get("use_case");return(e===m.useCases.REGULAR||e===m.useCases.MONEY_BACK)&&(e="new"),e},getCurrency:function(){return this.getPrice().currency},getTitle:function(){return this.isPro()?n(51).t("Pro"):this.isProUnlimited()?n(51).t("Pro Unlimited"):n(51).t("Free")},getPrice:function(e){return this.getTermData(e).price||{currency:"EUR"}},getDisplayPrice:function(){var e=this.getPrice(),t=e.display,i=e.currency,r=n(51).numberHelper.format(t,{precision:2});return t?n(90).format(r,i):""},getPackagePrice:function(e){var t=this.getTermData(e)["package"];return t&&(t.price||{currency:"EUR"})},getPromoPrice:function(){var e=this.getPromotion().price||{currency:"EUR"},t=e.display,i=e.currency,r=n(51).numberHelper.format(t,{precision:2});return t?n(90).format(r,i):""},getDiscount:function(e){var t=this.getTermData(e).discount;return t&&t.price},getTermData:function(e){return e=e||this.getPreselectedTerm(),this.get(e)||{}},getPreselectedTerm:function(){return this.get("preselected_term")},getUrn:function(){return this.getTermData()["package"].urn},getCountry:function(){var e=n(54).get("geoip");return e&&e.get("country_code")||"US"}},{useCases:{DISABLED:"disabled",REGULAR:"regular",MONEY_BACK:"money_back",RENEWAL:"renewal",DOWNGRADE:"downgrade",UPGRADE:"upgrade"},resetLoginListener:o,clearRequestCache:function(){_.cache={}}}),_=n(3).memoize(function(e,t){return n(23).callEndpoint("paymentQuotations",{category:e},{ref:t}).fail(function(){delete _.cache[e]})},function(e,t){return e})},function(e,t,n){"use strict";e.exports=n(65).extend(n(1289),n(1286),n(1287),{isPopulated:function(){return!0},destroy:function(e){return this.trigger("destroy",this,this.collection,e),n(55).resolve()}},{hashFn:function(e,t){return e&&e.id||t&&t.resource_id}})},function(e,t,n){(function(t){"use strict";function i(e){var t,i,r=-1;return b.imageUrlRegex.lastIndex=0,t=e.replace(b.imageUrlRegex,function(e,t,o,s,a){return n(3).find(b.availableSizes,function(e,t){return e[1]===a?(r=t,!0):void 0}),i=t,o}),i&&r>-1?{index:r,key:t,type:i}:null}function r(e){_[e.type][e.key]|=1<<e.index}function o(e){return c(e).then(function(t){return a(e,t)},function(){return s(e)})}function s(e){var t=new g,i=n(55).defer();return t.onload=function(e){i.resolve(e.target.result)},t.onerror=t.onabort=i.reject,t.readAsDataURL(e),i.promise()}function a(e,t){var n=s(e),i=t[0],r=t[1];return 0!==i||r?n.then(l).then(function(e){var n=f.createElement("canvas"),i=n.getContext("2d"),r=e.width,o=e.height;return n.width=r,n.height=o,u(i,t),i.drawImage(e,0,0),n.toDataURL("image/png")}):n}function l(e){var t=n(55).defer(),i=new m;return i.onload=function(){t.resolve(i)},i.onerror=function(){t.reject()},i.src=e,t.promise()}function u(e,t){var n=t[0],i=t[1],r=e.canvas,o=r.width,s=r.height;e.translate(o/2,s/2),i&&e.scale(-1,1),e.rotate(n*h),e.translate(-o/2,-s/2)}function c(e){var t=new g,i=n(55).defer();return t.onerror=t.onabort=function(){i.reject(C)},t.onload=function(e){var t=new DataView(e.target.result);if(t.getUint16(0,!1)!==x)return void i.reject(A);var n=t.byteLength,r=2;try{for(;n>r;){var o=t.getUint16(r,!1);if(r+=2,o===k){var s=t.getUint16(r+=8,!1)===S;r+=t.getUint32(r+4,s);var a=t.getUint16(r,s);r+=2;for(var l=0;a>l;l++)if(t.getUint16(r+12*l,s)===T){var u=t.getUint16(r+12*l+8,s);return void i.resolve(w[u])}}else{if(!d(o))break;r+=t.getUint16(r,!1)}}}catch(c){window.console.error("Error reading JPEG headers")}i.reject(E)},t.readAsArrayBuffer(e.slice(0,65536)),i.promise()}function d(e){return 65280===(65280&e)}var h=Math.PI/180,p=window,f=p.document,g=p.FileReader,m=p.Image,_={},v=["user","profile-settings"],y=["user"],b=e.exports=n(3).defaults({tagOptions:{whitelist:["style","title","class","aria-label","aria-role","aria-hidden"],closingTag:!0},load:function(e){var i=new m,r=t(i),o=n(55).defer(),s=n(3).uniqueId("ImageHelperLoad");return n(98).corsImg&&(i.crossOrigin=window.location.host,e+="?xd=true"),r.on("load."+s,function(){o.resolve(this)}).on("error."+s,function(){o.reject(this)}),o.always(function(){r.off("."+s)}),i.src=e,o},getPlaceholderUrl:function(e,t){var r,o,s,a,l=i(b.setFormat(e,t));if(l){if(r=l.key,_[l.type]||(_[l.type]={}),_[l.type][r])for(o=n(3).find(b.availableSizes,function(e,n){var i=e[0];return a=n,i>=t});a>=0;){if(_[l.type][r]&1<<a){s=b.availableSizes[a];break}--a}if(o&&s===o)return!1;if(s)return b.setFormat(e,s[0])}return null},urlFrom:function(e,t,i){return t&&n(95).isHiDPI&&(t*=2),n(864).urlFrom.call(this,e,t,i)},markup:function(e,t){e&&e.attributes&&(e=e.attributes);var i=t.src,r=t.size,o=t.stretch,s=t.placeholderId,a=t.forceSquare,l=t.useResourceUrl,u=void 0===l?!0:l,c=i||u&&this.urlFrom(e,r);c=this.isDefaultImage(c)?null:"url("+c+")";var d=this.getPlaceholderClass(e||s,{forceSquare:!!a}),h=o?"100%":r+"px",p=n(3).assign({style:{"background-image":c,width:h,height:h},"class":"sc-artwork "+d+" "+(t["class"]||""),"aria-label":this.getAltText(e),"aria-role":"img"},n(3).omit(t,"stretch","size","class"));return n(242).getMarkup("span",p,this.tagOptions)},flagCachedImage:function(e){var t=i(e);t&&r(t)},isRounded:function(e){var t=e._resource_type,n=e.kind;return t?v.indexOf(t)>-1:n?y.indexOf(n)>-1:v.indexOf(e)>-1},getPlaceholderClass:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.forceSquare,i="number"==typeof e,r=i?e:e&&e.id||0,o=i||n?"":b.isRounded(e)?"image__rounded":"",s=12;return"sc-artwork-placeholder-"+r%s+" "+o},getPlaceholderGradient:function(e){var t=b.getPlaceholderClass(e),i=n(3).find(t.split(" "),function(e){return e.indexOf("sc-artwork-placeholder")>-1});return n(862)[i]},getPlaceholderCanvas:function(e,t){var n=f.createElement("canvas"),i=n.getContext("2d"),r=b.getPlaceholderGradient(e),o=r[0],s=r[1];n.width=n.height=t;var a=i.createLinearGradient(0,0,t,t);return a.addColorStop(0,o),a.addColorStop(1,s),i.fillStyle=a,i.fillRect(0,0,t,t),n},readImageFile:s,readImageFileCorrected:o},n(864)),w={1:[0,!1],2:[0,!0],3:[180,!1],4:[180,!0],5:[90,!0],6:[90,!1],7:[270,!0],8:[270,!1]},x=65496,k=65505,S=18761,T=274,E=-1,A=-2,C=-3}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function i(e){e=e||{};var i=n(3).assign({},n(280),{422:n(3).noop}),r={},o=[v];return e.code?r.code=e.code:r.result_url=window.location.protocol+"//"+window.location.host+"/"+b,e.orderUrn?(o.push("retry"),r.order_urn=e.orderUrn):r.package_urn=C.getUrn(),I&&(r.origin_ref=I),t.ajax({url:n(54).get("api_v2_host")+o.join("/"),type:"POST",statusCode:i,data:JSON.stringify(r),contentType:"application/json",dataType:"json"})}function r(e){var t=e.urn,i=e.state,r=e.form_params,s={context:D,click_name:"clickthrough::"+[F.getProductId(),C.getTrackingUseCase()].join("/"),click_object:F.getReferenceParam()};try{r=JSON.parse(r)}catch(u){return o.call(this)}t&&i===L?(p(t),h.call(this,i),n(58).trackV0Click(null,s),this.successful(e.gift)):t&&r?(p(t),h.call(this,i),c(l.call(this,r)),n(58).trackV0Click(null,s),a.call(this,!0),this.triggerEvent("started")):o.call(this)}function o(e){var t=e?e.responseText:"";if(t)try{t=JSON.parse(t).error}catch(i){t=null}t&&"object"==typeof t&&(t=t.code),this.cancel(),n(56).trigger("premium:pageView","error"),this.trigger("error",t)}function s(e){return t.ajax({url:n(54).get("api_v2_host")+[y,e].join("/"),type:"GET",contentType:"application/json",dataType:"json"})}function a(e){var t=[this.isGiftPayment()?"gifts":null,e?C.isProUnlimited()?"pro-unlimited":"pro":null],i={trigger:!e};n(54).get("router").navigateToRoute("premium",t,i)}function l(e){return{action:e.action,params:e.inputs.map(function(e){return n(3).pairs(e)[0]})}}function u(){E&&(E.close(),E=null)}function c(e){T=e}function d(e){A=e}function h(e){S=S||{},S.state=e}function p(e){S=S||{},S.urn=e}function f(){C&&C.release(),E=x=A=C=S=T=I=D=null}var g=n(254),m=g.CREATOR_SUBSCRIPTION_PRO,_=g.CREATOR_SUBSCRIPTION_PRO_UNLIMITED,v="payments/checkout",y="payments/checkout",b="payment_callback.html",w=[1024,768],x=null,k=null,S=null,T=null,E=null,A=null,C=null,I=null,D=null,P=["use_case","preselected_term"],M="failed",R="pending",L="successful",F=e.exports=n(3).assign({},n(22).Events,{start:function(e,t){function s(){i.call(this,t).done(l.resolve).fail(l.reject)}var a=this,l=n(55).defer();return A?l.resolve():n(63).isLoggedIn()?(t&&t.trackingContext&&(D=t.trackingContext),d(e),C=new(n(81))({id:e},{ref:I}),this.triggerEvent("starting"),C.attrExists(P)?s.call(this):C.fetch().done(function(){s.call(a)}),l.done(function(e){r.call(a,e)}).fail(function(e){o.call(a,e)})):n(63).login({implicitAction:"purchase"}).then(function(){return F.start(e,t)})},handleCallback:function(e){var t=n(62).parse(e.location.href),i=t.query.url;i?E||this.openExternal(i):this.processOrder()},processOrder:function(){this.triggerEvent("processing"),this.pollForOrderStatus()},openExternal:function(e){if(/(^|\.)paypal\.com$/.test(n(62).parse(e).host)){var t=w[0],i=w[1];E=n(284).centered(e,t,i),this.listenTo(this,"processing finished",u),function r(){E&&!E.closed?window.setTimeout(r,1e3):E&&E.closed&&"external"===x&&(u(),F.cancel())}(),this.triggerEvent("external",e)}else this.cancel()},successful:function(e){var t=[C.getTrackingUseCase(),F.getProductId(),F.getReferenceParam()];n(56).trigger("premium:pageView","premium/success/"+t.filter(Boolean).join("/")),this.triggerEvent("successful"),A===m?n(524).pushEvent({event:"creator-signup-successful-pro",creatorSubType:A}):A===_&&n(524).pushEvent({event:"creator-signup-successful-pro-unlimited",creatorSubType:A}),e&&(k=e.code),n(54).get("router").navigateToRoute("purchased",[A],{trigger:!0}),this.finish(),e||this.pollForPlanUpdate()},unsuccessful:function(e){var t=[C.getTrackingUseCase(),F.getProductId(),e,F.getReferenceParam()];n(56).trigger("premium:pageView","premium/failed/"+t.filter(Boolean).join("/")),a.call(this,!1),this.triggerEvent("unsuccessful",e),this.finish()},updatedPlan:function(){this.triggerEvent("updatedPlan")},cancel:function(){/^(starting|started|external|processing)$/.test(x)&&(a.call(this,!1),this.triggerEvent("canceled"),f())},finish:function(){this.triggerEvent("finished"),f()},retry:function(){var e=this.getOrder().urn;i.call(this,{orderUrn:e}).done(r.bind(this)).fail(o.bind(this))},getProductId:function(){return A},getPaymentParams:function(){return T},getOrder:function(){return S},getReferenceParam:function(){return I},setReferenceParam:function(e){I=e},isGiftPayment:function(){return C.isGift()},claimGiftCode:function(){var e=k;return k=null,e},triggerEvent:function(e,t){var n=this;e.split(" ").forEach(function(e){x=e,n.trigger(e,A,S,t)})},purchasedToProductId:function(e,t){switch(e){case"pro":return t?n(254).CREATOR_GIFT_PRO:n(254).CREATOR_SUBSCRIPTION_PRO;case"pro-unlimited":return t?n(254).CREATOR_GIFT_PRO_UNLIMITED:n(254).CREATOR_SUBSCRIPTION_PRO_UNLIMITED}},pollForOrderStatus:function(){var e=this,t=this.getOrder().urn,i=new(n(155))({tolerance:1,giveUp:30,backoffRate:1.3}),r=function(){s(t).done(o).fail(function(t){var n=t.status;404===n?e.unsuccessful():i.failed()})},o=function(t){switch(h.call(e,t.state),t.state){case R:i.failed();break;case L:e.successful(t.gift);break;case M:t.action===F.orderAction.RETRY?e.retry():e.unsuccessful(t.reason)}};this.listenTo(i,"enabled",r).listenTo(i,"giveup",this.unsuccessful.bind(this,"timeout")),r()},pollForPlanUpdate:function(){var e=n(54).get("me"),t=e.getPlan(),i=new(n(155))({tolerance:1,giveUp:15,backoffRate:1.5,maxDelay:15e3,enabled:!1}),r=function(){e.fetch().always(i.failed.bind(i))},o=function(n){t!==n.getPlan()&&(F.updatedPlan(),this.stopListening(i).stopListening(e))};this.listenTo(i,"enabled",r).listenTo(e,"change:subscriptions",o)}},{orderStates:{FAILED:M,PENDING:R,SUCCESSFUL:L},orderAction:{ABORT:"abort",RETRY:"retry",CANCEL:"cancel"},paymentFailStates:{CANCEL:"cancelled.user",GENERIC:"declined.generic",INSUFFICIENT_BALANCE:"declined.insufficient_balance",INVALID_CARD:"declined.invalid_card",PAYPAL_GENERIC:"declined.paypal.generic",PROCESSING_PROBLEM:"declined.processing_problem",REFUND:"refunded.system",ERROR_FRONTEND:"error.frontend"}})}).call(t,n(1))},function(e,t,n){"use strict";function i(e,t){e.originalSound.set(e.attributes,t)}function r(e,t){this.set(e.attributes,t)}function o(){s.call(this)}function s(e){var t=this.soundsCollection.pluck("duration").reduce(function(e,t){return e+(t||0)},0);this.set("duration",t,e)}function a(e){var t=this,i=e.filter(function(e){return!t.findSoundById(e)}),r=this.soundsCollection.filter(function(t){var n=t.id;return-1===e.indexOf(n)});r.forEach(function(e){return t.removeSound(e)}),i.forEach(function(e){var i=new(n(64))({id:e});t.addSound(i),i.release()}),this.reorder(e)}var l,u=n(3).constant(!1),c="tracklistChange";l=n(22).Collection.extend({model:n(64),fetch:function(){return this.playlist.fetch.apply(this.playlist,arguments)},initialize:function(e,t){this.playlist=t.playlist},hasDataForView:function(){return!!this.playlist.attributes.tracks},isFullyPopulated:n(3).constant(!0),_usageCount:n(3).constant(1),hold:n(3).noop,release:n(3).noop});var d=function(e,t){var n=t.target,i=t.targetType;return e.id===n&&"playlist"===i},h=[{emitter:n(56),event:"broadcast:"+c,getInstance:function(e,t){var n=e.id,i=t.id;return n===i},handler:function(e){var t=e.trackIds;a.call(this,t)}},{emitter:n(73),event:"like",getInstance:d,handler:function(e){this.onLike(e)}},{emitter:n(73),event:"repost",getInstance:d,handler:function(e){this.onRepost(e)}}],p=(e.exports=n(65).extend(n(429),n(937),n(430),n(322),n(248).withOptions({attr:"title"}),n(247).withOptions({read:"artwork_url",write:"artwork_data"}),n(507),n(942),n(194).withOptions({events:h}),{resource_type:"playlist",urnPrefix:"soundcloud:playlists",saveFormat:"json",submodelMap:{tracks:n(64),user:n(60)},states:{shuffling:function(e){var t=this.getSoundIndex(this.getCurrentSound()),n=e&&this.isPlaying()?t:null,i=e?0:t;this.currentSoundCursor=i,this.setPlayOrder(n),this.toggleState("repeating",e)},repeating:{initial:!1}},soundsCollection:null,currentSoundCursor:0,_isPlayActionQueued:!1,_playOrder:null,_internalNavigation:!1,getSubmodelOptions:function(e){return"user"===e?{parse:!0}:null},setup:function(){this.soundsCollection=new l(null,{playlist:this}),this.listenTo(this.soundsCollection,"error",function(e,t,i){t instanceof n(909)&&this.removeSound(e)}),this._playOrder||(this._playOrder=[])},baseUrl:function(){return this.getEndpointUrl("playlist",{id:this.id},{representation:"full"})},destroyUrl:function(){return this.getEndpointUrl("playlistDelete",{id:this.id})},saveUrl:function(){return this.isNew()?this.getEndpointUrl("playlistCreate"):this.getEndpointUrl("playlistUpdate",{id:this.id})},getImageSaveUrl:function(){return this.getEndpointUrl("playlistArtworkUpdate",{id:this.id})},createSubmodel:function(e,t){"tracks"===t?this.prepareSounds():n(65).prototype.createSubmodel.apply(this,arguments)},prepareSounds:function(){var e=this,t=[];this.get("tracks").forEach(function(i){if(!e.containsSound(i.id)){var r=new(n(64))(i);e.addSubmodel(r);var o=n(3).defaults({resource_id:{playlist_id:e.id,sound_id:i.id}},i),s=new(n(64))(o,{suppressGlobalEvents:!0});s.playlist=e,s.originalSound=r,t.push(s),e.toggleListeners(s,!0)}}),0===this.soundsCollection.length?this.soundsCollection.reset(t):this.soundsCollection.add(t,{silent:!0}),t.length&&this.setPlayOrder()},getSoundsCollection:function(){return this.soundsCollection},getSoundsCollectionClone:function(){return new l(this.soundsCollection.models.slice(),{playlist:this})},toggleListeners:function(e,t){var n=t?"on":"off",s=t?"listenTo":"stopListening";e[n]("play",this.onSoundPlay,this)[n]("pause",this.onSoundPause,this)[n]("buffering:start buffering:end",this.onSoundBuffering,this)[n]("finish",this.onSoundFinish,this)[n]("time",this.onSoundTime,this)[n]("seeked",this.onSoundSeeked,this)[n]("change:duration",o,this),e[n]("change",i)[s](e.originalSound,"change",r)},onSoundBuffering:function(e){this.trigger(e.type,e)},onSoundPlay:function(e){e.playlist=this,this.trigger("internal:play",e),this._internalNavigation||(this.trigger("play",e),n(56).trigger("audio:play",e),this._internalNavigation=!0)},onSoundPause:function(e){this._internalNavigation||(e.playlist=this,this.trigger("pause",e),n(56).trigger("audio:pause",e),this._internalNavigation=!0)},onSoundFinish:function(e){e.sound===this.getLastSound()&&(e.playlist=this,this.trigger("pause finish",e),n(56).trigger("audio:pause audio:finish",e))},onSoundTime:function(e){e.playlist=this,this.trigger("time",e)},onSoundSeeked:function(e){e.playlist=this,this.trigger("seeked",e)},getPrevSound:function(){return this.soundsCollection.at(this._playOrder[this.currentSoundCursor-1])},getCurrentSound:function(){return this.soundsCollection.at(this._playOrder[this.currentSoundCursor])},getNextSound:function(){return this.soundsCollection.at(this._playOrder[this.currentSoundCursor+1])},getFirstSound:function(){return this.soundsCollection.at(this._playOrder[0])},getLastSound:function(){return this.soundsCollection.at(this._playOrder[this.soundsCollection.length-1])},findSound:function(e){return this.findSoundById(e.id)},findSoundById:function(e){return this.soundsCollection.get(e)},getSounds:function(){return this.soundsCollection.models},getSoundIndex:function(e){return this.soundsCollection.indexOf(e)},containsSound:function(e){return!!this.findSoundById(e)},isManagedByFeeds:function(){return!!this.get("managed_by_feeds")},getNumSounds:function(){return this.soundsCollection.length||this.get("track_count")||0},isGeoblocked:u,isMonetizable:u,isMonetizablePending:u,hasScheduledPrivacy:u,play:function(e){var t=this;e=e||{},e.audible&&e.audible.playlist&&e.userInitiated&&(this.setPlayOrder(this.getSoundIndex(e.audible)),this.getState("shuffling")?this.currentSoundCursor=0:this.setCurrentSound(e.audible)),this.soundsCollection.length?(this._internalNavigation=!1,this.getCurrentSound().createAudio().play(e)):this.lastFetchTime||(this._isPlayActionQueued=!0,this.fetch().done(function(){t._isPlayActionQueued&&(t._isPlayActionQueued=!1,t.play(e))}))},pause:function(e){if(this._isPlayActionQueued=!1,this.soundsCollection&&this.soundsCollection.length){this._internalNavigation=!1;var t=this.getCurrentSound().audio;t&&t.pause(e)}},rewind:function(){
this.currentSoundCursor=0},setCurrentSound:function(e){e&&(this.currentSoundCursor=this._playOrder.indexOf(this.getSoundIndex(e)))},hasDataForPlay:function(){return this.attributes.hasOwnProperty("tracks")},isNowPlaying:function(){return this.getSoundIndex(n(71).getCurrentSound())>-1},isBuffering:function(){return this.soundsCollection.some(p("isBuffering"))},isPlaying:function(){return this.soundsCollection.some(p("isPlaying"))},isProcessing:function(){return this.soundsCollection.some(p("isProcessing"))},isPlayable:function(){return!this.get("tracks")||this.soundsCollection.some(p("isPlayable"))},isAlbum:function(){return!!this.get("is_album")},setPlayOrder:function(e){var t=n(3).range(this.soundsCollection.length);this.getState("shuffling")&&(t=n(3).shuffle(t),"number"==typeof e&&(t.splice(t.indexOf(e),1),t.unshift(e))),this._playOrder=t},parse:function(e,t){return e=n(65).prototype.parse.apply(this,arguments),t=t||{},t.isSavingOrder&&(e.tracks||e.track_count)&&(delete e.tracks,delete e.track_count),e.secret_token&&e.tracks&&e.tracks.forEach(function(t){"public"===t.sharing||t.secret_token||(t.secret_token=e.secret_token)}),e},extractSecretToken:function(e){return n(62).parse(e.uri).query.secret_token},duration:function(){return this.get("duration")},removeSound:function(e){if(e=this.findSound(e)){var t=this.getSoundIndex(e),n=this.get("tracks").slice();return this.currentSoundCursor>t&&--this.currentSoundCursor,e.isPlaying()&&e.pause(),this.toggleListeners(e,!1),n.splice(t,1),this.soundsCollection.remove(e),s.call(this),this.set("tracks",n),e.playlist=null,e.release(),!0}return!1},addSound:function(e){var t,i,r;return this.findSound(e)?!1:(t=n(3).defaults({resource_id:{playlist_id:this.id,sound_id:e.id}},e.attributes),i=new(n(64))(t,{suppressGlobalEvents:!0}),i.playlist=this,i.originalSound=e,this.addSubmodel(e),this.toggleListeners(i,!0),r=this.get("tracks"),r||(this.set("tracks",[],{silent:!0}),r=this.get("tracks")),this._playOrder.push(this.soundsCollection.length),r.push(i.attributes),this.soundsCollection.add(i),s.call(this,{silent:!0}),this.forceChange("tracks"),!0)},getCurrentOrder:function(){return this.soundsCollection.pluck("id")},reorder:function(e){var t=this.soundsCollection,n=this.getCurrentSound(),i=n&&n.id;t.sort({silent:!0,comparator:function(t){return e.indexOf(t.id)}}),this.currentSoundCursor=Math.max(0,e.indexOf(i)),this.set({tracks:this.soundsCollection.toJSON(),track_count:this.soundsCollection.length})},saveOrder:function(e){var t=this,i=this.soundsCollection.pluck("id"),r={playlist:{tracks:i}};return n(22).Model.prototype.save.call(this,{},n(3).assign({url:this.saveUrl(),data:JSON.stringify(r),contentType:"application/json",isSavingOrder:!0},e)).done(function(){n(56).broadcast({excludeThis:!0},c,{id:t.id,trackIds:i})})},getAttributesToBeSaved:function(){var e=n(65).prototype.getAttributesToBeSaved.call(this);return e.tracks&&(e.tracks=n(3).pluck(e.tracks,"id")),e},resetOrder:function(){var e=this;return this.fetch().done(function(){e.soundsCollection.each(function(e){e.playlist=null,e.release()}),e.soundsCollection.reset([],{silent:!0}),e.prepareSounds()})},hasDifferentCreators:function(){var e,t=this.get("user_id"),n=!1;return e=!this.soundsCollection.every(function(e){var i=e.get("user_id");return null==i?(n=!0,!0):i===t}),e||(n?null:e)},hasVisuals:function(){return!1}},{onCleanup:function(e){e.soundsCollection.each(function(e){e.playlist=null,e.release()}),e.soundsCollection.off(),delete e.soundsCollection,n(65).onCleanup(e)},resolve:function(e,t,i){return n(65)._resolve(this,[e,"sets",t,i],function(n){var i=n.get("user");return i&&n.get("permalink")===t&&i.permalink===e})}}),n(3).memoize(function(e){return function(t){return t[e]()}}))},,function(e,t){"use strict";e.exports={QUEUED:1,UPLOADING:2,FAILED:4,TRANSCODING:8,COMPLETE:16}},,,function(e,t,n){"use strict";var i=e.exports={codeToSymbol:function(e){var t=n(282).symbols[e];return t||e},format:function(e,t){switch(n(51).getLocale()){case"en":case"en_GB":return""+i.codeToSymbol(t)+e;case"fr":return e+" "+i.codeToSymbol(t);default:return""+e+i.codeToSymbol(t)}},getYearlyPercentageDiscount:function(e,t){return Math.floor(100*(1-t/(12*e)))+"%"},getYearlyDiscountAmount:function(e,t,n){var i=Math.round(12*e-t);return this.format(i,n)}}},,function(e,t,n){function i(e,t){return{title:e,value:t}}function r(e){return{title:a(e),value:e}}function o(e,t){return l.find(Object.keys(e),function(n){return e[n]===t})}function s(e){return l.reduce(e,function(e,t){return l.assign(e,t)},{})}function a(e){return c.titleCase(e.replace("_"," "))}var l=n(3),u=n(54),c=n(202),d=n(2667),h=s(d),p=["US","IE","GB","FR","PR","AS","GU","MP","VI","GG","JE","IM","GP","MQ","RE"],f=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","ES","SE","GB"];e.exports={countryToCode:function(e){return o(h,e)||""},codeToCountry:function(e){return h[e]||""},country:function(e){return new i(h[e],e)},countries:function(e){var t;return t=e&&e.length>0&&"worldwide"!==e[0]?s(l.chain(e).map(l.propertyOf(d)).compact().value()):h,l.chain(t).map(i).sortBy("title").value()},countryCodes:function(e){var t=e?d[e]:h;return t&&Object.keys(t)},monetizableCountryCodes:function(){var e=p;return u.get("rollouts").get("v2_monetization_au_nz")&&(e=e.concat(["AU","NZ"])),u.get("rollouts").get("v2_monetization_ca")&&(e=e.concat(["CA"])),e},regions:function(){return Object.keys(d).sort().map(r)},complement:function(e){return l.difference(Object.keys(h),e)},isEUCountry:function(e){return f.includes(e)}}},function(e,t,n){"use strict";function i(){f.forEach(function(e){"pending"===e.state()&&e.abort()}),f.length=0}function r(e,t,n,i){e.sound&&"rejected"!==t.state()?o.call(this,e,t,n,i):t.resolve()}function o(e,t,i,r){var o=e.sound;o.hold(),this.listenTo(o,"finish",this._onAdFinish).listenTo(o,"pause",this._onAdPause).listenTo(o,"play",this._onAdPlay).listenTo(o,"playStart",this._onAdPlayStart).listenTo(o,"time",this._onAdTime).listenTo(o,"time",this._onAdTimeIsInRequiredListenPeriod).listenTo(o,"time",this._createOnAdQuartile()),this._currentAd=e,this._upcomingSound=i,this._upcomingSound.hold(),o.play(n(3).assign({checkpointInterval:p},r))}function s(){var e=this.getCurrentSound();this.stopListening(e),e.pause(),e.release(),this._currentAd=null,this._upcomingSound.release(),this._upcomingSound=null}function a(e){return _().soundcloudUrlRegex.test(e||"")}function l(e,t){var i=v.getCurrentAd(),r=v.getCurrentSound(),o=i.get("audio"),s=i.get("companion_display"),a=r.getMonetizableTrack();switch(e){case"companion_display:impression":n(80).trackEvent("impression",s),n(58).trackImpression({ad_urn:s.ad_urn,external_media:s.ad_visual,impression_name:"companion_display",impression_object:r.getUrn(),context:t.context,monetization_type:"audio_ad",monetized_object:a.getUrn()});break;case"audio_ad:impression":n(80).trackEvent("impression",o),n(58).trackImpression({ad_urn:o.ad_urn,impression_name:"audio_ad_impression",impression_object:r.getUrn(),context:t.context,monetization_type:"audio_ad",monetized_object:a.getUrn()});break;case"companion_display:clickthrough":n(80).trackEvent("adClick",s),n(58).trackV0Click(null,{ad_urn:s.ad_urn,external_media:s.ad_visual,click_name:"clickthrough::companion_display",click_object:r.getUrn(),click_target:s.landing_page,context:t.context,monetization_type:"audio_ad",monetized_object:a.getUrn()});break;case"audio_ad:skip":n(80).trackEvent("skip",o),n(58).trackV0Click(null,{ad_urn:o.ad_urn,click_name:"ad::skip",click_object:r.getUrn(),external_media:s.ad_visual,context:t.context,monetization_type:"audio_ad",monetized_object:a.getUrn()});break;case"audio_ad:finish":n(80).trackEvent("finish",o),n(58).trackV0Click(null,{ad_urn:o.ad_urn,click_name:"ad::finish",click_object:r.getUrn(),external_media:s.ad_visual,context:t.context,monetization_type:"audio_ad",monetized_object:a.getUrn()});break;case"ad:first_quartile":case"ad:second_quartile":case"ad:third_quartile":var l=e.split(":"),u=l[1];n(80).trackEvent(u,o),n(58).trackV1Click({ad_urn:o.ad_urn,click_name:e.replace(":","::"),click_category:"monetization",click_object:r.getUrn(),external_media:s.ad_visual,context:t.context,monetization_type:"audio_ad",monetized_object:a.getUrn()});break;case"audio_ad:playStart":n(80).trackEvent("play",o)}}var u=void 0,c=1e3,d=c,h=15*c,p=3*c,f=[],g={},m={AD_PLAY:"ad:play",AD_PAUSE:"ad:pause",AD_SKIP:"ad:skip",AD_FINISH:"ad:finish",AD_PLAYSTART:"ad:playStart",AD_TIME:"ad:time",AD_FIRST_QUARTILE:"ad:first_quartile",AD_SECOND_QUARTILE:"ad:second_quartile",AD_THIRD_QUARTILE:"ad:third_quartile"},_=function(){return n(173)},v=e.exports=n(3).assign({},n(22).Events,{_adDeferred:null,_currentAd:null,_upcomingSound:null,states:{isInRequiredListenPeriod:{initial:!1},isAllowedToSkipImmediately:{initial:!1}},setAudioAd:function(e){u=e},prefetchAudioAd:function(e){n(3).delay(function(){var t=new u({id:e.id},{requiredListenPeriod:h}),n=y();t.configureMonetizableTrack(e),!t.isPopulated()&&n.enabled&&t.fetch().fail(n.failed).done(n.succeeded)},d)},isUserAdConsumer:function(){return!this._isUserInAdFreeArea()&&this._isUserInAdGroup()},getCurrentSound:function(){return this._currentAd&&this._currentAd.sound},getUpcomingSound:function(){return this._upcomingSound},getCurrentAd:function(){return this._currentAd},skip:function(e){if(v.isBlockedFromSkipping())return v._adDeferred;var t=v.getCurrentAd();return i(),t&&(v.trigger(m.AD_SKIP,t),v.metrics("audio_ad:skip",e),s.call(this)),(v._adDeferred||n(55).defer()).resolve()},whenAdFinished:function(e,t){var o=this,s=this._adDeferred,a=new u({id:e.id},{requiredListenPeriod:h}),l=y();return a.configureMonetizableTrack(e),s&&"pending"===s.state()?this.skip():a.sound&&g[a.sound.resource_id]?n(55).resolve():(s=this._adDeferred=n(55).defer(),!a.isPopulated()&&l.enabled?(v.toggleState("isInRequiredListenPeriod",!0),f.push(a.fetch().fail(function(){l.failed(),s.reject(),i()}).done(function(){l.succeeded(),r.call(o,a,s,e,t),i()}))):r.call(this,a,s,e,t),s.always(function(){v.toggleState("isInRequiredListenPeriod",!1)}),s)},metrics:function(e,t){v.getCurrentAd()&&v.getCurrentSound()&&l(e,t||{})},clicked:function(){var e=this.getCurrentAd(),t=e&&e.getLandingPage();return a(t)?(this.toggleState("isAllowedToSkipImmediately",!0),_().getAudibleModels([t]).then(function(e){var t=e[0];t=void 0===t?{}:t;var n=t.audible;return n})):n(55).reject()},isBlockedFromSkipping:function(){return!v.getState("isAllowedToSkipImmediately")&&v.getState("isInRequiredListenPeriod")},_onAdFinish:function(){var e=this.getCurrentAd(),t=this._adDeferred;v.trigger(m.AD_FINISH,e),s.call(this),t.resolve()},_onAdPause:function(){var e=v.getCurrentAd();v.trigger(m.AD_PAUSE,e)},_onAdPlay:function(){var e=v.getCurrentAd();v.trigger(m.AD_PLAY,e)},_onAdPlayStart:function(){var e=v.getCurrentAd();v.trigger(m.AD_PLAYSTART,e),v.toggleState("isAllowedToSkipImmediately",!1),v.toggleState("isInRequiredListenPeriod",!e.isSkippableRightNow()),g[e.sound.resource_id]=!0},_onAdTime:function(){var e=v.getCurrentAd();v.trigger(m.AD_TIME,e)},_createOnAdQuartile:function(){var e=.25,t=.5,n=.75,i=1,r=m.AD_FIRST_QUARTILE;return function(o){var s=v.getCurrentAd().sound,a=s.progress();if(!(a>i))switch(r){case m.AD_THIRD_QUARTILE:a>n&&(l(r,o),r=m.AD_FINISH);break;case m.AD_SECOND_QUARTILE:a>t&&(l(r,o),r=m.AD_THIRD_QUARTILE);break;case m.AD_FIRST_QUARTILE:a>e&&(l(r,o),r=m.AD_SECOND_QUARTILE);break;default:return}}},_onAdTimeIsInRequiredListenPeriod:function(){var e=v.getCurrentAd();v.toggleState("isInRequiredListenPeriod",!e.isSkippableRightNow()),e.getRequiredListenPeriod()&&e.isSkippableRightNow()&&v.stopListening(e.sound,"time",v._onAdTimeIsInRequiredListenPeriod)},_isUserInAdGroup:function(){return!n(54).get("me").getPerk("adFree")},_isUserInAdFreeArea:function(){var e=n(54).get("router").getLayoutInfo()||{};return"front"===e.layoutName}});n(322).applyTo(v);var y=n(3).memoize(function(){return new(n(155))({giveUp:1})})},function(e,t,n){var i=n(499),r=n(20);e.exports=function(e){return new r.SafeString(i.getAccessibleMarkup(e.hash))}},function(e,t,n){"use strict";e.exports=n(3).assign(n(630),{isHiDPI:window.devicePixelRatio?window.devicePixelRatio>1:!1,isJsEnabledBot:/googlebot/i.test(window.navigator.userAgent),desktop:!n(630).mobile&&!n(630).tablet})},function(e,t){"use strict";e.exports={INITIAL:"timed-comment-sm:initial",CURRENT_COMMENT:"timed-comment-sm:current-comment",CURRENT_TIMESTAMP:"timed-comment-sm:current-timestamp",ACTIVE_TIMESTAMP:"timed-comment-sm:active-timestamp"}},function(e,t,n){"use strict";var i=e.exports=n(156).extend({nullable:!0,validate:function(e,t){var i=n(55).defer();return null==t?this.result(i,this.nullable):this.check(t,this.result.bind(this,i)),i}});n(422).applyTo(i.prototype)},function(e,t,n){"use strict";function i(e){try{if(e.getItem){var t=Date.now();return e.setItem(t,t),e.removeItem(t),!0}}catch(n){}return!1}e.exports=n(3).reduce({sessionStorage:function(){try{return"undefined"!=typeof window.sessionStorage&&i(window.sessionStorage)}catch(e){return!1}},localStorage:function(){try{return"undefined"!=typeof window.localStorage&&i(window.localStorage)}catch(e){return!1}},dragDrop:function(){var e=window.document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},webSocket:function(){return window.WebSocket},WebWorker:function(){return window.Worker},svg:function(){return window.document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")},touch:function(){try{return window.hasOwnProperty("ontouchstart")}catch(e){return!1}},typedArrays:function(){return window.hasOwnProperty("Uint8Array")},pushState:function(){return window.history&&window.history.pushState},formData:function(){return window.FormData},corsImg:function(){return!1},MutationObserver:function(){return window.MutationObserver},getUserMedia:function(){return window.navigator.getUserMedia},audioTabIndicator:function(){return n(95).chrome||n(95).gecko},blob:function(){try{return new window.Blob}catch(e){return!1}},Notification:function(){return window.Notification},sendBeacon:function(){return window.navigator.sendBeacon}},function(e,t,n){return e[n]=!!t(),e},{})},function(e,t,n){(function(t){"use strict";function i(e,t){var i=t+"d",a="resize"===e?r(i):s.trigger.bind(s,e+":"+i);return n(3)[t](a,o)}function r(e){var t=window.innerWidth,n=window.innerHeight,i=s.trigger.bind(s,"resize:x:"+e),r=s.trigger.bind(s,"resize:y:"+e),o=s.trigger.bind(s,"resize:"+e);return function(e){var s=window.innerWidth,a=window.innerHeight;s!==t&&i(e),a!==n&&r(e),o(e),n=a,t=s}}var o=200,s=e.exports=n(3).assign({},n(22).Events);t(window).on("resize",i("resize","debounce")).on("resize",i("resize","throttle")).on("scroll",i("scroll","debounce")).on("scroll",i("scroll","throttle"))}).call(t,n(1))},function(e,t,n){function i(e,t){e.indexOf(t)<0&&e.push(t)}var r=n(3),o={comments:"comment",playlists:"playlist",sounds:"track",tracks:"track",users:"user"},s={comments:"comment",playlists:"playlist",sounds:"sound",tracks:"sound",users:"user","artist-stations":"station","track-stations":"station"},a={comment:"comments",playlist:"playlists",sound:"tracks",track:"tracks",user:"users"},l={sets:"playlists",sounds:"tracks",people:"users"},u=r.reduce(l,function(e,t,n){return e[t]=e[t]||[],e[n]=e[n]||[],i(e[t],n),i(e[n],t),e},{}),c=r.negate(RegExp.prototype.test.bind(/\D/));e.exports={toComponents:function(e){var t=e.split(":");return c(t[2])&&(t[2]=parseInt(t[2],10)),{domain:t[0],collection:t[1],id:t[2]}},fromComponents:function(e){return[e.domain||"soundcloud",e.collection,e.id].join(":")},getAsAttributes:function(e){var t=e.split(":"),n=t[2],i=s[t[1]];return c(n)&&(n=parseInt(n,10)),"user"===i&&"system"===n&&(n=193),{id:n,kind:o[t[1]],resource_type:i}},generate:function(e,t){if("station"===e)return t;var n=a[e];return n?"soundcloud:"+n+":"+t:null},getAlternateUrns:function(e){var t=e.split(":"),n=t[1],i=u[n];return i?i.map(function(e){return t[0]+":"+e+":"+t[2]}):null},getCanonicalUrn:function(e){var t=e.split(":"),n=t[1],i=l[n];return i?(t[1]=i,t.join(":")):e}}},,,function(e,t){"use strict";e.exports={start:"auth::start",abort:"auth::abort",initiate:"initiate",need_help:"auth::need_help",forgot_email:"auth::forgot_email",forgot_password:"auth::forgot_password",reset_email_continue:"auth::reset_email_continue",sign_in_error:"sign_in::error",sign_up_error:"sign_up::error",sign_in_success:"sign_in_success",sign_up_success:"sign_up_success",sign_out:"sign_out"}},,function(e,t,n){(function(t){"use strict";var i=1/0;e.exports=n(65).extend(n(429),{resource_type:"comment",urnPrefix:"soundcloud:comments",parse:function(e){return null===e.timestamp&&(e.timestamp=i),e},submodelMap:{track:n(64),user:n(60)},baseUrl:function(){return this.getEndpointUrl("comment",{id:this.id})},saveUrl:function(){var e=this.getSound(),t=["tracks",e.id,"comments"].join("/"),i=e.get("secret_token");return i&&e.isPrivate()?n(62).modify(t,{query:{secret_token:i}}):t},destroyUrl:function(){return["tracks",this.getSoundId(),"comments",this.id].join("/")},getAttributesToBeSaved:function(){return this.pick("body","timestamp")},setReplyTo:function(e){this.set("replyTo",e.id),this.trigger("change:recipient",e.get("user").permalink)},hasDataForView:function(e){return n(65).prototype.hasDataForView.call(this,n(3).without(e,"id"))},getSound:function(){var e=this.getSoundId(),t=n(64).hashFn({id:e,resource_type:"sound"}),i=n(64).instances.get(t);return!i&&e&&(i=new(n(64))(this.get("track")||{id:e}),this.addSubmodel(i)),i},destroy:function(e){return this.isNew()||n(73).notify("comment",{object:this,target:this.getSoundId(),targetType:"sound",state:!1}),n(65).prototype.destroy.call(this,e)},getSoundId:function(){return this.get("track_id")||(this.get("track")||{}).id},reportAsSpam:function(){var e=this;t.post("i1/comments/"+this.id+"/spam",function(){e.trigger("destroy",e,e.collection)})}},{EMPTY_TIMESTAMP:i})}).call(t,n(1))},,,function(e,t,n){"use strict";e.exports=n(97).extend({maxLength:100,message:n(51).t("[[maxLength]] characters max"),check:function(e,t){t(e.length<=this.maxLength)}})},,,function(e,t,n){"use strict";var i=e.exports=n(251).extend();n(1312).applyTo(i.prototype),n(943).applyTo(i.prototype)},function(e,t,n){"use strict";function i(){var e=n(54).get("router").getLayoutInfo(),t=e&&"signin"===e.layoutName;return v(S,{query:{redirect_uri:t?y():window.location.href}})}function r(){return"resolved"===A.state()}function o(){return E||(E=m(w,{onerror:function(){A.reject(),A=n(55).defer(),E=null}})),A.promise()}function s(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.promptUser,i=void 0===t?!0:t,r=n(55).defer();return d().then(function(e){e?a(r,window.FB.getAuthResponse()):T&&!T.closed?T.focus():i?T=_(function(){window.FB.login(function(e){return a(r,e.authResponse)},{scope:x})}):r.reject()}),r.promise()}function a(e,t){var n=t&&t.accessToken;n?e.resolve(n):e.reject()}function l(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.size,i=void 0===t?200:t;return d().then(function(e){return e?u("/me"):n(55).reject()}).then(function(e){var t={width:i,height:i};return u("/"+e.id+"/picture",t).then(function(t){return n(55).resolve({name:e.name,picture_url:t.data.url})})})}function u(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n(55).defer();return s().then(function(n){window.FB.api(e,f({access_token:n},t),i.resolve)},i.reject),i.promise()}function c(){var e=n(55).defer();return r()?window.FB.getLoginStatus(function(t){return e.resolve(t.status)}):e.reject(),e.promise()}function d(){return c().then(function(e){return n(55).resolve("connected"===e)},function(){return n(55).resolve(!1)})}function h(e){window.FB.XFBML.parse(e)}function p(e){return function(){return e.apply(void 0,arguments)}}var f=n(3).extend,g=n(3).mapObject,m=n(148).insertScript,_=n(284).interceptPopup,v=n(62).modify,y=n(62).getWindowOrigin,b="//connect.facebook.net/en_US/all.js",w=b,x=["email","user_birthday","publish_actions"].join(","),k=n(54).get("fb_app_id"),S="https://www.facebook.com/dialog/oauth?client_id="+k+"&scope="+x+"&response_type=token",T=null,E=null,A=n(55).defer();e.exports=f({loadFacebookSDK:o,isFacebookSDKReady:r,getFacebookLoginLink:i},g({parseXFBML:h,getFacebookToken:s,getCurrentFacebookUser:l},p)),window.fbAsyncInit=function(){window.FB.init({appId:k,status:!1,cookie:!0,xfbml:!0}),delete window.fbAsyncInit,A.resolve()}},function(e,t){"use strict";e.exports={ALT:18,BACKSPACE:8,CTRL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESC:27,HOME:36,INSERT:45,LEFT:37,META:97,PGDOWN:34,PGUP:33,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,COMMA:188,HASH:220}},function(e,t,n){(function(t){"use strict";function i(){var e,n,i,r,o=window,s=o.history&&o.history.state&&o.history.state.scrollTop,a=o.document.documentElement,l=o.document.body;null!=s?(i=function(){n?n=!1:(o.clearTimeout(e),t(o).off("scroll",i),e=null)},(r=function(){n=!0,a.scrollTop=l.scrollTop=s,(a.scrollTop||l.scrollTop)===s?(t(o).off("scroll",i),e=null):(e||t(o).on("scroll",i),e=o.setTimeout(r,100))})()):a.scrollTop=l.scrollTop=0}var r="l-footer",o=e.exports=n(22).View.extend({css:null,template:null,tracking:null,views:null,_currentViews:null,slots:null,includeFooter:null,footerClassName:"sc-border-light-top",displayHeader:!0,initialize:function(){this.views={},this._currentViews={}},setArgs:function(e){this.args=e||{}},setup:function(){var e=n(55).defer();return n(3).defer(e.resolve),e},dispose:function(){n(3).invoke(this._currentViews,"_dispose"),n(3).invoke(this.views,"_dispose"),this.$el.remove(),delete this.slots,delete this.views,delete this._currentViews},switchLayout:function(e){e&&(n(3).invoke(this._currentViews,"_dispose"),n(3).invoke(this.views,"_dispose"),this.template=e.template,this.includeFooter=e.includeFooter,this.slots=null,this.$el.empty())},getTemplateData:n(3).noop,render:function(){var e,o;return this.includeFooter&&(e=this.views[r]),""===this.el.innerHTML&&(n(252).render(this.template,this.getTemplateData(),this.el),this.slots={},n(3).each(this.views,function(e,t){this.slots[t]=this.$("."+t)[0]},this)),n(3).each(this.views,function(e,t){this._currentViews[t]!==e&&(this._currentViews[t]&&this._currentViews[t]._dispose(),e.render(),t!==r&&this.slots[t].appendChild(e.el),this._currentViews[t]=e)},this),o=this.$(this.includeFooter),e&&!e.disposed&&o[0]&&o.append(e.$el.addClass(this.footerClassName)),t(window.document.body).toggleClass("m-hideHeader",!this.displayHeader),i(),this.renderDecorate(),this},renderDecorate:n(3).noop,setViews:function(e){this.includeFooter&&(e[r]=[n(988)]);var t=n(55).defer();return n(3).each(e,function(e,t){var n=e[0],i=e[1];this._currentViews[t]&&this._currentViews[t].isEquivalentTo(n,i)||(this.views[t]=new n(i))},this),n(3).delay(t.resolve.bind(t)),t},getChangeEventData:function(e){var t;return t=n(3).mapObject(this.tracking,function(e,t){return n(3).isFunction(e)?e.call(this):e},this),{layoutName:e,tracking:t,args:this.args}},setTitle:function(e,t){n(319).set(e,t)},t:n(51).t,tp:n(51).tp});n(1308).applyTo(o.prototype)}).call(t,n(1))},function(e,t){"use strict";e.exports={ACCOUNT_FROZEN:"account_frozen",ACTION_DENIED:"action_denied",BAD_REQUEST:"bad_request",CEASE_AND_DESIST:"cease_and_desist",INVALID_SCOPE:"invalid scope",INVALID_CREDENTIALS:"invalid_credentials",INVALID_IDENTIFIER:"invalid_identifier",INVALID_EMAIL:"invalid_email",INVALID_PASSWORD:"invalid_password",INVALID_PROVIDER_TOKEN:"invalid_provider_token",INVALID_EMAIL_SIGNUP_TOKEN:"invalid_email_sign_up_token",INVALID_REQUEST:"invalid_request",EMAIL_ALREADY_IN_USE:"email_already_in_use",EMAIL_DOMAIN_BLACKLISTED:"email_domain_blacklisted",NOT_FOUND:"not_found",RECAPTCHA_FAILED:"captcha_failed",RECAPTCHA_REQUIRED:"captcha_required",USER_EXISTS:"user_exists",PASSWORD_RESET_REQUIRED:"password_reset_required"}},function(e,t,n){"use strict";var i=e.exports=n(65).extend({url:null,lastFetchTime:1,initialize:function(e){e=e||{},this.id||(e.id=this.id=this.cid,i.instances.set(this.id,this)),this.fatal=!!e.fatal,n(65).prototype.initialize.apply(this,arguments)}},{fromSpamWarning:function(e){try{var t=function(){var t=JSON.parse(e.responseText).errors[0];if(!["reason_phrase","warning_level"].every(function(e){return t[e]}))return{v:null};var n=t.reason_phrase;return{v:new i({xhr:e,error:t,message:n})}}();if("object"==typeof t)return t.v}catch(n){return null}},raise:function(e,t){var r=new i(e);if(r.release(),t=t||{},t.hard)throw r;n(56).trigger("exception",r)},ajaxFatal:function(e){return function(t,r){"abort"!==r&&i.raise(n(3).assign(e,{xhr:t,fatal:!0}))}},ajaxNonFatal:function(e){return function(t,n){"abort"!==n&&i.raise({message:e,xhr:t,fatal:!1})}}})},,function(e,t){e.exports=function(e,t,n){return("function"==typeof e?e():e)?t:n}},,,,function(e,t,n){"use strict";function i(e){return e.toLowerCase().replace(/[^a-z]/g,"").replace(/^(drumnbass|dn?b)$/,"drumbass").replace(/^(rn?b|soul)$/,"rbsoul").replace(/^(rap|hiphop)$/,"hiphoprap").replace(/^folk$/,"folksingersongwriter").replace(/^(jazz|blues)$/,"jazzblues").replace(/^(dance|edm)$/,"danceedm")}function r(e){return n(3).findWhere(n(241).genres,{id:e})}var o=e.exports={genreLabel:function(e){return a[e]},genres:function(e){return n(3).where(n(241).genres,{category:e})},getGenre:r,genreUrn:function(e){return"soundcloud:genres:"+e},chartKindLabel:function(e){return s[e]},chartKinds:function(){return n(241).kinds},userGenreToChartGenre:function(e){return e&&r(i(e))||r("all-music")},isGenreLabel:function(e){return e&&n(3).contains(l,e)},taglines:function(e,t){var i=o.genreLabel(t),r=o.getGenre(t),s=r.category,a=r.content,l=s+"-"+e+"-"+a;switch(l){case"all-trending-music":return{"short":n(51).t("New &amp; hot tracks"),"long":n(51).t("Up-and-coming tracks on SoundCloud")};case"all-trending-audio":return{"short":n(51).t("New &amp; hot audio"),"long":n(51).t("Up-and-coming audio on SoundCloud")};case"all-top-music":return{"short":n(51).t("Top 50 tracks"),"long":n(51).t("The most played tracks on SoundCloud this week")};case"all-top-audio":return{"short":n(51).t("Top 50 audio"),"long":n(51).t("The most played audio on SoundCloud this week")};case"music-trending-music":return{"short":n(51).t("New &amp; hot in [[[genreLabel]]]",{genreLabel:i}),"long":n(51).t("Up-and-coming tracks in [[[genreLabel]]] on SoundCloud",{genreLabel:i})};case"music-top-music":return{"short":n(51).t("Top 50 in [[[genreLabel]]]",{genreLabel:i}),"long":n(51).t("The most played tracks in [[[genreLabel]]] on SoundCloud this week",{genreLabel:i})};case"audio-trending-audio":return{"short":n(51).t("New &amp; hot in [[[genreLabel]]]",{genreLabel:i}),"long":n(51).t("Up-and-coming in [[[genreLabel]]] on SoundCloud",{genreLabel:i})};case"audio-top-audio":return{"short":n(51).t("Top 50 in [[[genreLabel]]]",{genreLabel:i}),"long":n(51).t("The most played in [[[genreLabel]]] on SoundCloud this week",{genreLabel:i})}}}},s={trending:n(51).t("New &amp; hot"),top:n(51).t("Top 50")},a={"all-music":n(51).t("All music genres"),"all-audio":n(51).t("All audio genres"),alternativerock:n(51).t("Alternative Rock"),ambient:n(51).t("Ambient"),classical:n(51).t("Classical"),country:n(51).t("Country"),danceedm:n(51).t("Dance &amp; EDM"),dancehall:n(51).t("Dancehall"),deephouse:n(51).t("Deep House"),disco:n(51).t("Disco"),drumbass:n(51).t("Drum &amp; Bass"),dubstep:n(51).t("Dubstep"),electronic:n(51).t("Electronic"),folksingersongwriter:n(51).t("Folk &amp; Singer-Songwriter"),hiphoprap:n(51).t("Hip-hop &amp; Rap"),house:n(51).t("House"),indie:n(51).t("Indie"),jazzblues:n(51).t("Jazz &amp; Blues"),latin:n(51).t("Latin"),metal:n(51).t("Metal"),piano:n(51).t("Piano"),pop:n(51).t("Pop"),rbsoul:n(51).t("R&B &amp; Soul"),reggae:n(51).t("Reggae"),reggaeton:n(51).t("Reggaeton"),rock:n(51).t("Rock"),soundtrack:n(51).t("Soundtrack"),speech:n(51).t("Speech"),techno:n(51).t("Techno"),trance:n(51).t("Trance"),trap:n(51).t("Trap"),triphop:n(51).t("Triphop"),world:n(51).t("World"),audiobooks:n(51).t("Audiobooks"),business:n(51).t("Business"),comedy:n(51).t("Comedy"),entertainment:n(51).t("Entertainment"),learning:n(51).t("Learning"),newspolitics:n(51).t("News &amp; Politics"),religionspirituality:n(51).t("Religion &amp; Spirituality"),science:n(51).t("Science"),sports:n(51).t("Sports"),storytelling:n(51).t("Storytelling"),technology:n(51).t("Technology")},l=n(3).values(a).map(function(e){return e.toString()})},function(e,t,n){"use strict";var i="all-rights-reserved",r="no-rights-reserved",o="commons",s="cc-by",a={attribution:"by",nonCommercial:"nc",nonDerivative:"nd",shareAlike:"sa"},l=e.exports={ALL_RIGHTS:i,NO_RIGHTS:r,COMMONS:o,DEFAULT_CC:s,ccFields:a,parse:function(e){var t={license:e===i?i:e===r?r:o};return e?(t.license===o&&n(3).each(a,function(n,i){t[i]=e.indexOf(n)>-1}),t):t},toURL:function(e){var t,n="string"==typeof e?l.parse(e):e;return n.license===o?(t=l.serializeCCAttributes(n).replace(/^cc-/,""),"http://creativecommons.org/licenses/"+t+"/3.0/"):""},serializeCCAttributes:function(e){var t=Object.keys(a).map(function(t){return e[t]&&a[t]},this).filter(n(3).identity).join("-");return t?"cc-"+t:s}}},function(e,t,n){"use strict";function i(){return n(3).find(this.sources,r,this)}function r(e,t){if(this._ignoredCollections.indexOf(t)>-1)return!1;var n=e.isFullyPopulated(),i=p.call(this,e);return(!n||i<e.length)&&!f.call(this,e)}function o(e,t){var n=e?"on":"off";t[n]("all",d,this)[n]("add",u,this)[n]("reset",l,this)[n]("remove",c,this)}function s(){this._map=n(3).assign({blacklist:new(n(629))},this.filters.map(function(){return new(n(629))}))}function a(e){var t=this,n=0;return this.sources.some(function(i,r){return i===e?!0:void(n+=t._sourceModelCounts[r])}),n}function l(e,t){var n=this,i=0===this._sourceModels.length;t&&t.previousModels&&t.previousModels.length&&t.previousModels.reduceRight(function(t,i,r){c.call(n,i,e,{index:r})},null);var r=this._sourceModels.length;e.models.forEach(function(t){u.call(n,t,e,{silent:i})});var o=this._sourceModels.length,s=o>r,a=i&&s||0===o&&this.isFullyPopulated();(a||s)&&(this.lastFetchTime=Date.now()),a&&this.trigger("reset",this,{})}function u(e,t,n){var i=t.indexOf(e);if(P.call(this,i,t,!0)){var r=i+a.call(this,t);this.lastFetchTime=Date.now(),0!==this._sourceModels.length||n.silent||this.trigger("reset",this,{}),y.call(this,e,t,r,n)}}function c(e,t,n){var i=n.index;if(P.call(this,i,t,!1)){var r=i+a.call(this,t);b.call(this,e,t,r)}}function d(e){switch(e){case"add":case"remove":case"reset":case"destroy":return;default:this.trigger.apply(this,arguments)}}function h(e,t){var n=this,i=this.length,r=this._sourceModels.length,o=r,s=i+e,a={silent:t},l=!this.lastFetchTime;return this.sources.every(function(t,i){var u,c,d,h;do{for(u=t.models.slice(r,r+e),d=u.length,d&&(n.lastFetchTime=t.lastFetchTime||Date.now(),l&&(l=!1,n.trigger("reset",n,{}))),h=n.length;c=u.shift();)r++,y.call(n,c,t,o++,a);e-=n.length-h}while(n.length<s&&d&&!f.call(n,t));return r-=n._sourceModelCounts[i],n.length<s&&(t.isFullyPopulated()||f.call(n,t))}),!this.lastFetchTime&&this.sources.every(function(e){return e.isFullyPopulated()})&&(this.lastFetchTime=Date.now()),this.length>i}function p(e){return this._sourceModelCounts[this.sources.indexOf(e)]}function f(e){var t=this.sourceOptions[this.sources.indexOf(e)];if(null==t.maxModels)return!1;var n=this._ignore,i=p.call(this,e),r=a.call(this,e),o=r+i,s=g(n,r,o),l=i-s;return t.maxModels<=l}function g(e,t,i){var r=n(3).sortedIndex(e,t),o=n(3).sortedIndex(e,i);return o-r+(e[o]===i?1:0)}function m(e){for(var t=e,n=0,i=this._ignore.length;i>n&&this._ignore[n]<=t;++n)++t;return t}function _(e){var t,n,i,r,o=m.call(this,e);if(e>-1)for(t=0,n=this.sources.length;n>t;++t){if(i=this.sources[t],r=p.call(this,i),!(o>=r))return{source:i,index:o,model:i.at(o)};o-=r}}function v(e){var t=this.sources.indexOf(e);t>-1&&t<this.sources.length-1&&this._ignoredCollections.push(t)}function y(e,t,n,i){var r,o,s,a=this,l=this._map,u=function(e,t,i){e>n&&i[t]++};o=n===this._sourceModels.length?function(e,t){
e.push(t)}:function(e,t){e.splice(n,0,t)},e instanceof this.model||(e=this.extractModel(e,n)),e&&(this._sourceModelCounts[this.sources.indexOf(t)]++,r=this.indexesOfEquivalentModels(e,this._sourceModels),r.forEach(function(e){e>=n&&a._dupes[e].push(n)}),o(this._sourceModels,e),o(this._dupes,r.filter(function(e){return n>e})),this._dupes.slice(n).forEach(function(e,t){var i=t+n;a._dupes[i].forEach(u)}),s=this._blacklistedIds.indexOf(e.cid),l.blacklist.insert(n,-1===s),this.filters.forEach(function(t,i){l[i].insert(n,!!t.call(a,e,n))}),x.call(this),k.call(this,i))}function b(e,t,i){var r,o=this,s=this._map,a=function(e,t,n){e>i&&n[t]--};r=i===this._sourceModels.length-1?function(e){e.pop()}:function(e){e.splice(i,1)},r(this._sourceModels),r(this._dupes),n(3).each(s,function(e){e.remove(i)}),this._dupes.slice(i).forEach(function(e,t){var r=t+i;o._dupes[r]=n(3).without(o._dupes[r],i),o._dupes[r].forEach(a)}),this._sourceModelCounts[this.sources.indexOf(t)]--,x.call(this),k.call(this)}function w(e,t){var n=this;this._sourceModels.forEach(function(i,r){n.compareModels(e,i)&&n._map.blacklist.set(r,t)}),x.call(this),k.call(this)}function x(){var e,t=this._map,i=0,r=n(629).combine(n(3).values(t)),o=function(e,t){return e&&!r.get(t)};for(e=0;e<this.sources.length;++e){var s=this.sourceOptions[e].maxModels,a=p.call(this,this.sources[e]);if(null!=s){var l=D(r,!0,s,i,i+a-1);i+a>l&&r.clearRange(l,i+a-1)}i+=a}for(e=0;e<this._sourceModels.length;++e)r.get(e)&&r.set(e,0===this._dupes[e].length||this._dupes[e].reduce(o,!0));this._ignore=r.getIndexes(!1)}function k(e){var t=this;n(1266).align({source:this.models,target:this._sourceModels.filter(S,this),comparator:this.compareModels,add:function(i,r){t.add(i,n(3).defaults({at:r,parse:!1},e))},remove:function(e,n){t.remove(t.at(n),{_propagateToSource:!1})}})}function S(e,t){var i=n(3).sortedIndex(this._ignore,t);return this._ignore[i]!==t}function T(e){var t;return e=n(3).clone(e)||{},h.call(this,this.options.limit,e.silent)||(t=i.call(this)),t?E.call(this,t,e):n(55).resolve({})}function E(e,t){var i=this,r=this.options.limit,o=this._sourceModels.length+r,s=e.options.limit;return t.reset=!this.isPopulated(),t.remove=!1,e.setLimit(r),e.fetchUntilResults(t).always(function(){e.setLimit(s)}).then(function(){return A.call(i,t,o)}).then(null,function(){var r=e===n(3).last(i.sources);return r?void 0:(v.call(i,e),A.call(i,t,o))})}function A(e,t){var i=this,r=this.options.limit,o=t-this._sourceModels.length;return o>0?(this.options.limit=o,T.call(this,n(3).omit(e,"url")).always(function(){i.options.limit=r})):void 0}function C(e){function t(){i.cache={}}var i=n(3).memoize(function(){return e.apply(this,arguments).always(t)});return i}function I(){var e=this.setupSources();this.sources=e.map(function(e){return[].concat(e)[0]}),this.sourceOptions=e.map(function(e){return[].concat(e)[1]||{}}),this._sourceModelCounts=e.map(function(){return 0})}function D(e,t,n){var i,r=arguments.length<=3||void 0===arguments[3]?0:arguments[3],o=arguments.length<=4||void 0===arguments[4]?e.length-1:arguments[4],s=0;for(i=r;o>=i&&n>s;++i)e.get(i)===t&&++s;return i}function P(e,t,n){var i=this.sources.indexOf(t),o=this._sourceModelCounts[i];return o>e?!0:n&&e===o?!this.sources.slice(0,i).some(r,this):!1}e.exports=n(72).extend({sources:null,sourceOptions:null,_sourceModelCounts:null,_sourceModels:null,filters:null,_map:null,_dupes:null,_blacklistedIds:[],_ignore:null,_bulkFetchDeferred:null,_ignoredCollections:null,setup:function(){I.call(this),this.sources.forEach(o.bind(this,!0)),this._sourceModels=[],this._dupes=[],this.filters||(this.filters=[]),s.call(this),this._ignore=[],this._ignoredCollections=[],this._blacklistedIds=[],this.fetch=C(T),h.call(this,this.options.limit,!0)},setupSources:function(){},setLimit:function(e){this.options.limit=e},bulkFetch:function(e,t){var i,r=this,o=this.options.limit,s=e-this.length;return i=this._bulkFetchDeferred,i&&!t?i:(i||(i=this._bulkFetchDeferred=n(55).defer().always(function(){r._bulkFetchDeferred=null,r.options.limit=o})),0>=s||this.isFullyPopulated()?i.resolve():(this.options.limit=s,this.fetch({reset:!0}).done(function(){r.bulkFetch(e,!0)}).fail(i.reject),i))},audibleAt:function(e){var t=_.call(this,e),n=t.source,i=t.index;if(n.audibleAt)return n.audibleAt(i);var r=this.at(e);return"sound"===r.resource_type||"playlist"===r.resource_type?r:null},extractModel:null,blacklist:function(e){this._blacklistedIds.push(e.cid),w.call(this,e,!1)},unblacklist:function(e){this._blacklistedIds=n(3).reject(this._blacklistedIds,function(t){return t===e.cid}),w.call(this,e,!0)},remove:function(e,t){var i=!t||void 0===t._propagateToSource||t._propagateToSource;return i?(Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=_.call(this,this.indexOf(e));t&&t.source.remove(t.model)},this)):n(72).prototype.remove.call(this,e,n(3).defaults({_propagateToSource:!1},t)),this},isFullyPopulated:function(){return!i.call(this)},getNumSourceModels:function(){return this._sourceModels.length},recalculateFilters:function(){var e=this,t=this._ignore;this.filters.forEach(function(t,n){e._sourceModels.forEach(function(i,r){e._map[n].set(r,t.call(e,i,r))})}),x.call(this),n(500).multisetCompare(t,this._ignore)||(this.trigger("filterChanged"),k.call(this))}},{onCleanup:function(e){for(var t;t=e.sources.pop();)t.release(),o.call(e,!1,t);this._sourceModels=this._map=null}})},function(e,t,n){"use strict";var i="track",r="artist",o={ARTIST:r,TRACK:i},s=n(938).withOptions({batchEndpoint:"stationBatch",paramName:"urns"});e.exports=n(65).extend(s,n(247).withOptions({read:"artwork_url"}),n(248).withOptions({attr:"title"}),{resource_type:"station",baseUrl:function(){return this.getEndpointUrl("station",{urn:this.id})},getUrn:function(){return this.id},getImageResourceInfo:function(){var e=n(100).getAsAttributes(this.id),t=e.id;switch(this.get("type")){case i:return{Model:n(64),args:{id:t}};case r:return{Model:n(60),args:{id:t}};default:return null}}},{types:o,resolve:function(e,t){var i=e+"/"+t;return n(65)._resolve(this,["stations",e,t],function(e){return e.get("permalink")===i})}})},,,function(e,t){"use strict";e.exports={CANCELING:"canceling",EDITING:"editing",NONE:"none",SAVING:"saving"}},,function(e,t,n){"use strict";function i(e,t){var i=o(t);return"<"+n(3).compact([e,i]).join(" ")+">"}function r(e){return"</"+e+">"}function o(e){return n(3).map(e,function(e,t){return t+'="'+e+'"'}).join(" ")}e.exports={el:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];return i(e,t)+n.join("")+r(e)},voidEl:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return i(e,t)},subview:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n(523).registerSubview(e,t)}}},,,,,,function(e,t,n){function i(e){var t=0;return t=10>e?2:100>e?1:0}var r,o=n(3),s=n(51),a=["K","M","B"];r={max:null,suffix:"+",useSIUnits:!1,precision:null};e.exports={render:function(e,t){if("number"!=typeof e)return e;var n=0,l="",u=0;if(t=t||{},o.defaults(t,r),t.max&&e>t.max)e=t.max,l=t.suffix;else if(t.useSIUnits){if(null===t.precision&&1e4>e)return s.numberHelper.format(e);for(;e>=1e3&&n<a.length;)e/=1e3,l=a[n++];u=null!==t.precision?t.precision:i(e)}return s.numberHelper.format(e,{precision:u,roundingFn:Math.floor})+l}}},function(e,t,n){"use strict";var i={buttonText:n(51).t("I need help"),buttonLink:"http://help.soundcloud.com"},r={buttonText:n(51).t("Get latest status"),buttonLink:"http://status.soundcloud.com"};e.exports={UNKNOWN:n(3).assign({title:n(51).t("Something doesnt sound right."),message:n(51).t("A report has been sent to our tech team,<br> and theyre looking into the problem.<br>Please check back in a bit.")},r),PAGE_NOT_FOUND:n(3).assign({title:n(51).t("We cant find that page.")},i),SOUND_NOT_FOUND:n(3).assign({title:n(51).t("We cant find that track."),message:n(51).t("Did you try to access a private track while not being signed in?<br>Maybe the track has been removed.")},i),PLAYLIST_NOT_FOUND:n(3).assign({title:n(51).t("We cant find that playlist."),message:n(51).t("Did you try to access a private playlist while not being signed in?<br>Maybe the playlist has been removed.")},i),STATION_NOT_FOUND:n(3).assign({title:n(51).t("We cant find that station.")},i),USER_NOT_FOUND:n(3).assign({title:n(51).t("We cant find that user.")},i),USER_INFO_NOT_LOADED:n(3).assign({title:n(51).t("Were unable to load your profile information at the moment.")},i)}},,function(e,t,n){"use strict";var i;i=["q","q[fulltext]","filter.duration","filter.created_at","filter.license","filter.genre","filter.genre_or_tag","filter.place","query_urn"];e.exports={highlightText:function(e,t,i){var r,o=n(3).assign({start:"<b>",end:"</b>"},i),s=e.split("");if(!t)return e;for(r=t.length;r--;)s.splice(t[r].end,0,o.end),s.splice(t[r].start,0,o.start);return s.join("")},getParams:function(){var e=n(62).parse(window.location.href);return this.getValidParams(e.query)},getValidParams:function(e){return n(3).pick(e,i)},modifyParamsWith:function(e,t){var i={},r=this.getParams();return void 0===t&&r.hasOwnProperty(e)?delete r[e]:(i[e]=t,n(3).assign(r,i)),n(62).stringify({query:r})},getFilters:function(e){var t={},i=/^filter\./;return e=e||this.getParams(),n(3).each(e,function(e,n){i.test(n)&&(t[n]=e)}),n(3).isEmpty(t)?void 0:t},fuzzy:function(e,t,i){var r,o=e.replace(/\W+/gi,"").split(""),s=new RegExp("\\b("+o.join(").*?(")+")","i");return e?(r=t.map(function(t){var r,o,a=(i?t.get?t.get(i):t[i]:t).toString(),l=n(304)(a),u=s.exec(l),c=[];if(u){for(r=u.index,o=1;o<u.length;++o)r=l.indexOf(u[o].toLowerCase(),r)+1,c.push({start:r-1,end:r});for(o=c.length;--o;)c[o-1].end===c[o].start&&(c[o-1].end=c[o].end,c.splice(o,1));return{item:t,highlights:c,score:e.length/u[0].length/a.length-c.length}}}).filter(Boolean),r.sort(function(e,t){return t.score-e.score}),r):t.map(function(e){return{item:e,highlights:[],score:1}})},searchCategoryToFacet:function(e){return{sounds:"sound",high_tier:"sound",sets:"set",playlists:"set",albums:"album",people:"person"}[e]},facetToSearchCategory:function(e){return{sound:"sounds",set:"playlists",person:"people"}[e]}}},function(e,t,n){"use strict";function i(){return this.isEdit?n(55).resolve():n(426).confirm(n(51).t("Are you sure you want to stop your upload? Any unsaved changes will be lost."))}function r(){return this.validate().then(function(e){return n(55)[e?"resolve":"reject"]()})}function o(){this.isDirty()||this.setToModelAttributes()}function s(e){var t,i=n(485).instances.get(n(63).currentUserId());i&&(t=n(295).convert(e),i.add(t,{at:0}),t.release())}var a=n(58).trackUploadFunnel,l=n(58).trackV0Click;e.exports=n(82).extend(n(935),n(193),n(936),n(1307),n(932),n(931),{fields:{offlineSyncEnabled:{defaultValue:!0}},constraints:{title:[[n(67),{message:n(51).t("Enter a title.")}],[n(108),{maxLength:100,message:n(51).t("Enter a title that is up to [[maxLength]] characters.")}]],description:[[n(108),{maxLength:4e3,message:n(51).t("Enter a track description that is up to [[maxLength]] characters.")}]],permalink:[[n(421),{type:"sound",getResource:function(){return this.getAudible()}}],[n(67),{message:n(51).t("Enter a permalink."),shouldCheck:function(){return this.isEdit}}]],tags:[[n(496)]],customGenre:[[n(108),{maxLength:100,message:n(51).t("Enter a custom genre that is up to [[maxLength]] characters.")}]]},_sound:null,resource_type:"sound-upload-edit",requiredModelAttributes:["commentable","downloadable","embeddable_by","feedable","genre","geo_blockings","label_name","purchase_title","purchase_url","release_date","reveal_comments","reveal_stats","api_streamable"],actions:{save:function(){var e=this;return r.call(this).then(function(){return e.set("editing",!1),e.saveEdits()})},cancel:function(){var e=this;i.call(this).then(function(){return e.cancel()})}},setup:function(e,t){if(t.isEdit){var i=this.requiredModelAttributes.map(function(e){return"change:"+e});this.isEdit=!0,this._sound=new(n(64))({id:t.resource_id}),this.listenTo(this._sound,i.join(" "),o),this._sound.attrExists(this.requiredModelAttributes)?this.setToModelAttributes():this._sound.fetch({attrs:this.requiredModelAttributes}).fail(function(){n(116).raise({fatal:!0})}),this.setButtonConfig("save",{label:n(51).t("Save changes")}),this.addSubmodel(this._sound)}},cancel:function(){this.removeUpload(),this.isEdit?(this.setToModelAttributes(),this.trigger("canceled")):(this.destroy(),this._sound&&n(73).destroy(this._sound),a("cancel"))},createAudible:function(){return this._sound=new(n(64))(this.getUploadAttributes()),this._sound},getAudible:function(){return this._sound},unsetAudible:function(){this._sound=null},onAudibleSaved:function(){var e=this.getAudible();this.isEdit?(n(56).trigger("sound:saved",e),l(null,{click_name:"track::edit_saved",click_object:e.getUrn()})):s(e)},onSaveFailed:function(e){this.setToFailed("save",e),this.set("editing",!0),n(54).get("me").fetch()},getAttributesToBeSaved:function(){var e=n(3).pick(this.attributes,"feedable","downloadable","commentable");return e.api_streamable=this.get("apiStreamable"),e.reveal_comments=this.get("publicComments"),e.restrictions=this.get("offlineSyncEnabled")?[]:["no_offline_sync"],n(3).assign(e,this.getUploadAttributes()),e},getAttributesFromModel:function(){var e,t=this.getAudible(),i=n(3).pick(t.attributes,"feedable","downloadable","commentable");return i.apiStreamable=!!t.get("api_streamable"),i.buyLink=t.get("purchase_url"),i.buyTitle=t.get("purchase_title")||this.getFieldMetadata("buyTitle").defaultValue,i.embeddableByAll="all"===t.get("embeddable_by"),i.stats=!!t.get("reveal_stats"),i.publicComments=!!t.get("reveal_comments"),e=t.get("geo_blockings"),i.geoblocking=e&&!!e.length,i.geoblocking&&(i.availableCountries=n(92).complement(e)),i.labelName=t.get("label_name"),i.releaseDate=t.get("release_date")&&n(51).dateTimeHelper.fromString(t.get("release_date")),i.offlineSyncEnabled=n(3).isEmpty(t.get("restrictions")),i},updateSound:function(e){this._sound&&(this._sound.release(),this._sound=e)}},{hashFn:function(e,t){return e.resource_id||t&&t.resource_id||e.id||null},onCleanup:function(){this._sound&&this._sound.release()}})},,,function(e,t,n){"use strict";e.exports=n(72).extend(n(144),{defaults:{type:null,userId:null},setup:function(e){e.resource_id&&!e.userId&&(e.userId=e.resource_id)},getSourceInfo:function(){return{type:"user-"+this.options.type,resourceId:this.options.userId,resourceType:"user"}}},{hashFn:function(e,t){return t&&(t.userId||t.resource_id)||null}})},function(e,t,n){"use strict";e.exports=new(n(21))(n(924),{_audioCursor:-1,applyTo:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.loop;this.extend(e,{isLooping:!!n})},defaults:{getQueryPosition:function(){return this.getAudioCursor()}},getCurrentSound:function(){var e=(this.audibleAt||this.at).call(this,this._audioCursor);return e&&e.getCurrentSound()},setAudioCursor:function(e){this._audioCursor!==e&&(this._audioCursor=e,this.trigger("change:currentSound"))},getAudioCursor:function(){return this._audioCursor}})},,,,function(e,t,n){"use strict";function i(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t.timeout,o=void 0===i?1/0:i,s=t.root,a=void 0===s?l.body:s;return a.contains(e)?n(55).resolve():n(55).promise(function(t,n){d.push({root:a,element:e,resolve:t,reject:n,created_at:Date.now(),timeout:o}),c||(c=window.setInterval(function(){d=r(d),d.length||(window.clearInterval(c),c=null)},h))})}function r(e){return e.filter(function(e){var t=o(e);return t&&t(),!t})}function o(e){var t=e.root,n=e.element,i=e.resolve,r=e.reject;return s(e)?r:t.contains(n)?i:null}function s(e){var t=e.created_at,n=e.timeout;return Date.now()-t>n}function a(e,t){d=n(3).reject(d,{element:e,root:t})}var l=window.document,u=e.exports={insertScript:function(e,t){var n,i,r=l.createElement("script"),o=l.getElementsByTagName("head")[0];return r.async=!0,r.src=e,t=t||{},n=t.removeAfterLoad?o.removeChild.bind(o,r):t.onload,i=t.onerror,(n||i)&&u.onScriptLoad(r,n,i),o.appendChild(r),r},onScriptLoad:function(e,t,n){t&&(e.addEventListener?e.addEventListener("load",t,!1):e.readyState&&(e.onreadystatechange=t)),n&&(e.onerror=n)},whenInserted:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=t.root,o=void 0===r?l.body:r,s=t.timeout,u=void 0===s?1/0:s;return n(55).deferFrom(i(e,{root:o,timeout:u})).always(function(){return a(e,o)})}},c=void 0,d=[],h=50},,function(e,t,n){"use strict";function i(){r.has("volume")&&(o.set("volume",r.get("volume")),r.dispose())}var r=new(n(111))("volume-settings"),o=e.exports=new(n(111))("settings");i();var s={volume:1,newTrackNotifications:"always",showTimeRemaining:!1};n(3).forEach(s,function(e,t){o.has(t)||o.set(t,e,{dontPersist:!0})}),o.finalize()},,function(e,t,n){(function(t){"use strict";function i(e,t){t&&t.sent_at&&(this._lastMessageSentAt=new Date(t.sent_at),this.set("has_attachment",r.call(this)))}function r(){var e=this.get("last_message");return e?!!e.content.match(n(173).scLinksRegexGlobal):!1}var o=n(54).get("systemUserId");e.exports=n(65).extend({resource_type:"conversation",saveWithWrapper:!1,_lastMessageSentAt:null,submodelMap:{users:n(60)},baseUrl:function(){return n(281).baseUrlWithId(this.id)},setup:function(){this.listenTo(this,"change:last_message",i)},parse:function(e){var t=n(3).find(e.users,function(e){return"system"===e.id});return t&&(t.id=o),n(65).prototype.parse.apply(this,arguments)},getRecipient:function(){var e,t=n(54).get("me").id;return e=n(3).find(this.get("users"),function(e){return t!==e.id}),e||this.get("users")[0]},fetch:function(){var e=this;return n(65).prototype.fetch.apply(this,arguments).fail(function(){e.trigger("error")})},isFromSoundCloud:function(){return this.getRecipient().id===o},isFromMissingUser:function(){return"missing_user"===this.getRecipient().kind},setRead:function(e){this.set("read",e)},markAsRead:function(){var e=this.toggleReadState(!0);return n(56).trigger("conversation:read",this.id),e},markAsUnread:function(){var e=this.toggleReadState(!1);return n(56).trigger("conversation:unread",this.id),e},toggleReadState:function(e){var t,i=this,r=null!=e?e:!this.get("read");return this.set("read",r),this._saveDeferred||(this._saveDeferred=t=n(55).defer().always(function(){i._saveDeferred=null}).done(function(){i.get("read")!==r&&i.toggleReadState(i.get("read"))}),this.save({read:r},{dataType:"text"}).done(function(){window.setTimeout(t.resolve,1e3)}).fail(function(){window.setTimeout(t.reject,1e3)})),this._saveDeferred},getUuid:function(){var e=this.get("last_message");return n(542).hashFn(e)},infoForBadge:function(){var e=this.get("last_message");return{from:this.getRecipient(),isFromSoundCloud:this.isFromSoundCloud(),content:e.content,sentAt:e.sent_at,id:this.id}},lastMessageSentAt:function(){return this._lastMessageSentAt||i.call(this,null,this.get("last_message")),this._lastMessageSentAt},destroyAndReport:function(e){var i=this;e?t.ajax({url:this.baseUrl()+"/spam",type:"PUT",success:function(){i.trigger("destroy",i)}}):n(73).destroy(this)}})}).call(t,n(1))},,function(e,t,n){(function(t){"use strict";function i(){a.current.dispose()}function r(e){if(e.key){var t,n,i,r;t=g.exec(e.key),t&&(i=c.getItem(e.key),n=t[0],r=u[n],r&&null===i?r===a.current?r.store.write():(r.dispose(),delete u[n]):!r&&i&&(u[n]=new l(n)))}}function o(){if(n(223).visible()&&a.size()>1){var e=1679616,t=("0000"+(Math.random()*e).toString(36)).substr(-4);n(56).broadcast({excludeThis:!0},"instances:ping",t),n(3).delay(function(){n(223).visible()&&a.each(function(e,n){if(n!==f){var i=e.get("pong");i!==t&&(e.dispose(),delete u[n])}})},h)}}function s(e){a.current.set("pong",e)}var a,l,u,c,d=3e4,h=1e3,p="inst_",f=p+Date.now(),g=new RegExp(p+"\\d{13}$");n(98).localStorage?(a=e.exports={initialize:function(){var e,a,h,p,m=this;for(c=window.localStorage,u={},this.current=u[f]=new l(f),u[f].store.write(),["each","some","every","map","filter","find"].forEach(function(e){m[e]=n(3)[e].bind(n(3),u)}),e=0,a=c.length;a>e;++e)h=c.key(e),h!==this.current.store.keyName&&(p=g.exec(h))&&(u[p[0]]=new l(p[0]));window.setInterval(o,d),n(56).on("broadcast:instances:ping",s),t(window).on("unload",i),window.addEventListener("storage",r,!1)},size:function(){return Object.keys(u||{}).length}},l=function(e){this.store=new(n(111))(e),e===f&&(this.set=this.store.set.bind(this.store))},n(3).assign(l.prototype,{get:function(e){return this.store.get(e)},dispose:function(){return this.store.dispose()}})):a=e.exports=null}).call(t,n(1))},function(e,t,n){"use strict";var i=e.exports=n(156).extend({enabled:!0,_breakCount:0,_failCount:0,_maxBreaks:0,_timeoutId:null,defaults:{tolerance:1,baseDelay:1e3,maxDelay:3e4,backoffRate:2,giveUp:null,enabled:!0},initialize:function(e){n(3).bindAll(this,"failed","succeeded"),this.setup(e)},setup:function(e){this.options=n(3).assign({},this.options||this.defaults,e),e=n(3).defaults(this.options,this.defaults);var t=e.maxDelay/e.baseDelay;if(e.backoffRate>1)for(;t>1;)++this._maxBreaks,t/=e.backoffRate;else this._maxBreaks=1/0;e.enabled||this.disable()},dispose:function(){this.off(),this.clearTimeout()},clearTimeout:function(){this._timeoutId&&(window.clearTimeout(this._timeoutId),this._timeoutId=null)},failed:function(){++this._failCount>=this.options.tolerance&&this.disable()},succeeded:function(){this._breakCount=this._failCount=0},disable:function(e){if(this.enabled){var t=!e||e.autoEnable!==!1;this.enabled=!1,++this._breakCount,t&&(!this.options.giveUp||this._breakCount<this.options.giveUp)?this._timeoutId=window.setTimeout(this.enable.bind(this),this.currentDelay()):this.trigger("giveup"),this.trigger("disabled")}},enable:function(){this.enabled||(this.enabled=!0,this._failCount=0,this.trigger("enabled"))},currentDelay:function(){var e=this.options;return Math.min(e.baseDelay*Math.pow(e.backoffRate,Math.floor(Math.random()*Math.min(this._maxBreaks,this._breakCount))),e.maxDelay)}});n(3).assign(i.prototype,n(22).Events)},function(e,t){"use strict";e.exports=function(){function e(n,i){function r(){return!t&&this.initialize?this.initialize.apply(this,arguments):void 0}var o,s,a,l,u;for(t=!0,u=new this,t=!1,l="[object Array]"!==Object.prototype.toString.call(n)?[n]:n,s=0,a=l.length;a>s;++s){n=l[s];for(o in n)u[o]=n[o]}return i&&Object.keys(i).reduce(function(e,t){return e[t]=i[t],e},r),r.prototype=u,r.prototype.constructor=r,r.extend=e,r}var t=!1,n=function(){};return n.extend=e,n}()},function(e,t,n){"use strict";e.exports=n(114).extend({includeFooter:".l-one-column",css:n(804),template:n(1110)})},,function(e,t,n){"use strict";var i=e.exports=function(e,t){var i,r=t.resource_type;return i="playlist-upload"===r?new(n(327))(e,t):"sound-upload-edit"===r?new(n(140))(e,t):new(n(140))(e,t)};i.getClass=function(e){var t=e.resource_type;return n("playlist-upload"===t?327:"sound-upload-edit"===t?140:140)}},,,function(e,t,n){var i=n(20),r=n(917);e.exports=function(e){return new i.SafeString(r.render(e.hash))}},function(e,t){!function(){function t(){clearTimeout(L),T=E=A=C=I=D=P=M=F=L=void 0,O=[],R=function(){throw new Error("EventGateway must be initialized")}}function n(){return Math.floor(1e6*Math.random())}function i(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function r(e,t){var n,r=i(e);for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}function o(e){return e="object"==typeof e?e:{},e.context=e.context||{},e.context.scope=e.context.scope||[],e}function s(e){return e.replace(j,"v$&")}function a(e,t,n){var i=e[n];return"object"==typeof i?t[n]=Object.keys(x(i)).reduce(a.bind(null,i),{}):t[n]=""+i,t}function l(e,t){var n=x(t);return"0.0.0"===e?Object.keys(n).reduce(a.bind(null,n),{}):n}function u(e,t,n,i){var r=P+(t?"/v1/events":"/v1/event"),o=JSON.stringify(e);if(i&&V)window.navigator.sendBeacon(r,o);else{var s=new window.XMLHttpRequest;s.onload=f.bind(null,s),s.onerror=g.bind(null,s,n&&u.bind(null,e,t,!1,!1)),s.open("post",r,!0),s.send(JSON.stringify(e))}}function c(e){F?(O.push(e),L||(L=setTimeout(d,F))):u(e,!1,!0,!1)}function d(e){clearTimeout(L),L=null,O.length&&(u(O.slice(),!0,!0,!!e),O.length=0)}function h(e,t,n){var i=Date.now(),r=window.location.href;k(n).then(function(n){var o,a;n=n||{},n.anonymous_id=T,n.client_id=I,n.ts=i,n.url=n.url||r,D&&(n.app_version=D);var u=[];if(C)for(o in C)u.push(C[o]);u.length&&(n.part_of_variants=u.join(",")),A&&(n.origin=A),M&&!n.user&&(n.user=M),(a=document.referrer).length>0&&(n.referrer=a),c({event:e,version:s(t),payload:l(t,n)})})}function p(e){e.onload=e.onerror=null}function f(e){p(e)}function g(e,t){p(e),t&&!/^4/.test(e.status)&&setTimeout(t,z)}function m(e,t){for(var n=0,i=t.length;i>n;n++)if(void 0===e[t[n]])return!0;return!1}function _(e){return e?v("users",e):T}function v(e,t){return["soundcloud",e,t].join(":")}function y(e,t){t&&(e.query_urn=t.queryUrn,e.query_position=t.position)}function b(){}function w(e){var t,n,i={};if(e)for(t=1;t<arguments.length;++t)n=arguments[t],n in e&&(i[n]=e[n]);return i}function x(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!=e[t]&&(n[t]=e[t]);return n}function k(e){return e&&"function"==typeof e.then?e:{then:function(t){return k(t(e))}}}var S,T,E,A,C,I,D,P,M,R,L,F,O,N,B="sc_anonymous_id",$=3e4,U=1e3,z=3e4,H="https://telemetry.soundcloud.com",j=/^[^v]/,V=!!window.navigator.sendBeacon;t(),S={_anonymousId:null,initialize:function(e){if(!E){if(!e.id)throw new Error("EventGateway: You need to pass an id");A=e.origin,e.user&&(M=v("users",e.user)),N=e.eventVersions||{},T=this._anonymousId=S.getAnonymousId(),this.checkpointIntervals={},I=e.id,D=e.appVersion||null,P=e.trackingUrl||H,F=e.batchTimeout||!1,E=!0,R=b}},deinitialize:function(){t()},setUser:function(e){M=v("users",e)},setExperiments:function(e){C=e},getAnonymousId:function(){var e=S.anonymousIdStore.get();return e&&"undefined"!==e||(e=[n(),n(),n(),n()].join("-"),S.anonymousIdStore.set(e)),e},logEvent:h,pageview:function(e,t,n,i){R(),h("pageview",N.pageview||"0.0.0",k(i).then(function(i){i=o(i);var s=_(e),a={user:s,level:t,chapter:n.join("::"),page_name:i.page_name,page_urn:i.page_urn,query_urn:i.query_urn,locale:i.locale};return r(a,i.params)}))},impression:function(e,t){R(),h("impression",N.impression||"1.16.0",k(t).then(function(e){e=o(e);var t=w(e,"impression_name","impression_category","impression_object","page_name","page_urn","ad_urn","monetized_object","monetization_type","promoted_by","external_media");return t.page_context=e.context.scope.join(":"),t}))},click:function(e,t,n,i){R(),h("click",N.click||"0.0.0",k(i).then(function(i){i=o(i);var s={ad_urn:i.ad_urn,campaign:i.context.campaign,chapter:n.join("::"),context:i.context.scope.join(":"),external_media:i.external_media,level:t,monetization_type:i.monetization_type,monetized_object:i.monetized_object,promoted_by:i.promoted_by,urn:i.urn,user:_(e),click_name:i.click_name,click_object:i.click_object,click_target:i.click_target,page_name:i.page_name,page_urn:i.page_urn};return y(s,i.context.attribution),r(s,i.params)}))},audio:function(e){R(),h("audio",N.audio||"1.16.0",k(e).then(function(e){var t,n=e.id,r="soundcloud:tracks:"+n,o=this.checkpointIntervals,s="number"==typeof e.checkpointInterval&&e.checkpointInterval>=U?e.checkpointInterval:null,a=w(e,"page_name","page_urn","source","in_playlist","playlist_position","reposted_by","track_length","protocol","action","trigger","pause_reason","ad_urn","monetization_type","promoted_by","policy","monetization_model");if(y(a,e.attribution),a.track=r,a.track_owner=v("users",e.trackOwnerId),a.playhead_position=e.playheadPosition,a.monetized_object=e.monetized_urn,clearInterval(o[n]),"play"===e.action){var l=Date.now()+e.track_length;t=i(a),t.action="checkpoint",o[n]=setInterval(function(){Date.now()<l?h("audio",N.audio||"1.16.0",t):clearInterval(o[n])},s||$)}else delete o[n];return a}.bind(this)))},audioPerformance:function(e){R(),h("audio_performance",N.audioPerformance||"0.0.0",k(e).then(function(e){if(m(e,["type","latency","protocol","playertype","host"]))throw new Error("EventGateway  AudioPerformance : One or multiple mandatory arguments are missing");return{type:e.type,latency:e.latency,protocol:e.protocol,player_type:e.playertype,host:e.host}}))},audioError:function(e){R(),h("audio_error",N.audioError||"0.0.0",k(e).then(function(e){if(m(e,["error_code","protocol","player_type","host","url"]))throw new Error("EventGateway  AudioError : One or multiple mandatory arguments are missing");return{error_code:e.error_code,protocol:e.protocol,player_type:e.player_type,host:e.host,url:e.url}}))},appLoad:function(e,t){R(),h("appload",N.appLoad||"0.0.0",k(t).then(function(t){return{latency:t.latency,user:_(e),level:t.level}}))},statsView:function(e,t){h("stats_view",N.statsView||"0.0.0",k(t).then(function(t){var n=_(e);return r({user:n},t)}))},anonymousIdStore:{get:function(){var e=document.cookie.split(B+"=");return e.length>1&&e[1].split(";")[0]},set:function(e){var t,n="."+window.location.hostname.replace(/.*\.(.+\..+)/,"$1"),i=new Date;i.setTime(i.getTime()+31536e7),t="; expires="+i.toGMTString(),document.cookie=B+"="+e+t+"; path=/; domain="+n}},flush:d},"undefined"!=typeof e&&e.exports?e.exports=S:(window.SC=window.SC||{},window.SC.EventGateway=S)}()},,,,,function(e,t,n){function i(e,t,n,i){return o.tp(t,n,e,i.hash,{comment:i.hash._comment,context:i.hash._context})}function r(e,t){return o.tp(s.cleanBlockText(t.fn()),s.cleanBlockText(t.inverse()),e,t.hash,{comment:t.hash._comment,context:t.hash._context})}var o=n(51),s=n(916);e.exports=function(){var e=arguments.length;if(4===e)return i.apply(null,arguments);if(2===e)return r.apply(null,arguments);throw new Error("Invalid signature to tp helper, expected 4 or 2 arguments, got: "+e)}},function(e,t,n){"use strict";var i=n(22).Model;e.exports={activities:new i({channel:"/me/activities/all/own",itemName:"activity",itemNamePlural:"activities",minPollInterval:12e4,maxPollInterval:192e4,baseUrl:function(){return n(54).get("api_v2_host")+"activities"}}),unreadConversations:new(i.extend({defaults:{baseUrl:function(){return n(281).baseUrl("unread")+"?force=1"},itemName:"conversation",itemNamePlural:"conversations",minPollInterval:0,maxPollInterval:0},initialize:function(){this.setDefaultPolling()},enableRealTimePolling:function(){this.set("minPollInterval",4e4),this.set("maxPollInterval",18e4),this.trigger("pollIntervalChange")},setDefaultPolling:function(){this.set("minPollInterval",3e5),this.set("maxPollInterval",192e4),this.trigger("pollIntervalChange")}})),conversations:new i({baseUrl:n(281).baseUrl,itemName:"conversation",itemNamePlural:"conversations",minPollInterval:1e3,maxPollInterval:3e4})}},function(e,t,n){"use strict";function i(e,t){var n=e.previousAttributes().username,i=/^user\d+$/;i.test(n)&&this.set("permalink",o(t))}function r(){var e=this.getAttributesFromModel();this.set(e),this.unsetImageFile({force:!0}),this.markFieldsClean()}function o(e){return e.replace(/^[_-]/,"").replace(/[_-]$/,"").replace(/([_-]){2,}/g,"$1").replace(/[^a-z0-9_-]/g,"")}e.exports=n(82).extend(n(247).withOptions({read:"avatar_url"}),n(248).withOptions({attr:"username"}),n(193),{resource_type:"profile-settings",_user:null,_webProfileForms:null,fields:{username:{defaultValue:""},permalink:{defaultValue:""},description:{defaultValue:""},avatar_url:{defaultValue:null},first_name:{defaultValue:""},last_name:{defaultValue:""},city:{defaultValue:""},country_code:{defaultValue:""}},constraints:{username:[[n(67),{message:n(51).t("Enter your display name. You can change it later.")}],[n(108),{maxLength:50,message:n(51).t("Enter a display name that is up to [[maxLength]] characters.")}]],permalink:[[n(67),{message:n(51).t("Enter a profile URL.")}],[n(1283),{getResource:function(){return n(54).get("me")}}]],description:[[n(108),{maxLength:4e3,message:n(51).t("Enter a description that is up to [[maxLength]] characters.")}]]},actions:{"default":"save",save:function(){var e=this,t=n(55).defer();return this.validate().done(function(i){i?e.saveEdits().done(function(){
e.trigger("saved"),n(56).trigger("settings:saved"),t.resolve(),e.markFieldsClean()}).fail(t.reject):t.reject()}),t},cancel:function(){this.cancelEdits()}},buttons:{save:{label:n(51).t("Save changes"),pendingLabel:n(51).t("Saving"),action:"save"},cancel:{label:n(51).t("Cancel"),action:"cancel"}},setup:function(){this._user=n(54).get("me"),this._webProfileForms=new(n(889))(null,{userId:this._user.id}),this.listenTo(this._webProfileForms,"form:dirty",this.enableAction).listenTo(this._webProfileForms,"form:clean",this.disableAction).listenTo(this,"imageDataChanged",this.markFieldsDirty.bind(this,"avatar_url")),r.call(this),this.listenTo(this,"change:username",i)},getUser:function(){return this._user},getWebProfileForms:function(){return this._webProfileForms},cancelEdits:function(){this.unsetImageFile(),r.call(this),this.trigger("canceled"),this.getWebProfileForms().fetch()},isDirty:function(){var e=n(82).prototype.isDirty.apply(this,arguments);return e||this.getWebProfileForms().some(function(e){return e.isDirty()},this)},markFieldsClean:function(){n(82).prototype.markFieldsClean.apply(this,arguments),this.getWebProfileForms().invoke("markFieldsClean")},saveEdits:function(){var e=this,t=this.getUser(),i=this.getWebProfileForms(),r=this.getAttributesToBeSaved(),o=[];t.set(r),o.push(i.saveEdits()),o.push(t.save(r));var s=this.getImageFileInfo();return s.file&&(t.setImageFile(s.file,s.source),t.once("imageTranscodingDone",function(t){e.unsetImageFile({silent:!0}),e.set("avatar_url",t.avatar_url)}),o.push(t.uploadImage())),n(55).all(o).done(i.fetch.bind(i))},getAttributesToBeSaved:function(){return n(3).pick(this.attributes,"city","country_code","first_name","last_name","description","permalink","username")},getAttributesFromModel:function(){var e=this.getUser(),t=n(3).pick(e.attributes,"avatar_url","city","first_name","last_name","description","permalink","username");return t.country_code=e.getCountryCode(),t}},{hashFn:function(){return 1},onCleanup:function(e){e._webProfileForms.release()}})},function(e,t,n){"use strict";e.exports={initialize:function(){var e=function(e){return n(54).get(e)},t=e("me").id,i=e("app_version").replace(/!$/,"");n(163).initialize({id:e("client_application_id"),appVersion:String(parseInt(i,10)||""),trackingUrl:e("eventlogger_tracking_url"),user:t,batchTimeout:n(98).sendBeacon?5e3:1e3,eventVersions:{audio:"1.22.1"}}),t||n(56).once("connect:hasUserData",function(){n(163).setUser(e("me").id)}),n(3).defer(n(3).invoke,[n(1329),n(1331),n(524),n(1330)],"include")},dispose:function(){n(163).flush(!0)},trackPageView:function(e,t,i,r){var o=t.join("::");null!=window._gaq&&window._gaq.push(["_trackPageview",o]),n(163).pageview(i,e,t,r)},trackAudioEvent:function(e){n(163).audio(e)},trackAppLoad:function(e,t,i){n(163).appLoad(t,{level:e,latency:i})},trackClick:function(e,t){n(163).logEvent("click",e,t)},trackV0Click:function(e,t,i,r){n(163).click(i,e,t,r)},trackImpression:function(e,t){n(163).impression(e,t)},trackAudioError:function(e){n(1267).log(e)},trackStats:function(e,t){n(163).statsView(e,t)}}},function(e,t,n){"use strict";e.exports={DISABLED:-1,UNKNOWN:0,PENDING:1,INVALID:2,VALID:3}},function(e,t,n){(function(t){"use strict";var i=/soundcloud\.com\/[a-zA-Z0-9_\/?=#&%-]+/g,r=/^(?:(?:https?:\/\/)?(?:www\.|m\.)?soundcloud\.(?:com|dev))\/?/i,o=/^(?:(?:https?:\/\/)?(?:[-\w]+\.)*?soundcloud\.(?:com|dev))\b\/?/i,s=/^(?:(?:ht|f)tps?:\/\/|mailto:)/i,a=["accounts","activate","activity","admin","android","announcements","api","apps","artworks","assets","comments","community-guidelines","connect","customize","creativecommons","creator","creators","dashboard","dropbox","emails","errors","events","explore","facebook","faqs","favorites","feedbacks","feeds","for","forums","genres","gifts","google_plus","groups","guestlist","help","hot","invite","imprint","iphone","ipad","ipod","jobs","join-us","latest","login","logout","mac","me","messages","mobile","music","newsletters","notifications","oauth","oauth2","orders","oembed","pages","partners","people","player","playlists","posts","press","pro","press_release","search","session","sets","settings","signin","sign-in","signup","sign-up","sitemap","sound","sounds","stats","stream","subscription","terms-of-use","tour","tracks","turn_off_notifications","tags","upload","users","videos","waveform","welcome","widgets","widget.xml","widget","widget.json","you","campaigns","contacts","discover","fans","faq","logged_exceptions","manifest.webapp","robots","topics"],l=[];n(863).forEach(function(e){l.unshift(e)});var u=e.exports={getReservedKeywords:function(){return a},updateSCLinks:function(e,i){return i&&i.usertext&&(e=n(175).usertext(e,i)),i&&i.usertextOneline&&(e=n(175).usertextOneline(e,i)),e=t("<div>").html(e),e.find("a").each(function(e,i){var r,o,a,l,c,d=i.getAttribute("href"),h=t(i);if(!s.test(d)&&(c=n(62).parse(d),c.path&&(a=u.getRouteInfo(i.pathname))))if("listen"===a.name)r=c.path.split("/").slice(1),h.text(n(243).capitalize(r[0])+"  "+n(243).capitalize(r[1]));else if("user"===a.name){if(o=c.path.split("/")[1],u.getReservedKeywords().indexOf(o)>-1)return;if(h.addClass("g-link-user"),l=i.previousSibling,l&&3===l.nodeType&&/@$/.test(l.textContent))return;i.parentNode.insertBefore(window.document.createTextNode("@"),i),h.text(o)}}),e.html()},getRouteInfo:function(e){var t=e.replace(/^\//,"");return n(3).find(l,function(e){var n=e.route;return n.test(t)})},scLinksRegexGlobal:i,soundcloudUrlRegex:r,anySCLinkRegex:o,getAudibleModels:function(e){var t,i=this.filterAudibleLinks(e),r=n(55).defer();return t=i.map(function(e){return"listen"===e.info.name?n(64).resolve.apply(n(64),e.info.params):n(85).resolve.apply(n(85),e.info.params)}),n(55).settled(t).always(function(){var e=n(3).map(arguments,function(e,t){var r=e[0];return r instanceof n(85)||r instanceof n(64)?{audible:r,link:i[t].link}:null});r.resolve(e)}),r},filterAudibleLinks:function(e){var t=n(54).get("router"),i=["listen","playlist"];return n(3).reduce(e,function(e,n){var r=t.getUrlInfo(n);return r&&i.indexOf(r.name)>-1&&e.push({info:r,link:n}),e},[])}}}).call(t,n(1))},function(e,t,n){"use strict";function i(e){var t=e===n(54).get("me").id,i=n(63).isLoggedIn();return t&&i}function r(e){var t=n(196).numSessionPlays(),i=1===o.get(u),r=e.userInitiated;!n(63).isLoggedIn()&&!i&&t>f&&r&&this.showSignupTeaser(e.sound.getUrn())}var o=new(n(111))("already-seen"),s="listen-upsell",a="stream-upsell",l="user-upsell",u="signup-teaser-modal",c=36e5,d=24*c,h=7*d,p=4,f=2,g=e.exports={getUpsellableTrackCount:function(){return p},couldHaveUserUpsell:function(e){return i(e)&&!g.alreadySeenUserUpsell()&&!n(54).get("me").isPremium()},isValidSound:function(e){var t=n(54).get("me"),i="sound"===e.resource_type;if(i&&!e.hasVisuals()&&!t.isPremium()&&t.get("track_count")>=p&&t.owns(e)){var r=new Date(e.get("created_at")),o=Date.now(),s=new Date(o-c),a=new Date(o-h);return s>=r&&r>=a}return!1},isValidIndex:function(e,t){return e>-1&&t.length>=p},isValidUserSounds:function(e){var t=e.length&&e.first().get("created_at"),i=new Date(t),r=n(54).get("me");return!r.isPremium()&&e.length>p&&i>=new Date(Date.now()-h)&&i<=new Date(Date.now()-d)},alreadySeenListenUpsell:function(){return 1===o.get(s)},alreadySeenUserUpsell:function(){return 1===o.get(a)?(o.unset(a),this.dismissUserUpsell(),!0):1===o.get(l)},dismissListenUpsell:function(){o.set(s,1)},dismissUserUpsell:function(){o.set(l,1)},startPlayTracking:function(){n(63).isLoggedIn()||n(56).on("audio:play",r,this)},stopPlayTracking:function(){n(56).off("audio:play",r,this)},showSignupTeaser:function(e){var t=n(54).get("rollouts").get("signup_teaser"),i=new(n(584))({version:t,width:625,soundUrn:e});i.open(),o.set(u,1)}}},function(e,t,n){"use strict";var i=/\s/,r=/([a-z])([A-Z])/g;e.exports={usertext:n(409).withDefaults(n(406)["default"]),usertextOneline:n(409).withDefaults(n(406).oneline),splitWords:function(e){return e?i.test(e)?e:e.replace(r,"$1$2"):""}}},function(e,t){"use strict";e.exports={precise:function(e,t){return t=Math.pow(10,t||0),Math.round(e*t)/t},clamp:function(e,t,n){return Math.min(n,Math.max(t,e))},mod:function(e,t){return(e%t+t)%t}}},,function(e,t,n){var i=n(20),r=n(83);e.exports=function(e,t){return new i.SafeString(r.markup(e,t.hash))}},function(e,t,n){var i=n(20),r=n(406),o=n(409).withDefaults(r["default"]);e.exports=function(e,t){return(void 0===t.hash.escapeExpression||t.hash.escapeExpression)&&(e=i.Utils.escapeExpression(e)),new i.SafeString(o(e,t.hash))}},,function(e,t){"use strict";function n(e){return!r.test(e)}function i(){return!0}var r=/(\w+)\:(\w+)=(.+)/,o=e.exports={extract:function(e,t){var n=e.tag_list||"",i=[];return i.push.apply(i,o.parse(n,t)),i},parse:function(e,t){var r=/[^\s"']+|"([^"]*)"/g,o=(e.match(r)||[]).map(function(e){return e.replace(/"/g,"")}).filter((t||{}).includeMachineTags?i:n);return o},serialize:function(e){var t=/\s/;return e.map(function(e){return t.test(e)?'"'+e+'"':e}).join(" ")}}},function(e,t,n){"use strict";e.exports=n(114).extend({includeFooter:".l-sidebar-right",css:n(464),template:n(2323)})},,,,,,function(e,t,n){var i=n(51);e.exports=function(e,t){return i.dateTimeHelper.format(new Date(e),t.hash.format)}},function(e,t,n){var i=n(136);e.exports=function(e){return i.render(e,{useSIUnits:!0})}},function(e,t,n){"use strict";e.exports=n(275).extend({defaults:{type:"track_likes"},baseUrl:function(){return this.getEndpointUrl("userTrackLikes",{id:this.options.userId})},acceptsType:function(e){return"sound"===e}})},function(e,t,n){"use strict";function i(){var e=this.getAudible();n(56).trigger("playlist:saved",e),this.trigger("saved")}function r(e){this.set({errorMessage:this.getErrorMessageTemplate("save","playlist",this.extractErrorMessage(e))})}function o(e,t){return e.attrExists(t)?n(55).resolve(e):e.fetch({attrs:t}).then(n(3).constant(e))}function s(){this.setToModelAttributes(),this.get("trackList").reset(this._playlist.getSounds())}function a(){var e=this.requiredModelAttributes.map(function(e){return"change:"+e}).join();this.listenTo(this._playlist,e,function(){this.isDirty()||s.call(this)})}function l(e){var t=e.getSoundsCollectionClone(),i=e.getSounds();return n(3).assign(t,{getCurrentOrder:function(){return this.pluck("id")},reorder:function(e){this.sort({silent:!0,comparator:function(t){return e.indexOf(t.id)}})},resetOrder:function(){return this.reset(i.slice()),n(55).resolve()},saveOrder:n(3).noop}),n(429).applyTo(t),n(430).applyTo(t),t}e.exports=n(82).extend(n(193),n(928),n(933),n(248).withOptions({attr:"title"}),n(930),n(505),{_playlist:null,resource_type:"playlist-edit",requiredModelAttributes:[],actions:{"default":"save",save:function(){var e=this;return this.validate().then(function(t){return t?(e.set("editing",!1),e.saveEdits()):n(55).reject()})},cancel:function(){this.cancel()}},fields:{buyLink:{defaultValue:""},buyTitle:{defaultValue:"Buy"},labelName:{defaultValue:null},trackList:{defaultValue:null}},buttons:{save:{label:n(51).t("Save changes"),pendingLabel:n(51).t("Saving"),action:"save"},cancel:{label:n(51).t("Cancel"),action:"cancel"}},constraints:{title:[[n(67),{message:n(51).t("Enter a title.")}],[n(108),{maxLength:100,message:n(51).t("Enter a title that is up to [[maxLength]] characters.")}]],description:[[n(108),{maxLength:4e3,message:n(51).t("Enter a playlist description that is up to [[maxLength]] characters.")}]],tags:[[n(496)]],permalink:[[n(421),{type:"playlist",getResource:function(){return this.getAudible()}}],[n(67),{message:n(51).t("Enter a permalink.")}]],buyLink:[[n(278),{strict:!1}]],buyTitle:[[n(491)]],customGenre:[[n(108),{maxLength:100,message:n(51).t("Enter a custom genre that is up to [[maxLength]] characters.")}]]},setup:function(e,t){var i=this;this.on("imageDataChanged",this.markFieldsDirty.bind(this,"artwork_url")),this._playlist=new(n(85))({id:t.resource_id}),this.set("trackList",l(this._playlist)),o(this._playlist,this.requiredModelAttributes).then(function(){s.call(i),a.call(i)}),this.addSubmodel(this._playlist)},saveEdits:function(){var e=this.getAudible();if(e.set(this.getAttributesToBeSaved()),this.isDirty("trackList")){var t=e.getSounds(),o=this.get("trackList");t.length>o.length&&n(3).difference(t,o.models).forEach(e.removeSound,e),e.reorder(o.pluck("id"))}return e.save().then(this.saveAudibleImage.bind(this,e)).then(i.bind(this),r.bind(this)).done(this.trigger.bind(this,"saved"))},getAudible:function(){return this._playlist},getAttributesFromModel:function(){var e=this.getAudible();return{buyLink:e.get("purchase_url"),buyTitle:e.get("purchase_title"),labelName:e.get("label_name")}},getAttributesToBeSaved:function(){var e=this.get("buyLink"),t=this.get("buyTitle");return{purchase_url:e?n(62).normalize(e):null,purchase_title:t===this.getFieldMetadata("buyTitle").defaultValue?null:t,label_name:this.get("labelName")}},cancel:function(){s.call(this),this.trigger("canceled")},saveCleanup:function(e){this.markFieldsClean()}},{hashFn:function(e,t){return e.resource_id||t&&t.resource_id||e.id||null}})},function(e,t,n){"use strict";var i,r,o=window.location.hostname.replace(/.*\.(.+\..+)/,"$1"),s="."+o,a=864e5,l=e.exports={get:function(e){return r||(r={},window.document.cookie.split(/\s*;\s*/).forEach(function(e){var t=e.split("=");r[t[0]]=t[1]})),r[e]},set:function(e){var t=e.name,n=e.value,r=e.expirationInDays,o=e.secure,l=e.domainStrict;window.document.cookie=[t+"="+n,r?"expires="+new Date(Date.now()+r*a).toGMTString():"","path=/",l?"":"domain="+s,o?"secure":""].filter(Boolean).join(";"),i()},unset:function(e){l.set(n(3).assign({},e,{value:"",expirationInDays:-1})),i()}};i=function(){r=null}},function(e,t,n){"use strict";e.exports=new(n(21))({applyTo:function(e,t){t&&t.action&&(e._action=t.action)},before:{setup:function(){this._action=this._action||this.actions["default"],this.setActionState(this._action,"disabled"),this.listenTo(this,"form:clean",this.disableAction).listenTo(this,"form:dirty",this.enableAction)}},enableAction:function(){this.setActionState(this._action,"enabled")},disableAction:function(){this.setActionState(this._action,"disabled")}})},function(e,t,n){"use strict";e.exports=new(n(21))({applyTo:function(e,t){var n=t.events,i=[];this.after(e,{setup:function(){var e=this.constructor;-1===i.indexOf(e)&&(i.push(e),n.forEach(function(t){var n=t.emitter,i=t.event,r=t.getInstance,o=t.handler;n.on(i,function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];var s=e.instances.find(function(e){return r.apply(void 0,[e].concat(n))});s&&o.apply(s,n)})}))}})}})},function(e,t,n){"use strict";var i={google_play:{en:"https://play.google.com/store/apps/details?id=com.soundcloud.android",fr:"https://play.google.com/store/apps/details?id=com.soundcloud.android&hl=fr",pt_BR:"https://play.google.com/store/apps/details?id=com.soundcloud.android&hl=pt-br"},appstore:{en:"https://itunes.apple.com/us/app/soundcloud/id336353151?mt=8",fr:"https://itunes.apple.com/fr/app/soundcloud-music-audio/id336353151?mt=8",pt_BR:"https://itunes.apple.com/br/app/soundcloud-music-audio/id336353151?mt=8"}};e.exports={getStoreUrl:function(e){var t=i[e];return t[n(51).getLocale()]||t.en}}},function(e,t,n){"use strict";function i(e){return function(t){return t[0]===e}}function r(e,t){for(var n;e.length>d;)n=e.shift(),e.some(i(n[0]))||t.unset(n[0],_);t.set("log",e)}function o(e,t,n,i){e.has(t)||e.set(t,[n,i],_)}function s(e,t){for(var n=0,i=e.length;i>n;++n)if(e[n][v]===t[v])return n;return-1}function a(e,t){var n,i=s(e,t);return i>-1?(n=e[i],n[y]+=t[y],n[b]=n[b]||t[b]):e.unshift(t.slice()),e}function l(){A._persistent.reset(),A._session.reset()}function u(e,t){return e/t>=p}function c(e){var t=this.get(e[v]);return n(3).object(Object.keys(S).concat(Object.keys(T)),e.concat(t))}var d=250,h=2e3,p=.25,f=null,g=null,m=null,_={dontPersist:!0},v=0,y=1,b=2,w=3,x=0,k=1,S={id:v,playTime:y,userInitiated:b,timestamp:w},T={duration:x,userId:k},E={field:null,from:"global",id:null,unique:!1,playState:null,userInitiated:null,filter:null,newestFirst:!1,limit:!1};n(56).on("connect:logout",l);var A=e.exports={_persistent:new(n(111))("play-log"),_session:new(n(251)),addSound:function(e,t){f&&this.writeToLog(),f=e,g=e.getListenTime(),m=t||{},e.on("pause",this.writeToLog,this).hold()},select:function(e){e=n(3).assign({},E,e);var t=this["session"===e.from?"_session":"_persistent"],i=t.get("log")||[];return e.id?i=i.filter(function(t){return t[v]===e.id}):e.userId&&(i=i.filter(function(n){return t.get(n[v])[k]===e.userId})),e.unique&&(i=i.reduceRight(a,[])),i=i.filter(function(n){return null!=e.userInitiated&&n[b]!=e.userInitiated?!1:"played"!==e.playState||u(n[y],t.get(n[v])[x])?e.filter?e.filter.apply(null,n):!0:!1}),e.newestFirst&&i.reverse(),e.limit&&i.length>e.limit&&(i=i.slice(0,e.limit)),i=e.field?n(3).pluck(i,S[e.field]):i.map(c,t)},count:function(e){return this.select(e).length},numSessionPlays:function(){return this.count({from:"session",unique:!0,playState:"played"})},getPlayedIds:function(){return this.select({field:"id",from:"persistent",unique:!0,playState:"played"})},writeToLog:function(){if(f){var e,t,n,i=Math.floor(f.getListenTime()-g),s=A._persistent,a=A._session,l=f.id,u=f.getMediaDuration();i>=Math.min(u,h)&&(t=s.get("log")||[],n=a.get("log")||[],o(s,l,u,f.get("user_id")),o(a,l,u,f.get("user_id")),e=[l,i,m.userInitiated?1:0,Date.now()],t.push(e),n.push(e),r(t,s),r(n,a)),f.off("pause",this.writeToLog,this).release(),f=g=null}}}},,,,,,function(e,t,n){function i(e){return e.replace(/[-\/\\$\^*+?.()|\[\]{}]/g,"\\$&")}function r(e){return e.toUpperCase()}var o=n(304),s=i(".,'\"()[]-"),a=new RegExp("^[^\\s"+s+"]"),l=new RegExp("(?:^|\\s)[\\s"+s+"]?[^\\s"+s+"]","g");e.exports={sentenceCase:function(e){return e.replace(a,r)},titleCase:function(e){return e.replace(l,r)},permalink:function(e){return o(e).toLowerCase().replace(/\s/g,"-").replace(/[^a-z0-9_-]+/g,"").replace(/^[_-]+|[_-]+$/g,"").replace(/([-_])[-_]+/g,"$1").replace(/^[^a-z]+$/,"$&a")},regexpEscape:i}},function(e,t,n){"use strict";e.exports=n(143).extend({model:n(64),defaults:{limit:20,type:"tracks",keepBlocked:!0},baseUrl:function(){return this.getEndpointUrl("userTracks",{id:this.options.userId},{representation:this.options.keepBlocked?"owner":""})}},{hashFn:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.userId,i=t.resource_id,r=t.keepBlocked,o=n||i;return[o||null,r===!1?"_b":null].join("")||null}})},,,,function(e,t,n){"use strict";function i(e,t){var i=new(n(328))({file:e},t);return i.release(),i}function r(e,t){var i=new(n(526))({uploads:e},t);return i.release(),i}function o(e){var t=this.length;return this.add(e,{at:0}),this.length!==t?(p.call(this,!0,e),n(58).trackUploadFunnel("start"),e):void 0}function s(e,t){!t.toPlaylistUploadId&&e&&n(58).trackV0Click(["upload_group",1===e?"single":"multiple",1===e?!1:t.asPlaylist?"grouped":"ungrouped"].filter(Boolean))}function a(e){return(e.size||0)<=b.MAX_FILE_SIZE&&u(e.type)&&l(e.name)}function l(e){var t=/\.(rtf|html?|bmp|png|gif|jpe?g|exe|zip|sit|gz|cdf|ico|docx?|xlsx?|pptx?|txt|avi|mov|midi|swf|pdf)$/i;return!t.test(e)}function u(e){var t=/^(image|message|text|multipart|model)\/|msword|ms-excel|ms-powerpoint|compressed/;return!t.test(e)}function c(){if(!y){var e,t=this.numUploading(),i=function(e){e.get("status")===n(87).QUEUED&&v>t&&(e.upload(),++t)};for(e=this.length-1;e>=0&&v>t;--e)i(this.at(e))}}function d(e){!this.numUploading()&&e.get("hasBeenSaved")&&h()}function h(){m&&(n(54).get("router").removeNavigationBlock(m),m=null)}function p(e,t){this.transferStatus[e?"addTransfer":"removeTransfer"](t.get("transfer")),this.transcodingStatus[e?"addTransfer":"removeTransfer"](t.get("transcoding"))}function f(e){p.call(this,!1,e),this.numUploading()||this.hasUnsaved()||h()}function g(e){var t=e.get("status"),i=e.previous("status");t!==n(87).UPLOADING||1!==this.numUploading()||m||(m=n(54).get("router").addNavigationBlock(_)),t===n(87).COMPLETE&&n(904).trackUserEvent("upload_track"),i===n(87).UPLOADING&&(this.transferStatus.removeTransfer(e.get("transfer")),c.call(this)),i===n(87).TRANSCODING&&this.transcodingStatus.removeTransfer(e.get("transcoding"))}var m,_="You still have incomplete uploads. If you leave the page now, these will be canceled.",v=3,y=!1,b=e.exports=n(72).extend({next_href:!1,model:n(328),transferStatus:null,transcodingStatus:null,setup:function(){this.transferStatus=new(n(439)),this.transcodingStatus=new(n(439)),this.listenTo(this,"change:status",g).listenTo(this,"remove",f).listenTo(this,"change:hasBeenSaved",d,this)},addFiles:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=this.getValidFiles(e),i=[];return n&&n.length?(i=this.addFilesAsUploads(n,t.replaceSoundUploadId?{resource_id:t.replaceSoundUploadId}:null),s.call(this,i.length,t),c.call(this),i):i},getValidFiles:function(e){var t=n(3).groupBy(e,function(e){return a(e)?"valid":"invalid"});return t.invalid&&this.trigger("error",{name:"invalid",count:t.invalid.length}),t.valid},addFilesAsUploads:function(e,t){return n(3).chain(e).map(function(e){return i(e,t)}).map(o,this).compact().value()},addUploadsAsAggregate:function(e){return r(e)},addUploadsToAggregate:function(e,t){var n=r(null,{resource_id:t});return n.addUploads(e),n},numToUpload:function(){return this.uploadsByStatus(n(87).QUEUED+n(87).UPLOADING).length},numUploading:function(){return this.uploadsByStatus(n(87).UPLOADING).length},numTransoding:function(){return this.uploadsByStatus(n(87).TRANSCODING).length},hasUnsaved:function(){return this.some(function(e){return e.get("hasBeenSaved")===!1})},uploadsByStatus:function(e){return this.getSoundUploads().filter(function(t){return t.get("status")&e})},getSoundUploads:function(){return this.models},pause:function(){y=!0},resume:function(){y=!1,c.call(this)},hasDataForView:function(){return!0}},{MAX_FILE_SIZE:5368709120,SIMULTANEOUS_UPLOADS:v,isAcceptable:a,neverRelease:!0,hashFn:function(){return 1}})},,,,,,,,,,,function(e,t,n){var i=n(20),r=n(409),o=n(406),s=r.withDefaults(o.oneline);e.exports=function(e,t){return(void 0===t.hash.escapeExpression||t.hash.escapeExpression)&&(e=i.Utils.escapeExpression(e)),new i.SafeString(s(e,t.hash))}},function(e,t,n){"use strict";e.exports=n(72).extend(n(144).withOptions({loop:!0}),{model:n(64),baseUrl:function(){return this.getEndpointUrl("stationTracks",{urn:this.options.resource_id})},getSourceInfo:function(){return{type:"stations",resourceId:this.options.resource_id,resourceType:"station",queryUrn:this.queryUrn}},parse:function(e){var t=e.collection,n=e.query_urn;return this.queryUrn=n,t}},{hashFn:function(e,t){var n=t.resource_id;return n}})},,function(e,t,n){"use strict";function i(e){var t=n(54).get("me");return n(3).all(e,function(e){return t.owns(e)})}function r(e){this.getFieldMetadata("sounds").datasource.blacklist(e),s.call(this)}function o(e){this.getFieldMetadata("sounds").datasource.unblacklist(e),s.call(this)}function s(){this.setActionState("save",this.get("sounds").length?"enabled":"disabled"),this.forceChange("sounds")}var a=n(58).trackV0Click;e.exports=n(82).extend({fields:{title:{defaultValue:""},sounds:{defaultValue:function(){return new(n(477))}},playlist:{defaultValue:null},sharing:{defaultValue:"public",datasource:[{label:n(51).t("private"),value:"private"},{label:n(51).t("public"),value:"public"}]}},buttons:{save:{label:n(51).t("Save"),action:"save"}},actions:{save:function(){var e=this,t=n(85).getNewInstance({title:this.get("title"),sharing:this.get("sharing")});return this.get("sounds").forEach(function(e){t.addSound(e)}),this.validate().then(function(i){return i?t.save().then(function(){return n(85).instances.add(t),n(73).notify("createPlaylist",{object:t}),e.get("sounds").each(function(e){n(73).notify("addToPlaylist",{object:e,target:t.id,targetType:t.get("kind"),state:!0})}),e.set("playlist",t),e.markFieldsClean(),t}):void a(["add_to_set","validation"])})},"default":"save"},constraints:{title:[[n(67),{message:n(51).t("Enter a title.")}],[n(108),{maxLength:255,message:n(51).t("Enter a title that is up to [[maxLength]] characters.")}]],sounds:[[n(67),{message:n(51).t("Playlists must contain at least one track.")}]]},setup:function(e,t){var s,a=this.get("sounds");this.startingSounds=this.options.startingSounds||[],s=n(3).any(n(3).invoke(this.startingSounds,"isPrivate")),this.set("sharing",s?"private":"public"),this.getFieldMetadata("sounds").datasource=new(n(1204))(null,{sourceType:i(this.startingSounds)?"mySounds":"likes"}),this.listenTo(a,"add",r).listenTo(a,"remove",o),n(3).each(this.startingSounds,this.addSound,this)},addSound:function(e){this.get("sounds").add(e)},areAllSoundsMine:function(){return i(this.get("sounds").models)}},{onCleanup:function(e){e.get("sounds").release()}})},,function(e,t,n){"use strict";var i=window.document,r=function(){return!i.hasFocus||i.hasFocus()},o=!0,s=e.exports=n(3).assign({},n(22).Events,{visible:function(){return o},focused:function(){return o&&r()}});!function(){var e=function(){var e=!i.hidden;o!==e&&(o=e,s.trigger("change:visibility",o))};e(),i.addEventListener("visibilitychange",e,!1)}()},function(e,t,n){"use strict";function i(){return b||(b=h("https://apis.google.com/js/api:client.js",{onload:function(){return window.gapi.load("auth2",r)},onerror:function(){b=null}})),w.promise()}function r(){window.gapi.auth2.init({scope:f,client_id:m}).then(function(e){_=e,w.resolve()})}function o(){var e=n(55).defer();return v&&v.isSignedIn()?e.resolve(l(v)):y&&!y.closed?y.focus():y=p(function(){_.signIn({prompt:g}).then(function(t){v=t,e.resolve(l(t))},e.reject)}),e}function s(e){var t=e.size,i=n(55).defer();return v?i.resolve(a(v,t)):_.signIn().then(function(e){i.resolve(a(e,t))}),i}function a(e){var t=arguments.length<=1||void 0===arguments[1]?200:arguments[1],i=e.getBasicProfile(),r=i.getImageUrl(),o=r?n(62).modify(r,{query:{sz:t}}):"";return{name:i.getName(),picture_url:o}}function l(e){return e.getAuthResponse().access_token}function u(e){return function(){return e.apply(void 0,arguments)}}var c=n(3).extend,d=n(3).mapObject,h=n(148).insertScript,p=n(284).interceptPopup,f=["plus.login","userinfo.email","userinfo.profile"].map(function(e){return"https://www.googleapis.com/auth/"+e}).join(" "),g="select_account login",m=n(54).get("google_client_id"),_=null,v=null,y=null,b=null,w=n(55).defer();e.exports=c({loadGoogleAuthSDK:i},d({getGoogleToken:o,getCurrentGoogleUser:s},u))},,function(e,t,n){"use strict";function i(){var e=this;return this.maxResults&&Object.keys(this.attributes).length>=this.maxResults&&(this.next_href=!1),this.next_href===!1?n(55).resolve():n(65).prototype.fetch.call(this).then(function(){i.call(e)})}var r=function(e,t){return{id:e,userId:n(63).currentUserId()}},o=function(e,t){return null},s=function(){return{userId:n(63).currentUserId()}},a=function(){return{limit:5e3,linked_partitioning:1}};e.exports=n(65).extend({readEndpoint:null,createEndpoint:null,deleteEndpoint:null,getReadEndpointPathParams:s,getReadEndpointQueryParams:a,getCreateEndpointPathParams:r,getCreateEndpointQueryParams:o,getDeleteEndpointPathParams:r,getDeleteEndpointQueryParams:o,maxResults:null,readOnly:!1,_currentRequests:null,next_href:null,_fetchDefer:null,setup:function(){this._currentRequests=new(n(251))},url:function(){return null===this.next_href?n(23).getUrlForEndpoint(this.readEndpoint,this.getReadEndpointPathParams(),this.getReadEndpointQueryParams()):this.next_href},get:function(e){return n(65).prototype.get.call(this,e)||!1},fetch:function(){var e=this;return this._fetchDefer?this._fetchDefer:(this._fetchDefer=n(63).isLoggedIn()?i.call(this):n(55).promise(function(t,r){e.listenToOnce(n(56),"connect:hasUserData",function(){i.call(e).fail(function(){e._fetchDefer=null}).then(t,r)})}),this._fetchDefer.fail(function(){e._fetchDefer=null}))},parse:function(e){var t=e.next_href,n=e.collection;return this.next_href=t||!1,n.reduce(function(e,t){return e[t]=!0,e},{})},toggle:function(e,t){var n=this.get(e),i="boolean"==typeof t?t:!n;i!==n&&(i?this.set(e,!0):this.unset(e))},setRemote:function(e,t,i){var r,o=this;if(this.readOnly)return n(55).resolve();if(!this._currentRequests.get(e)){var s=t?[this.createEndpoint,this.getCreateEndpointPathParams(e,i),this.getCreateEndpointQueryParams(e,i)]:[this.deleteEndpoint,this.getDeleteEndpointPathParams(e,i),this.getDeleteEndpointQueryParams(e,i)],a=(r=n(23)).callEndpoint.apply(r,s);return this._currentRequests.set(e,a),a.always(function(){o._currentRequests.unset(e)}).done(function(){var n=o.get(e);t!==n&&o.setRemote(e,n)}).fail(n(116).ajaxNonFatal("Could not toggle value"))}},hasDataForView:function(){return!!this.lastFetchTime}},{neverRelease:!0,hashFn:function(){return 1}})},function(e,t,n){"use strict";function i(e,t){var i={q:e,recaptcha_response:t},r=b.get(e);return r&&!t?n(55).resolve(r):f("checkIdentifier",{queryParams:i}).then(function(t){return t.status&&b.set(e,t),t})}function r(e,t,n){var i={client_id:v,scope:y,recaptcha_response:n,credentials:{identifier:e,password:t}};return f("signinWithPassword",{payload:i})}function o(e){return a("facebook",e)}function s(e){return a("google",e)}function a(e,t){var n="facebook"===e?"signinWithFacebook":"signinWithGoogle",i={client_id:v,scope:y,provider_token:t};return f(n,{payload:i})}function l(e,t){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],i=arguments.length<=3||void 0===arguments[3]?"":arguments[3];return c(e).then(function(r){var o=r.email_sign_up_token,s={scope:y,client_id:v,email_sign_up_token:o,recaptcha_response:i,email:e,password:t,date_of_birth:u(n)};return f("signupWithEmail",{payload:s})})}function u(e){var t=36e5,n=24*t,i=365*n,r=new Date(Date.now()-i*e);return{month:r.getMonth()+1,year:r.getFullYear()}}function c(e){var t={email:e,client_id:v};return f("signupWithEmailToken",{payload:t})}function d(e){return p("google",e)}function h(e){return p("facebook",e)}function p(e,t){var n="facebook"===e?"signupWithFacebook":"signupWithGoogle",i={client_id:v,scope:y,provider_token:t};return f(n,{payload:i})}function f(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t.pathParams,r=void 0===i?null:i,o=t.queryParams,s=void 0===o?null:o,a=t.payload,l=void 0===a?null:a,u={},c=n(51).getLocale();return"en"!==c&&(u={"Device-Locale":c}),_(g,m(e,r,s,u,l))}function g(e){return n(55).resolve(e.body||{})}var m=n(23).callEndpoint,_=n(55).mapEither,v=n(54).get("client_id"),y="fast-connect non-expiring purchase signup upload".split(" ").sort().join(" "),b=new(n(251))({maxLength:5});e.exports={checkIdentifier:i,signinWithPassword:r,signinWithFacebook:o,signinWithGoogle:s,signupWithEmail:l,signupWithFacebook:h,signupWithGoogle:d}},,,function(e,t,n){"use strict";function i(e){return e?e.replace(/^https?:.+?\w\//,"/"):null}function r(){if(this.resource){var e=s(this.getEntityType());this.set({artwork_url:this.resource.get(e.artwork_url),link:i(this.resource.get(e.link))})}}function o(){this.listenTo(this.resource,n(3).map(s(this.getEntityType()),function(e){return"change:"+e}).join(" "),r)}function s(e){switch(e){case"user":return{artwork_url:"avatar_url",link:"permalink_url"};case"track":return{artwork_url:"artwork_url",link:"permalink_url"}}}function a(e){switch(e){case"user":return n(60);case"track":return n(64);default:return null}}e.exports=n(65).extend({resource_type:"shortcut",url:null,submodelMap:{entity:null},createSubmodel:function(){var e=a(this.getEntityType());null!==e&&(this.resource=new e(this.get("entity")),this.addSubmodel(this.resource),o.call(this)),r.call(this)},fetch:function(){return this.resource?this.resource.fetch():n(55).resolve({})},getEntityType:function(){switch(this.get("kind")){case"track":case"like":return"track";case"user":case"following":return"user";case"query":return"query"}},isQuery:function(){return"query"===this.get("kind")},equivalentTo:function(e){return this.get("output")===e.get("output")&&this.getEntityType()===e.getEntityType()}})},,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/loader-db80c5.gif"},,,function(e,t){e.exports={defaultKind:"top",defaultGenre:"all-music",kinds:[{id:"top",
urlPart:"top"},{id:"trending",urlPart:"new"}],genres:[{id:"all-music",category:"all",content:"music"},{id:"all-audio",category:"all",content:"audio"},{id:"alternativerock",category:"music",content:"music"},{id:"ambient",category:"music",content:"music"},{id:"classical",category:"music",content:"music"},{id:"country",category:"music",content:"music"},{id:"danceedm",category:"music",content:"music"},{id:"dancehall",category:"music",content:"music"},{id:"deephouse",category:"music",content:"music"},{id:"disco",category:"music",content:"music"},{id:"drumbass",category:"music",content:"music"},{id:"dubstep",category:"music",content:"music"},{id:"electronic",category:"music",content:"music"},{id:"folksingersongwriter",category:"music",content:"music"},{id:"hiphoprap",category:"music",content:"music"},{id:"house",category:"music",content:"music"},{id:"indie",category:"music",content:"music"},{id:"jazzblues",category:"music",content:"music"},{id:"latin",category:"music",content:"music"},{id:"metal",category:"music",content:"music"},{id:"piano",category:"music",content:"music"},{id:"pop",category:"music",content:"music"},{id:"rbsoul",category:"music",content:"music"},{id:"reggae",category:"music",content:"music"},{id:"reggaeton",category:"music",content:"music"},{id:"rock",category:"music",content:"music"},{id:"soundtrack",category:"music",content:"music"},{id:"techno",category:"music",content:"music"},{id:"trance",category:"music",content:"music"},{id:"trap",category:"music",content:"music"},{id:"triphop",category:"music",content:"music"},{id:"world",category:"music",content:"music"},{id:"audiobooks",category:"audio",content:"audio"},{id:"business",category:"audio",content:"audio"},{id:"comedy",category:"audio",content:"audio"},{id:"entertainment",category:"audio",content:"audio"},{id:"learning",category:"audio",content:"audio"},{id:"newspolitics",category:"audio",content:"audio"},{id:"religionspirituality",category:"audio",content:"audio"},{id:"science",category:"audio",content:"audio"},{id:"sports",category:"audio",content:"audio"},{id:"storytelling",category:"audio",content:"audio"},{id:"technology",category:"audio",content:"audio"}]}},function(e,t,n){var i=n(3),r=n(20),o=e.exports={getMarkup:function(e,t,n){if(Array.isArray(t))return t.map(function(t){return o.getMarkup(e,t,n)}).join("");n=n||{};var s=[],a=n.whitelist,l="self"===n.closingTag?"/":"",u=n.closingTag===!0?"</"+e+">":"";return i.each(t,function(e,t){"style"===t&&"object"==typeof e&&(e=this.getStyleAttr(e)),a&&-1===a.indexOf(t)||s.push(" "+t+'="'+r.Utils.escapeExpression(e)+'"')},this),"<"+e+s.join("")+l+">"+u},getStyleAttr:function(e){return i.map(e,function(e,t){return null!=e&&""!==e?t+":"+e+";":""}).join("")}}},function(e,t){e.exports={plural:function(e,t,n){return n="string"==typeof n?n:t+"s",1===e?t:n},possessive:function(e){return e+"s"},capitalize:function(e){return"string"!=typeof e?"":e.split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(" ")}}},,function(e,t,n){"use strict";function i(e){e&&-1===this.getRecipientIds().indexOf(e.id)&&this.set("recipients",this.get("recipients").concat(e))}function r(e){return e instanceof n(60)?a(e):e instanceof n(230)?n(55).resolve(o(e)):f(e)?n(55).reject():n(60).resolve(e).then(a)}function o(e){return{id:e.resource.resource_id,username:e.get("output"),avatar_url:e.get("artwork_url")}}function s(e){return e.hasDataForView(["username","avatar_url"])?n(55).resolve(e):e.fetch()}function a(e){return s(e).then(function(){return{id:e.id,username:e.get("username"),avatar_url:e.get("avatar_url")}})}function l(e,t){var i,r=this;t!==this._lastBodyValue&&(this._lastBodyValue=t,n(173).getAudibleModels(t.match(n(173).scLinksRegexGlobal)||[]).done(function(e){i=n(3).reduce(e,function(e,t){return t&&t.audible&&e.push(t.audible),e},[]),r.set("attachments",i)}))}function u(e,t){t&&!t.isValid&&m(["messages","new-message-validation-error"])}function c(e){u.call(this,"recipients",e)}function d(e){u.call(this,"body",e)}function h(e){var t,i;t=n(3).reject(this.get("attachments"),function(t){return t.resource_id===e?(i=t,!0):!1}),this.set("attachments",t),p.call(this,i)}function p(e){var t=this.get("body"),i=e.getShareURL(),r=new RegExp("\\n{0,2}"+n(202).regexpEscape(i)+"\\S*\\n{0,2}","igm");t=t.replace(r,""),this.set("body",t)}function f(e){return"string"==typeof e&&"soundcloud"===e.toLowerCase()}function g(){this.clearStoredValues(),this.set("body","")}var m=n(58).trackV0Click;e.exports=n(82).extend(n(1306),{fields:{recipients:{defaultValue:[]},body:{defaultValue:""},links:{defaultValue:[]},attachments:{defaultValue:[]}},constraints:{body:[[n(67),{message:n(51).t("Enter a message.")}],[n(108),{maxLength:2e4,message:n(51).t("Enter a message that is up to [[maxLength]] characters.")}]],recipients:[[n(67),{message:n(51).t("Enter a recipient.")}]]},buttons:{send:{label:n(51).t("Send"),action:"send"}},serialization:{restoreAndStoreOnSetup:!0,fields:["body"]},actions:{"default":"send",send:function(e){var t=n(55).defer(),i=this.get("recipients")[0],r=this.get("body");return this.validate().done(function(o){o?n(306).send(i,r,e.showSuccessMessage).done(t.resolve).fail(t.reject):t.reject()}).fail(t.reject),t.done(g.bind(this)),t}},setup:function(e,t){this.serialization.storeKey=t.conversationId&&"conversation_"+t.conversationId,this.listenTo(this,"change:body",l).listenTo(this,"validation:body",d).listenTo(this,"validation:recipients",c).listenTo(this,"removeSoundFromAttached",h)},getRecipientIds:function(){return n(3).pluck(this.get("recipients"),"id")},addRecipient:function(e){var t=r(e);return t.done(i.bind(this))},addAttachment:function(e,t){this.set("body",this.get("body").replace(/\n*$/,"\n"+e.getShareURL({type:t})+" "))}})},,function(e,t,n){(function(t){"use strict";function i(e){var t=n(55).defer(),i=n(83).setFormat(e[this.imageProperties.read],20),r=this,o=new(n(155))({tolerance:1,baseDelay:2e3,maxDelay:8e3,backoffRate:1.5,giveup:6,enabled:!1}),s=new window.Image;return s.onload=function(){var n=r.imageProperties.read;r.get(n)===e[n]&&r.forceChange(n),r.set(e),t.resolve(e)},s.onerror=function(){o.failed()},o.on("enabled",function(){s.src=i+"?"+Date.now()}).on("giveup",t.reject),this.trigger("imageUrlChanged",i),t.done(this.trigger.bind(this,"imageTranscodingDone",e)).fail(this.trigger.bind(this,"imageTranscodingFail",e))}function r(e){n(73).trigger("error",{action:"upload_image",xhr:e})}function o(e){var t=new window.FileReader,i=n(55).defer();return t.onload=function(e){var t=new window.Image;t.onload=i.resolve.bind(i,t),t.src=e.target.result},t.onerror=t.onabort=i.reject,t.readAsDataURL(e),i}function s(e,t){var i=n(55).defer();return o(e).done(function(e){var n=window.document.createElement("canvas"),r=n.getContext("2d"),o=a(e.width,e.height);n.width=n.height=t,r.imageSmoothingEnabled=r.mozImageSmoothingEnabled=r.oImageSmoothingEnabled=r.webkitImageSmoothingEnabled=!0,r.imageSmoothingEnabled=!0,r.drawImage(e,o.x,o.y,o.w,o.h,0,0,t,t),i.resolve(n.toDataURL("image/png"))}).fail(i.reject),i}function a(e,t){var n=e-t;return n>0?{x:Math.floor(n/2),y:0,w:t,h:t}:{x:0,y:Math.floor(-n/2),w:e,h:e}}var l=n(58).trackV0Click;e.exports=new(n(21))({_imageFile:null,_imageSource:null,_imageDataURI:null,applyTo:function(e,t){e.imageProperties=n(3).pick(t,"read","write")},defaults:{getImageSaveUrl:function(){return this.saveUrl()}},getImageUrl:function(e){return this._imageDataURI||n(83).urlFrom(this.attributes,e)},hasOwnImage:function(){return!!this._imageDataURI||!n(83).isDefaultImage(this.get(this.imageProperties.read))},hasNewImage:function(){return!!this._imageFile},getPlaceholderUrl:function(e){return this._imageDataURI?!1:n(83).getPlaceholderUrl(this.getImageUrl(),e)},getImageFileInfo:function(){return{file:this._imageFile,source:this._imageSource}},setImageFile:function(e,t){var n=this;this._imageSource=t,this._imageFile=e,s(e,500).done(function(i){n._imageDataURI=i,n.trigger("imageDataChanged",{file:e,source:t})})},unsetImageFile:function(e){e=e||{},this._imageFile=this._imageSource=null,e.force&&this.unsetImageDataURI(),e.silent||this.trigger("imageDataChanged",{file:null,source:null})},unsetImageDataURI:function(){this._imageDataURI=null},uploadImage:function(){var e,o=this,s=this._imageFile,a=this._imageSource,u=n(55).defer();return n(98).formData&&s?(l(["upload","image","upload_started",a]),this.unsetImageFile(),e=new window.FormData,e.append(this.get("kind")+"["+this.imageProperties.write+"]",s),t.ajax({url:this.getImageSaveUrl(),type:"PUT",data:e,processData:!1,contentType:!1,dataType:"json"}).done(function(e){l(["upload","image","upload_success",a]),"user"===o.resource_type&&l(null,{click_name:"profile_image:add"}),u.resolve(e)}).done(i.bind(this)).fail(u.reject).fail(r.bind(this)),u):void 0}})}).call(t,n(1))},function(e,t,n){"use strict";e.exports=new(n(21))({applyTo:function(e,t){e.getTitleAttribute=function(){return t.attr}}})},,,function(e,t,n){"use strict";function i(){var e=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","isEmpty","chain","sample"];return e.reduce(function(e,t){return e[t]=function(){var e=[this._asMap()];return e.push.apply(e,arguments),n(3)[t].apply(n(3),e)},e},{})}e.exports=n(156).extend([i(),{initialize:function(e){this._store={},this.length=0,this._final=!1,this.maxLength=e&&e.maxLength||!1,this.maxLength&&(this._keys=[])},maxLength:0,get:function(e){return this._store[e]},set:function(e,t){return this.has(e)?this.maxLength&&this._keys.splice(this._keys.indexOf(e),1):(++this.length,this.maxLength&&this.length>this.maxLength&&this.unset(this._keys[0])),this.maxLength&&this._keys.push(e),this._store[e]=t,this},unset:function(e){var t;return this.has(e)&&(--this.length,this._final?this._store[e]=t:(delete this._store[e],this.maxLength&&this._keys.splice(this._keys.indexOf(e),1))),this},reset:function(){return this._store={},this.maxLength&&(this._keys=[]),this._final=!1,this.length=0,this},has:function(e){return this._store.hasOwnProperty(e)},keys:function(){return Object.keys(this._store)},prune:function(e){return n(3).difference(this.keys(),e).forEach(this.unset,this),this},_asMap:function(){return this._store},finalize:function(){this._final=!0}}])},function(e,t,n){"use strict";e.exports={render:function(e,t,n){var i=e(t||{});n&&(n.innerHTML=i)},subviews:function(e){n(523).replacePlaceholders(e)}}},function(e,t,n){"use strict";function i(){if(!n(63).isLoggedIn())return void n(56).once("connect:login",i);var e=n(63).getAuthToken(),t=n(912).generate(),s=n(23).getUrlForEndpoint("trinitySubscribe",{},{registrationID:t,oauth:e}),l=n(23).getUrlForEndpoint("trinityPublish");o=n(472).getInstance(l,s,{connected:!1,debug:c(),authorization:e,withCredentials:!1,json:!0,singleConnection:!0,registrationId:t,heartbeatTimeoutMs:2*r}),o.on(n(472).Events.ACTION,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];e!==a.HEARTBEAT&&u.trigger.apply(u,[e].concat(n))})}var r=1e4,o=null,s=n(472).SCMessages,a=s.actions,l=s.events,u=e.exports=n(3).assign({},n(22).Events,{actions:a,events:l,activate:n(3).once(i),publishEvent:function(e){o&&o.publishEvent(e)},disconnect:function(){o&&o.disconnect()},reconnect:function(){o&&o.reconnect()}}),c=function(){return n(54).get("rollouts").get("v2_trinity_debug")||n(54).get("rollouts").get("internal_qa")}},function(e,t){"use strict";e.exports={CONSUMER_SUBSCRIPTION_HIGH_TIER:"go",CONSUMER_SUBSCRIPTION_FREE:"free",CREATOR_SUBSCRIPTION_FREE:"free",CREATOR_SUBSCRIPTION_PRO:"creator-pro",CREATOR_SUBSCRIPTION_PRO_UNLIMITED:"creator-pro-unlimited",CREATOR_GIFT_FREE:"gift-free",CREATOR_GIFT_PRO:"gift-pro",CREATOR_GIFT_PRO_UNLIMITED:"gift-pro-unlimited"}},,,,,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/close-light-3cc615.png"},,,,,,function(e,t){e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function i(e){return this._hooksPause.every(function(t){return t(e)})}function r(e){var t=e.resource_id||e.id||e.cid;if(!t)throw new Error("Your model should have a unique `id`, `cid` or `resource_id` property");return t}function o(e){B=e,e&&(N.AudioManagerStates=e.States)}function s(){var e=V();return f.call(this,!0).done(function(t){e.resolve(t.url)}).fail(function(){e.reject()}),e.promise()}function a(e){var t,n=this.options;return t={id:this.getId(),src:e.url,duration:J.result(n.duration),title:this.options.title,mimeType:e.mimeType,forceSingle:n.useSinglePlayer},B.createAudioPlayer(t,{streamUrlProvider:s.bind(this)})}function l(e,t){var n=t?"on":"off";e[n]("state-change",D,this)[n]("position-change",c,this)[n]("metadata",u,this)}function u(){this.trigger(q.METADATA)}function c(){this._prevPosition!==this.currentTime()&&(this.trigger(q.TIME),this._prevPosition=this.currentTime())}function d(){this._initAudioDefer&&(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null)}function h(){d.call(this),this.controller&&(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(q.RESET))}function p(){this._registerPlays=!0,this.pause(),this.trigger(q.FINISH)}function f(e){var t=V(),n=this.streamInfo&&!e;return n?t.resolve(this.streamInfo):g.call(this).done(function(e){var n=Q.choosePreferredStream(e,this.options);n?t.resolve(n):(this.trigger(q.NO_PROTOCOL),$.warn("(%s) Could not match a protocol of given media descriptor to one of the supported protocols (%s), aborting attempt to play.",this.getId(),this.options.protocols),t.reject())}.bind(this)).fail(function(e){$.warn("(%s) Stream request failed with status: %d",this.getId(),e.status),_.call(this,e),v.call(this,e),m.call(this,e),y.call(this,e),t.reject()}.bind(this)),t.promise()}function g(){if(this.options.streamUrls&&!this._usedPrefetchUrls){var e,t=V();return this._usedPrefetchUrls=!0,e=J.result(this.options.streamUrls),t.resolve(e),t.promise()}return this.ajax({type:"GET",url:J.result(this.options.streamUrlsEndpoint),dataType:"json",async:this.options.asyncFetch,timeout:this.options.asyncFetch?oe:re})}function m(e){e.status>=400&&e.status<500&&this.trigger(q.REQUEST_FAILURE)}function _(e){var t=e.status>=400&&e.status<500&&-1!==(e.responseText||"").indexOf("geo_blocked");t&&this.trigger(q.GEO_BLOCKED)}function v(e){0===e.status&&this.trigger(q.NO_CONNECTION)}function y(e){e.status>=500&&this.trigger(q.API_FAILURE)}function b(){return this.controller&&this.controller.getCapabilities&&this.controller.getCapabilities()?this.controller.getCapabilities().needsUrlRefresh:!0}function w(e){if(!b.call(this))return!0;var t=this._initAudioDefer&&this._initAudioDefer.state(),n=Q.streamValidForPlayingFrom(this.streamInfo,e);return this.controller&&this.controller.hasStreamUrlProvider&&this.controller.hasStreamUrlProvider()?!0:t&&("pending"===t||"resolved"===t&&n)}function x(e){e&&!this._bufferingTimeout?this._bufferingTimeout=window.setTimeout(function(){this._isBuffering=!0,this.trigger(q.BUFFERRING_START)}.bind(this),se):e||(this._bufferingTimeout&&(window.clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&&(this._isBuffering=!1,this.trigger(q.BUFFERRING_END)))}function k(){this.off(q.TIME,this.seekTimeEventHandler),this.trigger(q.SEEKED),this.seekTimeEventHandler=null}function S(){this._errorRecoveryFlagsResetTimeout=window.setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0}.bind(this),ce)}function T(){this._errorRecoveryFlagsResetTimeout&&window.clearTimeout(this._errorRecoveryFlagsResetTimeout)}function E(){var e=this.isPlaying(),t=Date.now();return T.call(this),this._errorRecoveryTime&&this._errorRecoveryTime+le>t&&this._errorRecoveryCounts>ue?(this.pause(),this.trigger(q.AUDIO_ERROR,this),void h.call(this)):(this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,h.call(this),void(e&&this.play({seek:this.currentTime(),userInitiated:!1})))}function A(e){this.logAudioError({error_code:e,protocol:this.streamInfo?this.streamInfo.protocol:void 0,player_type:this.controller?this.controller.getType():void 0,host:this.streamInfo?X.getUrlHost(this.streamInfo.url):void 0,url:this.streamInfo?this.streamInfo.url:void 0})}function C(){var e,t=B.Errors;if(!this.controller)return $.error("(%s) Controller is null, aborting error handler.",this.getId(),this),A.call(this,null),void E.call(this);switch(e=this.controller&&this.controller.getErrorID(),$.error("(%s) %s",this.getId(),this.controller.getErrorMessage?this.controller.getErrorMessage():"Controller does not provide getErrorMessage()"),R(e,"MSE","GENERIC","HTML5_AUDIO_DECODE","HTML5_AUDIO_SRC_NOT_SUPPORTED","FLASH_PROXY","FLASH_RTMP_CONNECT_FAILED","FLASH_RTMP_CANNOT_PLAY_STREAM")&&A.call(this,e),e){case t.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(q.FLASH_NOT_LOADED);break;case t.FLASH_PROXY_FLASH_BLOCKED:this.trigger(q.FLASH_BLOCK);break;case t.FLASH_RTMP_CONNECT_FAILED:J.without(this.options.protocols,Y.RTMP);case t.FLASH_RTMP_CANNOT_PLAY_STREAM:case t.FLASH_RTMP_CONNECT_CLOSED:case t.HTML5_AUDIO_NETWORK:case t.HTML5_AUDIO_ABORTED:case t.HTML5_AUDIO_DECODE:case t.HTML5_AUDIO_SRC_NOT_SUPPORTED:case t.GENERIC_AUDIO_ENDED_EARLY:case t.MSE_BAD_OBJECT_STATE:case t.MSE_NOT_SUPPORTED:case t.MSE_MP3_NOT_SUPPORTED:case t.MSE_HLS_NOT_VALID_PLAYLIST:case t.MSE_HLS_PLAYLIST_NOT_FOUND:case t.MSE_HLS_SEGMENT_NOT_FOUND:E.call(this);break;case t.GENERIC_AUDIO_OVERRUN:p.call(this);break;default:$.error("(%s) Unhandled audio error code: %s",this.getId(),e,this)}}function I(e,t){switch(this.options.debug&&P.call(this,e,t),e){case q.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case q.PLAY:var n=t;this.toggleMute(ee.muted),this.setVolume(ee.volume),this._isPlaying=!1,this._isPlayActionQueued=!0,this._userInitiatedPlay=void 0!==n.userInitiated?!!n.userInitiated:!0,L.call(this);break;case q.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,this._registerPlays&&this.registerPlay();break;case q.BUFFERRING_START:case q.SEEK:this._isPlaying&&(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case q.BUFFERRING_END:case q.SEEKED:this._isPlayActionQueued&&(this._isPlaying=!0,this._isPlayActionQueued=!1);break;case q.NO_CONNECTION:this.pause(),this._hasNoConnection=!0,this._noConnectionSince=Date.now();break;case q.API_FAILURE:this.pause();break;case q.REQUEST_FAILURE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case q.GEO_BLOCKED:this._isGeoBlocked=!0;break;case q.NO_STREAMS:x.call(this,!1),d.call(this),O.call(this);break;case q.STREAMS:this._isGeoBlocked=!1,this._noConnectionSince=null,this._hasNoConnection=!1;break;case q.ONLINE:F.call(this);break;case q.OFFLINE:}}function D(e){var t=B.States,n=B.Errors;switch(e){case t.IDLE:M.call(this),this.controller&&this.controller.getErrorID()===n.FLASH_PROXY_FLASH_BLOCKED&&this.trigger(q.FLASH_UNBLOCK);break;case t.PAUSED:M.call(this),x.call(this,!1),this.seekTimeEventHandler&&this.isPaused()&&k.call(this),this.isPlaying()&&this.trigger(q.PAUSE,{position:this.currentTime()});break;case t.PLAYING:M.call(this),x.call(this,!1),S.call(this),this.trigger(q.PLAY_RESUME);break;case t.LOADING:case t.SEEKING:M.call(this),x.call(this,!0);break;case t.ENDED:M.call(this),p.call(this);break;case t.ERROR:x.call(this,!1),C.call(this)}this.trigger(q.STATE_CHANGE,e)}function P(e,t){var n=this.options.title;n=n&&n.length?" ["+n.replace(/\s/g,"").substr(0,6)+"]":"",e===q.STATE_CHANGE?$("(%s)%s Event: %s (%s)",this.getId(),n,e,t):e!==q.TIME||this._loggedTime?e!==q.TIME&&$("(%s)%s Event: %s",this.getId(),n,e):$("(%s)%s Event: %s %dms",this.getId(),n,e,this.currentTime()),this._loggedTime=e===q.TIME}function M(){this._initAudioDefer&&this._initAudioDefer.resolve()}function R(e){return void 0===B.Errors[e]?!1:Array.prototype.slice.call(arguments,1).some(function(t){return 0===e.indexOf(t)})}function L(){function e(){var e=window.navigator.onLine;$("Navigator `onLine` status is now: "+e),window.setTimeout(function(){window.navigator.onLine===e&&this.trigger(e?q.ONLINE:q.OFFLINE)}.bind(this),500)}this._onlineEventsRegistered||(this._onlineEventsRegistered=!0,window.addEventListener("online",e.bind(this)),window.addEventListener("offline",e.bind(this)))}function F(){if(this.hasNoConnection()&&this._isPlayRetryQueued){var e=Date.now()-this._noConnectionSince;this._isPlayRetryQueued=!0,e<this.options.retryAfterNoConnectionEventTimeout&&this.play({userInitiated:!1})}}function O(){this.hasNoConnection()&&!this._userInitiatedPlay&&(this._isPlayRetryQueued=!0)}var N,B,$,U=n(1),z=n(6),H=n(8),j=n(9),V=n(2).Deferred,q=n(7),W=n(14),G=n(10),Y=n(15),K=n(16),Q=n(18),X=n(12),J=n(13),Z=n(19),ee={muted:!1,volume:1},te=[],ne={},ie={soundId:ne,duration:ne,title:null,registerEndpoint:null,streamUrlsEndpoint:ne,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,protocols:[Y.PREVIEW,Y.HLS,Y.RTMP,Y.HTTP],extensions:[W.MP3],maxBitrate:1/0,mediaSourceEnabled:!1,mseFirefox:!1,mseSafari:!1,eventLogger:null,logErrors:!0,logPerformance:!0,ajax:null,retryAfterNoConnectionEventTimeout:6e4,fadeOutDurationOnPause:0,fadeOutDurationOnConcurrentStreaming:0,fadeOutDurationOnFinish:0,fadeOutAlgo:Z.VolumeAutomator.Algos.EaseInOut,previewOnly:!1},re=6e3,oe=6e3,se=400,ae=6e4,le=6e3,ue=3,ce=3e4;N=e.exports=function(e,t){if(1===arguments.length?t=e:N.setAudioManager(e),!B)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=J.extend({},ie,t);var n=Object.keys(this.options).filter(function(e){return this.options[e]===ne},this);if(n.length)throw new Error("SCAudio: pass into constructor the following options: "+n.join(", "));K.prioritizeAndFilter(this.options),this.controller=null,this.streamInfo=null,this._userInitiatedPlay=this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._onlineEventsRegistered=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=this._hasNoConnection=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=this._noConnectionSince=null,this.options.debug&&(this._loggedTime=!1),this._modelListeners={},this._hooksPause=[],this.audioPerfMonitor=new H(this,this.logAudioPerformance.bind(this)),this.audioLogger=new z(this),this.volumeAutomator=new Z.VolumeAutomator(this),$=$||j({enabled:this.options.debug,buffer:!0,label:"scaudio"})},J.extend(N.prototype,G,{constructor:N,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=V(),f.call(this).done(function(e){var t=!0;this.streamInfo&&(t=!1),this.streamInfo=e,t&&this.trigger(q.STREAMS),this.controller=a.call(this,e),l.call(this,this.controller,!0),D.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(q.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(q.CREATED)}.bind(this))),this._initAudioDefer.promise()},updateOptions:function(e){J.extend(this.options,e)},registerPlay:function(){var e=this.options.soundId,t=this.options.registerEndpoint;return te.indexOf(e)>-1?!1:(te.push(e),window.setTimeout(function(){var t=te.indexOf(e);t>-1&&te.splice(t,1)},ae),this._registerCounts++,this._registerPlays=!1,this.trigger(q.REGISTERED),t&&this.ajax({type:"POST",url:J.result(t),dataType:"json"}),!0)},toggle:function(){this[this.isPaused()?"play":"pause"]()},play:function(e){var t;if(e&&null!=e.seek)t=e.seek;else{if(this.isPlaying())return;t=this.currentTime()}e=J.extend({},e,{position:t}),this.trigger(q.PLAY,e),w.call(this,t)||(h.call(this),this._isPlayActionQueued=!0),this.initAudio().done(function(){this._isPlayActionQueued&&(this._storedPosition=null,this.trigger(q.PLAY_START,e),this.controller&&this.controller.play(t))}.bind(this)),x.call(this,!0)},pause:function(e){this.isPaused()||(e=J.extend({},e,{position:this.currentTime()}),i.call(this,e)&&(this.trigger(q.PAUSE,e),this.callPauseOnController()))},callPauseOnController:function(){this.controller&&this.controller.pause()},registerHook:function(e,t){switch(e){case"pause":this._hooksPause.push(t);break;default:throw new Error("can`t register hook for "+e)}},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,J.without(te,this.options.soundId),window.clearTimeout(this._bufferingTimeout),d.call(this),this.controller&&(this.controller.kill(),this.controller=null),delete this.controller,this.trigger(q.DESTROYED),this.off()},seek:function(e){return this.controller?e>=J.result(this.options.duration)?void p.call(this):(this.seekTimeEventHandler&&this.off(q.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=J.after(2,function(){k.call(this)}.bind(this)),this.on(q.TIME,this.seekTimeEventHandler),this.trigger(q.SEEK,{from:this.currentTime(),to:e}),this.isPlaying()&&!w.call(this,e)?(h.call(this),void this.play({seek:e})):void this.controller.seek(e)):void 0},seekRelative:function(e){this.controller&&this.seek(this.currentTime()+e)},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var e=0;return this.controller&&(e=this.controller.getLoadedPosition()/this.controller.getDuration(),e=e>=.99?1:e),e},duration:function(){return this.controller&&this.controller.getDuration()||0},buffered:function(){return this.controller&&this.controller.getLoadedPosition()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!(!this.controller||this.controller.getState()!==B.States.LOADING)},hasNoConnection:function(){return!!this._hasNoConnection},hasStreamInfo:function(){return!!this.streamInfo},isGeoBlocked:function(){return!!this._isGeoBlocked},toggleMute:function(e){N.toggleMute(e)},isMuted:function(){return N.isMuted()},setVolume:function(e){N.setVolume(e)},getVolume:function(){return N.getVolume()},logAudioPerformance:function(e){this.getEventLogger()&&this.options.logPerformance&&this.getEventLogger().audioPerformance(e)},logAudioError:function(e){this.getEventLogger()&&this.options.logErrors&&this.getEventLogger().audioError(e)},getAudioManagerStates:function(){return B.States},getId:function(){return this.options.resourceId||this.options.soundId},getEventLogger:function(){return this.options.eventLogger},registerModelEventListener:function(e,t){var n=r(e);if(this._modelListeners[n])throw new Error("Data model is already registered (forgot to unregister it or registering twice?)");this._modelListeners[n]=t=t.bind(this,e),this.on("all",t)},unregisterModelEventListener:function(e){var t=r(e);this._modelListeners[t]&&(this.off("all",this._modelListeners[t]),delete this._modelListeners[t])},ajax:function(e){return this.options.ajax?this.options.ajax(e):U(e)},trigger:function(e,t){I.call(this,e,t),G.trigger.call(this,e,t)}}),J.extend(N,{getSettings:function(){return ee},setSettings:function(e){J.extend(ee,e)},setAudioManager:o,setAudioManagerOnce:J.once(o),toggleMute:function(e){ee.muted=void 0===e?!ee.muted:!!e,B&&B.setVolume(ee.muted?0:1)},isMuted:function(){return ee.muted},setVolume:function(e){ee.volume=void 0===e?1:e,B&&B.setVolume(ee.volume)},getVolume:function(){return ee.volume},Extensions:W,Protocols:Y,Events:q,FadeOutAlgos:Z.VolumeAutomator.Algos,BUFFER_DELAY:se,PLAY_REGISTRATION_TIMEOUT:ae})},function(e,t,n){var i=n(2).Deferred,r=4;e.exports=function(e){var t,n,o,s,a,l,u,c;e&&(o=e.data||null,n=e.url||"",t=e.type||"GET",s=e.dataType||"text",a=e.async,l=e.timeout,u=e.beforeSend||null);var d=i();a=a!==!1;var h=new XMLHttpRequest;return h.open(t,n,a),a&&(h.responseType="text"),u&&u(h),h.onreadystatechange=function(){if(h.readyState===r)if(clearTimeout(c),0!==h.status&&h.status<400){var e=h.responseText;if("json"===s)try{e=JSON.parse(e)}catch(t){return void d.reject(h)}d.resolve(e)}else d.reject(h)},null!=l&&(c=setTimeout(function(){h.readyState!==r&&(h.abort(),d.reject(h))},l)),h.send(o),d.promise()}},function(e,t,n){e.exports=n(3)},function(e,t,n){/*!
		* jquery-deferred
		* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
		* MIT Licensed
		*/
var i=e.exports=n(4),r=Array.prototype.slice;i.extend({Deferred:function(e){var t=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return i.Deferred(function(n){i.each(t,function(t,r){var s=r[0],a=e[t];o[r[1]](i.isFunction(a)?function(){var e=a.apply(this,arguments);e&&i.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===o?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return null!=e?i.extend(e,r):r}},o={};return r.pipe=r.then,i.each(t,function(e,i){var s=i[2],a=i[3];r[i[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),o[i[0]]=s.fire,o[i[0]+"With"]=s.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,o,s=0,a=r.call(arguments),l=a.length,u=1!==l||e&&i.isFunction(e.promise)?l:0,c=1===u?e:i.Deferred(),d=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?r.call(arguments):o,i===t?c.notifyWith(n,i):--u||c.resolveWith(n,i)}};if(l>1)for(t=new Array(l),n=new Array(l),o=new Array(l);l>s;s++)a[s]&&i.isFunction(a[s].promise)?a[s].promise().done(d(s,o,a)).fail(c.reject).progress(d(s,n,t)):--u;return u||c.resolveWith(o,a),c.promise()}})},function(e,t,n){function i(e){var t=s[e]={};return r.each(e.split(o),function(e,n){t[n]=!0}),t}var r=e.exports=n(5),o=/\s+/,s={};r.Callbacks=function(e){e="string"==typeof e?s[e]||i(e):r.extend({},e);var t,n,o,a,l,u,c=[],d=!e.once&&[],h=function(i){for(t=e.memory&&i,n=!0,u=a||0,a=0,l=c.length,o=!0;c&&l>u;u++)if(c[u].apply(i[0],i[1])===!1&&e.stopOnFalse){t=!1;break}o=!1,c&&(d?d.length&&h(d.shift()):t?c=[]:p.disable())},p={add:function(){if(c){var n=c.length;!function i(t){r.each(t,function(t,n){var o=r.type(n);"function"===o?e.unique&&p.has(n)||c.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),o?l=c.length:t&&(a=n,h(t))}return this},remove:function(){return c&&r.each(arguments,function(e,t){for(var n;(n=r.inArray(t,c,n))>-1;)c.splice(n,1),o&&(l>=n&&l--,u>=n&&u--)}),this},has:function(e){return r.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=d=t=void 0,this},disabled:function(){return!c},lock:function(){return d=void 0,t||p.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||n&&!d||(o?d.push(t):h(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p}},function(e,t){function n(e){return null==e?String(e):c[u.call(e)]||"object"}function i(e){return"function"===l.type(e)}function r(e){return"array"===l.type(e)}function o(e,t,n){var r,o=0,s=e.length,a=void 0===s||i(e);if(n)if(a){for(r in e)if(t.apply(e[r],n)===!1)break}else for(;s>o&&t.apply(e[o++],n)!==!1;);else if(a){for(r in e)if(t.call(e[r],r,e[r])===!1)break}else for(;s>o&&t.call(e[o],o,e[o++])!==!1;);return e}function s(e){return e&&"object"===l.type(e)?!0:!1}function a(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},a=2),"object"==typeof s||l.isFunction(s)||(s={}),u===a&&(s=this,--a);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(c&&i&&(l.isPlainObject(i)||(r=l.isArray(i)))?(r?(r=!1,o=n&&l.isArray(n)?n:[]):o=n&&l.isPlainObject(n)?n:{},s[t]=l.extend(c,o,i)):void 0!==i&&(s[t]=i));return s}var l=e.exports={type:n,isArray:r,isFunction:i,isPlainObject:s,each:o,extend:a,noop:function(){}},u=Object.prototype.toString,c={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(e){c["[object "+e+"]"]=e.toLowerCase()})},function(e,t,n){function i(e){this.listenTime+=e.from-this.currentTime,this.currentTime=e.to}function r(e){this.listenTime+=e.position-this.currentTime,this.currentTime=e.position}function o(e){this.currentTime=e.position}var s,a=n(7);s=e.exports=function(e){this.scAudio=e,this.listenTime=0,this.currentTime=0,this.scAudio.on(a.SEEK,i,this).on(a.PLAY_START,o,this).on(a.PAUSE,r,this)},s.prototype={constructor:s,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}},function(e,t){var n={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",BUFFERING_START:"buffering_start",BUFFERING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",API_FAILURE:"api_failure",REQUEST_FAILURE:"request_failure",REGISTERED:"registered",ONLINE:"online",OFFLINE:"offline"};e.exports=n},function(e,t,n){function i(){return this.scAudio.controller?this.controller?void _.warn("(%s) Setup was called while it was already initialized (returned with a no-op)",this.scAudio.getId()):(_("(%s) Initialized",this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,void(this.host=w.getUrlHost(this.scAudio.streamInfo.url))):void _.warn("Cant initialize when controller is null")}function r(){this.controller&&(_("(%s) Reset",this.scAudio.getId()),this.controller=this.protocol=this.host=null,this.timeToPlayMeasured=!1)}function o(e){var t=this.scAudio.getAudioManagerStates();e===t.LOADING?this.timeToPlayMeasured&&h.call(this):x.isNull(this.bufferingStartTime)||p.call(this)}function s(){this.metadataLoadStartTime=Date.now()}function a(){return x.isNull(this.metadataLoadStartTime)?void _.warn("(%s) onMetadataEnd was called without onMetadataStart being called before.",this.scAudio.getId()):(this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),void(this.metadataLoadStartTime=null))}function l(){this.playClickTime=Date.now()}function u(){if(!this.timeToPlayMeasured){if(x.isNull(this.playClickTime))return void _.warn("(%s) onPlayResume was called without onPlayStart being called before.",this.scAudio.getId());this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}}function c(){this.scAudio.isPaused()||(this.seekStartTime=Date.now())}function d(){if(!this.scAudio.isPaused()){if(x.isNull(this.seekStartTime))return void _.warn("(%s) onSeekEnd was called without onSeekStart being called before.",this.scAudio.getId());this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}}function h(){this.bufferingStartTime||(this.bufferingStartTime=Date.now())}function p(){return x.isNull(this.bufferingStartTime)?void _.warn("(%s) onBufferingEnd was called without onBufferingStart being called before.",this.scAudio.getId()):(f.call(this),void(this.bufferingStartTime=null))}function f(){x.isNull(this.bufferingStartTime)||(x.isNull(this.bufferingTimeAccumulated)&&(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function g(){f.call(this),x.isNull(this.bufferingTimeAccumulated)||(this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null)}var m,_,v=n(9),y=n(7),b=n(10),w=n(12),x=n(13);m=e.exports=function(e,t){this.scAudio=e,this.logFn=t,this.controller=null,this.reset(),_=_||v({enabled:e.options.debug,buffer:!0,label:"audioperf"}),e.on(y.CREATED,i,this).on(y.RESET,r,this).on(y.DESTROYED,r,this).on(y.SEEK,c,this).on(y.SEEKED,d,this).on(y.PLAY,l,this).on(y.PLAY_START,s,this).on(y.PLAY_RESUME,u,this).on(y.PAUSE,g,this).on(y.FINISH,g,this).on(y.STATE_CHANGE,o,this).on(y.METADATA,a,this)},x.extend(m.prototype,b,{constructor:m,log:function(e){return this.controller?(x.extend(e,{protocol:this.protocol,host:this.host,playertype:this.controller.getType()}),_("(%s) event type: %s, latency: %d, protocol: %s, host: %s playertype: %s",this.scAudio.getId(),e.type,e.latency,e.protocol,e.host,e.playertype),void this.logFn(e)):void _.warn("(%s) Monitor log was called while controller is null (returned with a no-op)",this.scAudio.getId())},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1}})},function(e,t){"use strict";function n(){function e(e,n){if(p){for(var i=arguments.length,r=Array(i>2?i-2:0),o=2;i>o;o++)r[o-2]=arguments[o];"string"==typeof n?n=" "+n:(r.unshift(n),n="");var s=[t()+" | "+E+(k?"%c":"")+n].concat(A,r);m?T.push({level:e,logArgs:s})>x&&T.shift():h[e].apply(h,s)}}function t(){var e=new Date,t=null===S?0:e-S,n=k?"%c":"";return S=+e,n+i(e)+(n+" ("+n)+r("+"+t+"ms"," ",8)+(n+")")}function n(e){return e.enable=function(){p=!0},e.disable=function(){p=!1},e.bufferOn=function(){m=!0},e.bufferOff=function(){m=!1,T.length=0},e.flush=u()?function(){T.forEach(function(e){var t=e.level,n=e.logArgs;h[t].apply(h,n)}),T.length=0}:function(){},e}var o=c.apply(void 0,arguments),s=o.enabled,p=void 0===s?!0:s,g=o.buffer,m=void 0===g?!1:g,_=o.label,v=void 0===_?"":_,y=o.plainOutput,b=void 0===y?!1:y,w=o.bufferSize,x=void 0===w?1e3:w;if(!u())return n(d.reduce(function(e,t){return e[t]=e},function(){}));h.CL||(h.CL={_cssCounter:0});var k=!b&&l(),S=null,T=[],E=a(v,k),A=k?["color: green","color: grey","color: blue","color: grey",f(v),""]:[],C=h.CL[v]=n(d.reduce(function(t,n){return t[n]=e.bind(null,n),t},e.bind(null,"log")));return C}function i(e){return o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())+"."+r(e.getMilliseconds(),"0",3)}function r(e,t,n){return s(t,n-(""+e).length)+e}function o(e){return r(e,"0",2)}function s(e,t){return t>0?new Array(t+1).join(e):""}function a(e,t){return(t?"%c":"")+(e?e:"")}function l(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent;return/chrome|firefox|opr/i.test(e)&&!/msie|edge/i.test(e)}function u(){return h&&d.every(function(e){return"function"==typeof h[e]})}function c(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return"object"==typeof e&&e||{enabled:e,label:t}}e.exports=n;var d=["log","info","warn","error"],h="undefined"!=typeof console?console:null,p=["color:#fff","border-radius:3px","padding:2px 4px","font-family:sans-serif","text-transform:uppercase","font-size:9px"].join(";")+";",f=function(){var e=["#51613C","#447848","#486E5F","#787444","#6E664E"];return function(t){return t?"background:"+e[h.CL._cssCounter++%e.length]+";"+p:""}}()},function(e,t,n){e.exports=n(11)},function(e,t,n){!function(){function n(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++a+"";return e?e+t:t},has:function(e,t){return o.call(e,t)},each:function(e,t,n){if(null!=e)if(r&&e.forEach===r)e.forEach(t,n);else if(e.length===+e.length)for(var i=0,o=e.length;o>i;i++)t.call(n,e[i],i,e);else for(var s in e)this.has(e,s)&&t.call(n,e[s],s,e)},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}}var i,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,l=n();i={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var i=this,r=l.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var i,r,o,s,a,u,d,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:l.keys(this._events),a=0,u=s.length;u>a;a++)if(e=s[a],o=this._events[e]){if(this._events[e]=i=[],t||n)for(d=0,h=o.length;h>d;d++)r=o[d],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var o in i)i[o].off(t,n,this),r&&delete this._listeners[o];return this}};var u=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};l.each(h,function(e,t){i[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=l.uniqueId("l"));return r[o]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return l.each(t,function(t){e[t]=this[t]},this),e},"undefined"!=typeof e&&e.exports&&(t=e.exports=i),t.BackboneEvents=i}(this)},function(e,t){var n={getUrlParams:function(e){var t={},n=e.indexOf("?");return n>-1&&e.substr(n+1).split("&").forEach(function(e){var n=e.split("=");t[n[0]]=n[1]}),t},getUrlHost:function(e){var t,n=e.split("//");return t=n[0]===e?n[0].split("/")[0]:n[1]?n[1].split("/")[0]:""}};e.exports=n},function(e,t){function n(){function e(e){r.push(e),a.postMessage(o,"*")}function t(e){e.data===o&&(e.stopPropagation(),r.length>0&&r.shift()())}var n=window,i=n.document;if(!n.postMessage)return function(e){n.setTimeout(e,0)};var r=[],o="zero-timeout-message-"+Math.random(),s=i.createElement("iframe");s.style.display="none",s.src="",i.documentElement.appendChild(s);var a=s.contentWindow,l=a.document;return l.open(),l.write(""),l.close(),a.addEventListener("message",t,!0),e}var i={extend:function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}),e},each:function(e,t,n){Object.keys(e).forEach(function(i){t.call(n||null,e[i],i)})},without:function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},result:function(e){var t=e;return i.isFunction(t)&&(t=e()),t},isFunction:function(e){return"function"==typeof e},after:function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},isNull:function(e){return null===e},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,void(t=e.apply(this,arguments)))}},setImmediate:function(){var e;return function(t){e||(e=n()),e(t)}}()};e.exports=i},function(e,t){var n={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"};e.exports=n},function(e,t){var n={HTTP:"http",RTMP:"rtmp",HLS:"hls",PREVIEW:"preview"};e.exports=n},function(e,t,n){function i(e){return u.supportsMediaSourceExtensions()&&e.mediaSourceEnabled&&(u.isChrome()&&u.getChromeVersion()>=35||u.isFirefox()&&e.mseFirefox||u.isSafari()&&e.mseSafari)}function r(e){return function(t){var n=!1;switch(t){case l.PREVIEW:n=e.previewOnly&&u.supportsHTML5Audio();break;case l.RTMP:n=u.supportsFlash();break;case l.HTTP:n=u.supportsHTML5Audio()||u.supportsFlash();break;case l.HLS:n=i(e)}return n}}function o(e){return u.isSafari()||u.isFirefox()?[l.PREVIEW,l.HLS,l.HTTP,l.RTMP]:e}function s(e){e.protocols=o(e.protocols).filter(r(e))}var a,l=n(15),u=n(17);a={prioritizeAndFilter:s},e.exports=a},function(e,t){function n(e){return e.test(window.navigator.userAgent.toLowerCase())}function i(e,t){try{return window.navigator.userAgent.toLowerCase().match(e)[t]}catch(n){return null}}function r(){try{return parseInt(i(/chrom(e|ium)\/([0-9]+)\./,2),10)}catch(e){return NaN}}function o(){return!d()&&!u()&&n(/safari/)}function s(){return o()&&n(/version\/7\.1/)}function a(){return o()&&n(/version\/8/)&&!n(/version\/80/)}function l(){return o()&&n(/version\/9\./)}function u(){return!d()&&n(/chrom(e|ium)/)}function c(){return n(/firefox/)}function d(){return n(/edge/)}function h(){return d()&&n(/windows\snt/)}function p(){return d()&&n(/windows\sphone/)}function f(){return!!window.MediaSource&&(window.MediaSource.isTypeSupported("audio/mpeg")||window.MediaSource.isTypeSupported("audio/mp4"))}function g(){try{return window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg")}catch(e){return!1}}function m(){try{var e=o()&&n(/version\/5\.0/),t=window.hasOwnProperty("Audio")&&(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!e&&t}catch(i){return!1}}function _(){return y(v())>=w}function v(){var e,t,n,i;if("undefined"!=typeof window.ActiveXObject)try{i=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),i&&(e=i.GetVariable("$version"))}catch(r){e=null}else window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0&&(n="application/x-shockwave-flash",t=window.navigator.mimeTypes,t&&t[n]&&t[n].enabledPlugin&&t[n].enabledPlugin.description&&(e=t[n].enabledPlugin.description));return e}function y(e){var t;if(!e||!(t=e.match(/\d\S+/)))return 0;var n=t[0].replace(/,/g,".").split(".");return parseFloat([n[0],n[1]||"0"].join("."))||0}var b,w=9;b={flashPlugin:v,isSafari:o,isSafari71:s,isSafari8:a,isSafari9:l,isChrome:u,getChromeVersion:r,isFirefox:c,isEdge:d,isEdgeDesktop:h,isEdgeMobile:p,supportsNativeHLSAudio:m,supportsHTML5Audio:g,supportsFlash:_,supportsMediaSourceExtensions:f},e.exports=b},function(e,t,n){function i(e){var t=h.getUrlHost(e);return f.every(function(e){return 0!==t.indexOf(e)})}function r(e,t){return!(e===c.HLS&&!i(t))}function o(e,t){if(!e)return!1;var n=e.issuedAt+s(e.protocol,e.duration);return a(e.protocol)?Date.now()+e.duration-(t||0)<n:Date.now()<n}function s(e,t){var n=a(e);return g+(n?d.result(t):0)}function a(e){return e===c.HTTP||e===c.HLS}function l(e,t){function n(e){return-1*e}function i(e,t){return Math.abs(t-_)-Math.abs(e-_)}var o,s,a,l,u,c,h,p,f,g,m={},_=t.maxBitrate,v=t.protocols,y=t.extensions;for(d.each(e,function(e,t){var n=t.split("_"),i=n[0],r=n[1],o=n[2];m[i]=m[i]||{},m[i][r]=m[i][r]||{},m[i][r][o]=e}),u=0,c=v.length;c>u;++u)for(l=v[u],p=0,f=y.length;f>p;++p)if(h=y[p],m[l]&&m[l][h]){if(o=Object.keys(m[l][h]).map(Number).sort(n),s=_===1/0,a=_===-(1/0),_=s||a?o[s?"pop":"shift"]():o.sort(i).pop(),g=m[l][h][_],!r(l,g))continue;return{url:g,bitrate:_,protocol:l,extension:h,issuedAt:Date.now(),duration:d.result(t.duration)}}return null}var u,c=n(15),d=n(13),h=n(12),p=.9,f=[],g=Math.floor(12e4*p);u={choosePreferredStream:l,streamValidForPlayingFrom:o},e.exports=u},function(e,t,n){var i,r,o=n(7),s=n(13),a=s.extend,l=s.setImmediate,u={Linear:0,EaseIn:1,EaseOut:2,EaseInOut:3};e.exports=i={},i.VolumeAutomator=r=function(e){if(this.scAudio=e,this.fadeOutAlgo=this.options().fadeOutAlgo,this.fadeOutActive=!1,this.initialVolume=void 0,r.isSupported()){var t=this.options();["fadeOutDurationOnPause","fadeOutDurationOnFinish","fadeOutDurationOnConcurrentStreaming"].forEach(function(e){"number"!=typeof t[e]&&(t[e]=0)}),this.scAudio.registerHook("pause",this.hookPause.bind(this)),this.scAudio.on(o.TIME,this.onTime,this),this.scAudio.on(o.PLAY_RESUME,this.onPlay,this)}},i.VolumeAutomator.isSupported=function(){var e=new window.Audio,t=e.volume,n=0===t?1:t/2;return e.volume=n,e.volume===n},i.VolumeAutomator.Algos=u,a(r.prototype,{options:function(){return this.scAudio.options},doFadeOut:function(e,t,n,i){this.fadeOutActive=!0;var r=Date.now()-(n||0),s=function(){if(this.fadeOutActive){var n,a=(Date.now()-r)/t;if(a>=1)e&&(this.scAudio.trigger(o.PAUSE,i),this.scAudio.callPauseOnController()),this.cancelFadeout();else{switch(this.fadeOutAlgo){case u.Linear:n=1-a;break;case u.EaseIn:n=1-a*a;break;case u.EaseOut:n=1/(10*(a+.1))-.05;break;case u.EaseInOut:default:n=Math.cos(a*Math.PI)/2+.5}this.scAudio.setVolume(this.initialVolume*n),l(s)}}}.bind(this);this.initialVolume=this.scAudio.getVolume(),s()},cancelFadeout:function(){this.fadeOutActive&&(this.fadeOutActive=!1,this.scAudio.setVolume(this.initialVolume),this.initialVolume=void 0)},isFadeOutEnabled:function(){return this.options().fadeOutDurationOnConcurrentStreaming||this.options().fadeOutDurationOnPause||this.options().fadeOutDurationOnFinish},hookPause:function(e){return this.options().fadeOutDurationOnConcurrentStreaming&&"concurrent_streaming"===e.pause_reason?(this.doFadeOut(!0,this.options().fadeOutDurationOnConcurrentStreaming,0,e),!1):this.options().fadeOutDurationOnPause?(this.doFadeOut(!0,this.options().fadeOutDurationOnPause,0,e),!1):!0},onPlay:function(){this.isFadeOutEnabled()&&this.cancelFadeout()},onTime:function(){if(this.options().fadeOutDurationOnFinish){var e=this.scAudio.currentTime(),t=this.scAudio.duration(),n=this.options().fadeOutDurationOnFinish;!this.fadeOutActive&&e+n>=t&&this.doFadeOut(!1,n,e+n-t,{})}}})}])},function(e,t,n){"use strict";function i(e){var t=e.state,n=e.object;t&&!this.contains(n)&&this.onCommentCreated(n)}var r=[{emitter:n(73),event:"comment",getInstance:function(e,t){var n=t.target;return e.options.sound_id===n},handler:i}];e.exports=n(72).extend(n(194).withOptions({events:r}),{model:n(105),defaults:{sound_id:null,secret_token:null},soundDuration:null,setup:function(e){var t=e.sound_id,i=new(n(64))({id:t});this.options.secret_token=i.get("secret_token"),this.soundDuration=i.duration(),i.release()},baseUrl:function(){return this.getEndpointUrl("trackComments",{id:this.options.sound_id},{filter_replies:0})},parse:function(e){var t=this,n=/^http:/;return e.collection.map(function(e){return e.timestamp=t.normalizeTimestamp(e.timestamp),n.test(e.user.avatar_url)&&(e.user.avatar_url=e.user.avatar_url.replace(n,"https:")),e})},normalizeTimestamp:function(e){return(e>this.soundDuration||0>e)&&(e=n(105).EMPTY_TIMESTAMP),e},onCommentCreated:function(e){this.add(e,{at:0})}},{hashFn:function(e,t){return t&&t.sound_id||null}})},function(e,t,n){"use strict";function i(){var e=n(54).get("experiments").get("v2_listening",/^reco-ss-/);return e||null}function r(e){return e.resource_type="playlist"===e.kind?"playlist":"sound",e}var o=Math.floor(1e8*Math.random());e.exports=n(72).extend(n(144),{model:n(76),audioSourceVersion:null,queryUrn:null,defaults:{resource_id:null,resource_type:null},getSourceInfo:function(){return{type:"recommender",queryUrn:this.queryUrn,version:this.audioSourceVersion,resourceId:this.options.resource_id,resourceType:this.options.resource_type}},parse:function(e){var t=e.query_urn,n=e.collection,i=e.variant;return this.audioSourceVersion=i||"no_version",this.queryUrn=t,n.map(r)},baseUrl:function(){var e=n(54).get("me").id||null;return this.getEndpointUrl("relatedSounds",{track_id:this.options.resource_id},{user_id:e,anon_user_id:e?null:o,variant:i()})}},{hashFn:function(e,t){var n=t.resource_id;return n}})},function(e,t,n){"use strict";function i(e){var t=e.premium_content,n=t||{collection:[],total_results:0};return{count:n.total_results,records:n.collection.map(function(e){return{kind:"track",origin:e,campaign:"high_tier"}})}}function r(e){var t=e.promoted_content;return t?{count:1,records:[s(t)]}:{count:0,records:[]}}function o(e){var t=e.collection||[],i=e.total_results,r=n(3).compact(t),o=r.length<t.length?i-(t.length-r.length):i;return{count:o,records:r.map(function(e){return{kind:e.kind,origin:e,campaign:null}})}}function s(e){var t=e.promoted,n=u[e.type];return n?{ad_urn:t.ad_urn,campaign:"promoted",kind:n,origin:e[n],tracking:t.tracking}:(window.console.warn("Unknown promoted type:",e.type),null)}var a={sounds:"tracks",high_tier:"tracks",sets:"playlists",playlists:"playlists_without_albums",albums:"albums",people:"users",universal:"universal"},l=new(n(111))("promoted-persistent"),u={"user-promoted":"user","track-promoted":"track"};e.exports=n(72).extend(n(144),{model:n(551),facetName:null,facets:null,totalResults:null,queryUrn:null,setup:function(e){var t=e.params,n=(t&&t.q||"").trim();this.facets=[],0===n.length&&this.setToFullyPopulated()},getSourceInfo:function(){return{type:"search",queryUrn:this.getCurrentQueryUrn()}},baseUrl:function(){var e=this.options,t=e.category,i=e.params;switch(i=n(3).assign({q:"",sc_a_id:l.get("sc_a_id")},i),t){case"high_tier":i["filter.content_tier"]="SUB_HIGH_TIER";case"sounds":case"sets":case"albums":case"playlists":this.facetName="genre";break;case"people":this.facetName="place";break;default:this.facetName="model"}return i.facet=this.facetName,i.user_id=n(163).getAnonymousId(),t?this.getEndpointUrl("searchCategory",{category:a[t]},i):this.getEndpointUrl("search",{},i)},getTotalResults:function(){return this.totalResults||0},getTotalPremiumResults:function(){return this.premiumTotalResults||0},getFacetByName:function(e){var t=n(3).findWhere(this.facets,{name:e});return t?t.facets:[]},getCurrentFacet:function(){return this.getFacetByName(this.facetName)},parse:function(e){var t=i(e),s=r(e),a=o(e);return this.totalResults=a.count,this.premiumTotalResults=t.count,this.queryUrn=e.query_urn,this.facets=e.facets||[],this.trigger("change:facet_counts"),n(3).flatten([t.records,s.records,a.records])},audibleAt:function(e){var t=this.at(e);return t&&t.getAudible()},couldContainSounds:function(){var e=this.options.category;return"people"!==e},modelToGroupKey:function(e){return"high_tier"===this.options.category?"high_tier":"high_tier"===e.get("campaign")?"high_tier":"free_tier"},getCurrentQueryUrn:function(){return this.queryUrn}},{hashFn:function(e,t){return["search",t.category||"universal",n(62).stringify({query:t.params})].join("_")}})},function(e,t,n){"use strict";function i(e){var t,i=e.state,r=e.origin,o=e.target,s=e.targetType;i&&this.acceptsType(s)?this.add(n(445).getLikeModelData(r,s,o),{at:0}):(t=this.find(function(e){var t="sound"===s?e.get("track"):"playlist"===s?e.get("playlist"):null;return t&&o===t.id}),t&&this.remove(t))}var r=[{emitter:n(73),event:"like",getInstance:function(e,t){var n=t.origin;return e.options.userId===n},handler:i}];e.exports=n(143).extend(n(1303),n(194).withOptions({events:r}),{model:n(445),defaults:{type:"likes"},baseUrl:function(){return this.getEndpointUrl("userLikes",{id:this.options.userId})},unshuffle:function(e){return-Date.parse(e.get("created_at"))},parse:function(e){var t=this.options.userId;return e.collection.forEach(function(e){e.user_id=t}),e.collection},audibleAt:function(e){return this.at(e).getAudible()},acceptsType:function(e){return"sound"===e||"playlist"===e}})},,function(e,t,n){"use strict";e.exports=n(97).extend({nullable:!1,message:"",value:null,check:function(e,t){t(e===this.value)}})},function(e,t,n){"use strict";var i=/^[a-z-]+:\/\//,r=/^https?$/,o=/\.[a-z]{2,32}$/;e.exports=n(97).extend({message:n(51).t("This URL is invalid."),strict:!1,check:function(e,t){if(!e)return void t(!0);if(!i.test(e)){if(this.strict)return void t(!1);e="http://"+e}var s=n(62).parse(e);t(!s.userInfo&&r.test(s.scheme)&&o.test(s.host))}})},function(e,t,n){"use strict";function i(e,t){return new r(e,t)}function r(e,t){o.call(this,e,t)}function o(e,t){var n=this;switch(s.allowed()){case!0:this.notification=new a(e,t),["click","close","error","show"].forEach(function(e){n.notification["on"+e]=n.trigger.bind(n,e)});break;case null:s.requestPermission().then(function(){o.call(n,e,t)})}}var s=void 0,a=window.Notification;s=n(98).Notification?e.exports={allowed:function(){return"granted"===a.permission?!0:"denied"===a.permission?!1:null},requestPermission:function(){return n(55).promise(function(e,t){a.requestPermission(function(n){"granted"===n?e():t()})})},create:i}:e.exports={allowed:n(3).constant(!1),requestPermission:n(3).constant(n(55).reject()),create:i},n(3).assign(r.prototype,n(22).Events,{notification:null,closed:!1,_closeTimeout:null,closeAfter:function(e){var t=this;return this.closed||(this.notification?this._closeTimeout=this._closeTimeout||window.setTimeout(function(){t.close()},e):this.once("show",function(){t.closeAfter(e)})),this},close:function(){return this.notification&&!this.closed&&(this.notification.close(),this.closed=!0),this}})},function(e,t,n){"use strict";e.exports={401:function(e){n(63).isLoggedIn()&&n(63).logout()},429:function(e){var t=n(116).fromSpamWarning(e);t&&(n(56).trigger("spam-warning",t),t.release())},422:function(e){var t=void 0;try{t=JSON.parse(e.responseText).errors[0].error_message}catch(i){t=null}n(56).trigger("error:ajax",t,e)}}},function(e,t,n){(function(t){"use strict";var i=e.exports={parseOtherId:function(e){var t,i=String(n(54).get("me").id);return"string"==typeof e?(t=e.split(":"),t[0]===i?t[1]:t[0]):void 0},baseUrl:function(){var e=[].slice.call(arguments);return n(62).stringify({host:n(54).get("api_v2_host"),path:["users",n(54).get("me").id,"conversations"].concat(e)})},baseUrlWithId:function(e){var t=n(3).tail(arguments);return i.baseUrl.apply(null,[i.parseOtherId(e)].concat(t))},post:function(e,n){var r=i.baseUrl(e),o={contents:n};return t.ajax({type:"POST",url:r,dataType:"json",data:o})}}}).call(t,n(1))},function(e,t){"use strict";e.exports={codes:{AUD:"AUD",CAD:"CAD",EUR:"EUR",GBP:"GBP",NZD:"NZD",USD:"USD"},symbols:{AUD:"$",CAD:"$",EUR:"",GBP:"",NZD:"$",USD:"$"},codesWithSameSymbol:["AUD","CAD","NZD","USD"],taxCode:{AUD:void 0,CAD:"GST/HST/QST",EUR:"VAT",USD:void 0,GBP:"VAT",NZD:"GST"}}},function(e,t,n){"use strict";function i(){return/^en/.test(n(51).getLocale())}function r(){if(i()){var e=n(54).get("geoip");return n(92).codeToCountry(e.get("country_code"))}}e.exports={getLongBlockMessage:function(){var e=r();return e?"This track is not available in "+e:n(51).t("This track is not available in your country")},getShortBlockMessage:function(){var e=r();return e?"Not available in "+e:n(51).t("Not available in your country")}}},function(e,t){"use strict";e.exports={centered:function(e,t,n,i){var r=Math.min(t,window.screen.width-50),o=Math.min(n,window.screen.height-50),s=window.screenX+(window.outerWidth-r)/2,a=window.screenY+(window.outerHeight-o)/2;return window.open(e,i||"",["location=1","width="+r,"height="+o,"top="+a,"left="+s,"toolbar=no","scrollbars=yes"].join(","))},interceptPopup:function(e){var t=null;return function(n){window.open=function(){return t=n.apply(void 0,arguments)},e(),window.open=n}(window.open),t}}},,,,,,function(e,t){"use strict";e.exports={FAILURE:"failure",FINISHED:"finished",NOT_FOUND:"not_found",PREPARING:"preparing",TRANSCODING:"transcoding",QUEUED:"queued"}},,,,,function(e,t,n){"use strict";var i=e.exports=n(65).extend({resource_type:"user_stream_item",submodelMap:{track:null,playlist:null},baseUrl:null,audible:null,createSubmodel:function(e,t){var i,r=n("track"===t?64:85),o=this.get(t);o&&(i=new r(o),this.addSubmodel(i),this.listenTo(i,"destroy",this.onSubmodelDestroy),this.audible=i)},onSubmodelDestroy:function(){this.destroy()},equivalentTo:function(e){if(this===e)return!0;var t=this.get("track")||this.get("playlist"),n=e.get("track")||e.get("playlist")||e.attributes;return t.kind===n.kind&&t.id===n.id},getAudible:function(){return this.audible},getActionType:function(){return this.isRepost()?"repost":this.isLike()?"like":"post"},isSpotlight:function(){return this.get("type").indexOf("_spotlight")>-1},isRepost:function(){return/[_-]repost$/.test(this.get("type"))},isLike:function(){return/[_-]like$/.test(this.get("type"))},isRegular:function(){return!this.isRepost()&&!this.isLike()&&!this.isSpotlight();
},toggleSpotlight:function(e){this.isRepost()||this.isLike()||(void 0===e&&(e=!this.isSpotlight()),this.set("type",this.get("type").replace(e?/$/:/_spotlight$/,e?"_spotlight":"")))},getModelData:function(){return this.get("track")||this.get("playlist")}},{convert:function(e){var t=e instanceof n(64),r=e.toJSON();return new i({type:r.kind,created_at:r.created_at,track:t?r:null,playlist:t?null:r})}})},,,,,,,function(e,t,n){var i=n(3),r=n(20);e.exports=function(e){var t,n;return t=i.defaults(e.hash,{href:null,className:null,label:null,type:null}),n='<<%-tag%> class="<%-className%>"'+(t.href?' href="<%-href%>" target="blank"':"")+"><%-label%></<%-tag%>>",new r.SafeString(i.template(n)({tag:t.href?"a":"span",className:("sc-label sc-label-small sc-label-"+t.type+" "+t.className).trim(),label:t.label,href:t.href}))}},function(e,t,n){var i=n(3),r=n(51),o=n(302);e.exports=function(e){var t=r.t("Private",null,{comment:"This is a track label. If track is private it has small tag `Private`"}),n=i.defaults({type:"private",label:t},e.hash);return o({hash:n})}},function(e,t){var n={"'":/[\u042C\u044C]/gi,"":/[\u042a\u044a]/gi,a:/[\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250\u0410\u0430]/gi,aa:/[\uA733]/gi,ae:/[\u00E6\u01FD\u01E3]/gi,ao:/[\uA735]/gi,au:/[\uA737]/gi,av:/[\uA739\uA73B]/gi,ay:/[\uA73D]/gi,b:/[\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253\u0411\u0431]/gi,c:/[\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/gi,ch:/[\u0427\u0447]/gi,d:/[\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A\u0414\u0434]/gi,dz:/[\u01F3\u01C6]/gi,e:/[\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD\u0415\u042D]/gi,f:/[\u24D5\uFF46\u1E1F\u0192\uA77C\u0424\u0444]/gi,g:/[\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F\u0413\u0433]/gi,h:/[\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/gi,hv:/[\u0195]/gi,i:/[\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131\u0418\u0438]/gi,j:/[\u24D9\uFF4A\u0135\u01F0\u0249]/gi,k:/[\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3\u041A\u043A]/gi,kh:/[\u0425\u0445]/gi,l:/[\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u0142\u019A\u026B\u2C61\uA749\uA781\uA747\u041B\u043B]/gi,lj:/[\u01C9]/gi,m:/[\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F\u041C\u043C]/gi,n:/[\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u041D\u043D]/gi,nj:/[\u01CC]/gi,o:/[\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275\u041E\u043E]/gi,oi:/[\u01A3]/gi,ou:/[\u0223]/gi,oo:/[\uA74F]/gi,p:/[\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755\u041F\u043F]/gi,q:/[\u24E0\uFF51\u024B\uA757\uA759]/gi,r:/[\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783\u0420\u0440]/gi,s:/[\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u017F\u0421\u0441]/gi,shch:/[\u0429\u0449]/gi,sh:/[\u0428\u0448]/gi,t:/[\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787\u0422\u0442]/gi,ts:/[\u0426\u0446]/gi,tz:/[\uA729]/gi,u:/[\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289\u0423\u0443]/gi,v:/[\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C\u0412\u0432]/gi,vy:/[\uA761]/gi,w:/[\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/gi,x:/[\u24E7\uFF58\u1E8B\u1E8D]/gi,y:/[\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF\u0419\u0439\u042B\u044B]/gi,ya:/[\u042F\u044F]/gi,yo:/[\u0401\u0451]/gi,yu:/[\u042E\u044E]/gi,z:/[\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763\u0417\u0437]/gi,zh:/[\u0416\u0436]/gi},i=/^\[|\]$/g,r=new RegExp("["+Object.keys(n).reduce(function(e,t){return e+n[t].source.replace(i,"")},"")+"]","i");e.exports=function(e){if(r.test(e))for(var t in n)n[t].lastIndex=0,n[t].test(e)&&(e=e.replace(n[t],t));return e.toLowerCase()}},function(e,t,n){"use strict";e.exports=n(72).extend({model:n(159),lastFetchTime:Date.now(),next_href:!1},{neverRelease:!0,hashFn:function(){return 1}})},function(e,t,n){"use strict";function i(e,t,i){var r=n(871).instances.get(i.id),o=new a;r&&r.add(i.last_message),o.add(i,{userAction:!0,merge:!0});var l=n(152).instances.get(i.id);l&&l.markAsRead(),n(56).trigger("new-message:sent",{recipient:e,showSuccessMessage:t}),s(["messages","new-message-sent"])}function r(e,t){var i=t.responseText,r=function(e){return i.indexOf(e)>-1},o=i?r("confirmed their address")?"emailnotconfirmed":r("sender must be followed")?"privacy":r("receiver blocked sender")?"youareblocked":r("rate limit")?"ratelimit":r("receiver does not exist")?"receiverdoesntexist":"default":"default";n(56).trigger("new-message:failed",{errorCode:o,recipient:e})}function o(e){var t=this;e.forEach(function(e){t.get(e)||t.add({id:e},{at:0})}),this.trigger("new-conversations-added")}var s=n(58).trackV0Click,a=e.exports=n(72).extend({model:n(152),currentConversationId:null,baseUrl:n(281).baseUrl,setup:function(){this.listenTo(n(56),"new-unread-messages",o).listenTo(this,"change:last_message",this.sort)},getCurrentConversationId:function(){return this.currentConversationId},fetch:function(e){var t=this;return n(72).prototype.fetch.apply(this,arguments).done(function(){e&&e.reset&&t.trigger("new-conversations-added")})},setCurrentConversationId:function(e){e!==this.currentConversationId&&(this.currentConversationId=e,this.trigger("change:currentConversationId",{currentConversationId:e}))},comparator:function(e,t){return t.lastMessageSentAt()-e.lastMessageSentAt()}},{hashFn:function(){return 1},neverRelease:!0,send:function(e,t,o){return n(281).post(e.id,t).done(i.bind(this,e,o)).fail(r.bind(this,e))}})},function(e,t,n){"use strict";var i={user:{playlists:"userPlaylists",playlists_without_albums:"userPlaylistsWithoutAlbums",albums:"userAlbums"},sound:{playlists:"playlistsForTrack",playlists_without_albums:"playlistsWithoutAlbumsForTrack",albums:"albumsForTrack"}},r=(e.exports=n(124).extend({model:n(85),defaults:{resource_id:null,playlists_for:null,exclude:null,playlistType:"playlists"},setupSources:function(){var e=this.options.exclude;return e&&(this.filters=[function(t){return t.id!==e}]),[new r(null,this.options)]}},{hashFn:function(e,t){var n=r.hashFn.apply(this,arguments);return t.exclude&&(n+="_"+t.exclude),n}}),n(72).extend({model:n(85),parse:function(e){return e.collection.forEach(function(e){null===e.tracks&&delete e.tracks}),e.collection},baseUrl:function(){var e,t=this.options,n=t.playlists_for,r=t.resource_id,o=t.playlistType,s={representation:"mini"},a=(e={},e["user"===n?"id":"trackId"]=r,e);return this.getEndpointUrl(i[n][o],a,s)}},{hashFn:function(e,t){var n=t.playlists_for,i=t.resource_id,r=t.limit,o=t.offset,s=t.playlistType;return n+"_"+i+"_"+r+"_"+o+"_"+s}}))},function(e,t,n){"use strict";function i(e){var t=e.context;if(t){var i=n(3).findIndex(this.models,function(e){return e.get("context_urn")===t.resourceUrn});0!==i&&(i>0&&this.remove(this.at(i)),this.add(r(t),{at:0}))}}function r(e){var t=(e.resourceId,e.resourceType),i=e.resourceUrn,r=new(n(444))({context_urn:i,kind:t,played_at:Date.now()});return r.release(),r}function o(){this.reset([])}e.exports=n(72).extend({model:n(444),baseUrl:function(){return this.getEndpointUrl("playHistoryContexts")},setup:function(){this.listenTo(n(73),"addToPlayHistory",i),this.listenTo(n(73),"clearPlayHistory",o)}},{hashFn:function(){return 1}})},function(e,t,n){(function(t){"use strict";var i=5;e.exports=n(143).extend(n(429),n(430),{defaults:{type:"spotlight"},model:n(295),baseUrl:function(){return this.getEndpointUrl("userSpotlight",{id:this.options.userId})},add:function(){return n(143).prototype.add.apply(this,arguments),this.length>i&&this.remove(this.models.slice(i)),this},parse:function(e){return e.collection.slice(0,i).map(function(e){var t="playlist"===e.kind;return{type:t?"playlist_spotlight":"track_spotlight",created_at:e.created_at,track:t?null:e,playlist:t?e:null}})},getMaxItemCount:function(){return i},getCurrentOrder:function(){return this.map(function(e){return(e.get("playlist")||e.get("track")).id})},reorder:function(e){this.sort({silent:!0,comparator:function(t){return e.indexOf(t.audible.id)}})},resetOrder:function(){return this.fetch({reset:!0})},saveOrder:function(){return this.save()},save:function(){var e=this.map(function(e){return e.audible.getUrn()});return t.ajax(n(3).result(this,"baseUrl"),{type:"PUT",data:JSON.stringify({spotlight:e}),dataType:"json",contentType:"application/json"})}})}).call(t,n(1))},function(e,t,n){"use strict";function i(e){var t=e.state,n=e.target,i=void 0;t?this.add({id:n},{at:0}):(i=this.get(n))&&this.remove(i)}var r=[{emitter:n(73),event:"follow",getInstance:function(e,t){var n=t.origin;return e.options.userId===n},handler:i}];e.exports=n(143).extend(n(194).withOptions({events:r}),{model:n(60),defaults:{limit:3,type:"followings"},baseUrl:function(){return this.getEndpointUrl("userFollowings",{id:this.options.userId})}})},function(e,t,n){"use strict";function i(e){var t=/^(?:(\w+)\s*:\s*)?(.*)$/.exec(e),i=t[1],o=t[2],s=new RegExp("(^|\\s|\\b)"+n(202).regexpEscape(o),"i");return function(e){var t=e.get("track"),n=t.user;return r(i,t,n).some(s.test,s)}}function r(e,t,i){var r=void 0;if(e&&o.indexOf(e)>-1)r=[t[e]];else if(e&&s.indexOf(e)>-1)r=[i[e]];else{var l=o.map(n(3).propertyOf(t)),u=s.map(n(3).propertyOf(i));r=l.concat(u)}return r.filter(a)}var o=(e.exports=n(124).extend({model:n(190).prototype.model,_terms:null,defaults:{type:"track_likes"},setupSources:function(){return[new(n(190))(null,this.options)]},audibleAt:n(190).prototype.audibleAt,getSourceInfo:n(190).prototype.getSourceInfo,filters:[function(e){return!this._terms||this._terms.every(function(t){return t(e)})}],setTerm:function(e){this._terms?this._terms.length=0:this._terms=[],e&&this._terms.push.apply(this._terms,e.split(/\s+/).map(i)),this.recalculateFilters()},isShuffled:function(){return this.sources[0].isShuffled()},toggleShuffle:function(){return this.sources[0].toggleShuffle()},unshuffle:function(){return this.sources[0].unshuffle()}},{hashFn:n(190).hashFn}),["title","genre","tag_list"]),s=["username","full_name","permalink"],a=function(e){return null!=e}},,,function(e,t,n){"use strict";function i(e,t){this.set("network",o(t))}function r(e,t){this._webProfile.set("network",t),this.set("icon",this._webProfile.getNetworkClassName())}function o(e){var t;return e?(n(3).any(a,function(n,i){return n.test(e)?(t=i,!0):void 0}),t||"personal"):""}function s(){var e=this.getAttributesFromModel();this.set(e),this.markFieldsClean()}var a={facebook:/\bfacebook\.com/i,twitter:/\btwitter\.com/i,myspace:/\bmyspace\.com/i,lastfm:/\b(last\.fm|lastfm\.[a-z]*)/i,youtube:/\byoutube\.com/i,google_plus:/\bplus\.google\.com/i,beatport:/\bbeatport\.com/i,discogs:/\bdiscogs\.com/i,flickr:/\bflickr\.com/i,hypem:/\bhypem\.com/i,ning:/\bning\.com/i,posterous:/\bposterous\.com/i,purevolume:/\bpurevolume\.com/i,residentadvisor:/\bresidentadvisor\.net\/(profile|dj)/i,residentadvisorlabel:/\bresidentadvisor\.net\/record-label/i,reverbnation:/\breverbnation\.com/i,soundcloud:/\bsoundcloud\.com/i,songkick:/\bsongkick\.com/i,tumblr:/\btumblr\.com/i,vimeo:/\bvimeo\.com/i,virb:/\bvirb\.com/i,wordpress:/\bwordpress\.com/i,ccmixter:/\bccmixter\.org/i,itunes_podcast:/\bitunes\.apple\.com/i,instagram:/\binstagram\.com/i,foursquare:/\bfoursquare\.com/i,flavors:/\bflavors.me/i,thedjlist:/\bthedjlist.com/i,berklee:/\bberkleemusic\.com/i,whatpeopleplay:/\bwhatpeopleplay\.com/i,zeroinch:/\bzero-inch\.com/i,gigatools:/\bgigs\.gigatools\.com/i,freesound:/\bfreesound\.org/i,bandpage:/\bbandpage\.com/i,bandsintown:/\bbandsintown\.com/i,email:/.*@.*/i};e.exports=n(82).extend({resource_type:"web-profile-form",_webProfile:null,fields:{icon:{defaultValue:""},url:{defaultValue:""},title:{defaultValue:""}},constraints:{url:[[n(67),{message:n(51).t("Enter a web or email address.")}],[n(1278),{message:n(51).t("This URL or email is invalid."),constraints:[[n(278),{strict:!1}],[n(423)]]}]]},setup:function(e,t){this._webProfile=new(n(556))(e,t),this.addSubmodel(this._webProfile),s.call(this),this.listenTo(this,"change:url",i).listenTo(this,"change:network",r)},removeWebProfile:function(){this.trigger("form:dirty"),this.destroy()},getAttributesFromModel:function(){var e=this._webProfile.getNetworkClassName();return n(3).assign(this.getWebProfile().pick("id","title","url","network"),{icon:e})},getWebProfile:function(){return this._webProfile}})},function(e,t,n){"use strict";e.exports=n(97).extend({message:n(51).t("Enter a valid date."),check:function(e,t){t(e instanceof Date&&"number"==typeof+e&&!isNaN(+e))}})},function(e,t){"use strict";var n=(window.navigator.userLanguage||window.navigator.language||"").toLowerCase(),i=n.split("-")[0],r=n.split("-")[1];e.exports={isUsedLanguage:function(e){return i===e.toLowerCase()},isCountry:function(e){return r===e.toLowerCase()},isUsedLanguageAndCountry:function(e){return n===e.toLowerCase()}}},function(e,t,n){"use strict";function i(e){return"sound"===e.resource_type}function r(e){return e?n(51).dateTimeHelper.format(new Date(e)):null}e.exports={enabledAttributes:function(e){return{isPrivate:e.isPrivate(),isGeoblocked:e.isGeoblocked(),isMonetizable:e.isMonetizable(),isMonetizablePending:e.isMonetizablePending(),isManagedByFeeds:e.isManagedByFeeds(),hasScheduledPrivacy:e.hasScheduledPrivacy()}},sharing:function(e){return e.isPrivate()?i(e)?n(51).t("This track is private."):n(51).t("This playlist is private."):void 0},managedByFeeds:function(e){return e.isManagedByFeeds()?i(e)?n(51).t("This track is managed directly by its rightsholder."):n(51).t("This playlist cannot be edited or deleted, as it is managed directly by its rightsholder."):void 0},monetization:function(e){if(e.isMonetizable()){var t=e.get("monetization");if(!t)return i(e)?n(51).t("This track is monetizable."):n(51).t("This playlist is monetizable.");var o=t.start_timestamp,s=t.end_timestamp,a={startDate:r(o),endDate:r(s)};return o&&s?i(e)?n(51).t("This track is monetizable between [[startDate]] and [[endDate]].",a):n(51).t("This playlist is monetizable between [[startDate]] and [[endDate]].",a):o&&!s?i(e)?n(51).t("This track is monetizable from [[startDate]].",a):n(51).t("This playlist is monetizable from [[startDate]].",a):!o&&s?i(e)?n(51).t("This track is monetizable until [[endDate]].",a):n(51).t("This playlist is monetizable until [[endDate]].",a):i(e)?n(51).t("This track is monetizable."):n(51).t("This playlist is monetizable.")}},monetizationPending:function(e){if(e.isMonetizablePending()){var t=e.get("monetization");if(t){var o=Date.now(),s=t.start_timestamp&&new Date(t.start_timestamp),a=t.end_timestamp&&new Date(t.end_timestamp),l={startDate:r(s),endDate:r(a)};return s&&s>o?i(e)?n(51).t("This track is monetizable from [[startDate]].",l):n(51).t("This playlist is monetizable from [[startDate]].",l):a&&o>a?i(e)?n(51).t("This track is monetizable until [[endDate]].",l):n(51).t("This playlist is monetizable until [[endDate]].",l):i(e)?n(51).t("This track is enabled for monetization, but is not yet monetizable."):n(51).t("This playlist is enabled for monetization, but is not yet monetizable.")}}},scheduling:function(e){if(!e.hasScheduledPrivacy())return null;var t=e.get("scheduled_public_date"),o=e.get("scheduled_private_date"),s={publicDate:r(t),privateDate:r(o)};return t&&o?i(e)?n(51).t("This track will be made public on [[publicDate]], and will be made private on [[privateDate]].",s):n(51).t("This playlist will be made public on [[publicDate]], and will be made private on [[privateDate]].",s):t?i(e)?n(51).t("This track will be made public on [[publicDate]].",s):n(51).t("This playlist will be made public on [[publicDate]].",s):i(e)?n(51).t("This track will be made private on [[privateDate]].",s):n(51).t("This playlist will be made private on [[privateDate]].",s)},geoblocking:function(e){if(e.isGeoblocked()){var t=n(92).complement(e.get("geo_blockings"));return 1===t.length?i(e)?n(51).t("This track will only be playable in [[countryTitle]].",{countryTitle:n(92).country(t[0]).title}):n(51).t("This playlist will only be playable in [[countryTitle]].",{countryTitle:n(92).country(t[0]).title}):i(e)?n(51).tp("This track will only be playable in 1 country.","This track will only be playable in %d countries.",t.length):n(51).tp("This playlist will only be playable in 1 country.","This playlist will only be playable in %d countries.",t.length)}}}},function(e,t,n){"use strict";var i,r="playlist",o=null,s=["album","ep","single","compilation"],a=(i={},i[r]=n(51).t("Playlist"),i.album=n(51).t("Album"),i.ep=n(51).t("EP"),i.single=n(51).t("Single"),i.compilation=n(51).t("Compilation"),i),l=function(e){return function(t){return s.indexOf(t)>-1?t:e}},u=function(e){return a[e]||""},c=l(r),d=l(o);e.exports={typeToApi:d,apiToType:c,releaseLabels:a,getReleaseLabel:u,defaultReleaseType:r}},function(e,t,n){"use strict";function i(){o()}function r(e){s(e.sound)}function o(){var e=void 0;e=u&&c.withoutSuffix?u:u?n(51).t("[[[pageTitle]]] on SoundCloud",{pageTitle:u}):n(51).t("SoundCloud  Hear the worlds sounds"),p._setTitle(e)}function s(e){function t(){if(!e.isPaused()){var t=e.playlist;t?l(t,e):a(e)}}e&&!e.getMonetizableTrack()&&(e.attrExists(["title","user"])?t():e.fetch().done(t))}function a(e){var t=e.get("title"),i=e.get("user").username,r=h+n(51).t("[[[soundTitle]]] by [[[artist]]]",{soundTitle:t,artist:i});p._setTitle(r)}function l(e,t){var i=t.get("title"),r=e.get("title"),o=h+n(51).t("[[[soundTitle]]] in [[[playlistTitle]]]",{soundTitle:i,playlistTitle:r});p._setTitle(o)}var u=void 0,c=void 0,d=!1,h=n(98).audioTabIndicator?"":" ",p=e.exports={initialize:function(){d||(d=!0,n(56).on("audio:play",r).on("audio:pause",i))},deinitialize:function(){d&&(d=!1,n(56).off("audio:play",r).off("audio:pause",i))},set:function(e,t){var i=n(71).getCurrentSound(),r=!(i&&i.isPlaying());u=e,c=t||{},r&&o()},update:function(){s(n(71).getCurrentSound())},_setTitle:function(e){window.document.title=e.toString()}}},,function(e,t,n){(function(t){"use strict";function i(e){this.resetValues(),this.broadcastSuccess(),this.clearSaveHistory(),this.trigger(e)}function r(e){this._failedSaves=l(e),this._completeSaves=this._completeSaves.concat(u(e))}function o(e,t){var n=this;return t.then(function(){return e.call(n).then(n.onSaved.bind(n),n.onSaveFailed.bind(n))})}function s(){return this.validate().then(function(e){return e?void 0:n(55).defer().reject()})}function a(e){var t=this,i=this.getAttributesToBeSaved(e),r=e.map(function(e){return t.saveSound(e,i[e.id])});return n(55).mapEither(function(){return n(3).flatten(arguments,!0)},n(55).settled(r))}function l(e){return n(3).reject(e,function(e){return e.isSuccess})}function u(e){return n(3).filter(e,function(e){return e.isSuccess})}function c(e){var t,i,r=this.getRequiredModelAttributes().map(function(e){return"change:"+e});this._failedSaves=[],this._completeSaves=[],this._sounds=e.map(function(e){return t=new(n(64))({id:e}),this.addSubmodel(t),this.listenTo(t,r.join(" "),d),t},this),i=f.call(this),i.length?h.call(this,i):p.call(this)}function d(){this.isDirty()||p.call(this)}function h(e){var t=e.map(function(e){return e.fetch({attrs:this.getRequiredModelAttributes()})},this);return n(55).settled(t)}function p(){var e=this.getAttributesFromModels();e&&this.set(e)}function f(){return n(3).compact(this.getSounds().map(function(e){var t=!e.attrExists(this.getRequiredModelAttributes());return t?e:null},this))}var g={"default":"save",save:function(){return o.call(this,this.saveTracks,s.call(this))},retry:function(){return o.call(this,this.retryTracks,s.call(this))},cancel:function(){this.cancel()}},m={save:{label:n(51).t("Save"),action:"save"},retry:{label:n(51).t("Retry"),action:"retry"},cancel:{label:n(51).t("Cancel"),action:"cancel"},close:{label:n(51).t("Close"),action:"cancel"}};e.exports=new(n(21))(n(193),{requirePrototype:n(82).prototype,applyTo:function(e){e.constructor.hashFn=function(e,t){return e.resource_id||e.id||t&&(t.resource_id||t.soundIds.join("_"))||null},e.buttons=t.extend(!0,{},m,e.buttons||{}),e.actions=n(3).defaults(e.actions||{},g)},before:{setup:function(e,t){c.call(this,t.soundIds)}},requires:["getAttributesFromModels","getAttributesToBeSaved"],defaults:{getRequiredModelAttributes:function(){return[]},broadcastSuccess:function(){this._completeSaves.length>0&&n(56).trigger("multi-track:saved",{soundSaves:this._completeSaves})},setSoundAttributes:function(e,t){e.set(t)},saveSound:function(e,t){var i=e.createSnapshot(n(3).keys(t));return this.setSoundAttributes(e,t),e.save().then(function(){return{sound:e,isSuccess:!0}},function(){return i.rollback(),{sound:e,isSuccess:!1}})},getInitialValues:function(){return this.getAttributesFromModels()},resetValues:function(){var e=this.getInitialValues();this.set(e),this.markFieldsClean()}},_sounds:null,_failedSaves:null,_completeSaves:null,getSounds:function(){return this._sounds},saveTracks:function(){return a.call(this,this.getSounds())},retryTracks:function(){return a.call(this,n(3).pluck(this._failedSaves,"sound"))},onSaved:function(e){r.call(this,e),i.call(this,"allSaved")},onSaveFailed:function(e){r.call(this,e),this.trigger("someFailed",{failedSounds:this._failedSaves})},cancel:function(){i.call(this,"canceled")},clearSaveHistory:function(){this._failedSaves=[],this._completeSaves=[]},reduceSounds:function(e){var t=this.getSounds();return t.length?n(3).reduce(e,function(e,i,r){var o=i(t[0]),s=n(3).some(t,function(e){return!n(3).isEqual(i(e),o)});return e[r]=s?null:o,e},{}):{}}})}).call(t,n(1))},function(e,t,n){"use strict";e.exports=new(n(21))({requires:["trigger"],defaults:{states:null},_states:null,toggleState:function(e,t,n){var i,r,o,s;return!e||this.disposed?this:(this._states||(this._states={}),this.states||(this.states={}),e in this.states?(e in this._states||(this._states[e]=this.getState(e)),o="undefined"!=typeof t?!!t:!this._states[e],n||this._states[e]!==o?(this._states[e]=o,r=this.states[e],i=r.handler?r.handler:r,s=typeof i,"string"===s?this.$el[o?"addClass":"removeClass"](i):"function"===s?i.call(this,o):i&&"function"==typeof i.setup&&i[o?"setup":"teardown"].call(this),this.trigger("state:"+e,o),this):this):this)},getState:function(e){return this._states&&e in this._states?this._states[e]:this.states&&e in this.states?!!this.states[e].initial:!1}})},,,,,function(e,t,n){"use strict";function i(e){var t=e.map(function(e){return function(){return e.set("editing",!1),e.saveEdits()}}).reverse();return n(55).sequential(t)}function r(){this._soundUploads.length||this.cancel()}function o(e){this._soundUploads.invoke("setImageFile",e.file,e.source)}function s(e){e.forEach(function(e){e.set(n(3).pick(this.attributes,u))},this)}function a(e){e.changedAttributes()&&this._soundUploads.each(function(t){t.set(n(3).pick(e.changedAttributes(),u))})}function l(){var e=this.getAudible();this._soundUploads.each(function(t){var n,i=t.getAudible();e.addSound(i),n=e.findSoundById(i.id),t.updateSound(n)})}var u=["description","tags","editing","feedable","genre","artwork_url","buyLink","buyTitle","sharing","apiStreamable","embeddableByAll","domainLocking","downloadable","license","creativeCommonsLicense","attribution","nonCommercial","nonDerivative","shareAlike","commentable","publicComments","stats","geoblocking","availableCountries","labelName","releaseDate","monetizationEnabled","monetizationTerritories","monetizationStartTimezone","monetizationStart","monetizationStartLocalDate","monetizationStartDate","monetizationEndTimezone","monetizationEnd","monetizationEndLocalDate","monetizationEndDate","monetizationRightsholder","offlineSyncEnabled"],c=n(72).extend({model:n(140),url:null,isFullyPopulated:function(){return!0},hasDataForView:function(){return!0}});e.exports=n(82).extend(n(935),n(936),n(430),n(931),n(933),n(932),{_soundUploads:null,_playlist:null,failedSaving:!1,resource_type:"playlist-upload",constraints:{title:[[n(67),{message:"Enter a title."}],[n(108),{maxLength:100,message:"Enter a title that is up to [[maxLength]] characters."}]],description:[[n(108),{maxLength:4e3,message:"Enter a playlist description that is up to [[maxLength]] characters."}]],permalink:[[n(421),{type:"playlist",getResource:function(){return this.getAudible()}}]],customGenre:[[n(108),{maxLength:100,message:n(51).t("Enter a custom genre that is up to [[maxLength]] characters.")}]]},actions:{save:function(){var e=this;return this.validate().then(function(e){return e||n(55).reject()}).then(function(){return e.set("editing",!1),i(e.getSoundUploads())}).then(this.saveEdits.bind(this))}},getAttributesToBeSaved:function(){var e=this._soundUploads.map(function(e){var t=e.getAudible();return{id:t.id}});return{tracks:e}},getAttributesFromModel:function(){return{}},setup:function(){this._soundUploads=new c,this.listenTo(this._soundUploads,"remove",r).listenTo(this,"imageDataChanged",o).listenTo(this,"change",a)},addSoundForms:function(e){this._soundUploads.add(e),s.call(this,e)},validate:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=n(55).defer(),i=n(82).prototype.validate.apply(this,arguments),r=e.fields,o=r?n(3).assign({},e,{fields:n(3).intersection(r,u)}):e,s=this._soundUploads.map(function(e){return e.validate.call(e,o)});return s.push(i),n(55).all(s).done(function(){var e=Array.prototype.slice.call(arguments);t.resolve(e.every(n(3).identity))}),t},onAudibleSaved:function(){this.failedSaving=!1,l.call(this)},onSaveFailed:function(e){this.failedSaving=!0,this.setToFailed("save",e),this.set("editing",!0),this.setActionState("save","enabled")},cancel:function(){var e;for(e=this._soundUploads.length;e--;)this._soundUploads.at(e).cancel();this.destroy(),this._playlist&&n(73).destroy(this._playlist)},resetOrder:n(3).noop,saveOrder:n(3).noop,getCurrentOrder:function(){return n(3).pluck(this.getSoundUploads(),"resource_id")},reorder:function(e){this._soundUploads.sort({silent:!0,comparator:function(t){return e.indexOf(t.resource_id)}})},getAudible:function(){return this._playlist},createAudible:function(){return this._playlist=new(n(85)),this._playlist},unsetAudible:function(){this._playlist=null},getSoundUploadsCollection:function(){return this._soundUploads},getSoundUploads:function(){return this._soundUploads.models}},{onCleanup:function(){this._playlist&&this._playlist.release(),this._soundUploads.release()}})},function(e,t,n){"use strict";function i(e){this.set("transfer",new(n(529))({sampleSize:50})),this.get("transfer").setTotal(e.size),this.set("transcoding",new(n(529))({sampleSize:10,totalSize:100}))}function r(){this._uploadRequest&&this._uploadRequest.abort(),this._transcodingStatus&&this._transcodingStatus.abort()}function o(e){var t=this.get("transfer");this._s3key=e,this.set("status",n(87).TRANSCODING),t.add(t.getTotalSize()),n(58).trackUploadFunnel("upload_done"),this.get("transcoding").setTotal(0),this._transcodingStatus=new(n(1333))(e).done(l.bind(this)).fail(u.bind(this)).progress(c.bind(this))}function s(){this.set("status",n(87).FAILED),n(58).trackUploadFunnel(["failed","uploading"])}function a(e){this.get("transfer").setTotal(e.total).add(e.loaded)}function l(){this.get("transcoding").setTotal(100).add(100),this.set("status",n(87).COMPLETE),n(58).trackUploadFunnel("complete")}function u(){this.get("transcoding").setTotal(100),this.set("status",n(87).FAILED),n(58).trackUploadFunnel(["failed","transcoding"])}function c(e){this.get("transcoding").setTotal(100).add(e)}e.exports=n(65).extend({resource_type:"single-audio-upload",url:null,_uploadRequest:null,_transcodingStatus:null,_s3key:null,hasDataForView:function(){return!0},setup:function(e){i.call(this,e.file),this.set({status:n(87).QUEUED,hasBeenSaved:!1})},upload:function(){this.set("status",n(87).UPLOADING),this._uploadRequest=(new(n(954))).upload(this.get("file")).done(o.bind(this)).fail(s.bind(this)).progress(a.bind(this))},remove:function(){r.call(this),this.destroy()},getS3Key:function(){return this._s3key},getFileName:function(){return this.get("file").name}},{hashFn:function(e,t){return t&&t.resource_id||e&&(e.file?null:e.id||e.resource_id)||null}})},,,,,,,,,,,,function(e,t,n){"use strict";e.exports=n(226).extend({readEndpoint:"userBlockingsIds",createEndpoint:"userBlockingsCreate",deleteEndpoint:"userBlockingsDelete",getCreateEndpointQueryParams:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.reported,i=t.remove_activities;return{user_id:e,reported:n?"true":null,remove_activities:i?"true":null}}})},function(e,t,n){"use strict";e.exports=n(65).extend({resource_type:"liked-and-owned-playlist",submodelMap:{playlist:n(85)},setup:function(e){},isOwned:function(){return"playlist"===this.get("type")},isLiked:function(){return"playlist-like"===this.get("type")},isAlbum:function(){return this.getAudible().isAlbum()},createSubmodel:function(){var e=n(3).last(this._submodels);n(65).prototype.createSubmodel.apply(this,arguments);var t=n(3).last(this._submodels);t!==e&&this.listenTo(t,"destroy",this.onSubmodelDestroy)},onSubmodelDestroy:function(){this.destroy()},getAudible:function(){return n(85).instances.get(this.get("playlist").id)}},{hashFn:function(e){var t=e.type,n=e.user,i=e.playlist;return[t,n.id,i.id].join("_")},getModelData:function(e,t,n){return{type:t,created_at:(new Date).toISOString(),playlist:{id:n},user:{id:e}}}})},function(e,t,n){"use strict";e.exports=n(65).extend({submodelMap:{promoted_by:n(60),user:n(60)},urnPrefix:"soundcloud:users",hasDataForView:function(){return!0},getUser:function(){return n(60).instances.get(this.get("user").id)},parse:function(e){return e.origin&&(e.user=e.origin,delete e.origin),e.user&&(e.id=e.user.id),e},isPromoted:function(){return"promoted"===this.get("source")||"promoted"===this.get("campaign")}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){var n="https://exit.sc?url=%s";e.exports={oneline:{paragraphs:!1,whitelist:[],externalLinks:!1},"default":{redirectorPattern:n}}},function(e,t,n){function i(e,t,n){if(n.indexOf(" ")>-1)return n;if(n!==n.toUpperCase()){var i=n.replace(/[.,#~_-]|([a-z])([A-Z])/g,function(e,t,n){return t?t+" "+n:" "});if(n!==i)return o.titleCase(i)}var r=n.toLowerCase();return e&&r.indexOf(e.toLowerCase())>-1||t&&r.indexOf(t.toLowerCase())>-1||r.indexOf("user")>-1?e+" "+t:n}var r=n(243),o=n(202);e.exports={get:function(e,t){var n=e.username||e.title||e.name;return t===!0&&(n=r.possessive(n)),n},getTitleDisplayName:function(e,t,n){var r=i(e,t,n);return r!==n?n+" | "+r:n}}},,function(e,t,n){"use strict";function i(e,t){var n=o({},I,t),r=n.links,D=n.userLinks,P=n.internalLinks,M=n.externalLinks,R=n.deepLinks,L=n.escapeExpression,F=n.hashtagLinks,O=n.internalLinksBaseUrl,N=n.isOpeningNewWindow,B=n.maxExternalLinksLength,$=n.maxLength,U=n.paragraphs,z=n.redirectorPattern,H=n.splitWordsAtLength,j=n.whitelist,V=L!==!1;if("string"!=typeof e)return"";r?D||P||M||(r=!1):D=P=M=!1;var q=r?c():{},W=q.flatten,G=q.addPlaceholder;return p.lastIndex=m.lastIndex=g.lastIndex=0,e=s(e),r&&(e=e.replace(C,function(e,t,n,i){var r=n||t;return G(r,i!==r?i:null)}).replace(p,function(e,t){return G(t)})),e=e.replace(x,"\n\n").replace(k,"\n").replace(E," "),e=j&&j.length?e.replace(new RegExp("<(?!\\s*\\/?("+j.join("|")+")\\b)[^>]*>","ig"),""):e.replace(S,""),
V&&(e=a(e)),r&&(e=e.replace(g,'<a href="mailto:$1">$1</a>'),e=W(e,function(e,t){var r={},s="",u=b.test(e)?e:"http://"+e;if(0===e.indexOf("mailto:"))r.href=e,r.text=e.replace("mailto:","");else if(P&&v.test(e))r.href=e.replace(v,O),r.text=e.replace(b,"");else if(M){var c=y.test(u);r.href=c?u:l(z,u,y),c||(r.title=u,r.rel="nofollow"),r.text=h(e,B,b),r.target="_blank"}else r.href=e;return t&&(V?s=i(t,o({},n,{paragraphs:!1,splitWordsAtLength:0})).trim()+(/[!?:;.]$/.test(t)?" ":": "):r.text=t),s+(r.text?'<a href="'+a(r.href)+'"'+(r.rel?' rel="'+r.rel+'"':"")+(r.target?' target="'+r.target+'"':"")+(r.title?' title="'+a(r.title)+'"':"")+(">"+(V?a(r.text):r.text)+"</a>"):a(r.href))}),D&&(e=e.replace(m,'$1@<a href="'+O+'$2"'+(N?' target="_blank"':"")+">$2</a>")),F&&(e=e.replace(_,'$1<a href="/tags/$3">$2</a>')),R&&(e=e.replace(f,'<a href="#t=$1">$1</a>'))),$&&(e=u(e,$)),H>0&&(e=d(e,H)),e=U?e.split(w).map(function(e){return"<p>"+e.trim().replace(T,"<br>")+"</p>"}).join(""):e.replace(A," ").replace(E," ")}function r(e,t){var n=t&&t.redirectorPattern;return n?l(n,e,y):e}var o=n(1185),s=n(1186),a=n(1187),l=n(1188),u=n(1189),c=n(1190),d=n(1191),h=n(1192);e.exports=i;var p=/\b((?:https?:\/\/|www\d{0,3}\.|(?:[a-z0-9\-]+\.)+[a-z]{2,4}\/)[^\s'"]*[^\s`!()\[\]{};:'".,<>?])/gi,f=/(\b(?:[0-5]?[0-9])(?::[0-5][0-9]){1,2}\b)/g,g=/([a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,24})/gi,m=/(\s|[^\w]|^)@([\w\-]+)/g,_=/( |^)(#([\w-]+))/gm,v=/^((?:https?:\/\/)?(?:www\.|m\.)?soundcloud\.(?:com|dev))\/?|^\//i,y=/^((?:https?:\/\/)?([a-z0-9-]+\.)*soundcloud\.(?:com|dev))(?:\/|$)/i,b=/^(?:ht|f)tps?:\/\//i,w=/(?:[ \t]*\r?\n[ \t]*){2,}/,x=/<\/p>/g,k=/<br\s*\/?>/g,S=/<\/?[a-z].*?>/gi,T=/\r?\n/g,E=/[ \t]{2,}/g,A=/[\r\n]+/g,C=/<a\s+[^>]*?href=(['"]([^'"\s]+)['"]|[^'"\s]+)[^>]*?>(.+?)<\/a>/gi,I={paragraphs:!0,links:!0,externalLinks:!0,internalLinks:!0,userLinks:!0,deepLinks:!1,whitelist:[],internalLinksBaseUrl:"/",isOpeningNewWindow:!1,maxLength:null,truncateExternalLinks:!0,maxExternalLinksLength:50,hashtagLinks:!0,splitWordsAtLength:null,redirectorPattern:null};i.redirectLink=r,i.withDefaults=function(e){var t=o({},I,e),n=function(e,n){var r=n?o({},t,n):t;return i(e,r)};return n.redirectLink=function(e,n){var i=n?o({},t,n):t;return r(e,i)},n}},function(e,t,n){"use strict";function i(){var e=new(n(76))({id:this.options.resource_id,resource_type:this.options.resource_type});return e.release(),e.get("secret_token")}e.exports=n(873).extend({defaults:{type:null,resource_id:null,resource_type:null},actionName:function(){return"likers"===this.options.type?"like":"repost"},setup:function(){this.options.secret_token=i.call(this),n(873).prototype.setup.apply(this,arguments)},baseUrl:function(){var e=this.options,t=e.resource_type,n=e.resource_id,i=e.type,r={id:n,category:i};return"sound"===t&&"likers"===i?this.getEndpointUrl("trackCategory",r):"sound"===t&&"reposters"===i?this.getEndpointUrl("soundReposters",r):"likers"===i?this.getEndpointUrl("playlistCategory",r):this.getEndpointUrl("edgePlaylistCategory",r)}},{hashFn:function(e,t){return t?t.resource_id+"_"+t.type+"_"+t.resource_type:null}})},function(e,t,n){"use strict";var i=e.exports=n(72).extend({model:n(60),setup:function(){n(63).isLoggedIn()||this.setToFullyPopulated()},comparator:function(e){return e.get("username").toLowerCase()},baseUrl:function(){return this.getEndpointUrl("shortcutsFollowings")}},{hashFn:function(){return n(54).get("me").get("id")},prefetch:function(){var e=new i;e.isPopulated()||e.fetch(),e.release()}})},function(e,t,n){"use strict";function i(e){e.length>0&&n(56).trigger("new-unread-messages",e)}function r(e){var t;e.forEach(function(e){t=n(152).instances.get(e),t&&t.setRead(!0)})}function o(){var e=n(169)[this.notificationType];return{backoffRate:1.1,baseDelay:e.get("minPollInterval"),maxDelay:e.get("maxPollInterval")}}function s(){this._breaker&&this.restart()}function a(){this.trigger("anyUnreadMessages",this.hasAnyUnreadMessages())}function l(e){this.remove(e),a.call(this)}function u(e){var t=n(152).instances.get(e);t&&this.add(t),a.call(this)}e.exports=n(72).extend({model:n(152),notificationType:"unreadConversations",defaults:{limit:20},setup:function(){this.listenTo(n(169)[this.notificationType],"pollIntervalChange",s).listenTo(n(56),"conversation:read",l).listenTo(n(56),"conversation:unread",u)},baseUrl:function(){return n(169)[this.notificationType].get("baseUrl")()},startPolling:function(){var e=this;this._isPolling||!function(){var t=e._breaker=new(n(155))(o.call(e)),i=function(){e._isPolling&&(window.clearTimeout(e._pollingId),e.fetch({reset:!0,remove:!0}).done(function(){t.succeeded(),e._pollingId=window.setTimeout(i,t.currentDelay())}).fail(function(e){e.status>=400&&e.status<500?t.disable({autoEnable:!1}):t.failed()}))};e._isPolling=!0,e._breaker.on("enabled",i),i()}()},stopPolling:function(){this._isPolling&&(window.clearTimeout(this._pollingId),this._breaker.dispose(),this._isPolling=!1,this._pollingId=this._breaker=null)},restart:function(){this.stopPolling(),this.startPolling()},parse:function(){return this.next_href=null,n(72).prototype.parse.apply(this,arguments)},reset:function(e,t){var o,s,l,u;t=t||{},o=n(72).prototype.reset.call(this,e,t),l=n(3).pluck(o,"id"),s=n(3).difference(t.previousModels,this.models),u=n(3).pluck(s,"id"),i(l),r.call(this,u),a.call(this)},hasAnyUnreadMessages:function(){return this.length>0}},{hashFn:function(){return 1},onCleanup:function(e){e.stopPolling()},neverRelease:!0})},function(e,t,n){"use strict";function i(e){var t=e.state,n=e.origin,i=void 0;t&&this.shouldAddFromActions?this.add({id:n},{at:0}):!t&&(i=this.get(n))&&this.remove(i)}var r=[{emitter:n(73),event:"follow",getInstance:function(e,t){var n=t.target;return e.options.userId===n},handler:i}];e.exports=n(143).extend(n(194).withOptions({events:r}),{model:n(60),defaults:{limit:7,type:"followers"},shouldAddFromActions:!0,baseUrl:function(){return this.getEndpointUrl("userFollowers",{id:this.options.userId})}})},function(e,t,n){"use strict";e.exports=n(72).extend({model:n(556),defaults:{type:"web-profiles"},url:function(){return this.getEndpointUrl("userWebProfiles",{urn:n(100).generate("user",this.options.userId)})},parse:function(e){return e.forEach(function(e){var t=e.url,n=e.network,i=e.title;e.id=t+"_"+n+"_"+i}),e},getProfileByName:function(e){return this.find(function(t){return t.get("network")===e})}},{hashFn:function(e,t){return t.userId}})},,,function(e,t,n){"use strict";e.exports=n(82).extend(n(247).withOptions({read:"artwork_url"}),n(321),{resource_type:"multi-track-artwork",fields:{artwork_url:{defaultValue:""}},setup:function(){var e=this;this.on("imageDataChanged",function(t){t.file&&e.markFieldsDirty("artwork_url")}).on("canceled",this.unsetImageFile.bind(this,{force:!0})).on("allSaved",this.unsetImageFile.bind(this,{force:!0}))},saveSound:function(e){var t=this.getImageFileInfo(),i={sound:e,isSuccess:!1};return t.file?(e.setImageFile(t.file,t.source),e.uploadImage().then(function(){return{sound:e,isSuccess:!0}},function(){return i})):n(55).reject(i)},getAttributesFromModels:function(){return null},getAttributesToBeSaved:function(){return{}}})},function(e,t,n){"use strict";function i(){var e=this;this.validate().then(function(t){return t?(e.set("editing",!1),e.saveEdits()):n(55).reject()})}function r(){this.isDirty()||this.setToModelAttributes()}function o(e){this.getAudible().set(e),this.trigger("saved")}function s(e){this.set({errorMessage:this.getErrorMessageTemplate("save",this.getAudible().get("kind"),this.extractErrorMessage(e))})}e.exports=n(82).extend(n(505),n(193),{resource_type:"restricted-audible-edit",requiredModelAttributes:["description","purchase_title","purchase_url"],actions:{"default":"save",save:function(){return i.call(this)},cancel:function(){this.cancel()},retry:function(){return i.call(this)}},fields:{buyLink:{defaultValue:""},buyTitle:{defaultValue:"Buy"},description:{defaultValue:""}},buttons:{save:{label:n(51).t("Save changes"),pendingLabel:n(51).t("Saving"),action:"save"},cancel:{label:n(51).t("Cancel"),action:"cancel"},retry:{label:n(51).t("Retry"),action:"retry"}},constraints:{buyLink:[[n(278),{strict:!1}]],buyTitle:[[n(491)]],description:[[n(108),{maxLength:4e3,message:n(51).t("Playlist description must not exceed 4000 characters")}]]},setup:function(e,t){var i=t.resource_id,o=t.resource_type;this._audible="restricted-playlist-edit"===o?new(n(85))({id:i}):new(n(64))({id:i});var s=this.requiredModelAttributes.map(function(e){return"change:"+e});this.listenTo(this._audible,s.join(" "),r),this._audible.attrExists(this.requiredModelAttributes)?this.setToModelAttributes():this._audible.fetch({attrs:this.requiredModelAttributes}).fail(function(){return n(116).raise({fatal:!0})})},saveEdits:function(){var e=this.getAudible(),t=this.getAttributesToBeSaved(),i="restricted-playlist-edit"===this.options.resource_type,r=i?{id:e.id}:{urn:e.get("urn")},a=i?{playlist:t}:{track:t},l=i?"feedPlaylistUpdate":"feedTrackUpdate";return n(23).callEndpoint(l,r,null,null,a).then(o.bind(this,t),s.bind(this))},getAudible:function(){return this._audible},getAttributesFromModel:function(){var e=this.getAudible();return{buyLink:e.get("purchase_url"),buyTitle:e.get("purchase_title")||this.getFieldMetadata("buyTitle").defaultValue,description:e.get("description")}},getAttributesToBeSaved:function(){var e=this.get("buyLink");return{purchase_url:e?n(62).normalize(e):"",purchase_title:this.get("buyTitle")||"",description:this.get("description")||""}},cancel:function(){this.set("errorMessage",""),this.markFieldsClean(),this.trigger("canceled")},saveCleanup:function(e){this.markFieldsClean()}},{hashFn:function(e,t){return e.resource_id||t&&t.resource_id||e.id||null}})},function(e,t,n){"use strict";function i(){var e="check_identifier_recaptcha";return this.getValidFieldValues(["identifier",e]).then(n(227).checkIdentifier).then(s(this,e))}function r(){var e="signin_with_password_recaptcha";return this.getValidFieldValues(["identifier","password",e]).then(n(227).signinWithPassword).then(s(this,e))}function o(){var e="signup_with_email_recaptcha";return this.getValidFieldValues(["identifier","password","age",e,"accept_terms"]).then(n(227).signupWithEmail).then(s(this,e))}function s(e,t){arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return function(i){return i.error===w?(e.toggleRecaptcha(t,!0),n(55).reject()):i}}function a(){return this.getValidFieldValues(["accept_terms"]).then(_).then(n(227).signupWithFacebook)}function l(){return this.getValidFieldValues(["accept_terms"]).then(y).then(n(227).signupWithGoogle)}function u(){return _().then(n(227).signinWithFacebook)}function c(){return y().then(n(227).signinWithGoogle)}function d(){var e=this;return this.getValidFieldValues(["username"]).then(function(t){var i=e.get("gender"),r=e.get("genderCustom"),o=n(54).get("me"),s={username:t,gender:"custom"===i?r:i};return o&&o.set(s),n(55).mapEither(p,b("meUpdate",null,null,null,s))})}function h(){return this.getValidFieldValues(["identifier"]).then(function(e){return n(55).mapEither(p,b("resetPassword",null,{email:e}))})}function p(e){return n(55).resolve(e.body||{})}var f=n(3).assign,g=n(3).mapObject,m=n(112).loadFacebookSDK,_=n(112).getFacebookToken,v=n(224).loadGoogleAuthSDK,y=n(224).getGoogleToken,b=n(23).callEndpoint,w=n(115).RECAPTCHA_REQUIRED,x=["check_identifier_recaptcha","signup_with_email_recaptcha","signin_with_password_recaptcha"];e.exports=n(82).extend(n(929),n(1304).withOptions({recaptchas:x}),{resource_type:"signin-form",fields:g({identifier:"",password:"",age:null,accept_terms:!1,username:"",reset_password_addresses:null},function(e){return{defaultValue:e}}),constraints:{identifier:[[n(67),{message:n(51).t("Enter a valid email address or profile URL.")}]],password:[[n(67),{message:n(51).t("Enter a password.")}],[n(1276),{minLength:6,message:n(51).t("Use at least [[minLength]] characters.")}]],age:[[n(67),{message:n(51).t("Enter your age.")}],[n(1277),{minValue:13,message:n(51).t("You must be at least [[minValue]] years old.")}]],accept_terms:[[n(277),{value:!0,message:n(51).t("Accept the terms before continuing.")}]],username:[[n(67),{message:n(51).t("Enter your display name. You can change it later.")}],[n(108),{maxLength:50,message:n(51).t("Enter a display name that is up to [[maxLength]] characters.")}]]},buttons:g({checkIdentifier:{label:n(51).t("Continue")},signinWithPassword:{label:n(51).t("Sign in")},signupWithEmail:{label:n(51).t("Continue")},signupWithGoogle:{label:n(51).t("Get started")},signupWithFacebook:{label:n(51).t("Get started")},addUserInformation:{label:n(51).t("Get started")},promptPasswordReset:{label:n(51).t("Request a password reset")}},function(e,t){return f(e,{action:t})}),actions:{checkIdentifier:i,signinWithGoogle:c,signinWithFacebook:u,signinWithPassword:r,signupWithEmail:o,signupWithGoogle:l,signupWithFacebook:a,addUserInformation:d,promptPasswordReset:h},setup:function(){m(),v()}})},function(e,t,n){"use strict";function i(){var e=this._callout;e&&(this.stopListening(e),this._callout=null)}e.exports=new(n(21))({_callout:null,applyTo:function(e,t){var r=t.id,o=t.elSelector,s=t.viewOptions,a=void 0===s?{}:s,l=t.displayCondition,u=void 0===l?function(){return!0}:l;this.after(e,{renderDecorate:function(){if(n(905).shouldDisplay(r)&&u.call(this)){var e=o?this.$(o):this.$el;e.length&&(this._callout=n(905).display(r,e,{viewOptions:a}),this.listenTo(this._callout,"closed overlay:closed",i))}}})},after:{dispose:function(){this._callout&&(this._callout.disposed||this._callout.close(),i.call(this))}}})},function(e,t,n){"use strict";var i=[{rule:/^(?![_-])/,errorMessage:n(51).t("A permalink must not start with an underscore or hyphen.")},{rule:/^(?!.*[-_]$)/,errorMessage:n(51).t("A permalink must not end with an underscore or hyphen.")},{rule:/^(?!.*[\-_]{2,})/,errorMessage:n(51).t("A permalink must not have consecutive underscores or hyphens.")},{rule:/^[a-z0-9_-]*$/,errorMessage:n(51).t("Use only numbers, letters, underscores, or hyphens.")},{rule:/[a-z]/,errorMessage:n(51).t("A permalink must contain at least one letter.")},{rule:/^.{3,255}$/,errorMessage:n(51).t("A permalink must be between 3 and 255 characters.")}],r={playlist:[],sound:[{rule:new RegExp("^(?!("+["albums","comments","favorites","followers","following","likes","reposts","sets","stats","tracks"].join("|")+")$)"),errorMessage:n(51).t("This permalink is reserved. Enter another one.")}]};e.exports=n(97).extend({type:"sound",initialize:function(){n(97).prototype.initialize.apply(this,arguments),this.constraints=i.concat(r[this.type])},check:function(e,t){var i=this;if(""===e)return void t(!0);var r=n(3).find(this.constraints,function(t){return!t.rule.test(e)});r?(this.message=r.errorMessage,t(!1)):this.resolvePermalink(e).done(function(e){e===!1&&(i.message=n(51).t("This permalink is already in use. Enter another one.")),t(e)}).fail(function(e){return t(!0)})},resolvePermalink:function(e){var t=this.getResource.call(this._form),i=n(54).get("me").get("permalink");return t&&e===t.get("permalink")?n(55).resolve(!0):"sound"===this.type?n(23).callEndpoint("trackPermalinkAvailability",null,{permalink:e}).then(function(e){return e.body.track_permalink_available}):"playlist"===this.type?n(85).resolve(i,e).then(function(e){return!1}):void 0}})},function(e,t,n){"use strict";var i=e.exports=new(n(21))({message:"",state:n(172).UNKNOWN,_lastError:null,_lastResult:null,_form:null,initialize:function(e,t){n(3).assign(this,e),this._form=t},disable:function(){this.state=n(172).DISABLED},reset:function(){this.state=n(172).UNKNOWN,this._lastResult&&"pending"===this._lastResult.state()&&this._lastResult.reject(),this._lastResult=null},result:function(e,t){return this.state=t?n(172).VALID:n(172).INVALID,this._lastError=t?null:this.getMessage(),e.resolve({success:t,message:this._lastError})},getLastError:function(){return this._lastError},around:{validate:function(e){return this.state===n(172).UNKNOWN&&(this._lastResult=e.apply(this,Array.prototype.slice.call(arguments,1))),this._lastResult}},defaults:{check:n(3).noop,getMessage:function(){var e=this,t=n(3).isFunction(this.message)?this.message.call(this._form):this.message||"";return t.toString().replace(/\[\[([^}]+)\]\]/g,function(t,n){return e[n]||t})}}});i.hydrateConstraintDefinition=function(e){var t=void 0,n=void 0;return Array.isArray(e)?(t=e[0],n=e[1]):t=e,new t(n,this)},i.hydrateConstraintDefinitions=function(e){var t=this;return n(3).reduce(e,function(e,n,r){return e[r]=n.map(i.hydrateConstraintDefinition,t),e},{})}},function(e,t,n){"use strict";var i=/^\s*([^@]+)@(\S+\.[a-z]{2,})\s*$/i;e.exports=n(97).extend({message:n(51).t("This email address is invalid."),check:function(e,t){t(i.test(e))}})},function(e,t,n){"use strict";e.exports=n(97).extend({message:n(51).t("Enter a time in the future."),check:function(e,t){t(e>Date.now())}})},function(e,t,n){"use strict";function i(e,t){return k[e](t)}function r(){var e=n(54).get("experiments").get("v2_listening","more_actions");return S[e]||S.like_share}function o(e,t){return T.getOrderedActions().filter(t).filter(n(3).partial(i,n(3),e))}function s(e,t,i){var r=T.getOrderedActions(),o=r.slice(0,t),s=n(3).partition(e,function(e){return n(3).contains(o,e)}),a=s[0],l=s[1];return l.length>=i?{primary:a,overflow:l}:{primary:a.concat(l),overflow:[]}}function a(e){return u(e)||l(e)}function l(e){return e instanceof n(85)}function u(e){return e instanceof n(64)}function c(e){return d(e)&&!h(e)}function d(e){return a(e)&&!e.isDisabled()}function h(e){return a(e)&&e.isProcessing()}function p(e){return a(e)&&e.isPublic()}function f(e){return a(e)&&n(54).get("me").owns(e)}function g(e){return a(e)&&e.getNumSounds()>0}function m(e){return a(e)&&!!e.get("purchase_url")}function _(e){return u(e)&&n(54).get("me").canDownload(e)}function v(e){return a(e)&&e.isBlacklisted()}function y(e){return a(e)&&e.isDisabled()}function b(e){return function(){return!e.apply(void 0,arguments)}}function w(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];return function(){for(var e=arguments.length,i=Array(e),r=0;e>r;r++)i[r]=arguments[r];return n(3).every(t,function(e){return e.apply(void 0,i)})}}function x(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];return function(){for(var e=arguments.length,i=Array(e),r=0;e>r;r++)i[r]=arguments[r];return n(3).any(t,function(e){return e.apply(void 0,i)})}}var k={play:c,like:w(c,p),repost:w(c,p,b(f)),addToPlaylist:w(c,u,x(p,f)),buy:w(g,m),share:w(c,g,x(p,f)),download:w(c,_),"delete":w(f,b(v)),edit:w(f,b(y)),startStation:w(c,u,p,b(v))},S={control:["play","like","repost","addToPlaylist","share","buy","download","startStation","edit","delete"],like_share:["play","like","share","repost","addToPlaylist","buy","download","startStation","edit","delete"],like_repost:["play","like","repost","addToPlaylist","share","buy","download","startStation","edit","delete"],like_add_to_playlist_download:["play","like","addToPlaylist","download","repost","share","buy","startStation","edit","delete"],like_station:["play","like","startStation","repost","addToPlaylist","share","buy","download","edit","delete"]},T=e.exports={getActionSet:o,overflowActions:s,getOrderedActions:r}},function(e,t,n){"use strict";e.exports={confirm:function(e){var t=window.confirm(e),i=n(55).defer();return i[t?"resolve":"reject"]()}}},function(e,t,n){(function(t){"use strict";function i(e,t){x(e,1e3*Math.max(5,c)*("next"===t?1:-1))}function r(e,t){return(e&&n(3).reduce(e,function(e,n,i){var r=t(n,i);return r!==!1&&(!e||r>e.value)?{item:n,value:r}:e},void 0)||{}).item}function o(e){return e&&u.some(n(3).propertyOf(e))}function s(e){var t=e.keyCode;return t===f||t===g||t===p||t===m}function a(){l(),k=window.setTimeout(l,_),y=!0}function l(){k&&(window.clearTimeout(k),k=null),y=!1}var u=["altKey","shiftKey","ctrlKey","metaKey"],c=0,d=!1,h=n(113).ENTER,p=n(113).ALT,f=n(113).SHIFT,g=n(113).CTRL,m=n(113).META,_=1500,v=71,y=!1,b=e.exports={chordStartKeyName:"G",shortcuts:{playPause:{keyCode:["32","13"],keyName:["space"],description:n(51).t("Play or pause"),className:"kbd-big",fn:function(){n(71).toggleCurrent({userInitiated:!0})}},search:{keyCode:["83","191"],keyName:["S"],description:n(51).t("Search"),fn:function(){n(56).trigger("search:focus")}},load:{keyCode:["48","49","50","51","52","53","54","55","56","57"],keyName:["09"],className:"kbd-big",description:n(51).t("Seek to position"),fn:function(e,t,n){e&&!o(n)&&e.seek(e.getMediaDuration()/10*(t-48))}},seekBackward:{keyCode:["37"],keyName:[""],description:n(51).t("Seek backward"),allowKeyHold:!0,fn:function(e){e&&i(e,"prev")}},seekForward:{keyCode:["39"],keyName:[""],description:n(51).t("Seek forward"),allowKeyHold:!0,fn:function(e){e&&i(e,"next")}},repeat:{keyCode:["shiftKey+76"],keyName:["L",""],description:n(51).t("Repeat playing track"),fn:function(){n(71).toggleState("repeating")}},prev:{keyCode:["shiftKey+37","75"],keyName:["",""],description:n(51).t("Play previous track"),fn:function(){n(71).playPrev({userInitiated:!0})}},next:{keyCode:["shiftKey+39","74"],keyName:["",""],description:n(51).t("Play next track"),fn:function(){n(71).playNext({userInitiated:!0})}},mute:{keyCode:["77"],keyName:["M"],description:n(51).t("Mute volume"),fn:function(){n(56).broadcast("mute:toggle")}},volUp:{keyCode:["shiftKey+38"],keyName:["",""],description:n(51).t("Increase volume"),allowKeyHold:!0,fn:function(){n(56).trigger("volume:change",.1)}},volDown:{keyCode:["shiftKey+40"],keyName:["",""],description:n(51).t("Decrease volume"),allowKeyHold:!0,fn:function(){n(56).trigger("volume:change",-.1)}},like:{keyCode:["76"],keyName:["L"],description:n(51).t("Like playing track"),fn:function(e){e&&n(73).like(e.id,e.resource_type)}},repost:{keyCode:["82"],keyName:["R"],description:n(51).t("Repost playing track"),fn:function(e){e&&n(73).repost(e.id,e.resource_type)}},dialog:{keyCode:["72","shiftKey+191"],keyName:["H"],description:n(51).t("Show keyboard shortcuts"),fn:function(){n(56).trigger("keyboard-shortcuts:toggle")}},gotoNowPlaying:{keyCode:["80"],keyName:["P"],description:n(51).t("Navigate to playing track"),fn:function(){n(71).restoreState()}},gotoLikes:{chorded:!0,keyCode:["76"],keyName:["L"],description:n(51).t("Navigate to Likes"),fn:function(){n(54).get("router").navigateToRoute("youNetwork",[null,"likes"],{trigger:!0,replace:!1})}},gotoCollection:{chorded:!0,keyCode:["67"],keyName:["C"],description:n(51).t("Navigate to Collection"),fn:function(){n(54).get("router").navigateToRoute("youNetwork",[null,"collection"],{trigger:!0,replace:!1})}},gotoStream:{chorded:!0,keyCode:["83"],keyName:["S"],description:n(51).t("Navigate to Stream"),fn:function(){n(54).get("router").navigateToRoute("stream",[],{trigger:!0,replace:!1})}},gotoProfile:{chorded:!0,keyCode:["80"],keyName:["P"],description:n(51).t("Navigate to Profile"),fn:function(){n(54).get("router").navigate("/you",{trigger:!0,replace:!1})}},gotoHistory:{chorded:!0,keyCode:["72"],keyName:["H"],description:n(51).t("Navigate to History"),fn:function(){n(54).get("router").navigateToRoute("youNetwork",[null,"history"],{trigger:!0,replace:!1})}}},handleKeyDown:function(e){var n=e.keyCode,i=n===h&&!e.isDefaultPrevented()&&t(e.target).is(":tabbable");e.isInput()||i||(b.processKey(n,e)&&(e.preventDefault(),d=!0),s(e)||++c)},handleKeyUp:function(e){c=0,d&&(e.preventDefault(),d=!1)},processKey:function(e,t){if(!y&&e===v)return a(),!0;var i=r(w()[y?"chorded":"normal"][e],function(n,i){if(i){if(t&&t[i])return 1}else if(!o(t)||!/[a-z0-9%']/i.test(String.fromCharCode(e)))return 0;return!1}),s=i&&b.shortcuts[i];return!s||c&&!s.allowKeyHold||s.fn(n(71).getCurrentSound(),e,t),l(),!!i}},w=n(3).memoize(function(){var e={chorded:{},normal:{}},t=/^(?:(\w+)\+)?(\d+)$/;return n(3).each(b.shortcuts,function(n,i){var r=n.keyCode,o=n.chorded,s=e[o?"chorded":"normal"];r.forEach(function(e){var n=t.exec(e),r=n[1],o=void 0===r?"":r,a=n[2];s[a]||(s[a]={}),s[a][o]=i})}),e}),x=n(3).throttle(function(e,t){e.seekRelative(t)},200),k=null}).call(t,n(1))},function(e,t,n){"use strict";function i(e){var t=[].concat(e).map(o);return function(e){var n=this;return!this._userInput||t.some(function(t){return t.call(n,e.attributes)})}}function r(e){return this._userInput.test(e)}function o(e){return n(3).compose(r,n(304),n(3).property(e))}e.exports=new(n(21))({requirePrototype:n(124).prototype,_userInput:null,applyTo:function(e,t){e.filters||(e.filters=[]),e.filters.push(i(t.fields))},setUserInput:function(e){e&&"string"==typeof e&&(e=e.trim())?this._userInput=RegExp(n(202).regexpEscape(n(304)(e)),"i"):this._userInput=e,this.recalculateFilters()}})},function(e,t,n){"use strict";e.exports=new(n(21))({_editState:n(128).NONE,override:{isEditing:function(){return this._editState===n(128).EDITING},isSaving:function(){return this._editState===n(128).SAVING},isCanceling:function(){return this._editState===n(128).CANCELING},getEditState:function(){return this._editState}},setEditState:function(e,t){var n=this._editState;return n!==e&&(this._editState=e,this.trigger("change:editState",this,e,n,t||{})),this}})},function(e,t,n){"use strict";e.exports=new(n(21))({_resetOrder:null,_originalOrder:null,requires:["getCurrentOrder","reorder","resetOrder","saveOrder"],around:{saveOrder:function(e,t){var i=n(55).defer().always(this.setEditState.bind(this,n(128).NONE));return this.setEditState(n(128).SAVING),n(55).all([e(t)]).done(i.resolve).fail(i.reject),this._originalOrder=null,i},resetOrder:function(e,t){var i=n(55).defer().always(this.setEditState.bind(this,n(128).NONE));return this.setEditState(n(128).CANCELING),n(3).isEqual(this.getOriginalOrder(),this.getCurrentOrder())?i.resolve():(this instanceof n(72)&&(this.next_href=null),n(55).all([e(t)]).done(i.resolve).fail(i.reject)),i}},saveResetOrder:function(){this._resetOrder=this.getCurrentOrder(),this._originalOrder=this._originalOrder||this._resetOrder},getResetOrder:function(){return this._resetOrder||[]},getOriginalOrder:function(){return this._originalOrder}})},,,,,,,function(e,t){"use strict";e.exports={IN_USE:"in_use",RESERVED:"reserved",AVAILABLE:"available"}},function(e,t){"use strict";e.exports={EMAIL:"email",PERMALINK:"permalink"}},function(e,t,n){"use strict";function i(e,t){t[e]("data",r,this)}function r(){n(3).assign(this,this._statuses.reduce(s,{latest:0,totalSize:0})),this._statuses.length&&this.latest===this.totalSize&&o.call(this),this.trigger("data")}function o(){this._statuses.forEach(i.bind(this,"off")),this._statuses.length=0,r.call(this)}function s(e,t){return e.latest+=t.latest,e.totalSize+=t.totalSize,e}e.exports=n(529).extend({_statuses:null,initialize:function(){this._statuses=[]},add:n(3).noop,addTransfer:function(e){this._statuses.push(e),i.call(this,"on",e),r.call(this)},removeTransfer:function(e){var t=this._statuses.indexOf(e);t>-1&&(this._statuses.splice(t,1),i.call(this,"off",e),r.call(this))}})},,,function(e,t,n){(function(t){"use strict";function i(e){return n(284).centered(e,450,500,"createNewConnection")}var r,o;o={facebook_profile:"connection-facebook.html",twitter:"connection-facebook.html",facebook_page:"connection-facebook.html",tumblr:"connection-facebook.html"};var s=e.exports=n(65).extend({baseUrl:function(){return this.getEndpointUrl("myConnection",{id:this.id})}},{create:function(e){var s,a,l=o[e];if(r){if(s=r.popup,r.type===e)return s&&!s.closed&&s.focus&&s.focus(),r.deferred;r.deferred.reject()}return r||(r={deferred:n(55).defer().always(function(){var e=r.popup;e&&!e.closed&&e.close(),window.clearInterval(r.intervalId),r=null}),popup:null,intervalId:null}),a=r.deferred,l=window.location.protocol+"//"+window.location.host+"/"+l,n(63).login().fail(a.reject).done(function(){t.ajax({type:"POST",url:"me/connections",data:{service:e,redirect_uri:l},dataType:"json",contentType:"application/json"}).fail(a.reject).done(function(e){var t=r.popup=i(e.authorize_url);r.intervalId=window.setInterval(function(){(!t||t.closed)&&a.reject()},2e3)})}),a},callback:function(e){var t,i=n(62).parseQueryString(e.location.search);"1"===i.success?(t=new s({id:parseInt(i.id,10)}),t.fetch().fail(r.deferred.reject).done(function(){n(56).trigger("connect:newConnection",t),r.deferred.resolve(t)})):(n(56).trigger("connect:connectionError",i.errorMessage),r.deferred.reject())}})}).call(t,n(1))},function(e,t,n){"use strict";e.exports=n(226).extend({readEndpoint:"myFollowingsIds",createEndpoint:"myFollowingsCreate",deleteEndpoint:"myFollowingsDelete"})},function(e,t,n){"use strict";e.exports=n(65).extend({resource_type:"historicalPlayContext",submodelMap:{playlist:n(85),station:n(125),user:n(60)},getContextId:function(){var e=this.get("context_urn"),t=n(100).toComponents(e),i=t.id;switch(this.get("kind")){case"station":return e;case"user":case"playlist":return i}}},{hashFn:function(e){var t=e.id,n=e.resource_id,i=e.context_urn;return t||n||i}})},function(e,t,n){"use strict";e.exports=n(65).extend({resource_type:"like",submodelMap:{track:n(64),playlist:n(85)},url:null,setup:function(e){},getAudible:function(){var e;return(e=this.get("track"))?n(64).instances.get(e.id):(e=this.get("playlist"))?n(85).instances.get(e.id):void 0},isPlaylist:function(){return!this.get("track")},isSound:function(){return!!this.get("track")}},{hashFn:function(e){return e.id||[e.user_id,e.track?"s":"p",(e.track||e.playlist).id].join("_")},getLikeModelData:function(e,t,n){var i={user_id:e,created_at:(new Date).toISOString(),kind:"like"};return"sound"===t?(i.track={id:n},i.playlist=null):(i.playlist={id:n},i.track=null),i}})},,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/close-modal-dark-6aac3b.svg"},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-fluid-fixed">\n  <div class="sc-border-light-right l-main">\n    <div class="l-tabs">\n\n    </div>\n    <div class="l-content">\n\n    </div>\n  </div>\n  <div class="l-sidebar-right">\n\n  </div>\n</div>\n'},useData:!0})},,function(e,t,n){var i=n(1767);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},,,function(e,t,n){var i=n(136);e.exports=function(e,t){return i.render(e,t&&t.hash)}},,,function(e,t,n){function i(e){try{return decodeURIComponent(e)}catch(t){return e}}function r(e){return e.split("/").map(o).join("/")}function o(e){return encodeURI(e).replace(/#/g,"%23").replace(/\?/g,"%3F")}var s,a=n(3),l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:\/@]*)(?::([^:\/@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,u=["---","scheme","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],c=e.exports={parse:function(e,t){var n,i,r=l.exec(e),o={};for(t||(t=u),n=1;n<u.length;++n)if(i=u[n],-1!==t.indexOf(i)&&(r[n]||"query"===i))switch(i){case"port":o[i]=parseInt(r[n],10);break;case"path":o[i]=r[n].split("/").map(decodeURIComponent).join("/");break;case"query":o[i]=c.parseQueryString(r[n]);break;default:o[i]=r[n]}return o},joinPath:function(e){return e.filter(Boolean).join("/")},parseQueryString:function(e){var t={};return e&&e.replace(/([^?=&]+)(?:=([^&]*))?/g,function(e,n,r){switch(n=i(n),r=i((r||"").replace(/\+/g," ")),typeof t[n]){case"object":t[n].push(r);break;case"undefined":t[n]=r;break;default:t[n]=[t[n],r]}}),t},param:function(e,t){t=t||{};var n=[],i=function(e,t){n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)},r=function(e,n){a.isArray(n)?n.forEach(function(n,i){r(e+"["+("object"==typeof n&&t.jquerySerialize?i:"")+"]",n)}):a.isObject(n)?a.each(n,function(t,n){r(e+"["+n+"]",t)}):i(e,n)};return a.each(e,function(e,t){r(t,e)}),n.join("&").replace(/%20/g,"+")},stringify:function(e,t){var n,i,o=[];return t&&(i=c.parse(t),e.query&&i.query&&(a.assign(i.query,e.query),delete e.query),e=a.assign({},i,e)),e.scheme&&o.push(e.scheme+"://"),e.user&&(o.push(e.user),e.password&&o.push(":"+e.password),o.push("@")),e.host&&o.push(e.host),e.port&&o.push(":"+e.port),e.path&&("string"==typeof e.path?o.push(r(e.path)):o.push(r(c.joinPath(e.path)))),
n=s(e.query),n&&o.push("?"+n),e.fragment&&o.push("#"+e.fragment),o.join("")},modify:function(e,t){var n=c.parse(e);return a.isFunction(t)?n=t.call(null,n):"object"==typeof t&&(t.query&&(a.assign(n.query,t.query),delete t.query),a.assign(n,t)),c.stringify(n)},normalize:function(e){var t=a.defaults(c.parse(e),{scheme:"http"});return c.stringify(t)}};s=function(e){var t,n,i,r,o,s=[];if(e)for(t in e)if(e.hasOwnProperty(t)&&(r=e[t],null!==r&&r!==o))if("object"==typeof r)for(i=r.length,n=0;i>n;++n)s.push(encodeURIComponent(t)+"="+encodeURIComponent(r[n]).replace(/%2F/g,"/"));else s.push(encodeURIComponent(t)+"="+encodeURIComponent(r).replace(/%2F/g,"/"));return s.join("&")}},function(e,t){e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),i=e[t[0]];return function(e,t,r){i.apply(this,[e,t,r].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){var i,r=n(1),o=n(12),s=n(14),a=n(38),l=n(43),u=n(39),c=n(16),d=n(42),h=n(117),p=n(118);e.exports=i=function(e){e=e||{},this._players={},this._volume=1,this._mute=!1,this.States=a,this.Errors=l,this._settings=o({},e,i.defaults)},i.MimeTypes=p,i.Protocols=h,i.Events=u,i.States=a,i.Errors=l,i.BrowserUtils=c,i.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:50,bufferTime:8e3,maxBufferTime:9e4,bufferingDelay:500,streamUrlProvider:null,debug:!1},i.capabilities=d.names,i.createDefaultMediaDescriptor=function(e,t,n){if(!e||!t||!t.length)throw new Error("invalid input to create media descriptor");return n||(n=0),{id:e,src:t,duration:n,forceSingle:!1,forceFlash:!1,forceHTML5:!1,forceCustomHLS:!1,mimeType:void 0}},i.prototype.getAudioPlayer=function(e){return this._players[e]},i.prototype.hasAudioPlayer=function(e){return void 0!==this._players[e]},i.prototype.removeAudioPlayer=function(e){this.hasAudioPlayer(e)&&delete this._players[e]},i.prototype.setVolume=function(e){e=Math.min(1,e),this._volume=Math.max(0,e);for(var t in this._players)this._players.hasOwnProperty(t)&&this._players[t].setVolume(this._volume)},i.prototype.getVolume=function(){return this._volume},i.prototype.setMute=function(e){this._muted=e;for(var t in this._players)this._players.hasOwnProperty(t)&&this._players[t].setMute(this._muted)},i.prototype.getMute=function(){return this._muted},i.prototype.createAudioPlayer=function(e,t){var n,i=r({},this._settings,t);if(!e)throw"AudioManager: No media descriptor object passed, can`t build any player";if(e.id||(e.id=Math.floor(1e10*Math.random()).toString()+(new Date).getTime().toString()),!e.src)throw new Error("AudioManager: You need to pass a valid media source URL");if(!this._players[e.id]){if(n=s.createAudioPlayer(e,i),!n)throw new Error("AudioManager: No player could be created from the given descriptor");this._players[e.id]=n}return this._players[e.id].setVolume(this._volume),this._players[e.id].setMute(this._muted),this._players[e.id].on(u.STATE_CHANGE,this._onStateChange,this),this._players[e.id]},i.prototype._onStateChange=function(e,t){t.getState()===a.DEAD&&this.removeAudioPlayer(t.getId())}},function(e,t,n){function i(e,t,n){for(var i=-1,r=s(t),o=r.length;++i<o;){var a=r[i],l=e[a],u=n(l,t[a],a,e,t);(u===u?u===l:l!==l)&&(void 0!==l||a in e)||(e[a]=u)}return e}var r=n(2),o=n(8),s=n(4),a=o(function(e,t,n){return n?i(e,t,n):r(e,t)});e.exports=a},[119,3,4],function(e,t){function n(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}e.exports=n},[120,5,6,7],function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function r(e){return o(e)&&h.call(e)==a}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:r(e)?p.test(c.call(e)):n(e)&&l.test(e)}var a="[object Function]",l=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,h=u.toString,p=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&o(d(e))}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&c>=e}function s(e){return n(e)&&r(e)&&l.call(e,"callee")&&!u.call(e,"callee")}var a=Object.prototype,l=a.hasOwnProperty,u=a.propertyIsEnumerable,c=9007199254740991,d=i("length");e.exports=s},function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&_>=e}function o(e){return s(e)&&f.call(e)==u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:o(e)?g.test(h.call(e)):n(e)&&c.test(e)}var l="[object Array]",u="[object Function]",c=/^\[object .+?Constructor\]$/,d=Object.prototype,h=Function.prototype.toString,p=d.hasOwnProperty,f=d.toString,g=RegExp("^"+h.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=i(Array,"isArray"),_=9007199254740991,v=m||function(e){return n(e)&&r(e.length)&&f.call(e)==l};e.exports=v},function(e,t,n){function i(e){return s(function(t,n){var i=-1,s=null==t?0:n.length,a=s>2?n[s-2]:void 0,l=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=r(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),l&&o(n[0],n[1],l)&&(a=3>s?void 0:a,s=1);++i<s;){var c=n[i];c&&e(t,c,a)}return t})}var r=n(9),o=n(10),s=n(11);e.exports=i},function(e,t){function n(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,s){return e.call(t,n,i,r,o,s)}}return function(){return e.apply(t,arguments)}}function i(e){return e}e.exports=n},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function i(e){return null!=e&&s(c(e))}function r(e,t){return e="number"==typeof e||l.test(e)?+e:-1,t=null==t?u:t,e>-1&&e%1==0&&t>e}function o(e,t,n){if(!a(n))return!1;var o=typeof t;if("number"==o?i(n)&&r(t,n.length):"string"==o&&t in n){var s=n[t];return e===e?e===s:s!==s}return!1}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=/^\d+$/,u=9007199254740991,c=n("length");e.exports=o},function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=r(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(i=-1;++i<t;)a[i]=n[i];return a[t]=s,e.apply(this,a)}}var i="Expected a function",r=Math.max;e.exports=n},function(e,t,n){function i(e,t){return void 0===e?t:e}function r(e,t){return s(function(n){var i=n[0];return null==i?i:(n.push(t),e.apply(void 0,n))})}var o=n(1),s=n(13),a=r(o,i);e.exports=a},11,function(e,t,n){e.exports=n(15)},function(e,t,n){var i,r=n(16),o=n(17),s=n(45),a=n(49),l=n(46),u=n(48),c=n(50),d=n(118);e.exports=i=function(){},i.createAudioPlayer=function(e,t){var n;if(n=e.src.split(":")[0],("rtmp"===n||"rtmpt"===n||e.forceFlash)&&!e.forceHTML5)return new o(e,t);if(e.mimeType=i.getMimeType(e),e.mimeType===d.M3U8){if(r.isMSESupportMPEG()||r.isMSESupportMP4())return new c(e,t);if(r.isNativeHlsSupported()&&!e.forceCustomHLS)return r.isMobile()||e.forceSingle?new a(e,t):new s(e,t)}else{if(r.supportHTML5Audio()&&r.canPlayType(e.mimeType)||e.forceHTML5)return r.isMobile()||e.forceSingle?new u(e,t):new l(e,t);if(e.mimeType===d.MP3)return new o(e,t)}return null},i.getMimeType=function(e){if(e.mimeType)return e.mimeType;var t=e.src.split("?")[0];return t=t.substring(t.lastIndexOf(".")+1,t.length),d.getTypeByExtension(t)}},function(e,t){function n(){return!(!window.MediaSource&&!window.WebKitMediaSource)}e.exports={supportHTML5Audio:function(){var e;try{if(window.HTMLAudioElement&&"undefined"!=typeof Audio)return e=new Audio,!0}catch(t){return!1}},createAudioElement:function(){var e=document.createElement("audio");return e.setAttribute("msAudioCategory","BackgroundCapableMedia"),e.mozAudioChannelType="content",e},isMobile:function(e){var t=window.navigator.userAgent,n=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return n.some(function(e){return e=new RegExp(e,"i"),e.test(t)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(e){var t=document.createElement("audio");return t&&t.canPlayType&&t.canPlayType(e).match(/maybe|probably/i)?!0:!1},isNativeHlsSupported:function(){var e,t,n,i=navigator.userAgent,r=["iPhone","iPad","iPod"];return e=function(e){return e.test(i)},t=!e(/chrome/i)&&!e(/opera/i)&&e(/safari/i),n=r.some(function(t){return e(new RegExp(t,"i"))}),n||t},isMSESupported:n,isMSESupportMPEG:function(){return n()&&MediaSource.isTypeSupported("audio/mpeg")},isMSESupportMP4:function(){return n()&&MediaSource.isTypeSupported("audio/mp4")},isOnLine:function(){return window.navigator.onLine!==!1}}},function(e,t,n){function i(e,t){a.call(this,"FlashAudioProxy",e,t),i.players[e.id]=this,this._errorMessage=null,this._errorID=null,this._volume=1,this._muted=!1,i.creatingFlashAudio||(i.flashAudio?this._createFlashAudio():i.createFlashObject(t))}var r=n(1),o=n(18),s=n(29),a=n(35),l=n(39),u=n(43),c=n(38),d=n(44);e.exports=i,r(i.prototype,a.prototype),i.players={},i.createFlashObject=function(e){i.creatingFlashAudio=!0,i.containerElement=document.createElement("div"),i.containerElement.setAttribute("id",e.flashObjectID+"-container"),i.flashElementTarget=document.createElement("div"),i.flashElementTarget.setAttribute("id",e.flashObjectID+"-target"),i.containerElement.appendChild(i.flashElementTarget),document.body.appendChild(i.containerElement);var t=function(t){if(t.success)i.flashAudio=document.getElementById(e.flashObjectID),window.setTimeout(function(){if(i.flashAudio&&!("PercentLoaded"in i.flashAudio))for(var e in i.players)i.players.hasOwnProperty(e)&&(i.players[e]._errorID=u.FLASH_PROXY_FLASH_BLOCKED,i.players[e]._errorMessage="Flash object blocked",i.players[e]._setState(c.ERROR),i.players[e]._logger.type=i.players[e].getType(),i.players[e]._logger.log(i.players[e]._errorMessage))},e.flashLoadTimeout),i.flashAudio.triggerEvent=function(e,t){i.players[e]._triggerEvent(t)},i.flashAudio.onPositionChange=function(e,t,n,r){i.players[e]._onPositionChange(t,n,r)},i.flashAudio.onDebug=function(e,t,n){i.players[e]._logger.type=t,i.players[e]._logger.log(n)},i.flashAudio.onStateChange=function(e,t){i.players[e]._setState(t),t===c.DEAD&&delete i.players[e]},i.flashAudio.onInit=function(e){i.creatingFlashAudio=!1,o(s(i.players),"_createFlashAudio")};else for(var n in i.players)i.players.hasOwnProperty(n)&&(i.players[n]._errorID=u.FLASH_PROXY_CANT_LOAD_FLASH,i.players[n]._errorMessage="Cannot create flash object",i.players[n]._setState(c.ERROR))};document.getElementById(e.flashObjectID)||d.embedSWF(e.flashAudioPath,e.flashObjectID+"-target","1","1","9.0.24","",{json:encodeURIComponent(JSON.stringify(e))},{allowscriptaccess:"always"},{id:e.flashObjectID,tabIndex:"-1"},t)},i._ready=function(){return i.flashAudio&&!i.creatingFlashAudio},i.prototype._createFlashAudio=function(){i.flashAudio.createAudio(this.getDescriptor()),this._state=i.flashAudio.getState(this.getId()),this.setVolume(this._volume),this.setMute(this._muted)},i.prototype._triggerEvent=function(e){this._logger.log("Flash element triggered event: "+e),this.trigger(e,this)},i.prototype._setState=function(e){this._state!==e&&(this._state=e,this.trigger(l.STATE_CHANGE,e,this))},i.prototype._onPositionChange=function(e,t,n){this.trigger(l.POSITION_CHANGE,e,t,n,this)},i.prototype.getType=function(){return i._ready()?i.flashAudio.getType(this.getId()):this._type},i.prototype.getContainerElement=function(){return i.containerElement},i.prototype.play=function(e){if(i._ready()){if(this.getState()===c.PAUSED)return void this.resume();e=void 0===e?0:e,i.flashAudio.playAudio(this.getId(),e)}},i.prototype.pause=function(){i._ready()&&i.flashAudio.pauseAudio(this.getId())},i.prototype.seek=function(e){i._ready()&&i.flashAudio.seekAudio(this.getId(),e)},i.prototype.resume=function(){i._ready()&&i.flashAudio.resumeAudio(this.getId())},i.prototype.setVolume=function(e){this._volume=e,i._ready()&&i.flashAudio.setVolume(this.getId(),e)},i.prototype.getVolume=function(){return i._ready()?i.flashAudio.getVolume(this.getId()):this._volume},i.prototype.setMute=function(e){this._muted=e,i._ready()&&i.flashAudio.setMute(this.getId(),e)},i.prototype.getMute=function(){return i._ready()?i.flashAudio.getMute(this.getId()):this._muted},i.prototype.getState=function(){return this._state},i.prototype.getCurrentPosition=function(){return i._ready()?i.flashAudio.getCurrentPosition(this.getId()):0},i.prototype.getLoadedPosition=function(){return i._ready()?i.flashAudio.getLoadedPosition(this.getId()):0},i.prototype.getDuration=function(){return i._ready()?i.flashAudio.getDuration(this.getId()):0},i.prototype.kill=function(){return i._ready()?void i.flashAudio.killAudio(this.getId()):0},i.prototype.getErrorMessage=function(){return this._errorMessage?this._errorMessage:i.flashAudio.getErrorMessage(this.getId())},i.prototype.getErrorID=function(){return this._errorID?this._errorID:i.flashAudio.getErrorID(this.getId())},i.prototype.getLevelNum=function(){return i._ready()?i.flashAudio.getLevelNum(this.getId()):0},i.prototype.getLevel=function(){return i._ready()?i.flashAudio.getLevel(this.getId()):0},i.prototype.setLevel=function(e){return i._ready()?i.flashAudio.setLevel(this.getId(),e):0}},function(e,t,n){function i(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&s(m(e))}function o(e,t){var n=typeof e;if("string"==n&&f.test(e)||"number"==n)return!0;if(d(e))return!1;var i=!p.test(e);return i||null!=t&&e in a(t)}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&g>=e}function a(e){return l(e)?e:Object(e)}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var u=n(19),c=n(24),d=n(23),h=n(28),p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,f=/^\w*$/,g=9007199254740991,m=i("length"),_=h(function(e,t,n){var i=-1,s="function"==typeof t,a=o(t),l=r(e)?Array(e.length):[];return u(e,function(e){var r=s?t:a&&null!=e?e[t]:void 0;l[++i]=r?r.apply(e,n):c(e,t,n)}),l});e.exports=_},[121,20],[120,21,22,23],5,6,7,function(e,t,n){function i(e,t,n){null==e||r(t,e)||(t=c(t),e=1==t.length?e:l(e,u(t,0,-1)),t=s(t));var i=null==e?e:e[t];return null==i?void 0:i.apply(e,n)}function r(e,t){var n=typeof e;if("string"==n&&p.test(e)||"number"==n)return!0;if(d(e))return!1;var i=!h.test(e);return i||null!=t&&e in o(t)}function o(e){return a(e)?e:Object(e)}function s(e){var t=e?e.length:0;return t?e[t-1]:void 0}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=n(25),u=n(26),c=n(27),d=n(23),h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,p=/^\w*$/;e.exports=i},function(e,t){function n(e,t,n){if(null!=e){void 0!==n&&n in i(e)&&(t=[n]);for(var r=0,o=t.length;null!=e&&o>r;)e=e[t[r++]];return r&&r==o?e:void 0}}function i(e){return r(e)?e:Object(e)}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}e.exports=n},function(e,t,n){function i(e){return null==e?"":e+""}function r(e){if(o(e))return e;var t=[];return i(e).replace(s,function(e,n,i,r){t.push(i?r.replace(a,"$1"):n||e)}),t}var o=n(23),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;e.exports=r},11,function(e,t,n){function i(e){return r(e,o(e))}var r=n(30),o=n(31);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e[t[n]];return r}e.exports=n},[120,32,33,34],5,6,7,function(e,t,n){function i(e,t,n,i){this._type=e,this._id=t.id,this._descriptor=t,this._settings=n,this._currentPosition=this._loadedPosition=this._duration=0,this._capabilities=r({},u.createDefaults(),i),this._logger=new l(this.getType(),this.getId(),t.title,n),this._isWaitingForPlayheadToMove=!1;try{u.validate(this.getCapabilities())}catch(o){return this.getLogger().log("Bad caps: "+o),void this.updateState(s.ERROR)}this.updateState(s.INITIALIZE)}var r=n(1),o=n(36),s=n(38),a=n(39),l=n(40),u=n(42);e.exports=i,r(i.prototype,o),i.prototype.canPlay=function(){return!1},i.prototype.getCapabilities=function(){return this._capabilities},i.prototype.getLogger=function(){return this._logger},i.prototype.getSettings=function(){return this._settings},i.prototype.getDescriptor=function(){return this._descriptor},i.prototype.getType=function(){return this._type},i.prototype.getId=function(){return this._id+""},i.prototype.beforeStateChange=function(e,t){return!0},i.prototype.notifyStateChange=function(e,t){return!0},i.prototype.afterStateChange=function(e,t){},i.prototype.updateState=function(e){var t=this._state;t!==e&&t!==s.DEAD&&this.beforeStateChange(t,e)&&(this._state=e,this._logger.log('state changed "'+this.getState()+'", position: '+this.getCurrentPosition()+", duration: "+this.getDuration()),this.notifyStateChange(t,e)&&this.trigger(a.STATE_CHANGE,e,this),this.afterStateChange(t,e))},i.prototype.getState=function(){return this._state},i.prototype._isInOneOfStates=function(){for(var e in arguments)if(arguments[e]===this.getState())return!0;return!1},i.prototype.getCurrentPosition=function(){return this._currentPosition},i.prototype.getLoadedPosition=function(){return this._loadedPosition},i.prototype.getDuration=function(){return this._duration},i.prototype._mediaHasProgressed=function(){var e=!1,t=Date.now();if(this._lastMediaClockCheck){var n=t-this._lastMediaClockCheck,i=this._currentPosition-this._lastMediaClockValue;if(.1*n>i){if(this.getState()===s.PLAYING&&0===i&&n<this._settings.bufferingDelay)return this._isWaitingForPlayheadToMove=!0,!0;this.getState()===s.PLAYING&&i>0&&n<this._settings.bufferingDelay&&this._isWaitingForPlayheadToMove?(this._isWaitingForPlayheadToMove=!1,e=!1):e=!0}}return this._lastMediaClockValue=this._currentPosition,this._lastMediaClockCheck=t,!e}},function(e,t,n){e.exports=n(37)},function(e,t,n){!function(){function n(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++a+"";return e?e+t:t},has:function(e,t){return o.call(e,t)},each:function(e,t,n){if(null!=e)if(r&&e.forEach===r)e.forEach(t,n);else if(e.length===+e.length)for(var i=0,o=e.length;o>i;i++)t.call(n,e[i],i,e);else for(var s in e)this.has(e,s)&&t.call(n,e[s],s,e)},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}}var i,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,l=n();i={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var i=this,r=l.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var i,r,o,s,a,u,d,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:l.keys(this._events),a=0,u=s.length;u>a;a++)if(e=s[a],o=this._events[e]){if(this._events[e]=i=[],t||n)for(d=0,h=o.length;h>d;d++)r=o[d],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var o in i)i[o].off(t,n,this),r&&delete this._listeners[o];return this}};var u=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};l.each(h,function(e,t){i[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=l.uniqueId("l"));return r[o]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return l.each(t,function(t){e[t]=this[t]},this),e},"undefined"!=typeof e&&e.exports&&(t=e.exports=i),t.BackboneEvents=i}(this)},function(e,t){e.exports={PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}},function(e,t){e.exports={POSITION_CHANGE:"position-change",STATE_CHANGE:"state-change",DATA:"data",NETWORK_TIMEOUT:"network-timeout",METADATA:"metadata"}},function(e,t,n){var i,r=n(41),o=null;e.exports=function(e,t,n,s){if(!i&&(i=r({enabled:!!s.debug,buffer:!0,label:"audiomanager"}),o)){var a=i;i=function(){a(o(arguments[0]+"%s",Array.prototype.slice.call(arguments,1)))}}return n=n&&n.length?" ["+n.replace(/\s/g,"").substr(0,6)+"]":"",{log:i.bind(null,"%s (%s)%s",e,t,n)}}},function(e,t){"use strict";function n(){function e(e,n){if(p){for(var i=arguments.length,r=Array(i>2?i-2:0),o=2;i>o;o++)r[o-2]=arguments[o];"string"==typeof n?n=" "+n:(r.unshift(n),n="");var s=[t()+" | "+E+(k?"%c":"")+n].concat(A,r);m?T.push({level:e,logArgs:s})>x&&T.shift():h[e].apply(h,s)}}function t(){var e=new Date,t=null===S?0:e-S,n=k?"%c":"";return S=+e,n+i(e)+(n+" ("+n)+r("+"+t+"ms"," ",8)+(n+")")}function n(e){return e.enable=function(){p=!0},e.disable=function(){p=!1},e.bufferOn=function(){m=!0},e.bufferOff=function(){m=!1,T.length=0},e.flush=u()?function(){T.forEach(function(e){var t=e.level,n=e.logArgs;h[t].apply(h,n)}),T.length=0}:function(){},e}var o=c.apply(void 0,arguments),s=o.enabled,p=void 0===s?!0:s,g=o.buffer,m=void 0===g?!1:g,_=o.label,v=void 0===_?"":_,y=o.plainOutput,b=void 0===y?!1:y,w=o.bufferSize,x=void 0===w?1e3:w;if(!u())return n(d.reduce(function(e,t){return e[t]=e},function(){}));h.CL||(h.CL={_cssCounter:0});var k=!b&&l(),S=null,T=[],E=a(v,k),A=k?["color: green","color: grey","color: blue","color: grey",f(v),""]:[],C=h.CL[v]=n(d.reduce(function(t,n){return t[n]=e.bind(null,n),t},e.bind(null,"log")));return C}function i(e){return o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())+"."+r(e.getMilliseconds(),"0",3)}function r(e,t,n){return s(t,n-(""+e).length)+e}function o(e){return r(e,"0",2)}function s(e,t){return t>0?new Array(t+1).join(e):""}function a(e,t){return(t?"%c":"")+(e?e:"")}function l(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent;return/chrome|firefox|opr/i.test(e)&&!/msie|edge/i.test(e)}function u(){return h&&d.every(function(e){return"function"==typeof h[e]})}function c(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return"object"==typeof e&&e||{enabled:e,label:t}}e.exports=n;var d=["log","info","warn","error"],h="undefined"!=typeof console?console:null,p=["color:#fff","border-radius:3px","padding:2px 4px","font-family:sans-serif","text-transform:uppercase","font-size:9px"].join(";")+";",f=function(){var e=["#51613C","#447848","#486E5F","#787444","#6E664E"];return function(t){return t?"background:"+e[h.CL._cssCounter++%e.length]+";"+p:""}}()},function(e,t){function n(e){for(var t in r)if(r.hasOwnProperty(t)&&void 0===e[r[t]])throw new Error("Caps lack required field: "+t);if(!(e[r.PROTOCOLS]instanceof Array))throw new Error("Caps protocols must be an array");if(!(e[r.MIMETYPES]instanceof Array))throw new Error("Caps mimetypes must be an array");return!0}function i(){var e={};return e[r.MIMETYPES]=[],e[r.PROTOCOLS]=[],e[r.AUDIO_ONLY]=!0,e[r.CAN_SEEK_ALWAYS]=!0,e[r.NEEDS_URL_REFRESH]=!0,e}var r={MIMETYPES:"mimetypes",PROTOCOLS:"protocols",AUDIO_ONLY:"audioOnly",CAN_SEEK_ALWAYS:"canSeekAlways",NEEDS_URL_REFRESH:"needsUrlRefresh"},o={createDefaults:i,names:r,validate:n};e.exports=o},function(e,t){e.exports={FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",GENERIC_AUDIO_ENDED_EARLY:"GENERIC_AUDIO_ENDED_EARLY",GENERIC_AUDIO_OVERRUN:"GENERIC_AUDIO_OVERRUN",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",MSE_BAD_OBJECT_STATE:"MSE_BAD_OBJECT_STATE",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}},function(e,t){function n(){if(!Y&&document.getElementsByTagName("body")[0]){try{var e,t=y("span");t.style.display="none",e=z.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(n){return}Y=!0;for(var i=V.length,r=0;i>r;r++)V[r]()}}function i(e){Y?e():V[V.length]=e}function r(e){if(typeof U.addEventListener!=R)U.addEventListener("load",e,!1);else if(typeof z.addEventListener!=R)z.addEventListener("load",e,!1);else if(typeof U.attachEvent!=R)w(U,"onload",e);else if("function"==typeof U.onload){var t=U.onload;U.onload=function(){t(),e()}}else U.onload=e}function o(){var e=z.getElementsByTagName("body")[0],t=y(L);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",N);var n=e.appendChild(t);if(n){var i=0;!function r(){if(typeof n.GetVariable!=R)try{var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),J.pv=[b(o[0]),b(o[1]),b(o[2])])}catch(a){J.pv=[8,0,0]}else if(10>i)return i++,void window.setTimeout(r,10);e.removeChild(t),n=null,s()}()}else s()}function s(){var e=q.length;if(e>0)for(var t=0;e>t;t++){var n=q[t].id,i=q[t].callbackFn,r={success:!1,id:n};if(J.pv[0]>0){var o=v(n);if(o)if(!x(q[t].swfVersion)||J.wk&&J.wk<312)if(q[t].expressInstall&&l()){var s={};s.data=q[t].expressInstall,s.width=o.getAttribute("width")||"0",s.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(s.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(s.align=o.getAttribute("align"));for(var d={},h=o.getElementsByTagName("param"),p=h.length,f=0;p>f;f++)"movie"!==h[f].getAttribute("name").toLowerCase()&&(d[h[f].getAttribute("name")]=h[f].getAttribute("value"));u(s,d,n,i)}else c(o),i&&i(r);else S(n,!0),i&&(r.success=!0,r.ref=a(n),r.id=n,i(r))}else if(S(n,!0),i){var g=a(n);g&&typeof g.SetVariable!=R&&(r.success=!0,r.ref=g,r.id=g.id),i(r)}}}function a(e){var t=null,n=v(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==R?n:n.getElementsByTagName(L)[0]||n),t}function l(){return!K&&x("6.0.65")&&(J.win||J.mac)&&!(J.wk&&J.wk<312)}function u(e,t,n,i){var r=v(n);if(n=_(n),K=!0,I=i||null,D={success:!1,id:n},r){"OBJECT"===r.nodeName.toUpperCase()?(A=d(r),C=null):(A=r,C=n),e.id=B,(typeof e.width==R||!/%$/.test(e.width)&&b(e.width)<310)&&(e.width="310"),(typeof e.height==R||!/%$/.test(e.height)&&b(e.height)<137)&&(e.height="137");var o=J.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(U.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(z.title.slice(0,47)+" - Flash Player Installation");if(typeof t.flashvars!=R?t.flashvars+="&"+s:t.flashvars=s,J.ie&&4!==r.readyState){var a=y("div");n+="SWFObjectNew",a.setAttribute("id",n),r.parentNode.insertBefore(a,r),r.style.display="none",g(r)}p(e,t,n)}}function c(e){if(J.ie&&4!==e.readyState){e.style.display="none";var t=y("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),g(e)}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=y("div");if(J.win&&J.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(L)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;r>o;o++)1===i[o].nodeType&&"PARAM"===i[o].nodeName||8===i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function h(e,t){var n=y("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function p(e,t,n){var i,r=v(n);if(n=_(n),J.wk&&J.wk<312)return i;if(r){var o,s,a,l=y(J.ie?"div":L);typeof e.id==R&&(e.id=n);for(a in t)t.hasOwnProperty(a)&&"movie"!==a.toLowerCase()&&f(l,a,t[a]);J.ie&&(l=h(e.data,l.innerHTML));for(o in e)e.hasOwnProperty(o)&&(s=o.toLowerCase(),"styleclass"===s?l.setAttribute("class",e[o]):"classid"!==s&&"data"!==s&&l.setAttribute(o,e[o]));J.ie?W[W.length]=e.id:(l.setAttribute("type",N),l.setAttribute("data",e.data)),r.parentNode.replaceChild(l,r),i=l}return i}function f(e,t,n){var i=y("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function g(e){var t=v(e);t&&"OBJECT"===t.nodeName.toUpperCase()&&(J.ie?(t.style.display="none",function n(){if(4===t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}else window.setTimeout(n,10)}()):t.parentNode.removeChild(t))}function m(e){return e&&e.nodeType&&1===e.nodeType}function _(e){return m(e)?e.id:e}function v(e){if(m(e))return e;var t=null;try{t=z.getElementById(e)}catch(n){}return t}function y(e){return z.createElement(e)}function b(e){return parseInt(e,10)}function w(e,t,n){e.attachEvent(t,n),G[G.length]=[e,t,n]}function x(e){e+="";var t=J.pv,n=e.split(".");return n[0]=b(n[0]),n[1]=b(n[1])||0,n[2]=b(n[2])||0,t[0]>n[0]||t[0]===n[0]&&t[1]>n[1]||t[0]===n[0]&&t[1]===n[1]&&t[2]>=n[2]?!0:!1}function k(e,t,n,i){var r=z.getElementsByTagName("head")[0];if(r){var o="string"==typeof n?n:"screen";if(i&&(P=null,M=null),!P||M!==o){var s=y("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),P=r.appendChild(s),J.ie&&typeof z.styleSheets!=R&&z.styleSheets.length>0&&(P=z.styleSheets[z.styleSheets.length-1]),M=o}P&&(typeof P.addRule!=R?P.addRule(e,t):typeof z.createTextNode!=R&&P.appendChild(z.createTextNode(e+" {"+t+"}")))}}function S(e,t){if(Q){var n=t?"visible":"hidden",i=v(e);Y&&i?i.style.visibility=n:"string"==typeof e&&k("#"+e,"visibility:"+n);
}}function T(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=R?encodeURIComponent(e):e}/*!    SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject>
		    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
		*/
var E,A,C,I,D,P,M,R="undefined",L="object",F="Shockwave Flash",O="ShockwaveFlash.ShockwaveFlash",N="application/x-shockwave-flash",B="SWFObjectExprInst",$="onreadystatechange",U=window,z=document,H=navigator,j=!1,V=[],q=[],W=[],G=[],Y=!1,K=!1,Q=!0,X=!1,J=function(){var e=typeof z.getElementById!=R&&typeof z.getElementsByTagName!=R&&typeof z.createElement!=R,t=H.userAgent.toLowerCase(),n=H.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),r=n?/mac/.test(n):/mac/.test(t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s="Microsoft Internet Explorer"===H.appName,a=[0,0,0],l=null;if(typeof H.plugins!=R&&typeof H.plugins[F]==L)l=H.plugins[F].description,l&&typeof H.mimeTypes!=R&&H.mimeTypes[N]&&H.mimeTypes[N].enabledPlugin&&(j=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=b(l.replace(/^(.*)\..*$/,"$1")),a[1]=b(l.replace(/^.*\.(.*)\s.*$/,"$1")),a[2]=/[a-zA-Z]/.test(l)?b(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof U.ActiveXObject!=R)try{var u=new ActiveXObject(O);u&&(l=u.GetVariable("$version"),l&&(s=!0,l=l.split(" ")[1].split(","),a=[b(l[0]),b(l[1]),b(l[2])]))}catch(c){}return{w3:e,pv:a,wk:o,ie:s,win:i,mac:r}}();(function(){J.w3&&((typeof z.readyState!=R&&("complete"===z.readyState||"interactive"===z.readyState)||typeof z.readyState==R&&(z.getElementsByTagName("body")[0]||z.body))&&n(),Y||(typeof z.addEventListener!=R&&z.addEventListener("DOMContentLoaded",n,!1),J.ie&&(z.attachEvent($,function e(){"complete"===z.readyState&&(z.detachEvent($,e),n())}),U===top&&!function t(){if(!Y){try{z.documentElement.doScroll("left")}catch(e){return void window.setTimeout(t,0)}n()}}()),J.wk&&!function i(){return Y?void 0:/loaded|complete/.test(z.readyState)?void n():void window.setTimeout(i,0)}()))})();V[0]=function(){j?o():s()};(function(){J.ie&&window.attachEvent("onunload",function(){for(var e=G.length,t=0;e>t;t++)G[t][0].detachEvent(G[t][1],G[t][2]);for(var n=W.length,i=0;n>i;i++)g(W[i]);for(var r in J)J[r]=null;J=null;for(var o in E)E[o]=null;E=null})})();e.exports=E={registerObject:function(e,t,n,i){if(J.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,q[q.length]=r,S(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return J.w3?a(e):void 0},embedSWF:function(e,t,n,r,o,s,a,c,d,h){var f=_(t),g={success:!1,id:f};J.w3&&!(J.wk&&J.wk<312)&&e&&t&&n&&r&&o?(S(f,!1),i(function(){n+="",r+="";var i={};if(d&&typeof d===L)for(var m in d)i[m]=d[m];i.data=e,i.width=n,i.height=r;var _={};if(c&&typeof c===L)for(var v in c)_[v]=c[v];if(a&&typeof a===L)for(var y in a)if(a.hasOwnProperty(y)){var b=X?encodeURIComponent(y):y,w=X?encodeURIComponent(a[y]):a[y];typeof _.flashvars!=R?_.flashvars+="&"+b+"="+w:_.flashvars=b+"="+w}if(x(o)){var k=p(i,_,t);i.id===f&&S(f,!0),g.success=!0,g.ref=k,g.id=k.id}else{if(s&&l())return i.data=s,void u(i,_,t,h);S(f,!0)}h&&h(g)})):h&&h(g)},switchOffAutoHideShow:function(){Q=!1},enableUriEncoding:function(e){X=typeof e===R?!0:e},ua:J,getFlashPlayerVersion:function(){return{major:J.pv[0],minor:J.pv[1],release:J.pv[2]}},hasFlashPlayerVersion:x,createSWF:function(e,t,n){return J.w3?p(e,t,n):void 0},showExpressInstall:function(e,t,n,i){J.w3&&l()&&u(e,t,n,i)},removeSWF:function(e){J.w3&&g(e)},createCSS:function(e,t,n,i){J.w3&&k(e,t,n,i)},addDomLoadEvent:i,addLoadEvent:r,getQueryParamValue:function(e){var t=z.location.search||z.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return T(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))===e)return T(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(K){var e=v(B);e&&A&&(e.parentNode.replaceChild(A,e),C&&(S(C,!0),J.ie&&(A.style.display="block")),I&&I(D)),K=!1}},version:"2.3"}},function(e,t,n){function i(e,t,n,i){if(n!==s&&n!==o&&void 0!==n)throw new Error("Can not use the provided base class");this._baseclass=n||o,this._baseclass.call(this,e,t,i||"HLSAudioPlayer"),this._seekPosition=0}var r=n(1),o=n(46),s=n(48),a=n(38);e.exports=i,r(i.prototype,o.prototype),i.prototype.seek=function(e){this._baseclass.prototype.seek.apply(this,arguments),this._isInOneOfStates(a.LOADING,a.SEEKING)&&(this._seekPosition=e)},i.prototype.getCurrentPosition=function(){if(this._isInOneOfStates(a.LOADING)&&this._seekPosition>0)return this._seekPosition;if(this._isInOneOfStates(a.PLAYING,a.SEEKING)){if(this._seekPosition>=this._currentPosition)return this._seekPosition;this._seekPosition=0}return this._baseclass.prototype.getCurrentPosition.apply(this,arguments)}},function(e,t,n){function i(e,t,n){this._duration=0,this._currentPosition=0,this._loadedPosition=0,u.prototype.constructor.call(this,n||"HTML5AudioPlayer",e,t),this._isLoaded=!1,this._prevCurrentPosition=0,this._prevCheckTime=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,this.getDescriptor().duration&&(this._duration=this.getDescriptor().duration),this._bindHandlers(),this._initMediaElement(),this.updateState(s.IDLE)}var r=n(1),o=n(47).bindAll,s=n(38),a=n(39),l=n(43),u=n(35),c=n(16);e.exports=i,r(i.prototype,u.prototype),i.MediaAPIEvents=["ended","play","playing","pause","seeking","waiting","seeked","error","loadeddata","loadedmetadata"],i.prototype.play=function(e){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):(this._logger.log("play from "+e),this._startFromPosition=e||0,this._playRequested=!0,this._isInOneOfStates(s.PAUSED,s.ENDED)?void this.resume():(this.updateState(s.LOADING),this._html5Audio.readyState>0&&this._onLoadedMetadata(),this._html5Audio.readyState>1&&this._onLoaded(),void(this._isLoaded?this._playAfterLoaded():this.once(a.DATA,this._playAfterLoaded))))},i.prototype.pause=function(){this._isInOneOfStates(s.ERROR,s.DEAD)||(this._logger.log("pause"),this._playRequested=!1,this._html5Audio&&this._html5Audio.pause())},i.prototype.seek=function(e){var t,n=!1,i=e/1e3,r=this._html5Audio.seekable;if(!this._isInOneOfStates(s.ERROR,s.DEAD)){if(!this._isLoaded)return this.once(a.DATA,function(){this.seek(e)}),void this._logger.log("postponing seek for when loaded");if(c.isIE10Mobile)n=!0;else for(t=0;t<r.length;t++)if(i<=r.end(t)&&i>=r.start(t)){n=!0;break}if(!n)return void this._logger.log("can not seek");this._logger.log("seek"),this.updateState(s.SEEKING),this._html5Audio.currentTime=i,this._currentPosition=e,this._lastMediaClockCheck=null}},i.prototype.resume=function(){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("resume called but state is ERROR or DEAD"):(this._logger.log("resume"),void(this.getState()===s.PAUSED?(this.updateState(s.PLAYING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===s.ENDED&&this._html5Audio.play(0)))},i.prototype.setVolume=function(e){this._html5Audio&&(this._html5Audio.volume=e)},i.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},i.prototype.setMute=function(e){this._html5Audio&&(this._html5Audio.muted=e)},i.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},i.prototype.kill=function(){this._state!==s.DEAD&&(this._logger.log("killing ..."),this._resetPositionInterval(!1),this._playRequested=!1,this._toggleEventListeners(!1),this.pause(),delete this._html5Audio,this.updateState(s.DEAD),this._logger.log("dead"))},i.prototype.getErrorMessage=function(){return this._errorMessage},i.prototype.getErrorID=function(){return this._errorID},i.prototype._bindHandlers=function(){o(this,["_onPositionChange","_onHtml5MediaEvent","_onLoaded","_onLoadedMetadata"])},i.prototype._initMediaElement=function(){this._html5Audio=c.createAudioElement(),this._html5Audio.id=this.getSettings().audioObjectID+"_"+this.getId(),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load(),this._toggleEventListeners(!0)},i.prototype._playAfterLoaded=function(){this._playRequested&&(this._trySeekToStartPosition(),this._html5Audio.play())},i.prototype._isInOneOfStates=function(){for(var e in arguments)if(arguments[e]===this._state)return!0;return!1},i.prototype._toggleEventListeners=function(e){if(this._html5Audio){var t=e?"addEventListener":"removeEventListener";i.MediaAPIEvents.forEach(function(e){switch(e){case"loadeddata":this._html5Audio[t]("loadeddata",this._onLoaded);break;case"loadedmetadata":this._html5Audio[t]("loadedmetadata",this._onLoadedMetadata);break;default:this._html5Audio[t](e,this._onHtml5MediaEvent)}},this)}},i.prototype._trySeekToStartPosition=function(){var e;return this._startFromPosition<=0?!0:(this._logger.log("seek to start position: "+this._startFromPosition),e=this._startFromPosition/1e3,this._html5Audio.currentTime=e,this._html5Audio.currentTime===e?(this._lastMediaClockCheck=null,this._currentPosition=this._startFromPosition,this._startFromPosition=0,!0):!1)},i.prototype._onLoaded=function(){this._logger.log("HTML5 media loadeddata event"),this.trigger(a.DATA,this)},i.prototype._onLoadedMetadata=function(){this._logger.log("HTML5 media loadedmetadata event"),(void 0===this._duration||0===this._duration)&&(this._duration=1e3*this._html5Audio.duration),this._loadedPosition=this._duration,this._isLoaded=!0,this.trigger(a.METADATA,this)},i.prototype._resetPositionInterval=function(e){window.clearInterval(this._positionUpdateTimer),e&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},i.prototype._onPositionChange=function(){if(!this._isInOneOfStates(s.DEAD)){var e;if(this._currentPosition=1e3*this._html5Audio.currentTime,this.trigger(a.POSITION_CHANGE,this.getCurrentPosition(),this._loadedPosition,this._duration,this),!this._isInOneOfStates(s.PLAYING,s.LOADING))return void(this._state===s.SEEKING&&e>0&&this.updateState(s.PLAYING));if(0!==this._duration&&(this._currentPosition>this._duration||this._currentPosition>this._loadedPosition&&!c.isIE10Mobile))return void this._onHtml5MediaEvent({type:"ended"});var t=this._mediaHasProgressed();return this.getState()!==s.PLAYING||t?void(this.getState()===s.LOADING&&t&&this.updateState(s.PLAYING)):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(s.LOADING))}},i.prototype._onHtml5MediaEvent=function(e){switch(this._logger.log("HTML5 media event: "+e.type),e.type){case"playing":if(!this._trySeekToStartPosition())break;this._onPositionChange(),this._resetPositionInterval(!0),this.updateState(s.PLAYING);break;case"pause":this._onPositionChange(),this._resetPositionInterval(!1),this.updateState(s.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._resetPositionInterval(!1),this.updateState(s.ENDED);break;case"waiting":if(this.getState()===s.SEEKING)break;this.updateState(s.LOADING);break;case"seeking":this.updateState(s.SEEKING);break;case"seeked":this._startFromPosition=0,this._html5Audio.paused?this.updateState(s.PAUSED):this.updateState(s.PLAYING),this._onPositionChange(e);break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},i.prototype._html5AudioErrorCodeToErrorId=function(){return{1:l.HTML5_AUDIO_ABORTED,2:l.HTML5_AUDIO_NETWORK,3:l.HTML5_AUDIO_DECODE,4:l.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},i.prototype._error=function(e,t){var n="error: ";t&&(n="error (native): "),this._errorID=e,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(n+this._errorID+" "+this._errorMessage),this.updateState(s.ERROR),this._toggleEventListeners(!1)},i.prototype._getErrorMessage=function(e){var t={};return t[l.HTML5_AUDIO_ABORTED]="The fetching process for the media resource was aborted by the user agent at the user's request.",t[l.HTML5_AUDIO_NETWORK]="A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.",t[l.HTML5_AUDIO_DECODE]="An error of some description occurred while decoding the media resource, after the resource was established to be usable.",t[l.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource indicated by the src attribute was not suitable.",t[e]}},function(e,t){function n(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n}function i(e){for(var t=[],n=0;n<e.length;n++)t.push({start:1e3*e.start(n),end:1e3*e.end(n)});return t}e.exports={bindAll:function(e,t){t.forEach(function(t){e[t]=e[t].bind(e)})},concatBuffersToUint8Array:n,timeRangesToFlatMap:i}},function(e,t,n){function i(e,t,n){l.prototype.constructor.call(this,e,t,n||"HTML5SingleAudioPlayer")}var r,o=n(1),s=n(16),a=n(39),l=n(46),u=n(38),c={};e.exports=i,o(i.prototype,l.prototype),i._onLoaded=function(e){i._pauseOthersAndForwardEvent("_onLoaded",e)},i._onLoadedMetadata=function(e){i._pauseOthersAndForwardEvent("_onLoadedMetadata",e)},i._onHtml5MediaEvent=function(e){i._pauseOthersAndForwardEvent("_onHtml5MediaEvent",e)},i._pauseOthersAndForwardEvent=function(e,t){Object.keys(c).forEach(function(n){var i=c[n];n===r?i[e](t):i.pause()})},i.prototype._initMediaElement=function(){i._html5Audio||(i._html5Audio=s.createAudioElement(),i._html5Audio.id=this.getSettings().audioObjectID+"_Single",l.prototype._toggleEventListeners.call(i,!0)),this._toggleEventListeners(!0),this._html5Audio=i._html5Audio,this._logger.log("initialized player for use with: "+this.getDescriptor().src)},i.prototype._toggleEventListeners=function(e){e?c[this.getId()]=this:delete c[this.getId()]},i.prototype.play=function(e){this._logger.log("singleton play at: "+e),(0===this._html5Audio.readyState||this.getDescriptor().src!==this._html5Audio.src)&&(this._logger.log("setting up audio element for use with: "+this.getDescriptor().src),r=this.getId(),this._isInOneOfStates(u.PAUSED)&&(this._logger.log("state was paused"),e=this._currentPosition||0),this._toggleEventListeners(!0),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load()),l.prototype.play.call(this,e)},i.prototype.resume=function(){return this._isInOneOfStates(u.ERROR,u.DEAD)?void 0:r!==this.getId()?void this.play(this._currentPosition):void l.prototype.resume.apply(this,arguments)},i.prototype.pause=function(){this._isInOneOfStates(u.ERROR,u.DEAD)||(this._logger.log("singleton pause"),r===this.getId()?l.prototype.pause.apply(this,arguments):(this._toggleEventListeners(!1),this._isInOneOfStates(u.PAUSED)||this.updateState(u.PAUSED),this._resetPositionInterval(!1)))},i.prototype.seek=function(e){return r!==this.getId()?(this._currentPosition=e,void this.trigger(a.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)):void l.prototype.seek.apply(this,arguments)}},function(e,t,n){function i(e,t){o.call(this,e,t,s,"HLSSingleAudioPlayer")}var r=n(1),o=n(45),s=n(48);e.exports=i,r(i.prototype,s.prototype,o.prototype)},function(e,t,n){function i(e,t){return l.prototype.constructor.call(this,"HLSMSEPlayer",e,t,A()),o(this,["_onPositionChange","_onPlaylistLoaded","_onPlaylistFailed","_onSegmentLoaded","_onSegmentProgress","_onSegmentFailed","_onHtml5MediaEvent","_onLoadedData","_onLoadedMetadata","_onMediaSourceAppend","_onMediaSourceReady","_onMediaSourceDestroy","_onMediaSourceError"]),this._streamUrlProvider=this.getSettings().streamUrlProvider||null,this._maxBufferLength=parseInt(this.getSettings().maxBufferTime,10),this._streamUrlRetryTimer=null,this._streamUrlTimesFailed=0,this._playlistRetryTimer=null,this._playlistTimesFailed=0,this._playlistRefreshInProgress=!1,this._isPlaylistLoaded=!1,this._loadOnInit=!1,this._schedulingSegmentIndex=-1,this._segmentsDownloading=[],this._nextSchedulingTimeout=null,this._networkErrors=0,this._segmentErrors=0,this._mimeType=C(),this._mimeType?(this._mseToolkit=new d(this._logger,this._mimeType),this._mseToolkit.on(d.Events.SEGMENT_APPENDED,this._onMediaSourceAppend),this._mseToolkit.on(d.Events.SOURCE_READY,this._onMediaSourceReady),this._mseToolkit.on(d.Events.SOURCE_DESTROY,this._onMediaSourceDestroy),this._mseToolkit.on(d.Events.SOURCE_ERROR,this._onMediaSourceError),this._hlsToolkit=new c(this._logger,this.getDescriptor().src),this._hlsToolkit.on(c.Events.SEGMENT_LOADED,this._onSegmentLoaded),this._hlsToolkit.on(c.Events.SEGMENT_PROGRESS,this._onSegmentProgress),this._hlsToolkit.on(c.Events.SEGMENT_FAILED,this._onSegmentFailed),this._hlsToolkit.on(c.Events.PLAYLIST_LOADED,this._onPlaylistLoaded),this._hlsToolkit.on(c.Events.PLAYLIST_FAILED,this._onPlaylistFailed),this._hlsToolkit.on(c.Events.PLAYLIST_PARSE_ERROR,this._onPlaylistFailed),this._html5Audio=this._mseToolkit.media(),void this._toggleEventListeners(!0)):void this._error(a.MSE_NOT_SUPPORTED)}var r=n(1),o=n(47).bindAll,s=n(39),a=n(43),l=n(35),u=n(46),c=n(51),d=n(66),h=n(67),p=n(38),f=n(42),g=n(117),m=n(118),_=n(16),v=n(47),y=200,b=500,w=3,x=1e4,k=3,S=1500,T=3,E=function(e){var t=e/w,n=b*(Math.pow(Math.E,t)/Math.E);return n+=Math.random()*y,n>x&&(n=x),n},A=function(){var e={};return e[f.names.PROTOCOLS]=[g.HLS],e[f.names.MIMETYPES]=[m.HLS,m.M3U8,m.MP3],e[f.names.NEEDS_URL_REFRESH]=!1,e},C=function(){return _.isMSESupportMPEG()&&!_.isNativeHlsSupported()?"audio/mpeg":_.isMSESupportMP4()?"audio/mp4":null};e.exports=i,r(i.prototype,l.prototype),i.prototype._onLoadedData=function(){this._logger.log("loadeddata event handler"),this._triggerDataEvent()},i.prototype._triggerDataEvent=function(){this.trigger(s.DATA,v.timeRangesToFlatMap(this._html5Audio.buffered))},i.prototype._onLoadedMetadata=function(){this._logger.log("loadedmetadata event handler")},i.prototype._onPositionChange=function(){if(this._html5Audio&&this.getState()!==p.SEEKING){this._currentPosition=1e3*this._html5Audio.currentTime;var e=this._mediaHasProgressed();return this.getState()!==p.PLAYING||e?(this.getState()===p.LOADING&&e&&this.updateState(p.PLAYING),this._triggerPositionEvent(),this._currentPosition>=this._duration?void this.updateState(p.ENDED):void 0):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(p.LOADING))}},i.prototype._onMediaSourceReady=function(){this.getDescriptor().duration&&(this._setDuration(this.getDescriptor().duration),this._logger.log("duration set from descriptor to "+this._duration)),this.updateState(p.IDLE),this._loadOnInit&&this._loadInitialPlaylist()},i.prototype._onMediaSourceDestroy=function(){this._logger.log("MediaSource destroyed"),this.kill()},i.prototype._onMediaSourceError=function(e){this._logger.log("MediaSource API error: "+e.message),this._error(a.MSE_BAD_OBJECT_STATE),this.kill()},i.prototype._onMediaSourceAppend=function(e){this._logger.log("segment appended: "+e.index),this._triggerDataEvent(),this._loadedPosition=e.endPosition,this._playRequested&&(this._logger.log("triggering playback after appending enough segments"),this._html5Audio.currentTime=this._currentPosition/1e3,this._html5Audio.play())},i.prototype._notifyNetworkTimeout=function(){this._networkErrors++,this.trigger(s.NETWORK_TIMEOUT)},i.prototype._onSegmentProgress=function(e){var t=Math.round(e.loaded/e.total*100);this._logger.log("segment "+e.index+" loaded "+e.loaded+" of "+e.total+" bytes ("+t+"%)"),this._loadedPosition=e.endPosition-e.duration*(e.loaded/e.total)},i.prototype._onSegmentLoaded=function(e,t){return t||(this._networkErrors=0,this._segmentErrors=0),this._mseToolkit.sourceIsReady()?void this._appendSegments():void this._logger.log("we have been disposed while loading a segment, noop")},i.prototype._onSegmentFailed=function(e){switch(this._logger.log("segment loading failed handler: "+e.status),e.status){case c.Status.NOT_FOUND:case c.Status.FORBIDDEN:this._networkErrors=0,this._segmentErrors++,this._cancelNextScheduling(),this._cancelAllInFlightRequests(),this._segmentErrors<k?this._refreshPlaylist():this._error("MSE_HLS_SEGMENT_NOT_FOUND");break;case c.Status.TIMEOUT:(0===this._networkErrors||_.isOnLine())&&this._refreshPlaylist(),this._notifyNetworkTimeout();case c.Status.SERVER_ERROR:if(e.aborted){this._logger.log("aborted segment has been prevented from being retried");break}e.scheduleRetry(E(e.timesFailed),this._hlsToolkit.loadSegment,this._hlsToolkit,T);break;case c.Status.FAILED:this._logger.log("WARNING: segment loading failed for unknown reason!");break;default:throw new Error("Invalid status on failed segment: "+e.status)}},i.prototype._onPlaylistLoaded=function(){this._mseToolkit.whenStable(function(){return this._logger.log("playlist loaded handler"),this._mseToolkit.sourceIsReady()?(this._networkErrors=0,this._playlistTimesFailed=0,this._isPlaylistLoaded=!0,this._setDuration(this._hlsToolkit.getDuration()),this._playlistRefreshInProgress&&(this._playlistRefreshInProgress=!1,this._cancelAllInFlightRequests(),this._cancelNextScheduling(),this._runScheduling()),this._inspectEncryptionData(),this._logger.log("duration set from playlist info to "+this._duration),void this.trigger(s.METADATA)):void this._logger.log("we have been disposed while loading the playlist, noop")}.bind(this))},i.prototype._onPlaylistFailed=function(e){return this._logger.log("playlist loading failed handler. HTTP status code is "+e),this._mseToolkit.sourceIsReady()?(this._logger.log("Playlist loading failed  "+this._playlistTimesFailed+" times before"),this._playlistTimesFailed++,this._playlistRetryTimer=window.setTimeout(function(){this.hasStreamUrlProvider()?this._refreshPlaylist():this._hlsToolkit.updatePlaylist(!0)}.bind(this),E(this._playlistTimesFailed)),void(0===e?this._notifyNetworkTimeout():this._networkErrors=0)):void this._logger.log("we have been disposed while loading the playlist, noop")},i.prototype.afterStateChange=function(e,t){switch(t){case p.PLAYING:this._runScheduling();break;case p.PAUSED:this._cancelNextScheduling(),e===p.PLAYING&&this._cancelAllInFlightRequests()}},i.prototype._onHtml5MediaEvent=function(e){switch(this._logger.log('HTML5 media event "'+e.type+'"'),this._waitingToPause=!1,e.type){case"playing":this._playRequested=!1,this._triggerPositionEvent(),this._resetPositionTimer(!0),this.updateState(p.PLAYING);break;case"pause":this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(p.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(p.ENDED);break;case"waiting":if(this.getState()===p.SEEKING)break;this.once(s.POSITION_CHANGE,function(){this.updateState(p.LOADING)}.bind(this)),this._onPositionChange();break;case"seeking":this._triggerPositionEvent(),this.updateState(p.SEEKING);break;case"seeked":this._html5Audio.paused?this.updateState(p.PAUSED):this.updateState(p.PLAYING),this._triggerPositionEvent();break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},i.prototype._toggleEventListeners=function(e){if(this._html5Audio){var t=e?"addEventListener":"removeEventListener";u.MediaAPIEvents.forEach(function(e){switch(e){case"loadeddata":this._html5Audio[t]("loadeddata",this._onLoadedData);break;case"loadedmetadata":this._html5Audio[t]("loadedmetadata",this._onLoadedMetadata);break;case"timeupdate":default:this._html5Audio[t](e,this._onHtml5MediaEvent)}},this)}},i.prototype._loadInitialPlaylist=function(){this.updateState(p.LOADING),this._hlsToolkit.updatePlaylist(!0)},i.prototype._refreshPlaylist=function(){return this._playlistRefreshInProgress?void 0:(this._playlistRefreshInProgress=!0,this.hasStreamUrlProvider()?void this._streamUrlProvider().done(function(e){this._logger.log("got new M3u8 URL: "+e),this._streamUrlTimesFailed=0,this._hlsToolkit.setUri(e),this._hlsToolkit.updatePlaylist(!1)}.bind(this)).fail(function(){this._logger.log("failed to retrieve stream URL :("),this._streamUrlRetryTimer=window.setTimeout(function(){this._playlistRefreshInProgress=!1,this._refreshPlaylist()}.bind(this),E(++this._streamUrlTimesFailed))}.bind(this)):(this._logger.log("can't update playlist, got no stream URL provider"),void(this._playlistRefreshInProgress=!1)))},i.prototype._setDuration=function(e){this._duration=Math.floor(10*e)/10;try{this._mseToolkit.duration(this._duration)}catch(t){this._onMediaSourceError(t)}},i.prototype._resetPositionTimer=function(e){window.clearInterval(this._positionUpdateTimer),e&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},i.prototype._triggerPositionEvent=function(){this.trigger(s.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)},i.prototype._initTransmuxerOnce=function(e,t){if(!this._transmuxer){var n=this._mimeType!==e.mimeType?h.Configs.MP3_TO_FMP4:h.Configs.VOID;this._transmuxer=new h(n),this._transmuxer.on("segment",function(e){this._logger.log("transmuxed data ready, "+e.data.length+" bytes for segment "+e.index),t(e)}.bind(this))}},i.prototype._transmuxSegment=function(e,t){this._logger.log("transmuxing segment "+e.index),this._initTransmuxerOnce(e,t),this._transmuxer.process(e)},i.prototype._appendSegments=function(){var e=!0;this._segmentsDownloading.slice().forEach(function(t){t.isComplete()&&e?(this._decryptSegment(t),this._transmuxSegment(t,function(e){this._mseToolkit.append(e)}.bind(this)),this._segmentsDownloading.shift()):e=!1},this)},i.prototype._cancelNextScheduling=function(){this._logger.log("cancelling next scheduling"),window.clearTimeout(this._nextSchedulingTimeout),this._nextSchedulingTimeout=null},i.prototype._getBufferUntilTime=function(){return this._currentPosition+this._maxBufferLength},i.prototype._isTimeBuffered=function(e){if(!this._html5Audio)return!1;for(var t=this._html5Audio.buffered,n=e/1e3,i=0;i<t.length;i++)if(n>=t.start(i)&&n<=t.end(i))return!0;return!1},i.prototype._getCurrentSegment=function(){return this._schedulingSegmentIndex>0?this._hlsToolkit.getSegment(this._schedulingSegmentIndex):this._hlsToolkit.getSegmentForTime(this._currentPosition)},i.prototype._runScheduling=function(){function e(){var t=!1,n=this._getBufferUntilTime(),i=this._getCurrentSegment(),r=i?i.duration:Math.Infinity;if(this._logger.log("scheduling next requests, current buffer-until time: "+n+" ms"),!i)return void this._logger.log("no segment to schedule, closing loop");for(this._logger.log("current segment index: "+i.index);i.endPosition<=n;){if(this._logger.log("scheduling loop at "+this._currentPosition+" ms, current segment "+i.index),this._requestSegment(i),this._schedulingSegmentIndex=i.index+1,i.isLast){t=!0,this._logger.log("end of playlist reached");break}i=this._hlsToolkit.getSegment(this._schedulingSegmentIndex)}this._isInOneOfStates(p.DEAD,p.PAUSED)||t?(this._logger.log("not re-scheduling"),this._nextSchedulingTimeout=null):(this._logger.log("timing next check for more data in "+r+" ms"),this._nextSchedulingTimeout=window.setTimeout(e.bind(this),r))}this._nextSchedulingTimeout||this._playlistRefreshInProgress||e.call(this)},i.prototype._cancelAllInFlightRequests=function(){this._schedulingSegmentIndex=-1,this._hlsToolkit.cancelIncompletetSegments(),this._segmentsDownloading=[]},i.prototype._requestSegment=function(e){return this._segmentsDownloading.push(e),e.isComplete()?(this._logger.log("requested data is already loaded from segment "+e.index),void this._onSegmentLoaded(e,!0)):e.hasBeenRequested()||e.hasFailed()?void this._logger.log("segment already in flight or failed (will retry): "+e.timesFailed+" times"):void this._hlsToolkit.loadSegment(e,T)},i.prototype._decryptSegment=function(e){this._hlsToolkit.isAES128Encrypted()&&this._hlsToolkit.decryptSegmentAES128(e)},i.prototype._inspectEncryptionData=function(){this._hlsToolkit.isAES128Encrypted()&&(this._logger.log("got key of byte length "+this._hlsToolkit.getEncryptionKey().byteLength),this._hlsToolkit.getEncryptionIv()?this._logger.log("got IV of byte length "+this._hlsToolkit.getEncryptionIv().byteLength):this._logger.log("no IV found in header, will use per-segment-index IV"))},i.prototype._html5AudioErrorCodeToErrorId=function(){return{1:a.HTML5_AUDIO_ABORTED,2:a.HTML5_AUDIO_NETWORK,3:a.HTML5_AUDIO_DECODE,4:a.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},i.prototype._error=function(e,t){this._errorID=e,this._errorMessage=this._getErrorMessage(this._errorID),t&&this._html5Audio.error&&(this._errorMessage+=" (native message: "+this._html5Audio.error.message+")"),this._logger.log(this._errorID+" "+this._errorMessage),this.updateState(p.ERROR),this._toggleEventListeners(!1)},i.prototype._getErrorMessage=function(e){var t={};return t[a.MSE_NOT_SUPPORTED]="The browser does not support MediaSource API",t[a.MSE_BAD_OBJECT_STATE]="MediaSource API has thrown an exception",t[e]?"Error: "+e+" ("+t[e]+")":"Error: "+e},i.prototype.setVolume=function(e){this._html5Audio&&(this._html5Audio.volume=e)},i.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},i.prototype.setMute=function(e){this._html5Audio&&(this._html5Audio.muted=e)},i.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},i.prototype.getErrorID=function(){return this._errorID},i.prototype.play=function(e){return this._isInOneOfStates(p.ERROR,p.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):this._isInOneOfStates(p.IDLE,p.INITIALIZE)?(e=e||0,this._logger.log("play from "+e),this._playRequested=!0,this.seek(e),this.getState()===p.INITIALIZE?void(this._loadOnInit=!0):void this._loadInitialPlaylist()):(e&&(this._currentPosition=e),void this.resume())},i.prototype.pause=function(){this._html5Audio&&(this._playRequested=!1,this._html5Audio.pause())},i.prototype.seek=function(e){if(!this._isInOneOfStates(p.ERROR,p.DEAD)){if(e=parseInt(e,10),!this._isPlaylistLoaded)return void this.once(s.METADATA,function(){this.seek(e)}.bind(this));if(e>this._duration)return void this._logger.log("can not seek to position over duration");this._logger.log("seek to "+e+" ms"),this.updateState(p.SEEKING),this._lastMediaClockCheck=null,!this._isTimeBuffered(e)&&this._isTimeBuffered(e+S)&&(e+=S,this._logger.log("detected smart seeking opportunity, adjusting target to: "+e)),this._currentPosition=e;try{this._html5Audio.currentTime=e/1e3}catch(t){this._logger.log("error seeking: "+t.message)}this._cancelAllInFlightRequests(),this._cancelNextScheduling(),this._runScheduling()}},i.prototype.resume=function(){this._html5Audio&&(this._logger.log("resume from "+this._currentPosition),this._html5Audio.currentTime=this._currentPosition/1e3,this._html5Audio.play())},i.prototype.kill=function(){this.getState()!==p.DEAD&&(this._logger.log("kill"),this._resetPositionTimer(!1),this._cancelNextScheduling(),this._cancelAllInFlightRequests(),window.clearTimeout(this._playlistRetryTimer),window.clearTimeout(this._streamUrlRetryTimer),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this.updateState(p.DEAD))},i.prototype.getErrorMessage=function(){return this._errorMessage},i.prototype.hasStreamUrlProvider=function(){return!!this._streamUrlProvider}},function(e,t,n){var i,r=n(1),o=n(52),s=n(58),a=null,l=n(36),u={NEW:"new",QUEUED:"queued",REQUESTED:"requested",COMPLETE:"complete",TIMEOUT:"timeout",FORBIDDEN:"forbidden",NOT_FOUND:"not-found",SERVER_ERROR:"server-error",FAILED:"failed"},c={FIRST:"#EXTM3U",PLAYLIST:"#EXT-X-STREAM-INF:",SEGMENT:"#EXTINF:",END_TAG:"#EXT-X-ENDLIST",ENCRYPTION:"#EXT-X-KEY:"};e.exports=i=function(e,t){this._logger=e,this._duration=0,this._segments=[],this.setUri(t)},i.Events={PLAYLIST_LOADED:"playlist-loaded",PLAYLIST_PARSE_ERROR:"playlist-parse-error",PLAYLIST_FAILED:"playlist-failed",SEGMENT_LOADED:"segment-loaded",SEGMENT_PROGRESS:"segment-progress",SEGMENT_FAILED:"segment-failed",SEGMENT_CANCELED:"segment-canceled"},i.Status=u,r(i.prototype,l),i.Segment=function(e,t,n,i,o){r(this,{toolkit:e,uri:t,startPosition:n,endPosition:n+i,duration:i,index:o,data:null,status:u.NEW,isLast:!1,timesFailed:0,loaded:0,total:-1,aborted:!1,xhr:null,mimeType:"audio/mpeg"}),this._logger=e._logger},i.Segment.prototype.containsTime=function(e){
return e>=this.startPosition&&e<=this.endPosition},i.Segment.prototype.isComplete=function(){return this.status===u.COMPLETE},i.Segment.prototype.hasFailed=function(){return this.status===u.TIMEOUT||this.status===u.FORBIDDEN||this.status===u.NOT_FOUND||this.status===u.SERVER_ERROR||this.status===u.FAILED},i.Segment.prototype.isNew=function(){return this.status===u.NEW},i.Segment.prototype.hasBeenRequested=function(){return this.status===u.REQUESTED},i.Segment.prototype.scheduleRetry=function(e,t,n,i){var r=this;this._retryTimer=window.setTimeout(function(){t.call(n,r,i)},e)},i.Segment.prototype.cancel=function(){this._logger.log("segment cancelled, clearing timeout: "+this.index),window.clearTimeout(this._retryTimer),this.xhr&&(this._logger.log("will abort & reset segment: "+this.index),this.status=u.NEW,this.aborted=!0,this.data=null,this.timesFailed=0,this.xhr.abort(),this.xhr=null,this.toolkit.trigger(i.Events.SEGMENT_CANCELED,this))},i.prototype.setUri=function(e){var t=this._uri=e;t.indexOf("?")>-1&&(t=t.substr(0,t.indexOf("?"))),this._baseURI=t.substr(0,t.lastIndexOf("/")+1)},i.prototype.updatePlaylist=function(e){var t=!1,n=new XMLHttpRequest;n.open("GET",this._uri,!0),n.responseType="text",this._logger.log("downloading playlist from: "+this._uri);var r=function(e){t||(t=!0,this.trigger(i.Events.PLAYLIST_FAILED,n.status))}.bind(this);n.onload=function(t){return 200!==n.status?void r():(e&&(this._segments=[],this._duration=0),this._parsePlaylist(n.responseText,e)?(this.getLastSegment().isLast=!0,this._logger.log("playlist download complete"),void this._retrieveEncryptionKey(function(){this.trigger(i.Events.PLAYLIST_LOADED)})):(this._logger.log("error parsing playlist"),void this.trigger(i.Events.PLAYLIST_PARSE_ERROR)))}.bind(this),n.onerror=function(e){n.ontimeout=null,r(e)},n.ontimeout=function(e){n.onerror=null,r(e)},n.send()},i.prototype._parsePlaylist=function(e,t){for(var n,r,o,s=e.split("\n"),a=0,l=!1,u=0,d=0;u<s.length;)n=s[u++],0===n.indexOf(c.SEGMENT)?(o=1e3*Number(n.substr(8,n.indexOf(",")-8)),r=this._createSegmentURL(s[u]),t||!this._segments[a]?this._addSegment(new i.Segment(this,r,this._duration,o,d++)):this._segments[a].uri=r,a++,u++):0===n.indexOf(c.ENCRYPTION)?this._parsePlaylistEncryptionHeader(n):0===n.indexOf(c.END_TAG)&&(l=!0);return 0!==this.getNumSegments()&&l?!0:!1},i.prototype._addSegment=function(e){this._segments.push(e),this._duration+=e.duration},i.prototype._parsePlaylistEncryptionHeader=function(e){var t,n,i,r=e.substr(c.ENCRYPTION.length).split(",");if(s(r,function(e){e.indexOf("METHOD")>=0?n=e.split("=")[1]:e.indexOf("URI")>=0?t=e.split("=")[1]:e.indexOf("IV")>=0&&(i=e.split("=")[1])}),!(n&&t&&n.length&&t.length))throw new Error("Failed to parse M3U8 encryption header");n=n.trim(),t=t.trim().replace(/"/g,""),this._encryptionMethod=n,this._encryptionKeyUri=t,i&&i.length?(this._encryptionIvHexString=i.trim(),this._parseEncryptionIvHexString()):this._encryptionIv=null},i.prototype._parseEncryptionIvHexString=function(){var e,t=this._encryptionIvHexString.replace("0x",""),n=new Uint16Array(8),i=0;if(t.length%4!==0)throw new Error("Failed to parse M3U8 encryption IV (length is not multiple of 4)");for(;i<t.length;i+=4){if(e=parseInt(t.substr(i,4),16),isNaN(e))throw new Error("Failed to parse hex number in IV string");n[i/4]=e}this._encryptionIv=n},i.prototype._encryptionIvForSegment=function(e){var t=new DataView(new ArrayBuffer(16));return t.setUint32(0,e.index,!0),t.buffer},i.prototype._retrieveEncryptionKey=function(e){if(e){if(!this._encryptionKeyUri)return void e.call(this);var t=this._encryptionKeyUri,n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=o(function(i){200===n.status?this._encryptionKey=new Uint8Array(n.response):this._logger.log("Failed to retrieve encryption key from "+t+", returned status "+n.status),e.call(this)},this),n.send(),this._logger.log("Downloading encryption key from "+t)}},i.prototype._removeEncryptionPaddingBytes=function(e){var t=e.data[e.data.byteLength-1];t?(this._logger.log("Detected PKCS7 padding length of "+t+" bytes, slicing segment."),e.data=e.data.subarray(0,e.data.byteLength-t)):this._logger.log("No padding detected (last byte is zero)")},i.prototype.decryptSegmentAES128=function(e){if(this._logger.log("Decrypting AES-128 cyphered segment ..."),!a)throw new Error("AES decryption not built-in");var t=a.cipher.createDecipher("AES-CBC",a.util.createBuffer(this._encryptionKey)),n=0,i=e.data.byteLength,r=this._encryptionIv||this._encryptionIvForSegment(e);for(this._logger.log("Using IV ->"),t.start({iv:a.util.createBuffer(r)}),t.update(a.util.createBuffer(e.data)),t.finish(),e.data=new Uint8Array(i);i>n;n++)e.data[n]=t.output.getByte();this._removeEncryptionPaddingBytes(e)},i.prototype.isAES128Encrypted=function(){return"AES-128"===this._encryptionMethod},i.prototype.getEncryptionKeyUri=function(){return this._encryptionKeyUri},i.prototype.getEncryptionIv=function(){return this._encryptionIv},i.prototype.getEncryptionKey=function(){return this._encryptionKey},i.prototype._createSegmentURL=function(e){return"http://"===e.substr(0,7)||"https://"===e.substr(0,8)||"/"===e.substr(0,1)?e:this._baseURI+e},i.prototype._handleLoadSegmentFailure=function(e,t,n){e.aborted||(this._logger.log("segment aborted: "+e.aborted),this._logger.log("segment loading failure: HTTP response status: "+t.status),0===t.status?e.status=u.TIMEOUT:403===t.status?e.status=u.FORBIDDEN:404===t.status?e.status=u.NOT_FOUND:t.status>=500?e.status=u.SERVER_ERROR:e.status=u.FAILED,e.timesFailed++,this.trigger(i.Events.SEGMENT_FAILED,e))},i.prototype.getNumberOfSegmentsRequested=function(){var e=0;return this._segments.forEach(function(t){t.status===u.REQUESTED&&e++}),e},i.prototype._loadSegmentsQueued=function(e){this._segments.forEach(function(t){t.status===u.QUEUED&&(this._logger.log("attempt to load queue segment "+t.index),this.loadSegment(t,e))}.bind(this))},i.prototype._doRequest=function(e,t){var n=!1,r=new XMLHttpRequest,o=e.uri,s=function(i){n||(n=!0,this._handleLoadSegmentFailure(e,r,i),this._loadSegmentsQueued(t))}.bind(this);(e.hasBeenRequested()||e.isComplete())&&this._logger.log("segment cant be loaded, requested: ",!!e.hasBeenRequested()," complete: ",e.isComplete()),r.open("GET",o,!0),r.responseType="arraybuffer",r.onload=function(){if(!e.aborted){if(200!==r.status)return void s();this._logger.log("download of segment "+e.index+" complete"),e.status=u.COMPLETE,e.data=new Uint8Array(r.response),e.downloadTime=Date.now()-e.downloadStartTime,this.trigger(i.Events.SEGMENT_LOADED,e),this._loadSegmentsQueued(t)}}.bind(this),r.onprogress=function(t){e.aborted||t.loaded&&t.total&&(e.loaded=t.loaded,e.total=t.total,this.trigger(i.Events.SEGMENT_PROGRESS,e))}.bind(this),r.onerror=function(e){s(e)}.bind(this),this._logger.log("requesting segment "+e.index+" from "+o),e.xhr=r,e.aborted=!1,e.downloadStartTime=Date.now(),e.status=u.REQUESTED,r.send()},i.prototype.loadSegment=function(e,t){return!isNaN(t)&&this.getNumberOfSegmentsRequested()>t?(this._logger.log("setting segment "+e.index+" queued"),void(e.status=u.QUEUED)):void this._doRequest(e,t)},i.prototype.getSegment=function(e){return this._segments[e]?this._segments[e]:null},i.prototype.getSegmentIndexForTime=function(e){var t,n;if(e>this._duration||0>e||0===this._segments.length)return-1;for(t=Math.floor(this._segments.length*(e/this._duration)),n=this._segments[t];!(n.startPosition<=e&&n.startPosition+n.duration>e);)n.startPosition+n.duration>=e?t--:t++,n=this._segments[t];return t},i.prototype.getSegmentForTime=function(e){var t=this.getSegmentIndexForTime(e);return t>=0?this._segments[t]:null},i.prototype.getDuration=function(){return this._duration},i.prototype.getNumSegments=function(){return this._segments.length},i.prototype.getLastSegment=function(){return this._segments.length?this._segments[this._segments.length-1]:null},i.prototype.cancelIncompletetSegments=function(){this._segments.filter(function(e){return!e.isComplete()}).forEach(function(e){e.cancel()})}},function(e,t,n){var i=n(53),r=n(56),o=n(57),s=1,a=32,l=o(function(e,t,n){var o=s;if(n.length){var u=r(n,l.placeholder);o|=a}return i(e,o,t,n,u)});l.placeholder={},e.exports=l},function(e,t,n){(function(t){function i(e,t,n){for(var i=n.length,r=-1,o=E(e.length-i,0),s=-1,a=t.length,l=Array(a+o);++s<a;)l[s]=t[s];for(;++r<i;)l[n[r]]=e[r];for(;o--;)l[s++]=e[r++];return l}function r(e,t,n){for(var i=-1,r=n.length,o=-1,s=E(e.length-r,0),a=-1,l=t.length,u=Array(s+l);++o<s;)u[o]=e[o];for(var c=o;++a<l;)u[c+a]=t[a];for(;++i<r;)u[c+n[i]]=e[o++];return u}function o(e,n){function i(){var o=this&&this!==t&&this instanceof i?r:e;return o.apply(n,arguments)}var r=s(e);return i}function s(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=f(e.prototype),i=e.apply(n,t);return h(i)?i:n}}function a(e,n,o,l,u,c,h,f,S,T){function A(){for(var v=arguments.length,y=v,b=Array(v);y--;)b[y]=arguments[y];if(l&&(b=i(b,l,u)),c&&(b=r(b,c,h)),P||R){var k=A.placeholder,F=g(b,k);if(v-=F.length,T>v){var O=f?p(f):void 0,N=E(T-v,0),B=P?F:void 0,$=P?void 0:F,U=P?b:void 0,z=P?void 0:b;n|=P?w:x,n&=~(P?x:w),M||(n&=~(m|_));var H=a(e,n,o,U,B,z,$,O,S,N);return H.placeholder=k,H}}var j=I?o:this,V=D?j[e]:e;return f&&(b=d(b,f)),C&&S<b.length&&(b.length=S),this&&this!==t&&this instanceof A&&(V=L||s(e)),V.apply(j,b)}var C=n&k,I=n&m,D=n&_,P=n&y,M=n&v,R=n&b,L=D?void 0:s(e);return A}function l(e,n,i,r){function o(){for(var n=-1,s=arguments.length,u=-1,c=r.length,d=Array(c+s);++u<c;)d[u]=r[u];for(;s--;)d[u++]=arguments[++n];var h=this&&this!==t&&this instanceof o?l:e;return h.apply(a?i:this,d)}var a=n&m,l=s(e);return o}function u(e,t,n,i,r,s,u,c){var d=t&_;if(!d&&"function"!=typeof e)throw new TypeError(S);var h=i?i.length:0;if(h||(t&=~(w|x),i=r=void 0),h-=r?r.length:0,t&x){var p=i,f=r;i=r=void 0}var g=[e,t,n,i,r,p,f,s,u,c];if(g[9]=null==c?d?0:e.length:E(c-h,0)||0,t==m)var v=o(g[0],g[2]);else v=t!=w&&t!=(m|w)||g[4].length?a.apply(void 0,g):l.apply(void 0,g);return v}function c(e,t){return e="number"==typeof e||T.test(e)?+e:-1,t=null==t?C:t,e>-1&&e%1==0&&t>e}function d(e,t){for(var n=e.length,i=A(t.length,n),r=p(e);i--;){var o=t[i];e[i]=c(o,n)?r[o]:void 0}return e}function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var p=n(54),f=n(55),g=n(56),m=1,_=2,v=4,y=8,b=16,w=32,x=64,k=128,S="Expected a function",T=/^\d+$/,E=Math.max,A=Math.min,C=9007199254740991;e.exports=u}).call(t,function(){return this}())},function(e,t){function n(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}e.exports=n},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var i=function(){function e(){}return function(t){if(n(t)){e.prototype=t;var i=new e;e.prototype=void 0}return i||{}}}();e.exports=i},function(e,t){function n(e,t){for(var n=-1,r=e.length,o=-1,s=[];++n<r;)e[n]===t&&(e[n]=i,s[++o]=n);return s}var i="__lodash_placeholder__";e.exports=n},11,function(e,t,n){function i(e,t){return function(n,i,r){return"function"==typeof i&&void 0===r&&a(n)?e(n,i):t(n,s(i,r,3))}}var r=n(59),o=n(60),s=n(65),a=n(64),l=i(r,o);e.exports=l},function(e,t){function n(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}e.exports=n},[121,61],[120,62,63,64],5,6,7,9,function(e,t,n){var i,r=n(36),o=n(16),s=n(47).bindAll,a=n(1);e.exports=i=function(e,t){s(this,["_onMSEInit","_onMSEDispose","_onSourceBufferUpdate"]),this.mimeType=t,this._logger=e,this._isBufferPrepared=!1,this._sourceBufferPtsOffset=0,this._segmentsAwaitingAppendance=[],this._isNotReady=!0,this._sourceBuffer=null,this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._onMSEInit,!1),this._mediaSource.addEventListener("sourceclose",this._onMSEDispose,!1),this._mediaElem=o.createAudioElement(),this._mediaElem.src=window.URL.createObjectURL(this._mediaSource)},i.Events={SOURCE_READY:"source-ready",SOURCE_DESTROYED:"source-destroy",SOURCE_ERROR:"source-error",SEGMENT_APPENDED:"segment-appended"},a(i.prototype,r),a(i.prototype,{_onMSEInit:function(){this._logger.log("source open handler"),this._isNotReady=!1,this._mediaSource.removeEventListener("sourceopen",this._onMSEInit,!1),this._sourceBuffer=this._mediaSource.addSourceBuffer(this.mimeType),this._sourceBuffer.addEventListener("update",this._onSourceBufferUpdate),this.trigger(i.Events.SOURCE_READY)},_onMSEDispose:function(){this._isNotReady=!0,this._logger.log("source dispose handler"),this._mediaSource.removeEventListener("sourceclose",this._onMSEDispose,!1)},_appendNextSegment:function(e){try{if(this._sourceBuffer.updating)return this._logger.log("source buffer is busy updating already, enqueuing data for later appending"),void this._segmentsAwaitingAppendance.unshift(e);e.isLast&&this._logger.log("about to append last segment"),this._currentSegmentAppending=e,this._sourceBuffer.timestampOffset=e.startPosition/1e3,this._sourceBuffer.appendBuffer(e.data),this._logger.log("appending segment "+e.index)}catch(t){this._logger.log("error while appending to SourceBuffer: "+t.message+")"),this.trigger(i.Events.SOURCE_ERROR,t)}},_tryAppendEos:function(){this._logger.log("attempting to finalize stream");try{"open"!==this._mediaSource.readyState||this._sourceBuffer.updating?this._logger.log("couldn't call endOfStream because SourceBuffer is still updating, we'll call it once its done"):(this._mediaSource.endOfStream(),this._logger.log("called endOfStream"))}catch(e){this._logger.log("SourceBuffer endOfStream() call failed with error: "+e.message),this.trigger(i.Events.SOURCE_ERROR,e)}},_onSourceBufferUpdate:function(){(this._currentSegmentAppending||this._sourceBuffer.updating)&&(this._logger.log("done updating SourceBuffer with segment "+this._currentSegmentAppending.index),this.trigger(i.Events.SEGMENT_APPENDED,this._currentSegmentAppending),this._currentSegmentAppending.isLast&&(this._logger.log("was last segment, setting on EOS on SourceBuffer"),this._tryAppendEos()),this._segmentsAwaitingAppendance.length&&!this._sourceBuffer.updating&&this._appendNextSegment(this._segmentsAwaitingAppendance.pop()))},append:function(e){if(!this.sourceIsReady())throw new Error("MediaSource is not ready yet");this._appendNextSegment(e)},media:function(){return this._mediaElem},sourceIsReady:function(){return!this._isNotReady},duration:function(e){return this._mediaSource.duration=e/1e3,1e3*this._mediaSource.duration},whenStable:function l(e){var t;this._sourceBuffer.updating?(t=function(){this._sourceBuffer.removeEventListener("update",t),l.call(this,e)}.bind(this),this._sourceBuffer.addEventListener("update",t)):e()}})},function(e,t,n){var i,r=n(47).concatBuffersToUint8Array,o=n(1),s=n(36),a=n(68);e.exports=i=function(e){this.config=e,this.reset(),this.segments=[],this.pushedInitData=!1},o(i.prototype,s),i.prototype.process=function(e){switch(this.segments.push(e),this.config){case i.Configs.VOID:this.trigger("segment",e);break;case i.Configs.MP3_TO_FMP4:this.src.enqueue(new a.Unit.Transfer(e.data,"binary")),this.src.enqueue(a.Unit.Transfer.Flush());break;default:throw new Error("Config "+this.config+" not supported")}},i.prototype.dequeue=function(){return this.segments.shift()},i.prototype.reset=function(){switch(this.config){case i.Configs.VOID:break;case i.Configs.MP3_TO_FMP4:this.gotInitData=!1,this.src=new a.Unit.BasePushSrc,this.parser=new a.Units.MP3Parser,this.muxer=new a.Units.MP4Mux(a.Units.MP4Mux.Profiles.MP3_AUDIO_ONLY),this.sink=new a.Unit.BaseSink,this.sink._onData=function(){var e,t=this.sink.dequeue().data;return this.gotInitData?(e=this.dequeue(),e.mimeType="audio/mp4",this.gotInitData&&!this.pushedInitData?(e.data=r(this.initData,t),this.pushedInitData=!0):e.data=t,this.trigger("segment",e),void this.reset()):(this.gotInitData=!0,void(this.initData=t))}.bind(this),a.Unit.link(this.src,this.parser,this.muxer,this.sink);break;default:throw new Error("Config "+this.config+" not supported")}},i.Configs={VOID:"VOID",MP3_TO_FMP4:"MP3_TO_FMP4"}},function(e,t,n){var i,r=n(69),o=n(104),s=n(107),a=n(110),l=n(113),u=n(114);e.exports=i={Unit:r,Units:{File:u,MP4Mux:o,MP3Parser:s,MSESink:a,XHR:l}}},function(e,t,n){(function(t){var i,r,o,s,a,l,u,c,d,h,p=n(74),f=n(76),g=n(1),m=n(85),_=n(86);e.exports=i=function(){m.call(this),this.inputs||(this.inputs=[]),this.outputs||(this.outputs=[])},i.create=function(e){return f(i.prototype,e)},i.createBaseSrc=function(e){return f(l.prototype,e)},i.createBasePushSrc=function(e){return f(u.prototype,e)},i.createBaseSink=function(e){return f(c.prototype,e)},i.createBaseTransform=function(e){return f(a.prototype,e)},i.createBaseParser=function(e){return f(d.prototype,e)},i.link=function(e,t){if(arguments.length>2)return i.linkArray(arguments);for(var n=0;n<Math.min(e.numberOfOuts(),t.numberOfIns());n++)e.out(n).pipe(t["in"](n));return t},i.linkArray=function(e){var t,n,r;for(r=0;r<e.length;r++)t=e[r],e.length>r+1&&(n=e[r+1],i.link(t,n));return n};var v=i.Event={CHAIN:"chain",NEED_DATA:"need-data",FINISH:"finish",PIPE:"pipe",UNPIPE:"unpipe",ERROR:"error",END:"end",OPEN:"open",CLOSE:"close"};i.prototype=f(m.prototype,{constructor:i,"in":function(e){return this.inputs[e]},out:function(e){return this.outputs[e]},numberOfIns:function(){return this.inputs.length},numberOfOuts:function(){return this.outputs.length},add:function(e){return e instanceof r?this.addInput(e):e instanceof o&&this.addOutput(e),this},remove:function(e){e instanceof r?this.removeInput(e):e instanceof o&&this.removeOutput(e)},addInput:function(e){this._installEventForwarder(e,v.FINISH),this._installEventForwarder(e,v.OPEN),this._installEventForwarder(e,v.PIPE),this._installEventForwarder(e,v.UNPIPE),this._installEventForwarder(e,v.ERROR),this._installEventForwarder(e,v.CHAIN),this.inputs.push(e)},addOutput:function(e){this._installEventForwarder(e,v.END),this._installEventForwarder(e,v.OPEN),this._installEventForwarder(e,v.CLOSE),this._installEventForwarder(e,v.ERROR),this._installEventForwarder(e,v.NEED_DATA),this.outputs.push(e)},removeInput:function(e){removePut(this.inputs,e)},removeOutput:function(e){removePut(this.outputs,e)},removePut:function(e,t){e.slice().forEach(function(n,i){n==t&&e.splice(i,1)})},_installEventForwarder:function(e,t){e.on(t,function(n){this.emit(t,e,n)}.bind(this))}}),i.Transfer=s=function(e,n,i){n||(n=e instanceof t?"buffer":e instanceof String?"utf8":"object"),this.resolved=!1,this.data=e,this.encoding=n,this.doneCallback=i},s.prototype=f(Object.prototype,{constructor:s,resolve:function(){this.doneCallback&&!this.resolved&&(this.doneCallback(),this.resolved=!0)},setFlushing:function(e){return this.data.flush=e,this},setEmpty:function(e){return this.data.empty=e,this}}),s.Flush=function(){return new s({},"binary").setFlushing(!0).setEmpty(!0)},s.EOS=function(){return new s(null,"binary")},i.Input=r=function(e,t){_.Writable.prototype.constructor.call(this,{objectMode:!0,decodeStrings:!1})},r.prototype=f(_.Writable.prototype,{constructor:r,_write:function(e,t,n){p("_write: "+t),this.emit(i.Event.CHAIN,new s(e,t,n))}}),i.Output=o=function(e){_.Readable.prototype.constructor.call(this,{objectMode:!0}),this._dataRequested=0,this._shouldPushMore=!0},o.eos=function(e){e.push(null,"null")},o.prototype=f(_.Readable.prototype,{constructor:o,_read:function(e){this._dataRequested++,this.emit(v.NEED_DATA,this)},push:function(e,t){return this._dataRequested--,this._shouldPushMore=_.Readable.prototype.push.call(this,e,t),this._shouldPushMore},isPulling:function(){return this._dataRequested>0},eos:function(){_.Readable.prototype.push.call(this,null,"null")}}),i.BaseTransform=a=function(){i.prototype.constructor.apply(this,arguments),this.add(new r).add(new o),this.on(v.CHAIN,this._onChain.bind(this)),this.on(v.FINISH,this._onFinish.bind(this))},a.prototype=f(i.prototype,{constructor:a,_onChain:function(e,t){this._transform(t),this.out(0).push(t.data,t.encoding),t.resolve()},_onFinish:function(e){o.eos(this.out(0))},_transform:function(e){}}),i.BaseSrc=l=function(){i.prototype.constructor.apply(this,arguments),this.add(new o),this.on(v.NEED_DATA,this.squeeze.bind(this))},l.prototype=f(i.prototype,{constructor:l,squeeze:function(){p("squeeze");var e=this._source();e&&(this.out(0).push(e.data,e.encoding),e.resolve())},_source:function(){}}),i.BasePushSrc=u=function(){l.prototype.constructor.apply(this,arguments),this._bufferOut=[]},u.prototype=f(l.prototype,{constructor:u,_source:function(){return this._bufferOut.length?this._bufferOut.shift():null},enqueue:function(e){this._bufferOut.push(e),this.out(0).isPulling&&this.out(0).isPulling()&&this.squeeze()}}),i.BaseSink=c=function(){i.prototype.constructor.apply(this,arguments),this.add(new r),this.on(v.CHAIN,this._onChain.bind(this)),this._bufferIn=[]},c.prototype=f(i.prototype,{constructor:c,_onChain:function(e,t){p("BaseSink._onChain: "+t.encoding),this._bufferIn.push(t),this._onData(),t.resolve()},_onData:function(){},dequeue:function(){return this._bufferIn.length?this._bufferIn.shift():null}}),i.BaseParser=d=function(){u.prototype.constructor.apply(this,arguments),c.prototype.constructor.apply(this,arguments),this.on("finish",this._onFinish.bind(this))},g(d.prototype,i.prototype,m.prototype,l.prototype,u.prototype,c.prototype,{constructor:d,_onData:function(){this._parse(this.dequeue())},_onFinish:function(){p("BaseParser._onFinish"),o.eos(this.out(0))},_parse:function(e){}}),i.InputSelector=h=function(e){for(a.prototype.constructor.apply(this,arguments),e=(e||1)-1;e-->0;)this.add(new r);this.selectedInputIndex=0},g(h.prototype,a.prototype,{constructor:h,_onChain:function(e,t){var n=this["in"](this.selectedInputIndex);return e!==n?void t.resolve():(this._transform(t),this.out(0).push(t.data,t.encoding),void t.resolve())},_onFinish:function(e){var t=this["in"](this.selectedInputIndex);e===t&&o.eos(this.out(0))}})}).call(t,n(70).Buffer)},function(e,t,n){(function(e,i){function r(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function o(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(t){return this instanceof e?(this.length=0,this.parent=void 0,"number"==typeof t?s(this,t):"string"==typeof t?a(this,t,arguments.length>1?arguments[1]:"utf8"):l(this,t)):arguments.length>1?new e(t,arguments[1]):new e(t)}function s(t,n){if(t=g(t,0>n?0:0|m(n)),!e.TYPED_ARRAY_SUPPORT)for(var i=0;n>i;i++)t[i]=0;return t}function a(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var i=0|v(t,n);return e=g(e,i),e.write(t,n),e}function l(t,n){if(e.isBuffer(n))return u(t,n);if(Q(n))return c(t,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return d(t,n);if(n instanceof ArrayBuffer)return h(t,n)}return n.length?p(t,n):f(t,n)}function u(e,t){var n=0|m(t.length);return e=g(e,n),t.copy(e,0,0,n),e}function c(e,t){var n=0|m(t.length);e=g(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function d(e,t){var n=0|m(t.length);e=g(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function h(t,n){return e.TYPED_ARRAY_SUPPORT?(n.byteLength,t=e._augment(new Uint8Array(n))):t=d(t,new Uint8Array(n)),t}function p(e,t){var n=0|m(t.length);e=g(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function f(e,t){var n,i=0;"Buffer"===t.type&&Q(t.data)&&(n=t.data,i=0|m(n.length)),e=g(e,i);for(var r=0;i>r;r+=1)e[r]=255&n[r];return e}function g(t,n){e.TYPED_ARRAY_SUPPORT?(t=e._augment(new Uint8Array(n)),t.__proto__=e.prototype):(t.length=n,t._isBuffer=!0);var i=0!==n&&n<=e.poolSize>>>1;return i&&(t.parent=X),t}function m(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function _(t,n){if(!(this instanceof _))return new _(t,n);var i=new e(t,n);return delete i.parent,i}function v(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(i)return j(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,n){var i=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return I(this,t,n);case"binary":return D(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function b(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;i>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+s]=a}return s}function w(e,t,n,i){return G(j(t,e.length-n),e,n,i)}function x(e,t,n,i){return G(V(t),e,n,i)}function k(e,t,n,i){return x(e,t,n,i)}function S(e,t,n,i){return G(W(t),e,n,i)}function T(e,t,n,i){return G(q(t,e.length-n),e,n,i)}function E(e,t,n){return 0===t&&n===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;n>r;){var o=e[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=r+a){var l,u,c,d;switch(a){case 1:128>o&&(s=o);break;case 2:l=e[r+1],128===(192&l)&&(d=(31&o)<<6|63&l,d>127&&(s=d));break;case 3:l=e[r+1],u=e[r+2],128===(192&l)&&128===(192&u)&&(d=(15&o)<<12|(63&l)<<6|63&u,d>2047&&(55296>d||d>57343)&&(s=d));break;case 4:l=e[r+1],u=e[r+2],c=e[r+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(d=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,d>65535&&1114112>d&&(s=d))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return C(i)}function C(e){var t=e.length;if(J>=t)return String.fromCharCode.apply(String,e);for(var n="",i=0;t>i;)n+=String.fromCharCode.apply(String,e.slice(i,i+=J));return n}function I(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;r++)i+=String.fromCharCode(127&e[r]);return i}function D(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;r++)i+=String.fromCharCode(e[r]);return i}function P(e,t,n){var i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=t;n>o;o++)r+=H(e[o]);return r}function M(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function R(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,n,i,r,o,s){if(!e.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(n>o||s>n)throw new RangeError("value is out of bounds");if(i+r>t.length)throw new RangeError("index out of range")}function F(e,t,n,i){0>t&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);o>r;r++)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function O(e,t,n,i){0>t&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);o>r;r++)e[n+r]=t>>>8*(i?r:3-r)&255}function N(e,t,n,i,r,o){if(t>r||o>t)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function B(e,t,n,i,r){return r||N(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,n,i,23,4),n+4}function $(e,t,n,i,r){return r||N(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,n,i,52,8),n+8}function U(e){if(e=z(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return 16>e?"0"+e.toString(16):e.toString(16)}function j(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],s=0;i>s;s++){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=r-55296<<10|n-56320|65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n,i,r,o=[],s=0;s<e.length&&!((t-=2)<0);s++)n=e.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function W(e){return Y.toByteArray(U(e))}function G(e,t,n,i){for(var r=0;i>r&&!(r+n>=t.length||r>=e.length);r++)t[r+n]=e[r];return r}/*!
		 * The buffer module from node.js, for the browser.
		 *
		 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
		 * @license  MIT
		 */
var Y=n(71),K=n(72),Q=n(73);t.Buffer=e,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50,e.poolSize=8192;var X={};e.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:r(),e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array),e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,r=n.length,o=0,s=Math.min(i,r);s>o&&t[o]===n[o];)++o;return o!==s&&(i=t[o],r=n[o]),r>i?-1:i>r?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Q(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new e(0);var i;if(void 0===n)for(n=0,i=0;i<t.length;i++)n+=t[i].length;var r=new e(n),o=0;for(i=0;i<t.length;i++){var s=t[i];s.copy(r,o),o+=s.length}return r},e.byteLength=v,e.prototype.length=void 0,e.prototype.parent=void 0,e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):y.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:e.compare(this,t)},e.prototype.indexOf=function(t,n){function i(e,t,n){for(var i=-1,r=0;n+r<e.length;r++)if(e[n+r]===t[-1===i?0:r-i]){if(-1===i&&(i=r),r-i+1===t.length)return n+i}else i=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,n);if(e.isBuffer(t))return i(this,t,n);if("number"==typeof t)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,n):i(this,[t],n);throw new TypeError("val must be string, number or Buffer")},e.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},e.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},e.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0);else{var r=i;i=t,t=0|n,n=r}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return x(this,e,t,n);case"binary":return k(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;e.prototype.slice=function(t,n){var i=this.length;t=~~t,n=void 0===n?i:~~n,0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),0>n?(n+=i,0>n&&(n=0)):n>i&&(n=i),t>n&&(n=t);var r;if(e.TYPED_ARRAY_SUPPORT)r=e._augment(this.subarray(t,n));else{var o=n-t;r=new e(o,void 0);for(var s=0;o>s;s++)r[s]=this[s+t]}return r.length&&(r.parent=this.parent||this),r},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||R(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||R(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},e.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||R(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||R(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),K.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),K.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),K.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),K.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,i){e=+e,t=0|t,n=0|n,i||L(this,e,t,n,Math.pow(2,8*n),0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,i){e=+e,t=0|t,n=0|n,i||L(this,e,t,n,Math.pow(2,8*n),0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},e.prototype.writeUInt8=function(t,n,i){return t=+t,n=0|n,i||L(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,i){return t=+t,n=0|n,i||L(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):F(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,i){return t=+t,n=0|n,i||L(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):F(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,i){return t=+t,n=0|n,i||L(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):O(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,i){return t=+t,n=0|n,i||L(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):O(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}var o=0,s=1,a=0>e?1:0;for(this[t]=255&e;++o<n&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}var o=n-1,s=1,a=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeInt8=function(t,n,i){return t=+t,n=0|n,i||L(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,i){return t=+t,n=0|n,i||L(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):F(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,i){return t=+t,n=0|n,i||L(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):F(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,i){return t=+t,n=0|n,i||L(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):O(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,i){return t=+t,n=0|n,i||L(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):O(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return $(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return $(this,e,t,!1,n)},e.prototype.copy=function(t,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&i>r&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);var o,s=r-i;if(this===t&&n>i&&r>n)for(o=s-1;o>=0;o--)t[o+n]=this[o+i];else if(1e3>s||!e.TYPED_ARRAY_SUPPORT)for(o=0;s>o;o++)t[o+n]=this[o+i];else t._set(this.subarray(i,i+s),n);return s},e.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof e)for(i=t;n>i;i++)this[i]=e;else{var r=j(e.toString()),o=r.length;for(i=t;n>i;i++)this[i]=r[i%o]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var t=new Uint8Array(this.length),n=0,i=t.length;i>n;n+=1)t[n]=this[n];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=e.prototype;e._augment=function(t){return t.constructor=e,t._isBuffer=!0,t._set=t.set,t.get=Z.get,t.set=Z.set,t.write=Z.write,t.toString=Z.toString,t.toLocaleString=Z.toString,t.toJSON=Z.toJSON,t.equals=Z.equals,t.compare=Z.compare,t.indexOf=Z.indexOf,t.copy=Z.copy,t.slice=Z.slice,t.readUIntLE=Z.readUIntLE,t.readUIntBE=Z.readUIntBE,t.readUInt8=Z.readUInt8,t.readUInt16LE=Z.readUInt16LE,t.readUInt16BE=Z.readUInt16BE,t.readUInt32LE=Z.readUInt32LE,t.readUInt32BE=Z.readUInt32BE,t.readIntLE=Z.readIntLE,t.readIntBE=Z.readIntBE,t.readInt8=Z.readInt8,t.readInt16LE=Z.readInt16LE,t.readInt16BE=Z.readInt16BE,t.readInt32LE=Z.readInt32LE,t.readInt32BE=Z.readInt32BE,t.readFloatLE=Z.readFloatLE,t.readFloatBE=Z.readFloatBE,t.readDoubleLE=Z.readDoubleLE,t.readDoubleBE=Z.readDoubleBE,t.writeUInt8=Z.writeUInt8,t.writeUIntLE=Z.writeUIntLE,t.writeUIntBE=Z.writeUIntBE,t.writeUInt16LE=Z.writeUInt16LE,t.writeUInt16BE=Z.writeUInt16BE,t.writeUInt32LE=Z.writeUInt32LE,t.writeUInt32BE=Z.writeUInt32BE,t.writeIntLE=Z.writeIntLE,t.writeIntBE=Z.writeIntBE,t.writeInt8=Z.writeInt8,t.writeInt16LE=Z.writeInt16LE,t.writeInt16BE=Z.writeInt16BE,t.writeInt32LE=Z.writeInt32LE,t.writeInt32BE=Z.writeInt32BE,t.writeFloatLE=Z.writeFloatLE,t.writeFloatBE=Z.writeFloatBE,t.writeDoubleLE=Z.writeDoubleLE,t.writeDoubleBE=Z.writeDoubleBE,t.fill=Z.fill,t.inspect=Z.inspect,t.toArrayBuffer=Z.toArrayBuffer,t};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(70).Buffer,function(){return this}())},function(e,t,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===d?62:t===a||t===h?63:l>t?-1:l+10>t?t-l+26+26:c+26>t?t-c:u+26>t?t-u+26:void 0}function n(e){function n(e){u[d++]=e}var i,r,s,a,l,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;l="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,u=new o(3*e.length/4-l),s=l>0?e.length-4:e.length;var d=0;for(i=0,r=0;s>i;i+=4,r+=3)a=t(e.charAt(i))<<18|t(e.charAt(i+1))<<12|t(e.charAt(i+2))<<6|t(e.charAt(i+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===l?(a=t(e.charAt(i))<<2|t(e.charAt(i+1))>>4,n(255&a)):1===l&&(a=t(e.charAt(i))<<10|t(e.charAt(i+1))<<4|t(e.charAt(i+2))>>2,n(a>>8&255),n(255&a)),u}function r(e){function t(e){return i.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,o,s,a=e.length%3,l="";for(r=0,s=e.length-a;s>r;r+=3)o=(e[r]<<16)+(e[r+1]<<8)+e[r+2],l+=n(o);switch(a){case 1:o=e[e.length-1],l+=t(o>>2),l+=t(o<<4&63),l+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],l+=t(o>>10),l+=t(o>>4&63),l+=t(o<<2&63),l+="="}return l}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),l="0".charCodeAt(0),u="a".charCodeAt(0),c="A".charCodeAt(0),d="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=r}(t)},function(e,t){t.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?r-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+e[t+d],d+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,i),o-=u}return(p?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var s,a,l,u=8*o-r-1,c=(1<<u)-1,d=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+d>=1?h/l:h*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*l-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;e[n+p]=255&s,p+=f,s/=256,u-=8);e[n+p-f]|=128*g}},function(e,t){var n=Array.isArray,i=Object.prototype.toString;e.exports=n||function(e){return!!e&&"[object Array]"==i.call(e)}},function(e,t,n){var i=n(75);e.exports=function(){i.loggingEnabled()&&console.log.apply(console,arguments)}},function(e,t){var n=!1;e.exports={loggingEnabled:function(e){return void 0!==e&&(n=e),n}}},function(e,t,n){function i(e,t,n){var i=o(e);return n&&s(e,t,n)&&(t=void 0),t?r(i,t):i}var r=n(77),o=n(83),s=n(84);e.exports=i},[119,78,79],3,[120,80,81,82],5,function(e,t){(function(t){function n(e){return function(t){return null==t?void 0:t[e]}}function i(e){return o(e)&&g.call(e,"callee")&&(!_.call(e,"callee")||m.call(e)==d)}function r(e){return null!=e&&!("function"==typeof e&&s(e))&&a(v(e))}function o(e){return u(e)&&r(e)}function s(e){var t=l(e)?m.call(e):"";return t==h||t==p}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&c>=e}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){return!!e&&"object"==typeof e}var c=9007199254740991,d="[object Arguments]",h="[object Function]",p="[object GeneratorFunction]",f=t.Object.prototype,g=f.hasOwnProperty,m=f.toString,_=f.propertyIsEnumerable,v=n("length");e.exports=i}).call(t,function(){return this}())},7,55,10,function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,a,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),u=n.slice(),r=u.length,l=0;r>l;l++)u[l].apply(this,a);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){function i(){r.call(this)}e.exports=i;var r=n(85).EventEmitter,o=n(87);o(i,r),i.Readable=n(88),i.Writable=n(100),i.Duplex=n(101),i.Transform=n(102),i.PassThrough=n(103),i.Stream=i,i.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function i(){u.readable&&u.resume&&u.resume()}function o(){c||(c=!0,e.end())}function s(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){u.removeListener("data",n),e.removeListener("drain",i),u.removeListener("end",o),u.removeListener("close",s),u.removeListener("error",a),e.removeListener("error",a),u.removeListener("end",l),u.removeListener("close",l),e.removeListener("close",l)}var u=this;u.on("data",n),e.on("drain",i),e._isStdio||t&&t.end===!1||(u.on("end",o),u.on("close",s));var c=!1;return u.on("error",a),e.on("error",a),u.on("end",l),u.on("close",l),e.on("close",l),e.emit("pipe",u),e}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){t=e.exports=n(89),t.Stream=n(86),t.Readable=t,t.Writable=n(96),t.Duplex=n(95),t.Transform=n(98),t.PassThrough=n(99)},function(e,t,n){(function(t){function i(e,t){var i=n(95);e=e||{};var r=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(C||(C=n(97).StringDecoder),this.decoder=new C(e.encoding),this.encoding=e.encoding)}function r(e){n(95);return this instanceof r?(this._readableState=new i(e,this),this.readable=!0,void E.call(this)):new r(e)}function o(e,t,n,i,r){var o=u(t,n);if(o)e.emit("error",o);else if(A.isNullOrUndefined(n))t.reading=!1,t.ended||c(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&r){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||r||i||(n=t.decoder.write(n)),r||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&d(e)),p(e,t);else r||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=D)e=D;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function l(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||A.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function u(e,t){var n=null;return A.isBuffer(t)||A.isString(t)||A.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,d(e)}function d(e){var n=e._readableState;n.needReadable=!1,n.emittedReadable||(I("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?t.nextTick(function(){h(e)}):h(e))}function h(e){I("emit readable"),e.emit("readable"),v(e)}function p(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(function(){f(e,n)}))}function f(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(I("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;I("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&T.listenerCount(e,"data")&&(t.flowing=!0,v(e))}}function m(e,n){n.resumeScheduled||(n.resumeScheduled=!0,t.nextTick(function(){_(e,n)}))}function _(e,t){t.resumeScheduled=!1,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}function v(e){var t=e._readableState;if(I("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function y(e,t){var n,i=t.buffer,r=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(s)n=i.shift();else if(!e||e>=r)n=o?i.join(""):S.concat(i,r),i.length=0;else if(e<i[0].length){var a=i[0];n=a.slice(0,e),i[0]=a.slice(e)}else if(e===i[0].length)n=i.shift();else{n=o?"":new S(e);for(var l=0,u=0,c=i.length;c>u&&e>l;u++){var a=i[0],d=Math.min(e-l,a.length);o?n+=a.slice(0,d):a.copy(n,l,0,d),d<a.length?i[0]=a.slice(d):i.shift(),l+=d}}return n}function b(e){var n=e._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,t.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)}function x(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}e.exports=r;var k=n(91),S=n(70).Buffer;r.ReadableState=i;var T=n(85).EventEmitter;T.listenerCount||(T.listenerCount=function(e,t){return e.listeners(t).length});var E=n(86),A=n(92);A.inherits=n(93);var C,I=n(94);I=I&&I.debuglog?I.debuglog("stream"):function(){},A.inherits(r,E),r.prototype.push=function(e,t){var n=this._readableState;return A.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new S(e,t),t="")),o(this,n,e,t,!1)},r.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},r.prototype.setEncoding=function(e){return C||(C=n(97).StringDecoder),this._readableState.decoder=new C(e),this._readableState.encoding=e,this};var D=8388608;r.prototype.read=function(e){I("read",e);var t=this._readableState,n=e;if((!A.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return I("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?b(this):d(this),null;if(e=l(e,t),0===e&&t.ended)return 0===t.length&&b(this),null;var i=t.needReadable;I("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,I("length less than watermark",i)),(t.ended||t.reading)&&(i=!1,I("reading or ended",i)),i&&(I("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=l(n,t));var r;return r=e>0?y(e,t):null,A.isNull(r)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&b(this),A.isNull(r)||this.emit("data",r),r},r.prototype._read=function(e){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(e,n){function i(e){I("onunpipe"),e===d&&o()}function r(){I("onend"),e.end()}function o(){I("cleanup"),e.removeListener("close",l),e.removeListener("finish",u),e.removeListener("drain",m),e.removeListener("error",a),e.removeListener("unpipe",i),d.removeListener("end",r),d.removeListener("end",o),d.removeListener("data",s),!h.awaitDrain||e._writableState&&!e._writableState.needDrain||m()}function s(t){I("ondata");var n=e.write(t);!1===n&&(I("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,d.pause())}function a(t){I("onerror",t),c(),e.removeListener("error",a),0===T.listenerCount(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",u),c()}function u(){I("onfinish"),e.removeListener("close",l),c()}function c(){I("unpipe"),d.unpipe(e)}var d=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,I("pipe count=%d opts=%j",h.pipesCount,n);var p=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,f=p?r:o;h.endEmitted?t.nextTick(f):d.once("end",f),e.on("unpipe",i);var m=g(d);return e.on("drain",m),d.on("data",s),e._events&&e._events.error?k(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",l),e.once("finish",u),e.emit("pipe",d),h.flowing||(I("pipe resume"),d.resume()),e},r.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;i>r;r++)n[r].emit("unpipe",this);return this}var r=x(t.pipes,e);return-1===r?this:(t.pipes.splice(r,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},r.prototype.on=function(e,n){var i=E.prototype.on.call(this,e,n);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&d(this,r);else{var o=this;t.nextTick(function(){I("readable nexttick read 0"),o.read(0)})}}return i},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var e=this._readableState;return e.flowing||(I("resume"),e.flowing=!0,e.reading||(I("resume read 0"),this.read(0)),m(this,e)),this},r.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(I("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(r){if(I("wrapped data"),t.decoder&&(r=t.decoder.write(r)),r&&(t.objectMode||r.length)){var o=i.push(r);o||(n=!0,e.pause())}});for(var r in e)A.isFunction(e[r])&&A.isUndefined(this[r])&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return w(o,function(t){e.on(t,i.emit.bind(i,t))}),i._read=function(t){I("wrapped _read",t),n&&(n=!1,e.resume())},i},r._fromList=y}).call(t,n(90))},function(e,t){function n(){u=!1,s.length?l=s.concat(l):c=-1,l.length&&i()}function i(){if(!u){var e=setTimeout(n);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,clearTimeout(e)}}function r(e,t){this.fun=e,this.array=t}function o(){}var s,a=e.exports={},l=[],u=!1,c=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new r(e,t)),1!==l.length||u||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){(function(e){function n(e){return Array.isArray(e)}function i(e){return"boolean"==typeof e}function r(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function u(e){return void 0===e}function c(e){return d(e)&&"[object RegExp]"===_(e)}function d(e){return"object"==typeof e&&null!==e}function h(e){return d(e)&&"[object Date]"===_(e)}function p(e){return d(e)&&("[object Error]"===_(e)||e instanceof Error)}function f(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(t){return e.isBuffer(t)}function _(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=i,t.isNull=r,t.isNullOrUndefined=o,t.isNumber=s,t.isString=a,t.isSymbol=l,t.isUndefined=u,t.isRegExp=c,t.isObject=d,t.isDate=h,t.isError=p,t.isFunction=f,t.isPrimitive=g,t.isBuffer=m}).call(t,n(70).Buffer)},87,function(e,t){},function(e,t,n){(function(t){function i(e){return this instanceof i?(l.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(e)}function r(){this.allowHalfOpen||this._writableState.ended||t.nextTick(this.end.bind(this))}function o(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)}e.exports=i;var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},a=n(92);a.inherits=n(93);var l=n(89),u=n(96);a.inherits(i,l),o(s(u.prototype),function(e){i.prototype[e]||(i.prototype[e]=u.prototype[e])})}).call(t,n(90))},function(e,t,n){(function(t){function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function r(e,t){var i=n(95);e=e||{};var r=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),
this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var t=n(95);return this instanceof o||this instanceof t?(this._writableState=new r(e,this),this.writable=!0,void k.call(this)):new o(e)}function s(e,n,i){var r=new Error("write after end");e.emit("error",r),t.nextTick(function(){i(r)})}function a(e,n,i,r){var o=!0;if(!(x.isBuffer(i)||x.isString(i)||x.isNullOrUndefined(i)||n.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),t.nextTick(function(){r(s)}),o=!1}return o}function l(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&x.isString(t)&&(t=new w(t,n)),t}function u(e,t,n,r,o){n=l(t,n,r),x.isBuffer(n)&&(r="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new i(n,r,o)):c(e,t,!1,s,n,r,o),a}function c(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function d(e,n,i,r,o){i?t.nextTick(function(){n.pendingcb--,o(r)}):(n.pendingcb--,o(r)),e._writableState.errorEmitted=!0,e.emit("error",r)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,n){var i=e._writableState,r=i.sync,o=i.writecb;if(h(i),n)d(e,i,r,n,o);else{var s=_(e,i);s||i.corked||i.bufferProcessing||!i.buffer.length||m(e,i),r?t.nextTick(function(){f(e,i,s,o)}):f(e,i,s,o)}}function f(e,t,n,i){n||g(e,t),t.pendingcb--,i(),y(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],i=0;i<t.buffer.length;i++)n.push(t.buffer[i].callback);t.pendingcb++,c(e,t,!0,t.length,t.buffer,"",function(e){for(var i=0;i<n.length;i++)t.pendingcb--,n[i](e)}),t.buffer=[]}else{for(var i=0;i<t.buffer.length;i++){var r=t.buffer[i],o=r.chunk,s=r.encoding,a=r.callback,l=t.objectMode?1:o.length;if(c(e,t,!1,l,o,s,a),t.writing){i++;break}}i<t.buffer.length?t.buffer=t.buffer.slice(i):t.buffer.length=0}t.bufferProcessing=!1}function _(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function v(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function y(e,t){var n=_(e,t);return n&&(0===t.pendingcb?(v(e,t),t.finished=!0,e.emit("finish")):v(e,t)),n}function b(e,n,i){n.ending=!0,y(e,n),i&&(n.finished?t.nextTick(i):e.once("finish",i)),n.ended=!0}e.exports=o;var w=n(70).Buffer;o.WritableState=r;var x=n(92);x.inherits=n(93);var k=n(86);x.inherits(o,k),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var i=this._writableState,r=!1;return x.isFunction(t)&&(n=t,t=null),x.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),x.isFunction(n)||(n=function(){}),i.ended?s(this,i,n):a(this,i,e,n)&&(i.pendingcb++,r=u(this,i,e,t,n)),r},o.prototype.cork=function(){var e=this._writableState;e.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||m(this,e))},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,n){var i=this._writableState;x.isFunction(e)?(n=e,e=null,t=null):x.isFunction(t)&&(n=t,t=null),x.isNullOrUndefined(e)||this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||b(this,i,n)}}).call(t,n(90))},function(e,t,n){function i(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function r(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=n(70).Buffer,l=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},u=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),i(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r);var r=t.length-1,i=t.charCodeAt(r);if(i>=55296&&56319>=i){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,r)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t}},function(e,t,n){function i(e,t){this.afterTransform=function(e,n){return r(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,l.isNullOrUndefined(n)||e.push(n),r&&r(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new i(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){l.isFunction(this._flush)?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=o;var a=n(95),l=n(92);l.inherits=n(93),l.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("not implemented")},o.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;l.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},function(e,t,n){function i(e){return this instanceof i?void r.call(this,e):new i(e)}e.exports=i;var r=n(98),o=n(92);o.inherits=n(93),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(96)},function(e,t,n){e.exports=n(95)},function(e,t,n){e.exports=n(98)},function(e,t,n){e.exports=n(99)},function(e,t,n){(function(t){var i,r=n(74),o=n(69),s=(o.BaseTransform,o.BaseParser),a=n(105);e.exports=i=function(e,t){o.BaseParser.prototype.constructor.apply(this,arguments),e||(e={audioTrackId:-1,videoTrackId:-1,tracks:[]}),this.muxer=new a(e),this.muxer.ondata=this._onMp4Data.bind(this),this.muxer.oncodecinfo=this._onCodecInfo.bind(this),this._codecInfo=null,this._timestamp=0,t&&(this.worker="undefined"!=typeof Worker?new Worker("/dist/mp4-mux-worker-bundle.js"):null),this.worker&&(this.worker.onmessage=function(e){this._onMp4Data(e.data)}.bind(this),this.worker.postMessage({mp4MuxProfile:e}))},i.Profiles=a.Profiles,i.prototype=o.createBaseParser({constructor:i,_onMp4Data:function(e){r("_onMp4Data"),this.enqueue(new o.Transfer(new t(e),"buffer"))},_onCodecInfo:function(e){r("Codec info: "+e),this._codecInfo=e},_onFinish:function(e){r("MP4Mux._onFinish"),this.worker?this.worker.postMessage({eos:!0}):this.muxer&&this.muxer.flush(),s.prototype._onFinish.call(this,e)},_parse:function(e){var t;e.data&&(t=this._timestamp=e.data.timestamp),e.data.flush&&(this._needFlush=!0),r("UnitMP4Mux Timestamp: "+this._timestamp),r("UnitMP4Mux._parse: Payload type: "+typeof e.data),this.worker?(e.data.empty||this.worker.postMessage({data:e.data,meta:e.data.meta,timestamp:t,packetType:a.TYPE_AUDIO_PACKET}),this._needFlush&&(this.worker.postMessage({eos:!0}),this._needFlush=!1)):this.muxer&&(e.data.empty||this.muxer.pushPacket(a.TYPE_AUDIO_PACKET,new Uint8Array(e.data),t,e.data.meta),this._needFlush&&(this.muxer.flush(),this._needFlush=!1))}})}).call(t,n(70).Buffer)},function(e,t,n){function i(e){for(var t=e.length>>1,n=new Uint8Array(t),i=0;t>i;i++)n[i]=parseInt(e.substr(2*i,2),16);return n}function r(e,t){var n,i=0,r=s.RAW;switch(t.codecId){case d:var o=e[i++];r=o,n=1024;break;case c:var l=e[i+1]>>3&3,h=e[i+1]>>1&3;n=1===h?3===l?1152:576:3===h?384:1152}return info={codecDescription:u[t.codecId],codecId:t.codecId,data:e.subarray(i),rate:t.sampleRate,size:t.sampleSize,channels:t.channels,samples:n,packetType:r},a("parsed audio packet with %d samples",n),info}function o(e){var t=0,n=e[t]>>4,i=15&e[t];t++;var r={frameType:n,codecId:i,codecDescription:p[i]};switch(i){case g:var o=e[t++];r.packetType=o,r.compositionTime=(e[t]<<24|e[t+1]<<16|e[t+2]<<8)>>8,t+=3;break;case f:r.packetType=m.NALU,r.horizontalOffset=e[t]>>4&15,r.verticalOffset=15&e[t],r.compositionTime=0,t++}return r.data=e.subarray(t),r}var s,a=n(74),l=n(106),u=["PCM","ADPCM","MP3","PCM le","Nellymouser16","Nellymouser8","Nellymouser","G.711 A-law","G.711 mu-law",null,"AAC","Speex","MP3 8khz"],c=2,d=10;!function(e){e[e.HEADER=0]="HEADER",e[e.RAW=1]="RAW"}(s||(s={}));var h,p=[null,"JPEG","Sorenson","Screen","VP6","VP6 alpha","Screen2","AVC"],f=4,g=7;!function(e){e[e.KEY=1]="KEY",e[e.INNER=2]="INNER",e[e.DISPOSABLE=3]="DISPOSABLE",e[e.GENERATED=4]="GENERATED",e[e.INFO=5]="INFO"}(h||(h={}));var m;!function(e){e[e.HEADER=0]="HEADER",e[e.NALU=1]="NALU",e[e.END=2]="END"}(m||(m={}));var _,v=8,y=9,b=!0;!function(e){e[e.CAN_GENERATE_HEADER=0]="CAN_GENERATE_HEADER",e[e.NEED_HEADER_DATA=1]="NEED_HEADER_DATA",e[e.MAIN_PACKETS=2]="MAIN_PACKETS"}(_||(_={}));var w=function(){function e(e){var t=this;this.oncodecinfo=function(e){throw new Error("MP4Mux.oncodecinfo is not set")},this.ondata=function(e){throw new Error("MP4Mux.ondata is not set")},this.metadata=e,this.trackStates=this.metadata.tracks.map(function(e,n){var i={trackId:n+1,trackInfo:e,cachedDuration:0,samplesProcessed:0,initializationData:[]};return t.metadata.audioTrackId===n&&(t.audioTrackState=i),t.metadata.videoTrackId===n&&(t.videoTrackState=i),i},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return e.prototype.pushPacket=function(e,t,n,i){switch(this.state===_.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),e){case v:var a=this.audioTrackState,l=r(t,i);if(!a||a.trackInfo.codecId!==l.codecId)throw new Error("Unexpected audio packet codec: "+l.codecDescription);switch(l.codecId){default:throw new Error("Unsupported audio codec: "+l.codecDescription);case c:break;case d:if(l.packetType===s.HEADER)return void a.initializationData.push(l.data)}this.cachedPackets.push({packet:l,timestamp:n,trackId:a.trackId});break;case y:var u=this.videoTrackState,h=o(t);if(!u||u.trackInfo.codecId!==h.codecId)throw new Error("Unexpected video packet codec: "+h.codecDescription);switch(h.codecId){default:throw new Error("unsupported video codec: "+h.codecDescription);case f:break;case g:if(h.packetType===m.HEADER)return void u.initializationData.push(h.data)}this.cachedPackets.push({packet:h,timestamp:n,trackId:u.trackId});break;default:throw new Error("unknown packet type: "+e)}this.state===_.NEED_HEADER_DATA&&this._tryGenerateHeader()},e.prototype.flush=function(){this.cachedPackets.length>0&&this._chunk()},e.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(e){return e.trackInfo.codecId===d||e.trackInfo.codecId===g})?this.state=_.NEED_HEADER_DATA:this.state=_.CAN_GENERATE_HEADER},e.prototype._tryGenerateHeader=function(){var e=this.trackStates.every(function(e){switch(e.trackInfo.codecId){case d:case g:return e.initializationData.length>0;default:return!0}});if(e){for(var t=["isom"],n=1,r=1,o=[],s=0;s<this.trackStates.length;s++){var a,u=this.trackStates[s],h=u.trackInfo;switch(h.codecId){case d:var p=u.initializationData[0];a=new l.AudioSampleEntry("mp4a",n,h.channels,h.samplesize,h.samplerate);var m=new Uint8Array(41+p.length);m.set(i("0000000003808080"),0),m[8]=32+p.length,m.set(i("00020004808080"),9),m[16]=18+p.length,m.set(i("40150000000000FA000000000005808080"),17),m[34]=p.length,m.set(p,35),m.set(i("068080800102"),35+p.length),a.otherBoxes=[new l.RawTag("esds",m)];var v=p[0]>>3;u.mimeTypeCodec="mp4a.40."+v;break;case c:a=new l.AudioSampleEntry(".mp3",n,h.channels,h.samplesize,h.samplerate),u.mimeTypeCodec="mp3";break;case g:var y=u.initializationData[0];a=new l.VideoSampleEntry("avc1",r,h.width,h.height),a.otherBoxes=[new l.RawTag("avcC",y)];var b=y[1]<<16|y[2]<<8|y[3];u.mimeTypeCodec="avc1."+(16777216|b).toString(16).substr(1),t.push("iso2","avc1","mp41");break;case f:a=new l.VideoSampleEntry("VP6F",r,h.width,h.height),a.otherBoxes=[new l.RawTag("glbl",i("00"))],u.mimeTypeCodec="avc1.42001E";break;default:throw new Error("not supported track type")}var w,x=l.TrackHeaderFlags.TRACK_ENABLED|l.TrackHeaderFlags.TRACK_IN_MOVIE;u===this.audioTrackState?w=new l.TrackBox(new l.TrackHeaderBox(x,u.trackId,-1,0,0,1,s),new l.MediaBox(new l.MediaHeaderBox(h.timescale,-1,h.language),new l.HandlerBox("soun","SoundHandler"),new l.MediaInformationBox(new l.SoundMediaHeaderBox,new l.DataInformationBox(new l.DataReferenceBox([new l.DataEntryUrlBox(l.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new l.SampleTableBox(new l.SampleDescriptionBox([a]),new l.RawTag("stts",i("0000000000000000")),new l.RawTag("stsc",i("0000000000000000")),new l.RawTag("stsz",i("000000000000000000000000")),new l.RawTag("stco",i("0000000000000000")))))):u===this.videoTrackState&&(w=new l.TrackBox(new l.TrackHeaderBox(x,u.trackId,-1,h.width,h.height,0,s),new l.MediaBox(new l.MediaHeaderBox(h.timescale,-1,h.language),new l.HandlerBox("vide","VideoHandler"),new l.MediaInformationBox(new l.VideoMediaHeaderBox,new l.DataInformationBox(new l.DataReferenceBox([new l.DataEntryUrlBox(l.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new l.SampleTableBox(new l.SampleDescriptionBox([a]),new l.RawTag("stts",i("0000000000000000")),new l.RawTag("stsc",i("0000000000000000")),new l.RawTag("stsz",i("000000000000000000000000")),new l.RawTag("stco",i("0000000000000000"))))))),o.push(w)}var k=new l.MovieExtendsBox(null,[new l.TrackExtendsBox(1,1,0,0,0),new l.TrackExtendsBox(2,1,0,0,0)],null),S=new l.BoxContainerBox("udat",[new l.MetaBox(new l.RawTag("hdlr",i("00000000000000006D6469726170706C000000000000000000")),[new l.RawTag("ilst",i("00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034"))])]),T=new l.MovieHeaderBox(1e3,0,this.trackStates.length+1),E=new l.MovieBox(T,o,k,S),A=new l.FileTypeBox("isom",512,t),C=A.layout(0),I=E.layout(C),D=new Uint8Array(C+I);A.write(D),E.write(D),this.oncodecinfo(this.trackStates.map(function(e){return e.mimeTypeCodec})),this.ondata(D),this.filePos+=D.length,this.state=_.MAIN_PACKETS}},e.prototype._chunk=function(){var e=this.cachedPackets;if(b&&this.videoTrackState){for(var t=e.length-1,n=this.videoTrackState.trackId;t>0&&(e[t].trackId!==n||e[t].packet.frameType!==h.KEY);)t--;t>0&&(e=e.slice(0,t))}if(0!==e.length){for(var i=[],r=0,o=[],s=[],a=0;a<this.trackStates.length;a++){var u=this.trackStates[a],p=u.trackInfo,m=u.trackId,_=e.filter(function(e){return e.trackId===m});if(0!==_.length){var v,y,w,x=new l.TrackFragmentBaseMediaDecodeTimeBox(u.cachedDuration);switch(s.push(r),p.codecId){case d:case c:w=[];for(var t=0;t<_.length;t++){var k=_[t].packet,S=Math.round(k.samples*p.timescale/p.samplerate);i.push(k.data),r+=k.data.length,w.push({duration:S,size:k.data.length}),u.samplesProcessed+=k.samples}var T=l.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new l.TrackFragmentHeaderBox(T,m,0,0,0,0,l.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var E=l.TrackRunFlags.DATA_OFFSET_PRESENT|l.TrackRunFlags.SAMPLE_DURATION_PRESENT|l.TrackRunFlags.SAMPLE_SIZE_PRESENT;y=new l.TrackRunBox(E,w,0,0),u.cachedDuration=Math.round(u.samplesProcessed*p.timescale/p.samplerate);break;case g:case f:w=[];for(var A=u.samplesProcessed,C=A*p.timescale/p.framerate,I=Math.round(C),t=0;t<_.length;t++){var D=_[t].packet;A++;var P=Math.round(A*p.timescale/p.framerate),M=P-I;I=P;var R=Math.round(A*p.timescale/p.framerate+D.compositionTime*p.timescale/1e3);i.push(D.data),r+=D.data.length;var L=D.frameType===h.KEY?l.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:l.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|l.SampleFlags.SAMPLE_IS_NOT_SYNC;w.push({duration:M,size:D.data.length,flags:L,compositionTimeOffset:R-P})}var T=l.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new l.TrackFragmentHeaderBox(T,m,0,0,0,0,l.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var E=l.TrackRunFlags.DATA_OFFSET_PRESENT|l.TrackRunFlags.SAMPLE_DURATION_PRESENT|l.TrackRunFlags.SAMPLE_SIZE_PRESENT|l.TrackRunFlags.SAMPLE_FLAGS_PRESENT|l.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;y=new l.TrackRunBox(E,w,0,0),u.cachedDuration=I,u.samplesProcessed=A;break;default:throw new Error("Un codec")}var F=new l.TrackFragmentBox(v,x,y);o.push(F)}}this.cachedPackets.splice(0,e.length);for(var O=new l.MovieFragmentHeaderBox(++this.chunkIndex),N=new l.MovieFragmentBox(O,o),B=N.layout(0),$=new l.MediaDataBox(i),U=$.layout(B),z=B+8,a=0;a<o.length;a++)o[a].run.dataOffset=z+s[a];var H=new Uint8Array(B+U);N.write(H),$.write(H),this.ondata(H),this.filePos+=H.length}},e}();e.exports=w,w.MP3_SOUND_CODEC_ID=c,w.AAC_SOUND_CODEC_ID=d,w.TYPE_AUDIO_PACKET=v,w.TYPE_VIDEO_PACKET=y,w.Profiles={MP3_AUDIO_ONLY:{audioTrackId:0,videoTrackId:-1,tracks:[{codecId:w.MP3_SOUND_CODEC_ID,channels:2,samplerate:44100,samplesize:16,timescale:44100}]}}},function(e,t){function n(e){for(var t=new Uint8Array(4*e.length),n=0,i=0,r=e.length;r>i;i++){var o=e.charCodeAt(i);if(127>=o)t[n++]=o;else{if(o>=55296&&56319>=o){var s=e.charCodeAt(i+1);s>=56320&&57343>=s&&(o=((1023&o)<<10)+(1023&s)+65536,++i)}0!==(4292870144&o)?(t[n++]=248|o>>>24&3,t[n++]=128|o>>>18&63,t[n++]=128|o>>>12&63,t[n++]=128|o>>>6&63,t[n++]=128|63&o):0!==(4294901760&o)?(t[n++]=240|o>>>18&7,t[n++]=128|o>>>12&63,t[n++]=128|o>>>6&63,t[n++]=128|63&o):0!==(4294965248&o)?(t[n++]=224|o>>>12&15,t[n++]=128|o>>>6&63,t[n++]=128|63&o):(t[n++]=192|o>>>6&31,t[n++]=128|63&o)}}return t.subarray(0,n)}function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Array.prototype.concat.apply(e,t)}function r(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function o(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}function s(e){return(e-p)/1e3|0}function a(e){return 65536*e|0}function l(e){return 1073741824*e|0}function u(e){return 256*e|0}function c(e){return(31&e.charCodeAt(0))<<10|(31&e.charCodeAt(1))<<5|31&e.charCodeAt(2)}var d,h=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};e.exports=d={};var p=-20828448e5,f=[1,0,0,0,1,0,0,0,1],g=[0,0,0],m=function(){function e(e,t){this.boxtype=e,"uuid"===e&&(this.userType=t)}return e.prototype.layout=function(e){this.offset=e;var t=8;return this.userType&&(t+=16),this.size=t,t},e.prototype.write=function(e){return r(e,this.offset,this.size),r(e,this.offset+4,o(this.boxtype)),this.userType?(e.set(this.userType,this.offset+8),24):8},e.prototype.toUint8Array=function(){var e=this.layout(0),t=new Uint8Array(e);return this.write(t),t},e}();d.Box=m;var _=function(e){function t(t,n,i){void 0===n&&(n=0),void 0===i&&(i=0),e.call(this,t),this.version=n,this.flags=i}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.version<<24|this.flags),n+4},t}(m);d.FullBox=_;var v=function(e){function t(t,n,i){e.call(this,"ftype"),this.majorBrand=t,this.minorVersion=n,this.compatibleBrands=i}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4*(2+this.compatibleBrands.length),this.size},t.prototype.write=function(t){var n=this,i=e.prototype.write.call(this,t);return r(t,this.offset+i,o(this.majorBrand)),r(t,this.offset+i+4,this.minorVersion),i+=8,this.compatibleBrands.forEach(function(e){r(t,n.offset+i,o(e)),i+=4},this),i},t}(m);d.FileTypeBox=v;var y=function(e){function t(t,n){e.call(this,t),this.children=n}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.children.forEach(function(e){e&&(n+=e.layout(t+n))}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return this.children.forEach(function(e){e&&(n+=e.write(t))}),n},t}(m);d.BoxContainerBox=y;var b=function(e){function t(t,n,r,o){e.call(this,"moov",i([t],n,[r,o])),this.header=t,this.tracks=n,this.extendsBox=r,this.userData=o}return h(t,e),t}(y);d.MovieBox=b;var w=function(e){function t(t,n,i,r,o,s,a,l){void 0===r&&(r=1),void 0===o&&(o=1),void 0===s&&(s=f),void 0===a&&(a=p),void 0===l&&(l=p),e.call(this,"mvhd",0,0),this.timescale=t,this.duration=n,this.nextTrackId=i,this.rate=r,this.volume=o,this.matrix=s,this.creationTime=a,this.modificationTime=l}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+16+4+2+2+8+36+24+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,s(this.creationTime)),r(t,this.offset+n+4,s(this.modificationTime)),r(t,this.offset+n+8,this.timescale),r(t,this.offset+n+12,this.duration),n+=16,r(t,this.offset+n,a(this.rate)),r(t,this.offset+n+4,u(this.volume)<<16),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),n+=16,r(t,this.offset+n,a(this.matrix[0])),r(t,this.offset+n+4,a(this.matrix[1])),r(t,this.offset+n+8,a(this.matrix[2])),r(t,this.offset+n+12,a(this.matrix[3])),r(t,this.offset+n+16,a(this.matrix[4])),r(t,this.offset+n+20,a(this.matrix[5])),r(t,this.offset+n+24,l(this.matrix[6])),r(t,this.offset+n+28,l(this.matrix[7])),r(t,this.offset+n+32,l(this.matrix[8])),n+=36,r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),r(t,this.offset+n+16,0),r(t,this.offset+n+20,0),n+=24,r(t,this.offset+n,this.nextTrackId),n+=4},t}(_);d.MovieHeaderBox=w,function(e){e[e.TRACK_ENABLED=1]="TRACK_ENABLED",e[e.TRACK_IN_MOVIE=2]="TRACK_IN_MOVIE",e[e.TRACK_IN_PREVIEW=4]="TRACK_IN_PREVIEW"}(d.TrackHeaderFlags||(d.TrackHeaderFlags={}));var x=(d.TrackHeaderFlags,function(e){function t(t,n,i,r,o,s,a,l,u,c,d){void 0===a&&(a=0),void 0===l&&(l=0),void 0===u&&(u=f),void 0===c&&(c=p),void 0===d&&(d=p),e.call(this,"tkhd",0,t),this.trackId=n,this.duration=i,this.width=r,this.height=o,this.volume=s,this.alternateGroup=a,this.layer=l,this.matrix=u,this.creationTime=c,this.modificationTime=d}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+20+8+6+2+36+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,s(this.creationTime)),r(t,this.offset+n+4,s(this.modificationTime)),r(t,this.offset+n+8,this.trackId),r(t,this.offset+n+12,0),r(t,this.offset+n+16,this.duration),n+=20,r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,this.layer<<16|this.alternateGroup),r(t,this.offset+n+12,u(this.volume)<<16),n+=16,r(t,this.offset+n,a(this.matrix[0])),r(t,this.offset+n+4,a(this.matrix[1])),r(t,this.offset+n+8,a(this.matrix[2])),r(t,this.offset+n+12,a(this.matrix[3])),r(t,this.offset+n+16,a(this.matrix[4])),r(t,this.offset+n+20,a(this.matrix[5])),r(t,this.offset+n+24,l(this.matrix[6])),r(t,this.offset+n+28,l(this.matrix[7])),r(t,this.offset+n+32,l(this.matrix[8])),n+=36,r(t,this.offset+n,a(this.width)),r(t,this.offset+n+4,a(this.height)),n+=8},t}(_));d.TrackHeaderBox=x;var k=function(e){function t(t,n,i,r,o){void 0===i&&(i="unk"),void 0===r&&(r=p),void 0===o&&(o=p),e.call(this,"mdhd",0,0),this.timescale=t,this.duration=n,this.language=i,this.creationTime=r,this.modificationTime=o}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+16+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,s(this.creationTime)),r(t,this.offset+n+4,s(this.modificationTime)),r(t,this.offset+n+8,this.timescale),r(t,this.offset+n+12,this.duration),r(t,this.offset+n+16,c(this.language)<<16),n+20},t}(_);d.MediaHeaderBox=k;var S=function(e){function t(t,i){e.call(this,"hdlr",0,0),this.handlerType=t,this.name=i,this._encodedName=n(this.name)}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8+12+(this._encodedName.length+1),this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,0),r(t,this.offset+n+4,o(this.handlerType)),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),r(t,this.offset+n+16,0),n+=20,t.set(this._encodedName,this.offset+n),t[this.offset+n+this._encodedName.length]=0,n+=this._encodedName.length+1},t}(_);d.HandlerBox=S;var T=function(e){function t(t){void 0===t&&(t=0),e.call(this,"smhd",0,0),this.balance=t}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,u(this.balance)<<16),n+4},t}(_);d.SoundMediaHeaderBox=T;var E=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=g),e.call(this,"vmhd",0,0),this.graphicsMode=t,this.opColor=n}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.graphicsMode<<16|this.opColor[0]),r(t,this.offset+n+4,this.opColor[1]<<16|this.opColor[2]),n+8},t}(_);d.VideoMediaHeaderBox=E,d.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var A=function(e){function t(t,i){void 0===i&&(i=null),e.call(this,"url ",0,t),this.location=i,t&d.SELF_CONTAINED_DATA_REFERENCE_FLAG||(this._encodedLocation=n(i))}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this._encodedLocation&&(n+=this._encodedLocation.length+1),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return this._encodedLocation&&(t.set(this._encodedLocation,this.offset+n),t[this.offset+n+this._encodedLocation.length]=0,n+=this._encodedLocation.length),n},t}(_);d.DataEntryUrlBox=A;var C=function(e){function t(t){e.call(this,"dref",0,0),this.entries=t}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4;return this.entries.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.entries.length),this.entries.forEach(function(e){n+=e.write(t)}),n},t}(_);d.DataReferenceBox=C;var I=function(e){function t(t){e.call(this,"dinf",[t]),this.dataReference=t}return h(t,e),t}(y);d.DataInformationBox=I;var D=function(e){function t(t){e.call(this,"stsd",0,0),this.entries=t}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return n+=4,this.entries.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.entries.length),n+=4,this.entries.forEach(function(e){n+=e.write(t)}),n},t}(_);d.SampleDescriptionBox=D;var P=function(e){function t(t,n,i,r,o){e.call(this,"stbl",[t,n,i,r,o]),this.sampleDescriptions=t,this.timeToSample=n,this.sampleToChunk=i,this.sampleSizes=r,this.chunkOffset=o}return h(t,e),t}(y);d.SampleTableBox=P;var M=function(e){function t(t,n,i){e.call(this,"minf",[t,n,i]),this.header=t,this.info=n,this.sampleTable=i}return h(t,e),t}(y);d.MediaInformationBox=M;var R=function(e){function t(t,n,i){e.call(this,"mdia",[t,n,i]),this.header=t,this.handler=n,this.info=i}return h(t,e),t}(y);d.MediaBox=R;var L=function(e){function t(t,n){e.call(this,"trak",[t,n]),this.header=t,this.media=n}return h(t,e),t}(y);d.TrackBox=L;var F=function(e){function t(t,n,i,r,o){e.call(this,"trex",0,0),this.trackId=t,this.defaultSampleDescriptionIndex=n,this.defaultSampleDuration=i,this.defaultSampleSize=r,this.defaultSampleFlags=o}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+20,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.trackId),r(t,this.offset+n+4,this.defaultSampleDescriptionIndex),r(t,this.offset+n+8,this.defaultSampleDuration),r(t,this.offset+n+12,this.defaultSampleSize),r(t,this.offset+n+16,this.defaultSampleFlags),n+20},t}(_);d.TrackExtendsBox=F;var O=function(e){function t(t,n,r){e.call(this,"mvex",i([t],n,[r])),this.header=t,this.tracDefaults=n,this.levels=r}return h(t,e),t}(y);d.MovieExtendsBox=O;var N=function(e){function t(t,n){e.call(this,"meta",0,0),this.handler=t,this.otherBoxes=n}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return n+=this.handler.layout(t+n),this.otherBoxes.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return n+=this.handler.write(t),this.otherBoxes.forEach(function(e){n+=e.write(t)}),n},t}(_);d.MetaBox=N;var B=function(e){function t(t){e.call(this,"mfhd",0,0),this.sequenceNumber=t}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.sequenceNumber),n+4},t}(_);d.MovieFragmentHeaderBox=B,function(e){e[e.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",e[e.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",e[e.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",e[e.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",e[e.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT"}(d.TrackFragmentFlags||(d.TrackFragmentFlags={}));var $=d.TrackFragmentFlags,U=function(e){function t(t,n,i,r,o,s,a){e.call(this,"tfhd",0,t),this.trackId=n,this.baseDataOffset=i,this.sampleDescriptionIndex=r,this.defaultSampleDuration=o,this.defaultSampleSize=s,this.defaultSampleFlags=a}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4,i=this.flags;return i&$.BASE_DATA_OFFSET_PRESENT&&(n+=8),i&$.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(n+=4),i&$.DEFAULT_SAMPLE_DURATION_PRESENT&&(n+=4),i&$.DEFAULT_SAMPLE_SIZE_PRESENT&&(n+=4),i&$.DEFAULT_SAMPLE_FLAGS_PRESENT&&(n+=4),
this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t),i=this.flags;return r(t,this.offset+n,this.trackId),n+=4,i&$.BASE_DATA_OFFSET_PRESENT&&(r(t,this.offset+n,0),r(t,this.offset+n+4,this.baseDataOffset),n+=8),i&$.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(r(t,this.offset+n,this.sampleDescriptionIndex),n+=4),i&$.DEFAULT_SAMPLE_DURATION_PRESENT&&(r(t,this.offset+n,this.defaultSampleDuration),n+=4),i&$.DEFAULT_SAMPLE_SIZE_PRESENT&&(r(t,this.offset+n,this.defaultSampleSize),n+=4),i&$.DEFAULT_SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,this.defaultSampleFlags),n+=4),n},t}(_);d.TrackFragmentHeaderBox=U;var z=function(e){function t(t){e.call(this,"tfdt",0,0),this.baseMediaDecodeTime=t}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.baseMediaDecodeTime),n+4},t}(_);d.TrackFragmentBaseMediaDecodeTimeBox=z;var H=function(e){function t(t,n,i){e.call(this,"traf",[t,n,i]),this.header=t,this.decodeTime=n,this.run=i}return h(t,e),t}(y);d.TrackFragmentBox=H,function(e){e[e.IS_LEADING_MASK=201326592]="IS_LEADING_MASK",e[e.SAMPLE_DEPENDS_ON_MASK=50331648]="SAMPLE_DEPENDS_ON_MASK",e[e.SAMPLE_DEPENDS_ON_OTHER=16777216]="SAMPLE_DEPENDS_ON_OTHER",e[e.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]="SAMPLE_DEPENDS_ON_NO_OTHERS",e[e.SAMPLE_IS_DEPENDED_ON_MASK=12582912]="SAMPLE_IS_DEPENDED_ON_MASK",e[e.SAMPLE_HAS_REDUNDANCY_MASK=3145728]="SAMPLE_HAS_REDUNDANCY_MASK",e[e.SAMPLE_PADDING_VALUE_MASK=917504]="SAMPLE_PADDING_VALUE_MASK",e[e.SAMPLE_IS_NOT_SYNC=65536]="SAMPLE_IS_NOT_SYNC",e[e.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]="SAMPLE_DEGRADATION_PRIORITY_MASK"}(d.SampleFlags||(d.SampleFlags={}));d.SampleFlags;!function(e){e[e.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",e[e.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",e[e.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",e[e.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_COMPOSITION_TIME_OFFSET=2048]="SAMPLE_COMPOSITION_TIME_OFFSET"}(d.TrackRunFlags||(d.TrackRunFlags={}));var j=d.TrackRunFlags,V=function(e){function t(t,n,i,r){e.call(this,"trun",1,t),this.samples=n,this.dataOffset=i,this.firstSampleFlags=r}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4,i=this.samples.length,r=this.flags;return r&j.DATA_OFFSET_PRESENT&&(n+=4),r&j.FIRST_SAMPLE_FLAGS_PRESENT&&(n+=4),r&j.SAMPLE_DURATION_PRESENT&&(n+=4*i),r&j.SAMPLE_SIZE_PRESENT&&(n+=4*i),r&j.SAMPLE_FLAGS_PRESENT&&(n+=4*i),r&j.SAMPLE_COMPOSITION_TIME_OFFSET&&(n+=4*i),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t),i=this.samples.length,o=this.flags;r(t,this.offset+n,i),n+=4,o&j.DATA_OFFSET_PRESENT&&(r(t,this.offset+n,this.dataOffset),n+=4),o&j.FIRST_SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,this.firstSampleFlags),n+=4);for(var s=0;i>s;s++){var a=this.samples[s];o&j.SAMPLE_DURATION_PRESENT&&(r(t,this.offset+n,a.duration),n+=4),o&j.SAMPLE_SIZE_PRESENT&&(r(t,this.offset+n,a.size),n+=4),o&j.SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,a.flags),n+=4),o&j.SAMPLE_COMPOSITION_TIME_OFFSET&&(r(t,this.offset+n,a.compositionTimeOffset),n+=4)}return n},t}(_);d.TrackRunBox=V;var q=function(e){function t(t,n){e.call(this,"moof",i([t],n)),this.header=t,this.trafs=n}return h(t,e),t}(y);d.MovieFragmentBox=q;var W=function(e){function t(t){e.call(this,"mdat"),this.chunks=t}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.chunks.forEach(function(e){n+=e.length}),this.size=n},t.prototype.write=function(t){var n=this,i=e.prototype.write.call(this,t);return this.chunks.forEach(function(e){t.set(e,n.offset+i),i+=e.length},this),i},t}(m);d.MediaDataBox=W;var G=function(e){function t(t,n){e.call(this,t),this.dataReferenceIndex=n}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,0),r(t,this.offset+n+4,this.dataReferenceIndex),n+8},t}(m);d.SampleEntry=G;var Y=function(e){function t(t,n,i,r,o,s){void 0===i&&(i=2),void 0===r&&(r=16),void 0===o&&(o=44100),void 0===s&&(s=null),e.call(this,t,n),this.channelCount=i,this.sampleSize=r,this.sampleRate=o,this.otherBoxes=s}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,this.channelCount<<16|this.sampleSize),r(t,this.offset+n+12,0),r(t,this.offset+n+16,this.sampleRate<<16),n+=20,this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.write(t)}),n},t}(G);d.AudioSampleEntry=Y,d.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var K=function(e){function t(t,n,i,r,o,s,a,l,u,c){if(void 0===o&&(o=""),void 0===s&&(s=72),void 0===a&&(a=72),void 0===l&&(l=1),void 0===u&&(u=d.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===c&&(c=null),e.call(this,t,n),this.width=i,this.height=r,this.compressorName=o,this.horizResolution=s,this.vertResolution=a,this.frameCount=l,this.depth=u,this.otherBoxes=c,o.length>31)throw new Error("invalid compressor name")}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),n+=16,r(t,this.offset+n,this.width<<16|this.height),r(t,this.offset+n+4,a(this.horizResolution)),r(t,this.offset+n+8,a(this.vertResolution)),n+=12,r(t,this.offset+n,0),r(t,this.offset+n+4,this.frameCount<<16),n+=6,t[this.offset+n]=this.compressorName.length;for(var i=0;31>i;i++)t[this.offset+n+i+1]=i<this.compressorName.length?127&this.compressorName.charCodeAt(i):0;return n+=32,r(t,this.offset+n,this.depth<<16|65535),n+=4,this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.write(t)}),n},t}(G);d.VideoSampleEntry=K;var Q=function(e){function t(t,n){e.call(this,t),this.data=n}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+this.data.length,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return t.set(this.data,this.offset+n),n+this.data.length},t}(m);d.RawTag=Q},function(e,t,n){(function(t){var i,r=n(74),o=n(69),s=(o.BaseTransform,n(108));n(109);e.exports=i=function(){o.BaseParser.prototype.constructor.apply(this,arguments),this.parser=new s,this.parser.onFrame=this._onMp3Frame.bind(this),this.parser.onNoise=this._onNoise.bind(this),this.parser.onClose=this._onClose.bind(this),this._sampleRate=0,this._bitRate=0,this._timestamp=0},i.prototype=o.createBaseParser({constructor:i,_onMp3Frame:function(e,n,i){r("Found frame length "+e.length+" bitRate="+n+", sampleRate="+i);var s=new t(e),a=1152;s.meta={mimeType:"audio/mpeg",codecId:2,channels:2,bitRate:n,sampleRate:i,sampleSize:16},s.duration=a,s.timestamp=this._timestamp,this.enqueue(new o.Transfer(s,"buffer")),this._bitRate=n,this._timestamp+=a},_onNoise:function(){r("mp3 has noise")},_onClose:function(){r("parser closed")},_parse:function(e){return r("parse called"),e.data.empty?(r("empty transfer"),void this.enqueue(e)):void this.parser.push(new Uint8Array(e.data))}})}).call(t,n(70).Buffer)},function(e,t,n){var i=n(74),r=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],o=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s=function(){function e(){this.buffer=null,this.bufferSize=0}return e.prototype.push=function(e){var t;if(this.bufferSize>0){var n=e.length+this.bufferSize;if(!this.buffer||this.buffer.length<n){var r=new Uint8Array(n);this.bufferSize>0&&r.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=r}this.buffer.set(e,this.bufferSize),this.bufferSize=n,e=this.buffer,t=n}else t=e.length;i("push "+t);for(var o,s=0;t>s&&(o=this._parse(e,s,t))>0;)s+=o;var a=t-s;a>0&&(!this.buffer||this.buffer.length<a?this.buffer=new Uint8Array(e.subarray(s,t)):this.buffer.set(e.subarray(s,t))),this.bufferSize=a},e.prototype._parse=function(e,t,n){if(i("_parse"),t+2>n)return-1;if(255===e[t]||224===(224&e[t+1])){if(t+24>n)return-1;var s=e[t+1]>>3&3,a=e[t+1]>>1&3,l=e[t+2]>>4&15,u=e[t+2]>>2&3,c=!!(2&e[t+2]);if(1!==s&&0!==l&&15!==l&&3!==u){var d=3===s?3-a:3===a?3:4,h=1e3*r[14*d+l-1],p=3===s?0:2===s?1:2,f=o[3*p+u],g=c?1:0,m=3===a?(3===s?12:6)*h/f+g<<2:(3===s?144:72)*h/f+g|0;return t+m>n?-1:(this.onFrame&&(i("onFrame"),this.onFrame(e.subarray(t,t+m),h,f)),m)}}for(var _=t+2;n>_;){if(255===e[_-1]&&224===(224&e[_]))return this.onNoise&&this.onNoise(e.subarray(t,_-1)),_-t-1;_++}return-1},e.prototype.close=function(){this.bufferSize>0&&this.onNoise&&this.onNoise(this.buffer.subarray(0,this.bufferSize)),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()},e}();e.exports=s},function(e,t){var n=1e9;e.exports={TIMESCALE_SECONDS:n}},function(e,t,n){var i,r=n(111),o=n(69),s=o.BaseSink,a=n(112);e.exports=i=function(e){if(s.prototype.constructor.call(this),!r.haveMediaSourceSupportMimeType(e))throw new Error("Local MediaSource doesn't support provided MIME type: "+e);var t;t=arguments.length>1?Array.prototype.slice.call(arguments):e instanceof Array?e:[e],this.mimeTypes=t,this.mediaSource=new MediaSource,this.mseWriter=new a(this.mediaSource),this.dataSources=[],this.selectedDataSourceIndex=0,this.mimeTypes.forEach(function(e){var t={mimeType:e};this.mseWriter.listen(t),this.dataSources.push(t)}.bind(this))},i.prototype=o.createBaseSink({constructor:i,_onData:function(){var e=this.dataSources[this.selectedDataSourceIndex];if(!e||!e.onData)throw new Error("DataSource is not existing or has no onData function defined");var t=this.dequeue();t&&e.onData(t.data)},getMediaSourceUrl:function(){return URL.createObjectURL(this.mediaSource)}})},function(e,t){var n;e.exports=n={haveGlobalWindow:function(){return"undefined"!=typeof window},haveMediaSourceExtensions:function(){return n.haveGlobalWindow()&&window.MediaSource},haveMediaSourceSupportMimeType:function(e){return n.haveMediaSourceExtensions()&&window.MediaSource.isTypeSupported(e)}}},function(e,t){var n=function(){function e(e,t){this.mediaSource=e,this.dataSource=t,this.dataSource.onData=this.pushData.bind(this),this.updateEnabled=!1,this.buffer=[],this.sourceBuffer=null,this.sourceBufferUpdatedBound=null}return e.prototype.allowWriting=function(){this.updateEnabled=!0,this.update()},e.prototype.pushData=function(e){this.buffer.push(e),this.update()},e.prototype.update=function(){if(this.updateEnabled&&0!==this.buffer.length){this.sourceBuffer||(this.sourceBuffer=this.mediaSource.addSourceBuffer(this.dataSource.mimeType),this.sourceBufferUpdatedBound=this._sourceBufferUpdated.bind(this),this.sourceBuffer.addEventListener("update",this.sourceBufferUpdatedBound)),this.updateEnabled=!1;var e=this.buffer.shift();if(null===e)return void this.sourceBuffer.removeEventListener("update",this.sourceBufferUpdatedBound);e.timestamp&&(this.sourceBuffer.timestampOffset=e.timestamp/1e9),this.sourceBuffer.appendBuffer(e)}},e.prototype._sourceBufferUpdated=function(e){this.updateEnabled=!0,this.update()},e.prototype.finish=function(){this.buffer.push(null),this.update()},e}(),i=function(){function e(e){this.bufferWriters=[],this.mediaSource=e,this.mediaSourceOpened=!1,this.mediaSource.addEventListener("sourceopen",function(e){this.mediaSourceOpened=!0,this.bufferWriters.forEach(function(e){e.allowWriting()})}.bind(this)),this.mediaSource.addEventListener("sourceend",function(e){this.mediaSourceOpened=!1}.bind(this))}return e.prototype.listen=function(e){var t=new n(this.mediaSource,e);this.bufferWriters.push(t),this.mediaSourceOpened&&t.allowWriting()},e}();e.exports=i},function(e,t,n){var i,r,o=n(69);r=function(e){o.BasePushSrc.prototype.constructor.call(this);var t=this.req=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(e){this.enqueue(new o.Transfer(new Uint8Array(t.response),"binary")),this.enqueue(new o.Transfer(null,"binary"))}.bind(this),t.send()},r.prototype=o.createBasePushSrc({constructor:r}),e.exports=i={Src:r}},function(e,t,n){var i,r,o,s=n(69),a=n(115);n(76);r=function(e,t){s.prototype.constructor.call(this);var n=a.createReadStream(e,t);this.on("end",function(){n.close()}),this.addOutput(n)},r.prototype=s.create({constructor:r}),o=function(e,t){s.prototype.constructor.call(this);var n=a.createWriteStream(e,t);this.on("finish",function(){n.close()}),this.addInput(n)},o.prototype=s.create({constructor:o}),e.exports=i={Src:r,Sink:o}},function(e,t,n){var i=n(111);e.exports=i.haveGlobalWindow()?new(n(116)):n(!function(){var e=new Error('Cannot find module "fs"');throw e.code="MODULE_NOT_FOUND",e}())},function(e,t,n){!function(t){e.exports=t()}(function(){function e(){return!1}function t(e){return!(!(e&&e.data instanceof Object)||n(e))}function n(e){return!!(e&&e.data instanceof ArrayBuffer)}function i(e,n){var i,r=e.length,o=n;for(i=0;r>i;++i){if(!t(o))throw new Error("ENOENT");o=o.data[e[i]]}return o}String.prototype.trim||!function(){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(e,"")}}();var r={utf8:"utf-8",utf16le:"utf-16le",utf16be:"utf-16be"},o=function(e){var t=Date.now();this.root={mtime:t,ctime:t,atime:t,data:{}},this.fnDone=function(){var t=arguments;"function"==typeof e&&setTimeout(function(){e.apply(null,t)},0)}};return o.prototype.arrayBufferToString=function(e,t){return"undefined"==typeof TextDecoder?String.fromCharCode.apply(null,new Uint16Array(e)):(t=r[t]||"utf8",new TextDecoder(t).decode(new DataView(e)))},o.prototype.stringToArrayBuffer=function(e,t){var n;if(t=r[t]||"utf8","undefined"==typeof TextEncoder){n=new ArrayBuffer(2*e.length);for(var i=new Uint16Array(n),o=0,s=e.length;s>o;++o)i[o]=e.charCodeAt(o)}else n=new TextEncoder(t).encode(e).buffer;return n},o.prototype.getNode=function(e){return i(this.parsePath(e),this.root)},o.prototype.joinPath=function(){var e=[],t=arguments||[];return e=this.parsePath(Array.prototype.slice.call(t).join("/")),("/"===t[0][0]?"/":"")+e.join("/")},o.prototype.parsePath=function(e){var t=[];return e=e||"/",e.split(/\/+/).forEach(function(e){e=e.trim(),e.length&&"."!==e&&(".."===e?t.pop():t.push(e))}),t},o.prototype.normalizePath=function(e){return"/"+this.parsePath(e).join("/")},o.prototype.dirname=function(e){var t=this.parsePath(e);return t=t.slice(0,t.length-1),"/"+t.join("/")},o.prototype.basename=function(e){var t=this.parsePath(e);return t.length?t.pop():""},o.prototype.fileSizeSI=function(e,t,n,i,r){return(t=Math,n=t.log,i=1e3,r=n(e)/n(i)|0,e/t.pow(i,r)).toFixed(r?2:0)+" "+(r?"kMGTPEZY"[--r]+"B":"Bytes")},o.prototype.fileSizeIEC=function(e,t,n,i,r){return(t=Math,n=t.log,i=1024,r=n(e)/n(i)|0,e/t.pow(i,r)).toFixed(r?2:0)+" "+(r?"KMGTPEZY"[--r]+"iB":"Bytes")},o.prototype.statSync=function(n){var r=this.parsePath(n),o=i(r,this.root),s=t(o);if(!o||!o.data)throw new Error("ENOENT");return this.fnDone("stat",n),{size:s?Object.keys(o.data).length:o.data.byteLength,ctime:new Date(o.ctime),mtime:new Date(o.mtime),atime:new Date(o.atime),isFile:function(){return!s},isDirectory:function(){return s},isBlockDevice:e,isCharacterDevice:e,isSymbolicLink:e,isFIFO:e,isSocket:e}},o.prototype.existsSync=function(e){var n,i=this.parsePath(e),r=i.length,o=this.root;for(n=0;r>n;++n){if(!t(o))return this.fnDone("exists",e),!1;o=o.data[i[n]]}return this.fnDone("exists",e),!!o},o.prototype.mkdirSync=function(e){var n=this.parsePath(e),r=i(n.slice(0,n.length-1),this.root),o=Date.now();if(!n.length||!t(r))throw new Error("ENODIR");return r.data[n[n.length-1]]={data:{},ctime:o,mtime:o,atime:o},r.mtime=o,this.fnDone("mkdir",e),this},o.prototype.mkdirpSync=function(e){var r,o,s,a=this.parsePath(e),l=a.length;if(!a.length)throw new Error("ENODIR");for(o=0;l>o;++o){if(r=a.slice(0,o+1),s=i(r,this.root),n(s))throw new Error("ENODIR");t(s)||this.mkdirSync(r.join("/"))}return this.fnDone("mkdirp",e),this},o.prototype.readdirSync=function(e){var n=this.parsePath(e),r=i(n,this.root);if(!t(r))throw new Error("ENODIR");return r.atime=Date.now(),this.fnDone("readdir",e),Object.keys(r.data)},o.prototype.rmdirSync=function(e){var n=this.parsePath(e),r=i(n,this.root),o=n.pop(),s=i(n,this.root);if(!t(r))throw new Error("ENODIR");if(Object.keys(r.data).length)throw new Error("ENOTEMPTY");return delete s.data[o],s.mtime=Date.now(),this.fnDone("rmdir",e),this},o.prototype.unlinkSync=function(e){var t=this.dirname(e),n=this.basename(e),r=i(this.parsePath(t),this.root);return delete r.data[n],r.mtime=Date.now(),this.fnDone("unlink",e),this},o.prototype.rmrfSync=function(e){var n=this.parsePath(e),r=n.pop(),o=i(n,this.root);if(!t(o))throw new Error("ENODIR");return r?delete o.data[r]:o.data={},o.mtime=Date.now(),this.fnDone("rmrf",e),this},o.prototype.writeFileSync=function(e,n,r){var o,s,a=this.parsePath(e),l=a.pop(),u=this.existsSync(e),c=i(a,this.root);if(!t(c))throw new Error("ENODIR");if(!l)throw new Error("EINVALIDPATH");return"string"==typeof r&&(r={encoding:r}),r=r||{encoding:null},o="string"==typeof n?this.stringToArrayBuffer(n,r.encoding):n,s=Date.now(),u?(c.data[l].data=o,c.data[l].atime=s,c.data[l].mtime=s):(c.data[l]={data:o,ctime:s,mtime:s,atime:s},c.mtime=s),c.atime=s,this.fnDone("writeFile",e),this},o.prototype.readFileSync=function(e,t){var r=this.parsePath(e),o=i(r,this.root);if("string"==typeof t&&(t={encoding:t}),t=t||{encoding:null},!n(o))throw new Error("ENOENT");return o.atime=Date.now(),this.fnDone("readFile",e),t.encoding?this.arrayBufferToString(o.data,t.encoding):o.data},o.prototype.renameSync=function(e,n){var r=this.parsePath(e),o=i(r,this.root),s=i(r.slice(0,r.length-1),this.root),a=r[r.length-1],l=this.parsePath(n),u=i(l,this.root),c=i(l.slice(0,l.length-1),this.root),d=l[l.length-1],h=Date.now();if(!r.length||!l.length)throw new Error("ENOENT");if(!t(s||!t(c)))throw new Error("ENODIR");if(u)throw new Error("EEXISTS");return c.data[d]=u=o,u.ctime=h,c.mtime=h,delete s.data[a],s.mtime=h,this.fnDone("rename",{oldPath:e,newPath:n}),this},["stat","exists","readdir","mkdirp","mkdir","rmdir","rmrf","unlink"].forEach(function(e){o.prototype[e]=function(t,n){var i;try{i=this[e+"Sync"](t)}catch(r){return n(r)}return n(null,i)}}),["writeFile","readFile"].forEach(function(e){o.prototype[e]=function(t,n,i){var r;i||(i=n,n=void 0);try{r=this[e+"Sync"](t,n)}catch(o){return i(o)}return i(null,r)}}),["rename"].forEach(function(e){o.prototype[e]=function(t,n,i){var r;try{r=this[e+"Sync"](t,n)}catch(o){return i(o)}return i(null,r)}}),o})},function(e,t){var n={HTTP:"http",RTMP:"rtmp",HLS:"hls"};e.exports=n},function(e,t){e.exports={AAC:"audio/aac",M3U8:"application/x-mpegURL",HLS:"application/vnd.apple.mpegurl",MP4A:"audio/mp4",MP3:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBMA:"audio/webm",getTypeByExtension:function(e){var t={mp3:this.MP3,aac:this.AAC,mp4:this.MP4A,mp4a:this.MP4A,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return t[e]||null}}},function(e,t,n,i,r){function o(e,t){return null==t?e:s(t,a(t),e)}var s=n(i),a=n(r);e.exports=o},function(e,t,n,i,r,o){function s(e){return function(t){return null==t?void 0:t[e]}}function a(e){return null!=e&&u(w(e))}function l(e,t){return e="number"==typeof e||m.test(e)?+e:-1,t=null==t?b:t,e>-1&&e%1==0&&t>e}function u(e){return"number"==typeof e&&e>-1&&e%1==0&&b>=e}function c(e){for(var t=h(e),n=t.length,i=n&&e.length,r=!!i&&u(i)&&(g(e)||f(e)),o=-1,s=[];++o<n;){var a=t[o];(r&&l(a,i)||v.call(e,a))&&s.push(a)}return s}function d(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if(null==e)return[];d(e)||(e=Object(e));var t=e.length;t=t&&u(t)&&(g(e)||f(e))&&t||0;for(var n=e.constructor,i=-1,r="function"==typeof n&&n.prototype===e,o=Array(t),s=t>0;++i<t;)o[i]=i+"";for(var a in e)s&&l(a,t)||"constructor"==a&&(r||!v.call(e,a))||o.push(a);return o}var p=n(i),f=n(r),g=n(o),m=/^\d+$/,_=Object.prototype,v=_.hasOwnProperty,y=p(Object,"keys"),b=9007199254740991,w=s("length"),x=y?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&a(e)?c(e):d(e)?y(e):[]}:c;e.exports=x},function(e,t,n,i){function r(e,t){return f(e,t,d)}function o(e){return function(t){return null==t?void 0:t[e]}}function s(e,t){return function(n,i){var r=n?g(n):0;if(!l(r))return e(n,i);for(var o=t?r:-1,s=u(n);(t?o--:++o<r)&&i(s[o],o,s)!==!1;);return n}}function a(e){return function(t,n,i){for(var r=u(t),o=i(t),s=o.length,a=e?s:-1;e?a--:++a<s;){var l=o[a];if(n(r[l],l,r)===!1)break}return t}}function l(e){return"number"==typeof e&&e>-1&&e%1==0&&h>=e}function u(e){return c(e)?e:Object(e)}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var d=n(i),h=9007199254740991,p=s(r),f=a(),g=o("length");e.exports=p}]))},function(e,t,n){function i(e,t,n){function i(){be&&(F()?(me("Init in single connection mode",ge),pe&&R(),re(),ie()?(me("Attaching to already existing connection",ne()),$()):(me("Becoming connection owner"),J(),U())):(me("Init in plain mode"),U()))}function s(){be||(me("Reconnecting"),be=!0,i(),X("meta",{connected:be}))}function c(){be&&(me("Disconnecting"),be=!1,I(),X("meta",{connected:be}))}function E(){D(),S=null}function C(){I(),i()}function I(){P(!1)}function D(){P(!0)}function P(e){me("Disposing instance: unregistering window events & clearing timeouts"),V(),g.clearTimeout(ve),O()?(me("Closing connection"),_e.dispose(),_e=null,F()&&(me("Clearing single connection lock if it is mine"),Z(),e&&(me("Broadcasting dispose event"),X(b,null)))):re()}function M(){pe&&xe.on(y,function(e){e===f.actions.HEARTBEAT&&R()})}function R(){g.clearTimeout(ve),ve=g.setTimeout(L,pe)}function L(){me("Heartbeat timed out. Will cleanup lock & re-init..."),ee(),C()}function F(){return!we}function O(){return!!_e}function N(){return O()&&F()}function B(){return!O()&&F()}function $(){h.on(v,function(e){xe.trigger(v,e)}).on(y,function(e){xe.trigger(y,e)}).on(b,function(){window.setTimeout(i,200*Math.random())})}function U(){if(_e)throw new Error("Can't initialize client twice");_e=new l({eventUrl:t,withCredentials:ae,log:me,json:le}),_e.on(_,z).on(v,K).on(m,H),j(),F()&&h.on(w,function(e){W(e)}).on(x,function(e){G(e)})}function z(e){me("Handling SSE open (first bit of event stream received)"),Q(_,_e.getEventSourceReadyState())}function H(e){me.error("Handling SSE error"),Q(m,e)}function j(){g.onbeforeunload&&(ye=g.onbeforeunload),g.onbeforeunload=q,ce&&(g.SCBananaBus=xe)}function V(){g.onbeforeunload=ye,ye=null,ce&&delete g.SCBananaBus}function q(){ye&&ye(),E()}function W(t){if("object"!=typeof t)throw new Error("BananaBus: can only publish Object-payload");B()?X(w,t):te()?(me("Sending payload to publish endpoint:",t),r(e,t,de)):(me.warn("Attempting to publish when not parent. Owner is %s. Giving up SSE connection.",ne()),C())}function G(e){B()?X(x,e):W(Y(e))}function Y(e){return A(e)?f.createMessage(he):void me("Can not generate payload for unknown event type:",e)}function K(e){if(!te())return me.warn("Received SSE event while not owner. Owner is %s. Giving up SSE connection.",ne()),void C();var t=f.parseAction(e);me("Handling SSE message"),Q(v,e),t&&Q(y,t)}function Q(e,t){xe.trigger(e,t),N()&&X(e,t)}function X(e,t){me.info("broadcasting",e,t),h.broadcast(e,t)}function J(){p.set(T,ge)}function Z(){te()&&ee()}function ee(){p.remove(T)}function te(){return ne()===ge}function ne(){return p.get(T)}function ie(){return!!ne()}function re(){h.off(w+" "+x+" "+v+" "+y+" "+b)}function oe(){h.on("meta",function(e){e.connected===!0?s():e.connected===!1&&c()})}if(!e||!t)throw new Error("Need a publish & event endpoint URL");var se=a({},k,n),ae=se.withCredentials,le=se.json,ue=se.singleConnection,ce=se.debug,de=se.authorization,he=se.registrationId,pe=se.heartbeatTimeoutMs,fe=se.connected,ge=Math.random().toString(16).substr(2),me=u({enabled:ce,buffer:!0,label:"trinity"}),_e=void 0,ve=void 0,ye=void 0,be=!!fe,we=!ue||!o(),xe=a({},d,{publish:W,publishEvent:G,dispose:E,disconnect:c,reconnect:s});return i(),ce&&xe.on(_,me.info.bind(null,"Connection open")).on(y,me.info.bind(null,"Received action")).on(m,me.error.bind(me,"Error")),M(),oe(),xe}function r(e,t,n){return s({url:e,data:JSON.stringify(t),type:"POST",dataType:"text",beforeSend:function(e){n&&e.setRequestHeader("Authorization","OAuth "+n)}})}function o(){try{var e=g.localStorage,t=Date.now();if(e.getItem)return e.setItem(t,t),e.removeItem(t),!0}catch(n){}return!1}n(2132);var s=n(1165),a=n(802),l=n(1169),u=n(1170),c=n(866),d=n(25),h=n(1167),p=n(1111),f=n(1168),g=window,m=c.ERROR,_=c.OPEN,v=c.DATA,y=c.ACTION,b=c.DISPOSE,w=c.PUBLISH,x=c.PUBLISH_EVENT,k={withCredentials:!1,json:!1,singleConnection:!0,debug:!1,authorization:null,registrationId:void 0,heartbeatTimeoutMs:null,connected:!0},S=void 0,T="trinity-owner";e.exports={SCMessages:f,Events:c,getInstance:function(e,t,n){return S||(S=i(e,t,n))}};var E=function(e){return Object.keys(e).map(function(t){return e[t]})},A=function(e){return function(t){return e.indexOf(t)>-1}}(E(f.events))},function(e,t,n){"use strict";e.exports=n(520).extend(n(925),{notificationType:"activities",parse:function(e){var t=e.collection;return t&&t.forEach(function(e){e.comment&&!e.comment.user&&(e.comment.user=e.user,e.comment.user_id=e.user.user_id),e.user&&(delete e.user.cpp,delete e.user.default_tracks_feedable),e.resource&&(delete e.resource.cpp,delete e.resource.default_tracks_feedable)}),t}},{hashFn:function(){return 1}})},function(e,t,n){"use strict";e.exports=n(72).extend(n(144),{model:n(541),defaults:{genre:null,chartKind:null},baseUrl:function(){var e=this.options,t=e.chartKind,i=e.genre;return this.getEndpointUrl("charts",{},{kind:t,genre:n(122).genreUrn(i)})},setup:function(){this.queryUrn=null,this.lastUpdated=null},parse:function(e){var t=e.query_urn,n=e.collection,i=e.last_updated,r=e.kind;return this.queryUrn=t,this.lastUpdated=i,n.map(function(e,t){var n=e.track,i=e.score;return"top"===r?{weekPlays:i,track:n}:"trending"===r?{track:n}:void 0})},getSourceInfo:function(){var e=this.queryUrn,t=this.options,n=t.genre,i=t.chartKind;return{type:"charts",genre:n,chartKind:i,queryUrn:e}},audibleAt:function(e){return n(3).isNumber(e)?this.at(e).soundModel:null}},{hashFn:function(e,t){return t.chartKind+"_"+t.genre}})},function(e,t,n){"use strict";e.exports=n(272).extend({baseUrl:function(){return n(62).stringify({path:["app","v2","tracks",this.options.sound_id,"comments"],query:{filter_replies:1}})},getCommentAtTimestamp:function(e,t){return t=n(3).isNumber(t)?t:0,this.find(function(i){var r=i.get("timestamp"),o=e-r;return 0===t?r===e:o>=0&&Math.abs(o)<=t&&r!==n(105).EMPTY_TIMESTAMP})||null},onCommentCreated:function(e){e.get("replyTo")||this.add(e,{at:0})}},{hashFn:function(e,t){return t&&t.sound_id||null}})},function(e,t,n){"use strict";e.exports=n(124).extend(n(428).withOptions({fields:["output"]}),{model:n(230),defaults:{limit:2e3,maxModels:null},setup:function(e){var t=e.query;n(124).prototype.setup.apply(this,arguments),this.setUserInput(t)},setupSources:function(){return[[new(n(411)),{maxModels:this.options.maxModels}],[new(n(877)),{maxModels:this.options.maxModels}]]},extractModel:function(e){switch(e.get("kind")){case"user":return new(n(230))({entity:n(3).clone(e.attributes),output:e.get("username"),highlights:[],kind:"following"});case"track":return new(n(230))({entity:n(3).clone(e.attributes),output:e.get("title"),highlights:[],kind:"like"});default:return!1}}},{prefetch:function(){n(411).prefetch(),n(877).prefetch()}})},function(e,t,n){"use strict";e.exports=n(72).extend({model:n(64),next_href:!1,lastFetchTime:Date.now()})},,,function(e,t,n){"use strict";function i(e){var t=e.target,i=this.find(function(e){return e.get("track_id")===t});i&&this.remove(i);var r=new(n(544))({track_id:t,played_at:Date.now()});r.release(),this.add(r,{at:0})}function r(){this.reset([])}e.exports=n(72).extend(n(144),{getSourceInfo:function(){return{type:"history"}},model:n(544),baseUrl:function(){return this.getEndpointUrl("playHistoryTracks")},setup:function(){this.listenTo(n(73),"addToPlayHistory",i),this.listenTo(n(73),"clearPlayHistory",r)},audibleAt:function(e){var t=this.at(e);return t&&t.sound}},{hashFn:function(){return 1}})},,,function(e,t,n){"use strict";e.exports=n(124).extend(n(144),{model:n(295),getSourceInfo:function(){return{type:"user-profile",resourceId:this.options.resource_id||this.options.userId,resourceType:"user"}},setupSources:function(){var e=[new(n(485))(null,{userId:this.options.resource_id||this.options.userId})],t=n(60).instances.get(this.options.userId),i=t&&t.getPerk("spotlight");return(i||void 0===i)&&e.unshift(new(n(309))(null,{userId:this.options.resource_id||this.options.userId})),e},audibleAt:function(e){var t=this.at(e);return t&&t.getAudible()}},{hashFn:function(e,t){return t.resource_id||t.userId}})},function(e,t,n){"use strict";e.exports=n(143).extend({model:n(85),defaults:{type:"playlists"},baseUrl:function(){return this.getEndpointUrl("userPlaylistsWithoutAlbums",{id:this.options.userId})}})},function(e,t,n){"use strict";e.exports=n(143).extend(n(926),{defaults:{type:"sounds"},baseUrl:function(){return this.getEndpointUrl("streamUserProfile",{id:this.options.userId})},setup:function(e){n(143).prototype.setup.call(this,e),this.isMe=n(63).currentUserId()===e.userId},parse:function(e){var t=e.collection,i=void 0===t?[]:t,r=n(63).currentUserId();return i.length&&!this.isMe&&(i=i.filter(function(e){return e.user&&(delete e.user.cpp,delete e.user.default_tracks_feedable),e.track||e.playlist&&e.playlist.track_count||e.playlist&&e.playlist.user_id===r})),i}})},,,,,function(e,t,n){(function(t){"use strict";function i(e,t,i){var r=a[t];if(r){var o=n(3).defaults({sound:e,model:e,type:r},i);e.trigger(r,o)}else switch(t){case s.STREAMS:case s.NO_STREAMS:e.setHasStreamInfo(this.hasNoConnection()||this.hasStreamInfo()),this.hasNoConnection()||this.hasStreamInfo()||e.isBlocked()||n(56).trigger("error:audio_no_streams");break;case s.NO_CONNECTION:n(56).trigger("error:audio_no_connection");break;case s.REGISTERED:e.onPlayRegistered();break;case s.DESTROYED:this.unregisterModelEventListener(e);break;case s.NO_PROTOCOL:case s.FLASH_NOT_LOADED:n(56).trigger("error:audio_support");break;case s.AUDIO_ERROR:n(56).trigger("error:audio_error");break;case s.FLASH_BLOCK:n(56).trigger("flash:block");break;case s.FLASH_UNBLOCK:n(56).trigger("flash:unblock");break;case s.GEO_BLOCKED:e.setHasStreamInfo(!1),n(56).trigger("geoBlocked",{sound:e})}}function r(e){return t.ajax(n(3).extend({},e,c()))}var o,s=n(271).Events,a=(o={},o[s.PLAY]="play",o[s.PLAY_START]="playStart",o[s.PAUSE]="pause",o[s.FINISH]="finish",o[s.SEEKED]="seeked",o[s.TIME]="time",o[s.BUFFERING_START]="buffering:start",o[s.BUFFERING_END]="buffering:end",o),l=3e3,u=3e3,c=(e.exports={createAudioFromSound:function(e){function t(){var t=new(n(271))(d,h);return e.on("change:policy",function(){return t.updateOptions(s())}),t}function o(){return n(3).assign(h,{url:e.get("url")}),new(n(498))(d,h)}function s(){var t=e.isSnippetized(),n=t?u:0;return{previewOnly:t,fadeOutDurationOnFinish:n}}var a=n(54).get("rollouts"),c=a.get("debug_audio_v2")||!1,d=n(1268).getInstance(c),h=n(3).assign(s(),{soundId:e.id,resourceId:e.resource_id,duration:e.getMediaDuration.bind(e),title:e.get("title"),streamUrlsEndpoint:e.url.bind(e,"streamsUrl"),asyncFetch:n(95).desktop,mediaSourceEnabled:!0,mseFirefox:!0,mseSafari:!1,debug:!0,eventLogger:n(163),logErrors:!0,ajax:r,fadeOutDurationOnConcurrentStreaming:l,fadeOutAlgo:n(271).FadeOutAlgos.EaseIn}),p=e.isExternal()?o():t();return p.registerModelEventListener(e,i),
p},toggleMute:function(e){n(271).toggleMute(e),n(498).toggleMute(e)},setVolume:function(e){n(271).setVolume(e),n(498).setVolume(e)}},n(3).memoize(function(){return{statusCode:n(3).mapObject(n(280),function(){return n(3).noop})}}))}).call(t,n(1))},function(e,t,n){"use strict";e.exports=n(108).extend({maxLength:22,message:n(51).t("Enter a buy-link title that is up to [[maxLength]] characters.")})},,,,,function(e,t,n){"use strict";e.exports=n(108).extend({maxLength:30,message:n(51).t("You can use up to [[maxLength]] tags.")})},function(e,t,n){"use strict";e.exports=n(1273).extend({check:function(e,t,n){n(!(e[0]&&e[1])||e[0]<e[1])}})},function(e,t,n){"use strict";function i(e){a=e,e&&(l=s.AudioManagerStates=e.States)}function r(e){var t=this,n=function(){return t.stopListening(t.controller)},i=function(e){switch(e){case l.IDLE:t._initializedAudio.resolve();break;case l.ENDED:t.pause(),t.trigger(u.FINISH),n();break;case l.ERROR:case l.DEAD:t.trigger(u.AUDIO_ERROR),n()}};return i(e),i}function o(){var e;return function(){e!==this.currentTime()&&(this.trigger(u.TIME),e=this.currentTime())}}var s,a,l,u=n(271).Events,c={muted:!1,volume:1};s=e.exports=function(e,t){if(!e)throw new Error("ExternalAudioAd: AudioManager instance must be set with `ExternalAudioAd.setAudioManager()` or passed via the constructor");if(!t.url||!t.duration)throw new Error("ExternalAudioAd: requires url and duration specified in constructor options");s.setAudioManager(e),this.options=n(3).extend({},t),this.id=this.options.resourceId||this.options.soundId,this.controller=null,this._intendToPlay=!1,this._initializedAudio=null},n(3).extend(s.prototype,n(22).Events,{constructor:s,initAudio:function(){var e=this;if(!this._initializedAudio){this._initializedAudio=n(55).defer().done(function(){return e.trigger(u.CREATED)});var t=this.controller=a.createAudioPlayer({id:this.id,src:this.options.url,duration:n(3).result(this.options.duration),mimeType:"audio/mpeg",forceSingle:this.options.useSinglePlayer});this.listenTo(t,"state-change",r.call(this,t.getState())),this.listenTo(t,"position-change",o())}return this._initializedAudio.promise()},play:function(e){var t=this;if(!this.isPlaying()){var i=e&&e.seek||this.currentTime();return e=n(3).extend({position:i},e),this._intendToPlay=!0,this.trigger(u.PLAY,e),this.initAudio().done(function(){t.controller.play(i),0===i&&t.trigger(u.PLAY_START,e)})}},pause:function(e){this.isPaused()||(this._intendToPlay=!1,this.trigger(u.PAUSE,n(3).extend({position:this.currentTime()},e)),this.controller&&this.controller.pause())},registerModelEventListener:function(e,t){this.on("all",t.bind(this,e))},isPaused:function(){return!this.isPlaying()},isPlaying:function(){return this._intendToPlay},currentTime:function(){return this.controller?this.controller.getCurrentPosition():0}}),n(3).extend(s,{setAudioManager:i,setAudioManagerOnce:n(3).once(i),Events:u,setVolume:function(e){c.volume=void 0===e?1:e,a&&a.setVolume(c.volume)},toggleMute:function(e){c.muted=void 0===e?!c.muted:!!e,a&&a.setVolume(c.muted?0:1)},getSettings:function(){return c},setSettings:function(e){c=n(3).extend({},e)}})},function(e,t,n){"use strict";e.exports={getAccessibleMarkup:function(e){return'<span class="sc-visuallyhidden">'+n(20).Utils.escapeExpression(e.screenreader)+"</span>"+(e.visible?'<span aria-hidden="true">'+n(20).Utils.escapeExpression(e.visible)+"</span>":"")}}},function(e,t){"use strict";function n(e,t){var n=Array.prototype.slice.call(e);return t%=n.length,0>t?n.push.apply(n,n.splice(0,-t)):n.unshift.apply(n,n.splice(-t)),n}function i(e,t){return s(e)&&s(t)?e===t?!0:o(e,t)&&o(t,e):!1}function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?a:arguments[2];if(!s(e)||!s(t))return!1;if(e===t)return!0;var i=e.length;if(t.length!==i)return!1;for(var r=0;i>r;++r)if(e[r]!==t[r]&&!n(e[r],t[r]))return!1;return!0}function o(e,t){for(var n=0;n<e.length;++n)if(-1===t.indexOf(e[n]))return!1;return!0}var s=Array.isArray,a=function(e,t){return e===t};e.exports={rotateArray:n,multisetCompare:i,equal:r,isSubset:o}},function(e,t){"use strict";var n=window.navigator;e.exports={getFlashPlugin:function(){var e,t,i,r;if("undefined"!=typeof window.ActiveXObject)try{r=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),r&&(e=r.GetVariable("$version"))}catch(o){}else n.plugins&&n.plugins.length>0&&(i="application/x-shockwave-flash",t=n.mimeTypes,t&&t[i]&&t[i].enabledPlugin&&t[i].enabledPlugin.description&&(e=t[i].enabledPlugin.description));return e},getFlashVersion:function(){var e=this.getFlashPlugin().match(/\d\S+/)[0].replace(/,/g,".").split(".");return[e[0],e[1]].join(".")},getOperatingSystem:function(){var e=n.appVersion;return-1!==e.indexOf("Win")?"Windows":-1!==e.indexOf("Mac")?"MacOS":-1!==e.indexOf("X11")?"UNIX":-1!==e.indexOf("Linux")?"Linux":"undefined-OS"},getBrowser:function(){var e,t,i=n.userAgent,r=i.match(/(opera|chrome|safari|firefox|msie|applewebkit)\/?\s*(\.?\d+(\.\d+)*)/i),o=i.match(/version\/([\.\d]+)/i);return t=null!==o?o[1]:r?r[2]:null,e=r?[r[1],t]:[n.appName,n.appVersion],e.join()}}},function(e,t,n){"use strict";var i=[37,38,39,40,9,35,36];e.exports={makeReadOnly:function(e){n(95).ios?e.on("keydown",function(e){return e.isMetaKey()&&!e.shiftKey||n(3).include(i,e.which)?!0:void e.preventDefault()}):e.attr("readOnly","readOnly")}}},function(e,t,n){(function(t){"use strict";function n(e){var t=e.eventType,n=void 0,i=void 0;return 0===t.indexOf("touch")?(n=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY):0===t.indexOf("mouse")?(n=e.clientX+window.pageXOffset,i=e.clientY+window.pageYOffset):(n=e.x,i=e.y),{x:n,y:i}}var i;e.exports={normalizeEvent:function(e){if(e.offsetX===i||e.offsetY===i){var r=t(e.target).offset(),o=n(e.originalEvent);e.pageX=o.x,e.pageY=o.y,e.offsetX=o.x-r.left,e.offsetY=o.y-r.top}return e}}}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var n;e.exports={getScrollbarSize:function(){if(void 0===n){var e,i,r;e=t('<div class="g-scrollable-inner" style="width:50px;height:50px;overflow:hidden; position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>'),t("body").append(e),i=t("div",e).innerWidth(),e.css("overflow","auto"),r=t("div",e).innerWidth(),e.remove(),n=i-r}return n}}}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function i(e){var t=this;return this._saving=!0,e.always(function(){t._saving=!1,t.saveCleanup()})}function r(){return this.get("editing")||this._saving?n(55).reject():n(55).resolve()}e.exports=new(n(21))(n(247).withOptions({read:"artwork_url"}),{requires:["getAudible","saveEdits"],_saving:!1,defaults:{saveCleanup:function(){},preSaveCheck:function(){return n(55).resolve()}},applyTo:function(e){e.fields=t.extend(!0,{},e.fields,{editing:{defaultValue:!0},errorMessage:{defaultValue:""}})},around:{saveEdits:function(e){var t=this,o=n(3).rest(arguments);return r.call(this).then(this.preSaveCheck.bind(this)).then(function(){return i.call(t,e.apply(t,o))})}},saveAudibleImage:function(e){var t,i=this.getImageFileInfo();return i.file?(e.setImageFile(i.file,i.source),e.on("imageTranscodingDone",function(e){this.unsetImageFile({silent:!0}),this.set("artwork_url",e.artwork_url)}),t=e.uploadImage()):t=n(55).resolve(),t},getErrorMessageTemplate:function(e,t,i){var r=e||"unknown",o={infoMessage:i&&" "+i+"."},s={track:{upload:n(51).t("Error uploading track.[[infoMessage]]",o),save:n(51).t("Error saving track.[[infoMessage]] Please try again.",o),transcode:n(51).t("Error processing track.[[infoMessage]]",o),unknown:n(51).t("Error with track.[[infoMessage]]",o)},playlist:{upload:n(51).t("Error uploading playlist.[[infoMessage]]",o),save:n(51).t("Error saving playlist.[[infoMessage]] Please try again.",o),transcode:n(51).t("Error processing playlist.[[infoMessage]]",o),unknown:n(51).t("Error with playlist.[[infoMessage]]",o)}};return s[t][r]},extractErrorMessage:function(e){try{return JSON.parse(e.responseText).errors[0].error_message}catch(t){return""}},setToModelAttributes:function(){var e=this.getAttributesFromModel();this.set(e),this.unsetImageFile({force:!0}),this.markFieldsClean()}})}).call(t,n(1))},,function(e,t,n){"use strict";e.exports=new(n(21))({requirePrototype:n(65).prototype,hasPermalink:function(e){return e&&this.has("permalink")&&this.get("permalink").toLowerCase()===e.toLowerCase()}})},,,,,,,,,,,,function(e,t,n){(function(t){"use strict";function i(e){var t,i,r;return e&&e.collection&&e.collection.length&&(t=e.collection[0],i=t.last_message?t.last_message.conversation_id+"_"+t.last_message.sent_at:t.uuid||t.id,r=n(3).isNumber(i)?i>(void 0===this.lastRead?-1:this.lastRead):i!==this.lastRead),r}function r(e){var t=n(169)[e];return!!(n(54).get("notifications")&&t&&t.channel)}function o(e){var t=e?"on":"off";this[t]("change:size",l)}function s(e){var t=e?"on":"off";n(169)[this.get("type")][t]("pollIntervalChange",a,this)}function a(){var e=this._breaker;e&&this.restart()}function l(e,t){t&&e.stopPolling()}function u(){var e=n(169)[this.get("type")];return{backoffRate:1.1,baseDelay:e.get("minPollInterval"),maxDelay:e.get("maxPollInterval")}}var c=new(n(111))("notify");e.exports=n(65).extend({channel:null,_queue:null,_waitingQueue:null,_unseenQueue:null,_breaker:null,lastRead:null,_request:null,defaults:{size:null,type:null},initialize:function(e){this._queue=[],this._waitingQueue=[],this._unseenQueue=[];var t=e.type,i=n(169)[t];this.baseUrl=i.get("baseUrl"),this.channel=i.get("channel"),this.lastRead=c.get(t),n(3).bindAll(this,"onNotification"),r(t)?n(54).get("notifications").subscribe(i.channel,this.onNotification):this.startPolling(),s.call(this,!0)},startPolling:function(){var e=this;if(!this._isPolling){var t,r;t=this._breaker=new(n(155))(u.call(this)),this._isPolling=!0,r=function(){e._isPolling&&(window.clearTimeout(e._pollingId),e.fetch({force:!0}).done(function(n){i.call(e,n)?(t.succeeded(),e._pollingId=window.setTimeout(r,t.currentDelay())):t.failed()}).fail(function(e){e.status>=400&&e.status<500?t.disable({autoEnable:!1}):t.failed()}))},this._breaker.on("enabled",r),o.call(this,!0),r()}},stopPolling:function(){this._isPolling&&(o.call(this,!1),window.clearTimeout(this._pollingId),this._pollingId=null,this._isPolling=!1,this._breaker.dispose(),this._breaker=null)},restart:function(){this.stopPolling(),this.startPolling()},onNotification:function(e){this._request?this._waitingQueue.push(e):this._queue.push(e),this._unseenQueue.push(e),this.set("size",this._unseenQueue.length)},hasUnfetchedItems:function(){return this._queue.length>0},fetchQueuedItems:function(){var e=this;if(!this._request){if(!this.hasUnfetchedItems())return this.set("size",0),n(55).resolve();var i,r=this._queue,o=r.length,s=r[0].uuid,a=r[o-1].uuid;i=n(62).modify(n(3).result(this,"baseUrl"),{query:{"uuid[to]":s,cursor:a,limit:o,offset:null}}),this._request=n(55).defer(),t.ajax({url:i,dataType:"json",type:"GET"}).done(function(t){e.onFetchQueuedItemsDone(t),e._request.resolve(),e._request=null}).fail(function(){e.onFetchFail(),e._request.reject(),e._request=null})}return this._request},markAsRead:function(e){var t,n=this.get("type"),i=0;this.lastRead!==e&&(this.lastRead=e,c.set(n,e),t=this._unseenQueue.some(function(t){return++i,t.uuid===e?!0:void 0}),t?this._unseenQueue.splice(0,i):this._unseenQueue.length=0,this.set("size",this._unseenQueue.length)),r(n)||this.startPolling()},fetch:function(e){var t,r=this,o=!(!e||!e.force);return null===this.get("size")||o?(t=n(62).modify(n(3).result(this,"baseUrl"),{query:{limit:1,linked_partitioning:1}}),n(65).prototype.fetch.call(this,n(3).assign({url:t,dataType:"json",jqAjax:!0},e)).done(function(e){var t=i.call(r,e);r.lastFetchTime=Date.now(),t&&(null===r.get("size")||o)&&(r._queue.push(e.collection[0]),r.set("size",!0))})):n(55).resolve()},hasDataForView:function(){return null!==this.get("size")},onFetchFail:function(){this._waitingQueue.length&&Array.prototype.push.apply(this._queue,this._waitingQueue.splice(0,this._waitingQueue.length))},onFetchQueuedItemsDone:function(e){this._queue.length=0,this._waitingQueue.length&&(this._queue.push.apply(this._queue,this._waitingQueue),this._waitingQueue.length=0);var t=e.collection;t&&t.length?this.trigger("data",t):this.set("size",0)}},{hashFn:function(e){return e.type},onCleanup:function(e){r(e.get("type"))&&n(54).get("notifications").unsubscribe(e.channel,e.onNotification),e.stopPolling(),s.call(e,!1)},cleanupInstantly:!0})}).call(t,n(1))},function(e,t,n){"use strict";function i(e){e.length&&(this.add(e,{at:0}),this.trigger("new-data",e))}function r(e,t){this.trigger("change:queue-size",this,t)}e.exports=n(72).extend({notificationType:null,queue:null,initialize:function(){var e,t=this.notificationType;n(72).prototype.initialize.apply(this,arguments),e=n(169)[t],this.baseUrl=e.get("baseUrl"),this.queue=new(n(519))({type:t}),this.queue.on("data",i,this).on("change:size",r,this)},fetchNewItems:function(){this.queue.fetchQueuedItems()},markAsRead:function(e){var t=this.at(0);!e&&t&&(e=t.getUuid?t.getUuid():t.get("uuid")),e&&this.queue.markAsRead(e)}},{onCleanup:function(e){e.queue.off("data",i,e).off("change:size",r,e).release()}})},function(e,t,n){"use strict";function i(){W.toggleState("globalPlayLock",$.isBlockedFromSkipping())}function r(){this.layoutInfo=u()}function o(){E.call(this,this.source).done(function(e){e&&e.isPlayable()&&$.prefetchAudioAd(e)})}function s(e,t,n){var i,r=t.getCurrentSound(),o=this.getCurrentSound()!==r;W.getState("globalPlayLock")||(i=S.call(this,e,n.restoreUrl,{silent:!0}),A.call(this,t),o&&this.pauseCurrent(n),r&&(i||o)&&this._addToHistory(r,e),i&&this.trigger("change:source",e),r?this.playCurrent(n):this.playNext(n))}function a(e,t){e&&e===this.getCurrentSound()&&(e.playlist&&e.playlist.setCurrentSound(e),e.isPlayable()?(W._addToPlayHistory(e),e.play(t),n(196).addSound(e,t),e.playlist&&e===this.source&&(S.call(this,e.playlist,t&&t.restoreUrl),A.call(this,0))):b.call(this,e))}function l(e){var t,n,i=e.sound;i.isPlaying()&&(n=function(){i.off("pause",n),window.clearTimeout(t)},t=window.setTimeout(function(){n(),W.playNext()},q),i.on("pause",n))}function u(){var e=n(54).get("router").getLayoutInfo();return{args:e.args,layoutName:e.layoutName,url:window.location.href.replace(/^https?:\/\/[^\/]+\//,"")}}function c(){var e=this.source;e&&(d(e)&&(this.listenTo(e,"add",h).listenTo(e,"remove",p).listenTo(e,"reset",f),e.isPopulated()||e.fetch()),e.hold())}function d(e){return e instanceof n(72)}function h(e,t){var n=t.indexOf(e);n<=this.sourceCursor&&A.call(this,this.sourceCursor+1)}function p(e,t,n){n.index<=this.sourceCursor&&A.call(this,this.sourceCursor-1)}function f(){A.call(this,-1)}function g(e){e.sound.release()}function m(e){e.sound.hold()}function _(e,t){t[e]("finish",v,this)[e]("change:playable",y,this)}function v(e){w.call(this,e.sound)}function y(){var e=this.getCurrentSound();e&&!e.isPlayable()&&b.call(this,e)}function b(e){_.call(this,"off",e),w.call(this,e),O.call(this,e)}function w(e){this.playNext({userInitiated:!1}),e.playlist&&e===e.playlist.getLastSound()&&e.playlist.rewind(),e.seek(0)}function x(){if(!this.FallbackSource)return null;var e=this.getCurrentSound();return e&&e.isPublic()?new this.FallbackSource(null,{resource_id:e.id,resource_type:e.resource_type}):null}function k(e,t){return d(t)?e>-1&&e<t.length?(t.audibleAt||t.at).call(t,e):void 0:0===e?t:void 0}function S(e,t,n){var i=this,r=this.source;if(r===e)return!1;var o=e&&e.getAudioCursor?e.getAudioCursor():-1;return this.source=e,this.restoreUrl=t,c.call(this),A.call(this,o),r&&(this.stopListening(r),r.release()),n&&n.silent||this.trigger("change:source",this.source,r),this._autoplay&&!this._autoplayTimeout&&(this._autoplayTimeout=window.setTimeout(function(){i._autoplay=!1,i._autoplayTimeout=null,i.playCurrent({userInitiated:!1})},400)),!0}function T(e,t){t=t||{},S.call(this,e,t.restoreUrl)?this.playNext(t):this._fetchDeferred||this.playCurrent(t)}function E(e,t,i,r,o){var s,a,l,u,c,h,p=this,f=i||n(55).defer(),g=null==r?V:r;if(t=t||{},c={source:e},"pending"===f.state()){if(this._fetchDeferred&&this._fetchDeferred!==f&&this._fetchDeferred.reject(),this._fetchDeferred||(this._fetchDeferred=f,f.always(function(){p._fetchDeferred=null})),!t.userInitiated&&this.getState("repeating")&&(s=this.getCurrentSound()))s.isPlayable()?(c.historyCursor=this.historyCursor,f.resolve(s,c)):f.reject();else if(this.historyCursor<this.history.length-1)c.historyCursor=this.historyCursor+1,f.resolve(this.history[this.historyCursor+1].sound,c);else if(this.queue.length)c.queueIndex=0,f.resolve(this.queue[0],c);else if(e&&d(e)){for(h=-1,l=this.source===e?this.sourceCursor:0;!a&&l+ ++h<e.length;)if(a=l+h>-1&&k(l+h,e)){if(B(a))break;a=h>0||o?a.getFirstSound():a.getNextSound()}a&&B(a)?a.fetch().fail(f.reject).done(function(){E.call(p,e,t,f,r,o)}):a?(c.sourceCursor=l+h,c.initialFallback=!!o,f.resolve(a,c)):!e.isFullyPopulated()&&g?e.fetch({add:!0,remove:!1}).fail(f.reject).done(function(){E.call(p,e,t,f,g-1)}):e.isLooping&&e.length?(A.call(this,-1),E.call(this,e,t,f,g,o)):(u=x.call(this))&&u!==e?E.call(this,u,t,f,g,!0):f.resolve(void 0)}else e?(a="playlist"===e.resource_type&&e.getState("repeating")&&!e.getNextSound()?e.getFirstSound():-1===this.sourceCursor?e.getFirstSound():e.getNextSound(),a?(c.sourceCursor=0,f.resolve(a,c)):E.call(this,x.call(this),t,f,g,!0)):f.reject();return f}}function A(e){"number"==typeof e?this.sourceCursor=e:d(this.source)?this.sourceCursor=this.indexOfAudibleInSource(e,this.source):this.sourceCursor=0,this.source&&this.source.setAudioCursor&&this.source.setAudioCursor(this.sourceCursor)}function C(e){var t,n=this.getCurrentSound();this.historyCursor!==e&&(n&&_.call(this,"off",n),this.historyCursor=e,t=this.getCurrentSound(),t&&_.call(this,"on",t),this.trigger("change:currentSound",{prev:n,current:t}))}function I(e,t,i,r,o){return t instanceof I?t:(this.sound=e,this.layoutInfo=n(3).clone(i),this.sourceInfo=t&&t.getSourceInfo()||{},this.queryPosition=o,this.restoreUrl=r,this.reposterUrn=D(t),void(this.promotedInfo=M(e,t)))}function D(e){var t,i=P(e);return i&&(t=n(100).generate("user",i.get("user").id)),t}function P(e){var t=e&&e.at&&e.at(W.sourceCursor),i=t&&n(3).isFunction(t.get)&&/repost$/.test(t.get("type"));return i&&t}function M(e,t){if(!d(t))return null;var i=W.indexOfAudibleInSource(e,t),r=t.at(i);return n(3).result(r,"isPromoted")?n(80).extractPromotedAttrs(r):null}function R(e){O.call(this,e),N.call(this,e),L.call(this,e)}function L(e){var t=this.source;t&&(d(t)?(t.remove(e),e.release()):"sound"===t.resource_type&&(t.release(),this.unsetInitialSource(t)))}function F(e,t,n){for(var i=e.length;i--;)e[i].sound===t&&(g(e[i]),n&&(this.historyCursor>i||this.historyCursor===i&&i===e.length-1)&&this.historyCursor--,e.splice(i,1))}function O(e){F.call(this,this.history,e,!0)}function N(e){F.call(this,this.queue,e)}function B(e){return e&&e.hasDataForPlay&&!e.hasDataForPlay()}var $=void 0,U=void 0,z=void 0,H=5e3,j=3,V=3,q=2500,W=e.exports=n(3).assign({},n(22).Events,{states:{globalPlayLock:{initial:!1},repeating:{initial:!1}},history:[],historyCursor:-1,source:null,sourceCursor:-1,initialSourcePriority:-(1/0),queue:[],layoutInfo:{},restoreUrl:null,FallbackSource:null,_fetchDeferred:null,_sessionPlays:0,_autoplay:!1,_autoplayTimeout:null,_cancelHistorySoundTimer:n(3).noop,initialize:function(e,t,n){$=e,U=t,z=n,W.listenTo($,"state:isInRequiredListenPeriod",i).listenTo($,"state:isAllowedToSkipImmediately",i).listenTo(U,"destroy",function(e){var t=e.targetType,n=e.targetModel;"sound"===t&&R.call(this,n)}).listenTo(z,"geoBlocked",l)},setInitialSource:function(e,t,n){t=t||0,-1===this.sourceCursor&&t>this.initialSourcePriority&&(this.initialSourcePriority=t,r.call(this),S.call(this,e,n))},unsetInitialSource:function(e){-1===this.sourceCursor&&this.source===e&&(S.call(this,null),this.initialSourcePriority=-(1/0))},indexOfAudibleInSource:function(e,t){var n=-1;return d(t)?(t.any(function(i,r){var o=k(r,t);return o&&(o===e||o.getSoundIndex(e)>-1)?(n=r,!0):void 0}),n):t===e?0:t.getSoundIndex(e)},hasNextSound:function(){var e=this.source,t=this.getCurrentSound(),n=d(e);return!!(this.historyCursor<this.history.length-1||this.queue.length>0||e&&n&&(!e.isFullyPopulated()||e.length&&this.sourceCursor<e.length-1)||e&&!n&&(this.sourceCursor<0?e.getFirstSound():e.getNextSound())||t&&t.isPublic()&&this.FallbackSource)},isSourcePlaying:function(e){var t=W.getCurrentSound();return!!t&&t.isPlaying()&&W.isSourceActive(e)},isSourceActive:function(e){var t=W.getCurrentMetadata(),i=t&&t.sourceInfo;return n(3).isEqual(i,e.getSourceInfo())},hasCurrentSound:function(){return!(!this.getCurrentSound()&&!this.hasNextSound())},getCurrentSound:function(){var e=this.history[this.historyCursor];return e&&e.sound},_getPrevSound:function(){var e=this.history[this.historyCursor-1];return e&&e.sound},_addToHistory:function(e,t){var i,r,o,s,a,l=e!==this.getCurrentSound();i=this.historyCursor+(l?1:0),r=n(54).get("playHistoryLength"),a=this.source&&this.source.getQueryPosition?this.source.getQueryPosition():this.sourceCursor,s=new I(e,t,this.layoutInfo,this.restoreUrl,a),this.history.splice(i).forEach(g),this.history.push(s),m(s),o=Math.max(0,this.history.length-r),o&&(this.history.splice(0,o).forEach(g),this.historyCursor-=o),C.call(this,this.history.length-1)},_getHistoryCursor:function(){return this.historyCursor},_getHistory:function(){return this.history},_getQueue:function(){return this.queue},_getSource:function(){return this.source},_reset:function(){var e=this.getCurrentSound();e&&e.pause(),this.history.forEach(function(e){e.sound.release()}),C.call(this,-1),this.history=[],this._sessionPlays=0,this.queue.forEach(function(e){e.release()}),this.queue=[],this.layoutInfo={},this._fetchDeferred&&this._fetchDeferred.reject(),S.call(this,null),this.FallbackSource=this.fallbackRestoreFn=this.restoreUrl=null,this.initialSourcePriority=-(1/0),this.stopListening()},enableAutoplay:function(){this.source?this.playCurrent({userInitiated:!1}):this._autoplay=!0},play:function(e,t){t=t||{};var n=t.keepSource&&this.source||t.source||e.playlist||e;r.call(this),B(e)?e.fetch().done(s.bind(this,n,e,t)):s.call(this,n,e,t)},pause:function(e,t){e.pause(t)},playCurrent:function(e){var t=this.getCurrentSound();t?(e=e||{},$.isUserAdConsumer()?($.whenAdFinished(t,e).always(a.bind(this,t,e)),o.call(this)):a.call(this,t,e)):(r.call(this),W.playNext(e))},pauseCurrent:function(e){var t=this.getCurrentSound();t&&t.pause(e)},toggleSource:function(e,t){var n=this.getCurrentSound();this.source===e&&this.sourceCursor>-1&&n&&n.isPlaying()?this.pauseCurrent(t):(r.call(this),T.call(this,e,t))},toggleCurrent:function(e){var t,n=this.getCurrentSound();if(W.getState("globalPlayLock"))return t=$.isUserAdConsumer()&&$.getCurrentSound(),void(t&&t.toggle(e));if(n){if($.isUserAdConsumer()&&(t=$.getCurrentSound()))return void t.toggle(e);n.toggle(e)}else this.playCurrent(e)},playNext:function(e){var t=this;return e=n(3).assign({seek:0,isRepeating:W.getState("repeating")},e),$.isUserAdConsumer()&&$.getCurrentSound()?($.skip(),n(55).resolve()):(this.pauseCurrent(),E.call(this,this.source,e).done(function(n,i){if(i){var r,o,s=i.source;r=t.FallbackSource&&s instanceof t.FallbackSource?t.fallbackRestoreFn(t.getCurrentSound()):e.restoreUrl,S.call(t,s,r,e),n&&(null!=i.historyCursor?C.call(t,i.historyCursor):(null!=i.queueIndex?o=t.queue.shift():null!=i.sourceCursor&&(A.call(t,i.sourceCursor),o=t.source,d(s)&&i.sourceCursor>=s.length-j&&!s.isFullyPopulated()&&s.fetch({add:!0,remove:!1})),t._addToHistory(n,o)),t.playCurrent(e),i.initialFallback&&t.trigger("fallback"))}}))},playPrev:function(e){var t=this.getCurrentSound(),i=this._getPrevSound();$.isUserAdConsumer()&&$.getCurrentSound()&&$.skip(),e=n(3).assign({seek:0},e),!i||t&&t.currentTime()>H?(t.seek(0),t.isPlaying()||t.play(e)):i&&(this.pauseCurrent(),C.call(this,this.historyCursor-1),this.playCurrent(e))},setFallbackSource:function(e,t){this.FallbackSource=e,this.fallbackRestoreFn=t},restoreState:function(){var e,t=this._getCurrentRestoreUrl(),i=this.getCurrentSound(),r=n(54).get("router");t?(e=i.playlist||i,r.navigate(t,{trigger:!0}),n(54).set("restoreToSound",e.resource_type+e.resource_id)):i&&r.navigateToRoute("listen",[i],{trigger:!0})},_getCurrentRestoreUrl:function(){var e=this.history[this.historyCursor];return e&&e.restoreUrl||""},getCurrentMetadata:function(){var e=$.isUserAdConsumer()?$.getCurrentSound():null;return e?new I(e,this.source,u(),null):this.history[this.historyCursor]},_addToPlayHistory:function(e){var t=this;if(n(54).get("me").id){var i=function(){t._cancelHistorySoundTimer(),n(919).waitForPlayThreshold(e,W.getCurrentMetadata()).then(function(e){var t=e.soundId,n=e.playContext;U.addToPlayHistory(t,n,!0)})};e.on("time",i),this._cancelHistorySoundTimer(),this._cancelHistorySoundTimer=function(){e.off("time",i),t._cancelHistorySoundTimer=n(3).noop}}}});n(322).applyTo(W)},function(e,t,n){"use strict";function i(e,t){return!t.neverRelease&&t.cleanup()||e}function r(e){return e?function(t){o(t),e.apply(t,arguments)}:o}function o(e){e.off&&e.off(),e.stopListening&&e.stopListening()}function s(){do;while(d.reduce(i,!1))}var a,l=n(3).noop,u=0,c=6e4,d=[];window.setInterval(s,c),e.exports={applyTo:function h(e,t){t=n(3).assign({neverRelease:!1,cleanupInstantly:!1,hashFn:function(){return null},prepareArgs:function(){return arguments},prepareInstance:function(){return this},getIncrementValue:function(){return 1},onHold:l,onRelease:l,onCleanup:null},t,e),delete t.prototype;var i,o,c,p,f,g=e.extend||n(22).Model.extend,m=t.neverRelease;return i=new(n(911))({autoCleanup:t.cleanupInstantly,onCleanup:r(t.onCleanup),onIncrement:t.onHold,onDecrement:t.onRelease,neverRelease:m}),d.push(i),m?c=p=l:(c=function(e){i.increment(this.resource_id,e)},p=function(e){i.decrement(this.resource_id,e)}),f={hold:c,release:p,_usageCount:function(){return i.countFor(this.resource_id)},constructor:function(){var t=o.prepareArgs.apply(this,arguments),n=o.hashFn.apply(this,t)||"f-"+ ++u,r=o.neverRelease?1:o.getIncrementValue.apply(null,t),s=i.get(n);return s?(this.constructor.neverRelease||s.hold(r),o.prepareInstance.apply(s,t),s):(s=this,i.set(n,s),s.constructor.neverRelease||s.hold(r-1),s.resource_id=n,a(e).apply(s,t),void o.prepareInstance.apply(s,t))}},o=g.call(e,f,t),n(3).assign(o,{__constructor__:a(e),reset:function(){i.reset()},extend:function(e){var t,i;return e=e||{},n(3).isArray(e)&&(e=n(3).assign.apply(null,[{}].concat(e))),t=g.apply(o,arguments),t.extend=g,i=h(t,o),i.__super__&&(i.__super__=i.__super__.constructor.__super__),i},instances:function(){return i.add=function(e){var t=o.hashFn(e.attributes);e.resource_id=t,t&&this.set(t,e)},i}(),getNewInstance:function(){function t(){return a(e).apply(this,i)}var n,i=arguments;return t.prototype=o.prototype,n=new t},removeInstance:function(e){i.decrement(e.resource_id,1/0),s()}})}},a=function(e){return e.__constructor__||e}},function(e,t,n){"use strict";function i(e,t){var i,o,s,a=e.getAttribute("data-id"),l=r[a];o=l.__class,delete r[a],l.key&&(s=l.key),i=t.addSubview(new o(n(3).omit(l,"__path","__class","key")),s),i.render(),e.parentNode.replaceChild(i.el,e)}var r={},o=0,s=e.exports={handlebarHelper:function(e,t){var i=t.hash;return i.args&&(n(3).isFunction(i.args)&&(i.args=i.args(this)),t.hash=i=n(3).assign({},i.args,i)),delete i.args,t.fn&&(i.blockContent=new(n(20).SafeString)(t.fn(this))),s.registerSubview(e,t.hash)},registerSubview:function(e,t){var n=o++;return t.__class=e,t.className&&(t.className=[e.prototype.className,t.className].filter(Boolean).join(" ")),r[n]=t,'<view data-id="'+n+'"></view>'},replacePlaceholders:function(e){e.$("view").each(function(){i(this,e)})}}},function(e,t,n){"use strict";var i=n(254),r=i.CONSUMER_SUBSCRIPTION_HIGH_TIER,o="GTM-NXX9K5";e.exports={include:function(){var e=this,t=window.dataLayer=window.dataLayer||[],i=!!n(54).get("me").id;t.push({"gtm.start":Date.now(),event:"gtm.js"}),i||(n(56).once("connect:login",function(){e.pushEvent({event:"login"})}),n(56).once("signup:successful",function(){e.pushEvent({event:"signup-successful"})})),n(56).on("consumer-premium:subscriptionChange",function(t){var n=t.price,i=t.subType,o=t.term;i===r&&e.pushEvent({event:"consumer-signup-successful-go",price:n,subscriptionTerm:o})}),n(56).on("layout:change",function(t){e.pushEvent({event:"virtual-pageview",layoutInfo:t})}),n(56).on("upload_funnel:save",function(){e.pushEvent({event:"upload-save"})}),n(148).insertScript("//www.googletagmanager.com/gtm.js?id="+o)},pushEvent:function(e){var t=e.event,i=e.price,r=e.subscriptionTerm,o=e.creatorSubType,s=e.layoutInfo,a=window.dataLayer=window.dataLayer||[],l=n(54).get("me"),u=!!l.id,c=n(54).get("geoip"),d=c&&c.get("country_code");a.push({event:t,isLoggedIn:u,guid:n(912).generate(),isPremium:l.isPremium(),creatorSubType:o||l.getPlan(),pageCategory:s?s.layoutName:void 0,hasHighTier:l.hasHighTier(),consumerSubType:l.getConsumerPlan(),countryCode:d,price:i||void 0,subscriptionTerm:r||void 0})}}},function(e,t,n){(function(t){"use strict";e.exports=function(){return n(36),n(37),t.datepicker.setDefaults(n(51).getDatePickerLocaleData()),t.extend(t.datepicker,{_updateDatepickerOriginalMethod:t.datepicker._updateDatepicker,_updateDatepicker:function(e){this._updateDatepickerOriginalMethod(e);var n=t.datepicker._get(e,"onAfterRender");n&&n.apply(this,[e])}}),t.datepicker}()}).call(t,n(1))},function(e,t,n){"use strict";function i(){this.set("transfer",new(n(439))),this.set("transcoding",new(n(439)))}function r(e){s.call(this,e,!0)}function o(e){s.call(this,e,!1)}function s(e,t){this.get("transfer")[t?"addTransfer":"removeTransfer"](e.get("transfer")),this.get("transcoding")[t?"addTransfer":"removeTransfer"](e.get("transcoding")),a.call(this)}function a(){var e,t=this._uploadsCollection,i=!1,r=!1,o=!0,s=!0;t.some(function(e){switch(e.get("status")){case n(87).UPLOADING:return r=!0,!0;case n(87).QUEUED:i=!0,s=!1,o=!1;break;case n(87).TRANSCODING:s=!1,o=!1;break;case n(87).COMPLETE:o=!1}}),e=r?n(87).UPLOADING:i?n(87).QUEUED:o?n(87).FAILED:s?n(87).COMPLETE:n(87).TRANSCODING,this.set("status",e)}var l=n(72).extend({model:n(328),url:null,isFullyPopulated:function(){return!0},hasDataForView:function(){return!0}});e.exports=n(65).extend({resource_type:"aggregate-audio-upload",url:null,_uploadsCollection:null,hasDataForView:function(){return!0},setup:function(e){this._uploadsCollection=new l,this.set({status:n(87).QUEUED,hasBeenSaved:!1}),this.listenTo(this._uploadsCollection,"change:status",a).listenTo(this._uploadsCollection,"add",r).listenTo(this._uploadsCollection,"remove",o),i.call(this),this.addUploads(e.uploads)},addUploads:function(e){this._uploadsCollection.add(e)},getUploadsCollection:function(){return this._uploadsCollection},getUploads:function(){return this._uploadsCollection.models},remove:function(){this._uploadsCollection.remove(this.getUploads()),this.destroy()}},{hashFn:function(e,t){function n(e){return e.resource_id}return t&&t.resource_id||e&&(e.uploads&&e.uploads.length&&e.uploads.map(n).join("_")||e.id||e.resource_id)||null},onCleanup:function(e){e._uploadsCollection.remove(e.getUploads()),e._uploadsCollection.release()}})},function(e,t,n){"use strict";var i=e.exports=function(e,t){var i,r=t.resource_type;return"single-audio-upload"===r?i=new(n(328))(e,t):"aggregate-audio-upload"===r&&(i=new(n(526))(e,t)),i};i.getClass=function(e){var t=e.resource_type;return"single-audio-upload"===t?n(328):"aggregate-audio-upload"===t?n(526):void 0}},function(e,t,n){"use strict";var i=new(n(111))("upload-settings");e.exports={getUploadAsPlaylist:function(){var e=i.get("asPlaylist");return void 0===e?!0:e},toggleUploadAsPlaylist:function(){i.set("asPlaylist",!this.getUploadAsPlaylist())}}},function(e,t,n){"use strict";e.exports=n(156).extend([n(22).Events,{latest:0,totalSize:0,initialize:function(e){e||(e={}),this.totalSize=e.totalSize||0},isIndeterminate:function(){return!this.totalSize},add:function(e){return e!==this.latest&&(this.latest=e,this.trigger("data")),this},setTotal:function(e){if(this.totalSize!==e){var t=!this.totalSize||!e;
this.totalSize=e,t&&this.trigger("change:indeterminate",this.isIndeterminate())}return this},getValue:function(){return this.latest},getProgress:function(){return this.totalSize?this.latest/this.totalSize:0},getTotalSize:function(){return this.totalSize}}])},,,,,,,,,,,,function(e,t,n){"use strict";e.exports=n(65).extend({resource_type:"chartTrack",submodelMap:{track:n(64)},createSubmodel:function(e,t){this.soundModel=new e(this.get(t)),this.addSubmodel(this.soundModel)}})},function(e,t,n){"use strict";function i(){this._messageSentAt=new Date(this.get("sent_at"))}function r(){var e=this,t=this.getPossibleAudibleLinks();t&&n(173).getAudibleModels(t).done(function(t){t.forEach(function(e){e&&o.call(this,e.audible,e.link)},e),e.trigger("audibleFinishedResolving")})}function o(e,t){var i=n(62).parse(e.getShareURL()).path,r={link:null,model:e};-1!==t.indexOf(i)&&(r.link=t,this.addSubmodel(r.model),s.call(this,r))}function s(e){var t=this.get("audibleInformation");t.push(e),this.set("audibleInformation",t),this.trigger("audibleInformationUpdated",{audibleInformation:e,timestamp:this.sentAt()})}var a=n(54).get("systemUserId");e.exports=n(65).extend({resource_type:"conversation_message",_messageSentAt:null,getSenderId:function(){var e=this.get("sender_urn");return e?n(100).getAsAttributes(e).id:null},setup:function(){this.set("audibleInformation",[]),i.call(this)},sentAt:function(){return this._messageSentAt},fetchAudibles:function(){r.call(this)},getAudible:function(){var e=this.get("audibleInformation");return e&&e[0]&&e[0].model},hasDataForView:function(){return!0},getPossibleAudibleLinks:function(){var e=this.get("content")?this.get("content"):"";return e.match(n(173).scLinksRegexGlobal)},isFromSoundCloud:function(){return this.getSenderId()===a},isFromMissingUser:function(){var e=this.get("sender");return e&&"missing_user"===e.kind}},{hashFn:function(e){return e.id||[e.conversation_id,e.sent_at].join("_")}})},,function(e,t,n){"use strict";e.exports=n(65).extend({resource_type:"historicalPlay",submodelMap:{track:n(64)},setup:function(e){this.sound=new(n(64))({id:e.track_id}),this.addSubmodel(this.sound)}},{hashFn:function(e){var t=e.id,n=e.resource_id,i=e.track_id;return t||n||i}})},,function(e,t,n){"use strict";e.exports=n(65).extend({resource_type:"onboarding-recommendation",submodelMap:{track:n(64)},createSubmodel:function(e,t){var i,r=this.get(t);r&&(i=new(n(64))({id:r.id}),i.set(r),this.addSubmodel(i),this.listenTo(i,"destroy",this.destroy),this.audible=i)},getAudible:function(){return this.audible}})},,,function(e,t,n){"use strict";e.exports=n(226).extend({readEndpoint:"playlistLikesIds",createEndpoint:"playlistLikesCreate",deleteEndpoint:"playlistLikesDelete"})},function(e,t,n){"use strict";e.exports=n(226).extend({readEndpoint:"playlistRepostsIds",createEndpoint:"playlistRepostsCreate",deleteEndpoint:"playlistRepostsDelete"})},function(e,t,n){"use strict";e.exports=n(65).extend({resource_type:"search",baseUrl:null,submodelMap:{origin:null},createSubmodel:function(){var e,t;switch(this.get("kind")){case"user":e=n(60);break;case"track":e=n(64);break;case"playlist":e=n(85)}t=new e(this.get("origin")),this.addSubmodel(t),this.resource=t},getAudible:function(){switch(this.get("kind")){case"track":case"playlist":return this.resource;default:return null}},isPromoted:function(){return"promoted"===this.get("campaign")}},{hashFn:function(e){return e.resource_id||e.id}})},function(e,t,n){"use strict";e.exports=n(226).extend({readEndpoint:"soundLikesIds",createEndpoint:"soundLikesCreate",deleteEndpoint:"soundLikesDelete"})},function(e,t,n){"use strict";e.exports=n(226).extend({readEndpoint:"soundRepostsIds",createEndpoint:"soundRepostsCreate",deleteEndpoint:"soundRepostsDelete"})},function(e,t,n){"use strict";function i(e){return e||""}e.exports=n(65).extend({resource_type:"stats-totals",baseUrl:function(){var e=this.options;return n(62).stringify({path:"/"+n(62).joinPath(n(3).compact([].concat("users",e.user,e.track&&["tracks",e.track],"stats","totals",e.singleMetric)))},n(54).get("api_v2_host"))},fetch:function(e){var t=this.options.from,i=this.options.to;return t&&i&&(e=n(3).assign({data:{from:+t,to:+i}},e)),n(65).prototype.fetch.call(this,e)},parse:function(e){return e&&e.period||e}},{hashFn:function(e,t){return t=t||{},[t.singleMetric,+t.from,+t.to,t.track].map(i).join("_")}})},,function(e,t,n){"use strict";var i={facebook:"Facebook",twitter:"Twitter",myspace:"MySpace",lastfm:"Last.fm",youtube:"YouTube",beatport:"Beatport",discogs:"Discogs",flickr:"Flickr",hypem:"Hype Machine",ning:"Ning",posterous:"Posterous",purevolume:"PureVolume",residentadvisor:"Resident Advisor",residentadvisorlabel:"Resident Advisor",reverbnation:"ReverbNation",soundcloud:"SoundCloud",songkick:"Songkick",tumblr:"Tumblr",vimeo:"Vimeo",virb:"Virb",wordpress:"Wordpress",ccmixter:"ccMixter",itunes_podcast:"iTunes Podcast",foursquare:"Foursquare",flavors:"flavors.me",thedjlist:"The DJ List",berklee:"Berklee",whatpeopleplay:"Whatpeopleplay",zeroinch:"zero",google_plus:"Google+",bandpage:"BandPage",bandsintown:"Bandsintown",instagram:"Instagram"};e.exports=n(65).extend({resource_type:"web-profile",getUserId:function(){return this.collection?this.collection.resource_id:this.options.userId},getNetworkName:function(){var e=this.get("network");return this.get("title")?this.get("title"):"personal"===e||"other"===e?this.get("url").replace(/^https?:\/\//,""):i[e]||""},isEmail:function(){return this.get("url").indexOf("@")>0},getNetworkClassName:function(){return(this.get("network")||"").replace(/[^a-z]/g,"")}},{hashFn:function(e,t){return e.id}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){function n(e){if(this.size=0,this._data=[],e)for(var t=0;t<e.length;++t)this.insert(t,e[t])}function i(){this._data.push(0)}function r(){this._data.pop()}function o(e){for(var t=0;t<this._data.length;++t)this._data[t]&=e._data[t]}function s(e){for(var t=0;e;++t)e&=e-1;return t}function a(e,t,n){var i=(1<<t-e+1)-1<<e;return n||(i=~i),i}var l=1<<31;e.exports=n,n.combine=function(e){var t=e[0].clone();return t.applyAnd(e.slice(1)),t},n.prototype={get:function(e){return 0!==(this._data[e/32|0]&1<<e%32)},set:function(e,t){if(!(0>e||e>=this.size)){var n=e/32|0,i=e%32;this._data[n]^=(!t-1^this._data[n])&1<<i}},insert:function(e,t){if(!(e>this.size||0>e)){var n,r,o,s,u;if(this.size%32===0&&i.call(this),e<this.size){for(n=e/32|0,r=e%32,o=this._data[n],u=this._data.length-1;u>n;--u)this._data[u]<<=1,this._data[u-1]&l&&(this._data[u]|=1);s=a(0,r-1,!1),this._data[n]=o<<1&s|o&~s}++this.size,this.set(e,t)}},remove:function(e){if(!(e>=this.size||0>e)){var t,n,i,o,s;if(e<this.size-1)for(t=e/32|0,n=e%32,i=this._data[t],o=a(0,n-1,!1),this._data[t]=i>>>1&o|i&~o,s=t+1;s<this._data.length;++s)1&this._data[s]&&(this._data[s-1]|=l),this._data[s]>>>=1;--this.size%32===0&&r.call(this)}},applyAnd:function(e){for(var t=0;t<e.length;++t)o.call(this,e[t])},clearRange:function(e,t){var n,i,r,o=e/32|0,s=t/32|0;for(r=o;s>=r;++r)n=Math.max(0,e-32*r),i=Math.min(31,t-32*r),0===n&&31===i?this._data[r]=0:this._data[r]&=a(n,i,0)},clone:function(){var e=new n;return e._data=this._data.slice(),e.size=this.size,e},getIndexes:function(e){for(var t=[],n=!!e,i=0;i<this.size;++i)this.get(i)===n&&t.push(i);return t},countValuesInRange:function(e,t,n){t=t||0,n=void 0===n?this.size-1:n;var i,r,o,l,u=t/32|0,c=n/32|0,d=0;for(o=u;c>=o;++o)i=Math.max(0,t-32*o),r=Math.min(31,n-32*o),l=0===i&&31===r?this._data[o]:this._data[o]&a(i,r,1),d+=s(l);return e?d:n-t-d+1}}},function(e,t,n){/*!
	 * Bowser - a browser detector
	 * https://github.com/ded/bowser
	 * MIT License | (c) Dustin Diaz 2015
	 */
!function(t,i){"undefined"!=typeof e&&e.exports?e.exports=i():n(3035)(t,i)}("bowser",function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var i,r=t(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(e),a=!o&&/android/i.test(e),l=/nexus\s*[0-6]\s*/i.test(e),u=!l&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),d=/silk/i.test(e),h=/sailfish/i.test(e),p=/tizen/i.test(e),f=/(web|hpw)os/i.test(e),g=/windows phone/i.test(e),m=!g&&/windows/i.test(e),_=!r&&!d&&/macintosh/i.test(e),v=!a&&!h&&!p&&!f&&/linux/i.test(e),y=t(/edge\/(\d+(\.\d+)?)/i),b=t(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(e),x=!w&&/[^-]mobi/i.test(e),k=/xbox/i.test(e);/opera|opr|opios/i.test(e)?i={name:"Opera",opera:s,version:b||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?i={name:"Opera Coast",coast:s,version:b||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?i={name:"Yandex Browser",yandexbrowser:s,version:b||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?i={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?i={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?i={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?i={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?i={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?i={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(i={name:"Windows Phone",windowsphone:s},y?(i.msedge=s,i.version=y):(i.msie=s,i.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?i={name:"Chrome",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?i={name:"Microsoft Edge",msedge:s,version:y}:/vivaldi/i.test(e)?i={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||b}:h?i={name:"Sailfish",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(i={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=s)):d?i={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?i={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",blackberry:s,version:b||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(i={name:"WebOS",webos:s,version:b||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=s)):/bada/i.test(e)?i={name:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?i={name:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(e)?i={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(e)?i={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?i={name:"Android",version:b}:/safari|applewebkit/i.test(e)?(i={name:"Safari",safari:s},b&&(i.version=b)):r?(i={name:"iphone"==r?"iPhone":"ipad"==r?"iPad":"iPod"},b&&(i.version=b)):i=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||b}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(i.name=i.name||"Blink",i.blink=s):(i.name=i.name||"Webkit",i.webkit=s),!i.version&&b&&(i.version=b)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=s,i.version=i.version||t(/gecko\/(\d+(\.\d+)?)/i)),i.msedge||!a&&!i.silk?r?(i[r]=s,i.ios=s):_?i.mac=s:k?i.xbox=s:m?i.windows=s:v&&(i.linux=s):i.android=s;var S="";i.windowsphone?S=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r?(S=t(/os (\d+([_\s]\d+)*) like mac os x/i),S=S.replace(/[_\s]/g,".")):a?S=t(/android[ \/-](\d+(\.\d+)*)/i):i.webos?S=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?S=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?S=t(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(S=t(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(i.osversion=S);var T=S.split(".")[0];return w||u||"ipad"==r||a&&(3==T||T>=4&&!x)||i.silk?i.tablet=s:(x||"iphone"==r||"ipod"==r||a||l||i.blackberry||i.webos||i.bada)&&(i.mobile=s),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=s:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=s:i.x=s,i}function t(e){return e.split(".").length}function n(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function i(e){for(var i=Math.max(t(e[0]),t(e[1])),r=n(e,function(e){var r=i-t(e);return e+=new Array(r+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--i>=0;){if(r[0][i]>r[1][i])return 1;if(r[0][i]!==r[1][i])return-1;if(0===i)return 0}}function r(t,n,r){var o=a;"string"==typeof n&&(r=n,n=void 0),void 0===n&&(n=!1),r&&(o=e(r));var s=""+o.version;for(var l in t)if(t.hasOwnProperty(l)&&o[l])return i([s,t[l]])<0;return n}function o(e,t,n){return!r(e,t,n)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent:"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=r,a.compareVersions=i,a.check=o,a._detect=e,a})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/header/cloud-e365a4.png"},function(e,t,n){e.exports=n.p+"assets/images/header/cloud@2x-e5fba4.png"},function(e,t,n){e.exports=n.p+"assets/images/header/wordmark-d95b0a.png"},function(e,t,n){e.exports=n.p+"assets/images/header/wordmark@2x-8fdb34.png"},function(e,t,n){e.exports=n.p+"assets/images/list-bullet-ab4e6e.png"},,,function(e,t,n){e.exports=n.p+"assets/images/messages/deleted_user_40-8817cd.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-banner l-inner-fullwidth">\n\n</div>\n<div class="l-listen-hero">\n\n</div>\n<div class="l-listen-wrapper">\n  <div class="l-about-main">\n    <div class="l-about-rows">\n      <div class="l-about-row">\n        <div class="l-about-top">\n\n        </div>\n      </div>\n      <div class="l-about-row l-listen__mainContent">\n        <div class="l-about-left">\n\n        </div>\n        <div class="l-about-right">\n\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="l-sidebar-right">\n\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-premium">\n  <div class="l-premium-banner l-inner-fullwidth">\n\n  </div>\n  <div class="l-premium-content">\n\n  </div>\n</div>\n'},useData:!0})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=[{id:"Pacific/Midway",name:"International Date Line West",utc_offset:-39600},{id:"Pacific/Midway",name:"Midway Island",utc_offset:-39600},{id:"Pacific/Pago_Pago",name:"Samoa",utc_offset:-39600},{id:"Pacific/Honolulu",name:"Hawaii",utc_offset:-36e3},{id:"America/Juneau",name:"Alaska",utc_offset:-32400},{id:"America/Los_Angeles",name:"Pacific Time (US & Canada)",utc_offset:-28800},{id:"America/Tijuana",name:"Tijuana",utc_offset:-28800},{id:"America/Phoenix",name:"Arizona",utc_offset:-25200},{id:"America/Chihuahua",name:"Chihuahua",utc_offset:-25200},{id:"America/Mazatlan",name:"Mazatlan",utc_offset:-25200},{id:"America/Denver",name:"Mountain Time (US & Canada)",utc_offset:-25200},{id:"America/Guatemala",name:"Central America",utc_offset:-21600},{id:"America/Chicago",name:"Central Time (US & Canada)",utc_offset:-21600},{id:"America/Mexico_City",name:"Guadalajara",utc_offset:-21600},{id:"America/Mexico_City",name:"Mexico City",utc_offset:-21600},{id:"America/Monterrey",name:"Monterrey",utc_offset:-21600},{id:"America/Regina",name:"Saskatchewan",utc_offset:-21600},{id:"America/Bogota",name:"Bogota",utc_offset:-18e3},{id:"America/New_York",name:"Eastern Time (US & Canada)",utc_offset:-18e3},{id:"America/Indiana/Indianapolis",name:"Indiana (East)",utc_offset:-18e3},{id:"America/Lima",name:"Lima",utc_offset:-18e3},{id:"America/Lima",name:"Quito",utc_offset:-18e3},{id:"America/Caracas",name:"Caracas",utc_offset:-16200},{id:"America/Halifax",name:"Atlantic Time (Canada)",utc_offset:-14400},{id:"America/La_Paz",name:"La Paz",utc_offset:-14400},{id:"America/Santiago",name:"Santiago",utc_offset:-14400},{id:"America/St_Johns",name:"Newfoundland",utc_offset:-12600},{id:"America/Sao_Paulo",name:"Brasilia",utc_offset:-10800},{id:"America/Argentina/Buenos_Aires",name:"Buenos Aires",utc_offset:-10800},{id:"America/Argentina/San_Juan",name:"Georgetown",utc_offset:-10800},{id:"America/Godthab",name:"Greenland",utc_offset:-10800},{id:"Atlantic/South_Georgia",name:"Mid-Atlantic",utc_offset:-7200},{id:"Atlantic/Azores",name:"Azores",utc_offset:-3600},{id:"Atlantic/Cape_Verde",name:"Cape Verde Is.",utc_offset:-3600},{id:"Africa/Casablanca",name:"Casablanca",utc_offset:0},{id:"Europe/Dublin",name:"Dublin",utc_offset:0},{id:"Europe/Dublin",name:"Edinburgh",utc_offset:0},{id:"Europe/Lisbon",name:"Lisbon",utc_offset:0},{id:"Europe/London",name:"London",utc_offset:0},{id:"Africa/Monrovia",name:"Monrovia",utc_offset:0},{id:"Etc/UTC",name:"UTC",utc_offset:0},{id:"Europe/Amsterdam",name:"Amsterdam",utc_offset:3600},{id:"Europe/Belgrade",name:"Belgrade",utc_offset:3600},{id:"Europe/Berlin",name:"Berlin",utc_offset:3600},{id:"Europe/Berlin",name:"Bern",utc_offset:3600},{id:"Europe/Bratislava",name:"Bratislava",utc_offset:3600},{id:"Europe/Brussels",name:"Brussels",utc_offset:3600},{id:"Europe/Budapest",name:"Budapest",utc_offset:3600},{id:"Europe/Copenhagen",name:"Copenhagen",utc_offset:3600},{id:"Europe/Ljubljana",name:"Ljubljana",utc_offset:3600},{id:"Europe/Madrid",name:"Madrid",utc_offset:3600},{id:"Europe/Paris",name:"Paris",utc_offset:3600},{id:"Europe/Prague",name:"Prague",utc_offset:3600},{id:"Europe/Rome",name:"Rome",utc_offset:3600},{id:"Europe/Sarajevo",name:"Sarajevo",utc_offset:3600},{id:"Europe/Skopje",name:"Skopje",utc_offset:3600},{id:"Europe/Stockholm",name:"Stockholm",utc_offset:3600},{id:"Europe/Vienna",name:"Vienna",utc_offset:3600},{id:"Europe/Warsaw",name:"Warsaw",utc_offset:3600},{id:"Africa/Algiers",name:"West Central Africa",utc_offset:3600},{id:"Europe/Zagreb",name:"Zagreb",utc_offset:3600},{id:"Europe/Athens",name:"Athens",utc_offset:7200},{id:"Europe/Bucharest",name:"Bucharest",utc_offset:7200},{id:"Africa/Cairo",name:"Cairo",utc_offset:7200},{id:"Africa/Harare",name:"Harare",utc_offset:7200},{id:"Europe/Helsinki",name:"Helsinki",utc_offset:7200},{id:"Europe/Istanbul",name:"Istanbul",utc_offset:7200},{id:"Asia/Jerusalem",name:"Jerusalem",utc_offset:7200},{id:"Europe/Kiev",name:"Kyev",utc_offset:7200},{id:"Europe/Minsk",name:"Minsk",utc_offset:7200},{id:"Africa/Johannesburg",name:"Pretoria",utc_offset:7200},{id:"Europe/Riga",name:"Riga",utc_offset:7200},{id:"Europe/Sofia",name:"Sofia",utc_offset:7200},{id:"Europe/Tallinn",name:"Tallinn",utc_offset:7200},{id:"Europe/Vilnius",name:"Vilnius",utc_offset:7200},{id:"Asia/Baghdad",name:"Baghdad",utc_offset:10800},{id:"Asia/Kuwait",name:"Kuwait",utc_offset:10800},{id:"Europe/Moscow",name:"Moscow",utc_offset:10800},{id:"Africa/Nairobi",name:"Nairobi",utc_offset:10800},{id:"Asia/Riyadh",name:"Riyadh",utc_offset:10800},{id:"Europe/Moscow",name:"St. Petersburg",utc_offset:10800},{id:"Europe/Moscow",name:"Volgograd",utc_offset:10800},{id:"Asia/Tehran",name:"Tehran",utc_offset:12600},{id:"Asia/Muscat",name:"Abu Dhabi",utc_offset:14400},{id:"Asia/Baku",name:"Baku",utc_offset:14400},{id:"Asia/Muscat",name:"Muscat",utc_offset:14400},{id:"Asia/Tbilisi",name:"Tbilisi",utc_offset:14400},{id:"Asia/Yerevan",name:"Yerevan",utc_offset:14400},{id:"Asia/Kabul",name:"Kabul",utc_offset:16200},{id:"Asia/Yekaterinburg",name:"Ekaterinburg",utc_offset:18e3},{id:"Asia/Karachi",name:"Islamabad",utc_offset:18e3},{id:"Asia/Karachi",name:"Karachi",utc_offset:18e3},{id:"Asia/Tashkent",name:"Tashkent",utc_offset:18e3},{id:"Asia/Kolkata",name:"Chennai",utc_offset:19800},{id:"Asia/Kolkata",name:"Kolkata",utc_offset:19800},{id:"Asia/Kolkata",name:"Mumbai",utc_offset:19800},{id:"Asia/Kolkata",name:"New Delhi",utc_offset:19800},{id:"Asia/Colombo",name:"Sri Jayawardenepura",utc_offset:19800},{id:"Asia/Katmandu",name:"Kathmandu",utc_offset:20700},{id:"Asia/Almaty",name:"Almaty",utc_offset:21600},{id:"Asia/Dhaka",name:"Astana",utc_offset:21600},{id:"Asia/Dhaka",name:"Dhaka",utc_offset:21600},{id:"Asia/Novosibirsk",name:"Novosibirsk",utc_offset:21600},{id:"Asia/Rangoon",name:"Rangoon",utc_offset:23400},{id:"Asia/Bangkok",name:"Bangkok",utc_offset:25200},{id:"Asia/Bangkok",name:"Hanoi",utc_offset:25200},{id:"Asia/Jakarta",name:"Jakarta",utc_offset:25200},{id:"Asia/Krasnoyarsk",name:"Krasnoyarsk",utc_offset:25200},{id:"Asia/Shanghai",name:"Beijing",utc_offset:28800},{id:"Asia/Chongqing",name:"Chongqing",utc_offset:28800},{id:"Asia/Hong_Kong",name:"Hong Kong",utc_offset:28800},{id:"Asia/Irkutsk",name:"Irkutsk",utc_offset:28800},{id:"Asia/Kuala_Lumpur",name:"Kuala Lumpur",utc_offset:28800},{id:"Australia/Perth",name:"Perth",utc_offset:28800},{id:"Asia/Singapore",name:"Singapore",utc_offset:28800},{id:"Asia/Taipei",name:"Taipei",utc_offset:28800},{id:"Asia/Ulaanbaatar",name:"Ulaan Bataar",utc_offset:28800},{id:"Asia/Urumqi",name:"Urumqi",utc_offset:28800},{id:"Asia/Tokyo",name:"Osaka",utc_offset:32400},{id:"Asia/Tokyo",name:"Sapporo",utc_offset:32400},{id:"Asia/Seoul",name:"Seoul",utc_offset:32400},{id:"Asia/Tokyo",name:"Tokyo",utc_offset:32400},{id:"Asia/Yakutsk",name:"Yakutsk",utc_offset:32400},{id:"Australia/Adelaide",name:"Adelaide",utc_offset:34200},{id:"Australia/Darwin",name:"Darwin",utc_offset:34200},{id:"Australia/Brisbane",name:"Brisbane",utc_offset:36e3},{id:"Australia/Melbourne",name:"Canberra",utc_offset:36e3},{id:"Pacific/Guam",name:"Guam",utc_offset:36e3},{id:"Australia/Hobart",name:"Hobart",utc_offset:36e3},{id:"Australia/Melbourne",name:"Melbourne",utc_offset:36e3},{id:"Pacific/Port_Moresby",name:"Port Moresby",utc_offset:36e3},{id:"Australia/Sydney",name:"Sydney",utc_offset:36e3},{id:"Asia/Vladivostok",name:"Vladivostok",utc_offset:36e3},{id:"Asia/Magadan",name:"Magadan",utc_offset:39600},{id:"Pacific/Noumea",name:"New Caledonia",utc_offset:39600},{id:"Asia/Magadan",name:"Solomon Is.",utc_offset:39600},{id:"Pacific/Auckland",name:"Auckland",utc_offset:43200},{id:"Pacific/Fiji",name:"Fiji",utc_offset:43200},{id:"Asia/Kamchatka",name:"Kamchatka",utc_offset:43200},{id:"Pacific/Majuro",name:"Marshall Is.",utc_offset:43200},{id:"Pacific/Auckland",name:"Wellington",utc_offset:43200},{id:"Pacific/Tongatapu",name:"Nuku'alofa",utc_offset:46800}]},,function(e,t,n){function i(e,t,n){for(var i=-1,r=s(t),o=r.length;++i<o;){var a=r[i],l=e[a],u=n(l,t[a],a,e,t);(u===u?u===l:l!==l)&&(void 0!==l||a in e)||(e[a]=u)}return e}var r=n(2670),o=n(2673),s=n(1112),a=o(function(e,t,n){return n?i(e,t,n):r(e,t)});e.exports=a},function(e,t,n){var i=n(1755);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1769);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i=n(175),r=n(20);e.exports=function(e){var t=i.usertextOneline(e,{links:!1});return new r.SafeString(i.splitWords(t))}},function(e,t){e.exports={"sc-artwork-placeholder-0":["#846170","#70929c"],"sc-artwork-placeholder-1":["#846170","#e6846e"],"sc-artwork-placeholder-2":["#846170","#8e8485"],"sc-artwork-placeholder-3":["#70929c","#846170"],"sc-artwork-placeholder-4":["#70929c","#e6846e"],"sc-artwork-placeholder-5":["#70929c","#8e8485"],"sc-artwork-placeholder-6":["#e6846e","#846170"],"sc-artwork-placeholder-7":["#e6846e","#70929c"],"sc-artwork-placeholder-8":["#e6846e","#8e8485"],"sc-artwork-placeholder-9":["#8e8485","#846170"],"sc-artwork-placeholder-10":["#8e8485","#70929c"],"sc-artwork-placeholder-11":["#8e8485","#e6846e"]}},function(e,t,n){function i(e){function t(e){var t=e.prefix;return[r(e)].filter(Boolean).concat(e.subroutes).map(function(e){var n=e.route,r=""===n?"":i(e.route).test("")?"(?:/(?:"+n+"))?":"/(?:"+n+")";return u.defaults({route:t+r},e)})}function n(e){var t=i(e.route),n=s(e),r=null!=e.name?e.name:e.route;return{name:r,route:t,handler:n,code:e.code}}var i=c({includeQueryParams:!0,caseInsensitive:!1,definitions:{user:":alphanum{1,255}",sound:":alphanum{1,255}",playlist:":alphanum{1,255}",id:":num+",stationType:"track|artist",stationIdentifier:":alphanum{1,255}(?:/:alphanum{1,255})?",secretToken:"s-[a-zA-Z0-9]{5}",group:":alphanum{1,255}",exploreCategory:"[^/]+",tag:".+",conversationId:":num+:(?::num+|system)",code:"\\w+",planName:"pro(?:-unlimited)?",metric:"\\w+",date:"[^/]+",monthYear:"(?:0[1-9]|1[012])-20[0-9]{2}"}});return e.reduce(function(e,n){return n.subroutes?e.concat(t(n)):e.concat(n)},[]).map(n)}function r(e){var t=e.fallThrough;return t===!0?null:{route:".*",handler:t?s(t):o}}function o(){return this.apply("error",{type:"404"})}function s(e){var t=e.redirect,n=t?function(){var e="string"==typeof t?t:t.apply(this,arguments);return this.navigate(l(e,this.getQueryString()),{replace:!0,trigger:!0})}:e.handler;return e.requiresLogin?a(n):n}function a(e){return function(){return this.isLoggedIn()?e.apply(this,arguments):this.unauthenticated()}}function l(e,t){return t?e.indexOf("?")>-1?e+t.replace(/^\?/,"&"):e+t:e}var u=n(3),c=n(1184);e.exports=i([{route:"(.*)",handler:function(e){var t=e.replace(/[,.)]+$/,"");return e!==t?this.navigate("/"+t,{trigger:!0,replace:!0}):this.apply("error",{type:"404"})}},{prefix:":user/:sound",subroutes:n(1155),fallThrough:!0},{prefix:":user/sets/:playlist",subroutes:n(1151)},{prefix:":user",subroutes:n(1160),fallThrough:!0},{prefix:":user/stats",subroutes:n(1159)},{prefix:":user/(?!sets/):sound/stats",subroutes:n(1158)},{prefix:"you",subroutes:n(1161)},{prefix:"you/apps",subroutes:n(1146)},{prefix:"stations",subroutes:n(1156)},{route:"(?:you/)?groups(?:/.*)?",code:410,redirect:"/"},{route:"",handler:function(){return this.isLoggedIn()?this.navigate("/stream",{replace:!0,trigger:!0}):this.apply("front")}},{prefix:"charts",subroutes:n(1143)},{route:"(?:(?:explore|tracks)(?:/:exploreCategory)?|tags|hot|latest)",redirect:function(e){return e?"/charts/top?genre="+e:"/charts/top"}},{prefix:"discover",subroutes:n(1147)},{route:"campaigns/:alphanum+",code:410,redirect:"/"},{prefix:"people",subroutes:n(1150)},{route:"popular/searches(?:/(:num+))?",handler:function(e){return this.apply("popular-searches",{subpage:Number(e||"1")})}},{route:"(go-terms-of-use|community-guidelines|imprint|law-enforcement-guidelines)",handler:function(e){return this.apply("static-page",{pageName:e})}},{route:"(terms-of-use(?:-pro)?(?:/:monthYear)?)",handler:function(e){return this.apply("static-page",{pageName:e})}},{prefix:"pages",subroutes:n(1149)},{prefix:"press",subroutes:n(1152)},{prefix:"tags",subroutes:n(1157),fallThrough:{redirect:"/charts"}},{route:"search(?:/(sounds|sets|people|groups|go|albums))?",handler:function(e){return this.apply("search",{category:e})}},{route:"notifications",requiresLogin:!0,handler:function(){return this.apply("activity")}},{route:"stream/activity",redirect:"/notifications"},{route:"stream",requiresLogin:!0,handler:function(){return this.apply("stream")}},{route:"logout",code:401,handler:function(){return this.apply("logout")}},{prefix:"mobile",subroutes:n(1148)},{route:"upload",handler:function(){return this.apply("upload")}},{route:"upload-beta",handler:function(){return this.apply("upload")}},{route:"next-upload",redirect:"/upload"},{route:"messages(?:/:conversationId)?",requiresLogin:!0,handler:function(e){return this.apply("inbox",{conversationId:e})}},{prefix:"pro",subroutes:n(1145)},{route:"premium(/.*)?",redirect:function(e){return"/pro"+(e||"")}},{prefix:"go",subroutes:n(1144)},{route:"(soundcloudgo|GO)",redirect:"/go"},{prefix:"settings",subroutes:n(1153),fallThrough:{redirect:"/settings"}},{route:"dashboard(?:/.*)?",redirect:"/stream"},{route:"welcome",requiresLogin:!0,handler:function(){return this.apply("onboarding")}},{route:"creativecommons",redirect:"/search/sounds/?filter.license=to_share"},{route:"(tracks|people|groups)/search",redirect:function(e){return"tracks"===e&&(e="sounds"),"/search/"+e}},{prefix:"signin",subroutes:n(1154)},{route:"login(?:/(.*))?",redirect:function(e){return this.isLoggedIn()?"/stream":["/signin",e].filter(Boolean).join("/")}},{route:"signup",redirect:"/signin"},{route:"("+["apps","settings/(advanced|connections|privacy)(?:/(.*))?","share","upload-classic"].join("|")+")(/.*)?",handler:function(){return this.notImplemented()}}])},function(e,t,n){function i(e){return e&&(e.attributes||e)}function r(e,t){var n="visuals"===e?h.availableVisualsSizes:h.availableSizes,i=u.find(n,function(e){return e[0]>=t})||u.last(n);return"t20x20"===i[1]&&"artworks"===e?"tiny":i[1]}function o(e){if(e){var t,n;for(t=0,n=e.length;n>t;++t)if(!h.isDefaultImage(e[t].artwork_url))return e[t].artwork_url}return null}function s(e){h.imageUrlRegex.lastIndex=0;var t,n=h.imageUrlRegex.exec(e);return n&&(t=n[3].charCodeAt(0)%4+1,1!==t&&(e=e.replace("//i1.","//i"+t+"."))),e}var a=n(242),l=n(407),u=n(3),c=/^http:/,d=/default/,h=e.exports={tagOptions:{whitelist:["alt","class","height","itemprop","src","title","width"]},availableSizes:[[20,"t20x20"],[50,"t50x50"],[120,"t120x120"],[200,"t200x200"],[500,"t500x500"]],availableVisualsSizes:[[1240,"t1240x260"],[2480,"t2480x520"]],imageUrlRegex:/^.*\/(\w+)-([-a-zA-Z0-9]+)-([a-z0-9]+)\.(jpg|png|gif).*$/i,markup:function(e,t){var n=this.getMarkupAttrs(e,t);return a.getMarkup("img",n,this.tagOptions)},getMarkupAttrs:function(e,t){return e=i(e),u.assign({src:this.urlFrom(e,t.size),width:t.size,height:t.size,alt:this.getAltText(e)},t)},urlFrom:function(e,t,n){e=i(e);var r=e&&(e.artwork_url||e.avatar_url||o(e.tracks)||e.user&&e.user.avatar_url);return r=r?r.replace(c,"https:"):"",this.setFormat(r,t,n)},setFormat:function(e,t,n){if(this.isDefaultImage(e))return"";h.imageUrlRegex.lastIndex=0;var i=h.imageUrlRegex.exec(e);if(i){var o=i[1],a=i[3],l=r(o,t);l&&(e=e.replace(a,l)),n&&(e=s(e))}return e},isDefaultImage:function(e){return!e||d.test(e)},getAltText:function(e){return e=i(e),e?e.username?l.get(e,!0)+" avatar":l.get(e):""}}},,function(e,t){e.exports={ERROR:"banana-bus-error",OPEN:"banana-bus-open",DATA:"banana-bus-data",ACTION:"banana-bus-action",DISPOSE:"banana-bus-dispose",PUBLISH:"banana-bus-publish",PUBLISH_EVENT:"banana-bus-publish-event"}},function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i=e.exports={delimiters:{thousands:",",decimal:"."},relativeTime:{justNow:"Just now",rightNow:"Right now",future:"in %s",past:"%s",sec:n(["1 second","%d seconds"]),min:n(["1 minute","%d minutes"]),hour:n(["1 hour","%d hours"]),day:n(["1 day","%d days"]),month:n(["1 month","%d months"]),year:n(["1 year","%d years"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"MMM DD, YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortWeekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],minWeekdays:["Su","Mo","Tu","We","Th","Fr","Sa"]},d3:{grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return 1!==e?1:0}}},function(e,t){"use strict";function n(e,t,i,s){var a=e.firstChild,l=void 0;if(a)do a.nodeType===r?t(a):a.nodeType===o&&n(a,t,i,s),l=a;while((a=a.nextSibling)&&(!i||i(l)));s&&a&&s(a)}var i=Node,r=i.TEXT_NODE,o=i.ELEMENT_NODE;e.exports=n},function(e,t,n){"use strict";e.exports=n(124).extend({model:n(230),defaults:{query:null,entityKind:null},setupSources:function(){var e=this.options,t=e.query,i=e.entityKind;return this.shortcutsCollection=new(n(476))(null,{query:t,maxModels:2}),this.remoteCollection=new(n(1206))(null,{query:t,limit:10,entityKind:i}),[this.shortcutsCollection,this.remoteCollection]},updateFilter:function(e){this.shortcutsCollection.setUserInput(e),this.remoteCollection.updateQuery(e)},getQueryUrn:function(){return this.remoteCollection.queryUrn}})},,function(e,t,n){"use strict";function i(e){var t=e.audibleInformation.model;t&&this.attachments.add({urn:t.getUrn(),timestamp:e.timestamp})}function r(e){var t=this;e.some(function(e){return e===t.options.resource_id?(t.fetchUnread(),!0):void 0})}e.exports=n(72).extend({model:n(542),attachments:null,setup:function(e){var t=e.resource_id;this.attachments=new(n(1196))(null,{conversationId:t}),this.listenTo(this,"audibleInformationUpdated",i).listenTo(n(56),"new-unread-messages",r)},baseUrl:function(){return n(281).baseUrlWithId(this.resource_id,"messages")},comparator:function(e,t){return t.sentAt()-e.sentAt()},fetchUnread:function(){this.fetch({add:!0,remove:!1,url:this.baseUrl()+"?limit=10&linked_partitioning=1"})},getAttachments:function(){return this.attachments}},{onCleanup:function(e){e.attachments.release()}})},function(e,t,n){"use strict";e.exports=n(124).extend(n(428).withOptions({fields:["username"]}),{model:n(60),defaults:{limit:2e3,maxModels:null},setup:function(e){var t=e.query;n(124).prototype.setup.apply(this,arguments),this.setUserInput(t)},setupSources:function(){return[[new(n(411)),{maxModels:this.options.maxModels}]]}},{prefetch:function(){n(411).prefetch()}})},function(e,t,n){"use strict";e.exports=n(72).extend({actionName:null,defaults:{resource_id:null,resource_type:null},model:n(60),setup:function(e){var t=e.resource_type,i=e.resource_id,r=n(3).result(this,"actionName"),o=t,s=r+":target:"+o+":"+i;this.listenTo(n(73),s,this.onAction)},onAction:function(e){if(e.state)this.add({id:e.origin},{at:0});else{var t=this.get(e.origin);t&&this.remove(t)}}})},function(e,t,n){"use strict";function i(e){var t=e.state,i=e.target,r=this.get(i);if(r&&this.remove(r),t){var o=new(n(125))({id:i});o.release(),this.add(o,{at:0})}}e.exports=n(72).extend({model:n(125),setup:function(){this.listenTo(n(73),"likeStation",i)},baseUrl:function(){return this.getEndpointUrl("likedStations")},parse:function(e){var t=e.collection,i=n(3).values(n(125).types);return t.filter(function(e){var t=e.type;return i.indexOf(t)>-1})}},{hashFn:function(){return 1}})},,function(e,t,n){"use strict";function i(e){return"artist_recommended"}function r(e){return e.split("").reduce(function(e,t){return e+t.charCodeAt(0)},0)%1e3}e.exports=n(72).extend({model:n(125),defaults:{type:"artist"},baseUrl:function(){var e=i(this.options.type);return this.getEndpointUrl("recommendedStations",{type:e})},shuffleBy:function(e){var t=r(e);this.comparator=function(i){return i.id===e?1/0:n(100).toComponents(i.id).id%t},this.sort()}},{hashFn:function(e,t){return t.type||"artist"}})},function(e,t,n){"use strict";var i=e.exports=n(72).extend({model:n(64),setup:function(){n(63).isLoggedIn()||this.setToFullyPopulated()},baseUrl:function(){return this.getEndpointUrl("shortcutsTrackLikes")}},{hashFn:function(){return n(54).get("me").get("id")},prefetch:function(){var e=new i;e.isPopulated()||e.fetch(),e.release()}})},function(e,t,n){"use strict";e.exports=n(72).extend(n(144),{model:n(546),defaults:{resource_ids:[],tags:null},setup:function(e){var t=(e.tags,e.resource_ids);this.options.resource_ids=t.slice(0,10)},parse:function(e){return e},getSourceInfo:function(){var e=n(71).getCurrentSound(),t=this.find(function(t){return t.audible===e}),i=t&&t.get("bucket");return{type:"onboarding:"+i}},baseUrl:function(){var e,t=this.options,i=t.tags,r=t.resource_ids;return r.length?e={track_urns:n(3).map(r,n(100).generate.bind(null,"sound")).join(",")}:i&&(e={tags:[].concat(i).join(",")}),this.getEndpointUrl("onboardingTrackRecommendations",{},e)},audibleAt:function(e){return this.at(e).getAudible()}},{hashFn:function(e,t){return t.resource_ids.join("")}})},,function(e,t,n){(function(t){"use strict";var i=200,r=1e3,o=5e3;e.exports=n(72).extend({model:n(1361),_isLooping:!1,_loopInterval:null,_approvalDeferred:null,_isPending:!1,setup:function(){var e=this;this.listenTo(this,"change:entry_time",n(3).debounce(function(){e.sort({silent:!0})},i)).listenTo(this,"submission:success",function(){e._isPending=!0,e.trigger("change:approval")})},fetch:function(e){return e.timeout=o,n(72).prototype.fetch.call(this,e)},baseUrl:function(){return this.getEndpointUrl("visuals",{},{urn:"soundcloud:sounds:"+this.resource_id})},isLooping:function(){return this._isLooping},getLoopInterval:function(){return this._loopInterval},parse:function(e){var t=e&&e.visuals;return t?(t=n(3).map(t,function(e){return e.id=n(100).getAsAttributes(e.urn).id,e.filename=e.visual_url.split("/").pop(),e}),e.is_looping&&e.loop_interval&&(this._isLooping=!0,this._loopInterval=Math.max(r,e.loop_interval)),t):this.toJSON()},isApproved:function(){return!(!this.length||!this.at(0).get("urn"))},isPending:function(){return this._isPending},submitForApproval:function(e){if(!n(98).formData)return void this.trigger("submission:error");var i=new window.FormData,r={visuals:[],user_urn:n(54).get("me").getUrn(),urn:e};return this.forEach(function(e,t){var o;e&&e.has("file")&&(o=e.toJSON(),n(3).omit(o,"visual_url","urn","_resource_id","_resource_type"),o.entry_time=Math.floor(o.entry_time),r.visuals.push(o),i.append("visuals[upload-"+t+"]",e.get("file"),e.get("filename")))}),i.append("visuals_data",JSON.stringify(r)),t.ajax({url:n(54).get("visualsQueueHost"),type:"POST",data:i,processData:!1,contentType:!1,dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","OAuth "+n(63).getAuthToken())}}).done(this.trigger.bind(this,"submission:success")).fail(this.trigger.bind(this,"submission:error"))},fetchApprovalStatus:function(){var e=this,i="soundcloud:sounds:"+this.options.resource_id,r=n(54).get("me").getUrn(),o=this._approvalDeferred,s=function(t){t&&t.urn&&(e._isPending=!0),o.resolve()};return o&&"rejected"!==o.state()?o:(o=this._approvalDeferred=n(55).defer(),t.ajax(n(54).get("visualsQueueHost")+"/"+i,{data:{user_urn:r},beforeSend:function(e){e.setRequestHeader("Authorization","OAuth "+n(63).getAuthToken())}}).done(s).fail(o.reject),o)},comparator:function(e){return e.get("entry_time")}})}).call(t,n(1))},function(e,t,n){"use strict";var i=(e.exports=n(124).extend({model:n(342),setupSources:function(){var e=this.options,t=e.category,r=[new(n(1209))(null,e)];return t&&"who_to_follow"!==t||r.unshift(new i(null,e)),r}}),n(72).extend(n(1302),{model:n(342),adZone:"suggestedUsers",_deferred:null,meIds:null,setup:function(){this.meIds=new(n(443))},fetch:function(e){var t=this;if(this._deferred)return this._deferred;var i=this._deferred=n(55).defer();return this.meIds.fetch().done(function(){
n(72).prototype.fetch.call(t,e).done(i.resolve).fail(i.reject)}).fail(i.reject),i.always(function(){t._deferred=null}),i},parse:function(e){var t=this.meIds;return e.filter(function(e){return!t.get(e.origin.id)})}},{onCleanup:function(e){e.meIds.release(),e.meIds=null},hashFn:function(e,t){return t&&t.category||1}}))},function(e,t,n){"use strict";e.exports=n(272).extend({defaults:{limit:n(54).get("maxComments")},initialize:function(){n(272).prototype.initialize.apply(this,arguments),this.threads=[],this.listenTo(this,"remove",this._removeComment)},threads:null,_addComment:function(e){var t,i,r,o,s=e.get("timestamp");r=this.getTimestampIndex(s),i=this.threads[r],e.created_timestamp=Date.parse(e.get("created_at")),i&&i[0]===s?(o=n(3).sortedIndex(i[1],e,function(e){return e.created_timestamp}),i[1].splice(o,0,e)):(t=[s,[e]],this.threads.splice(r,0,t))},_removeComment:function(e){var t,n=this.getThreadAtTimestamp(e.get("timestamp"));n&&(t=n[1].indexOf(e),t>-1&&n[1].splice(t,1))},_prepareModel:function(){var e=n(272).prototype._prepareModel.apply(this,arguments);return e.created_timestamp=Date.parse(e.created_at),e.get("timestamp")>this.soundDuration&&e.set({timestamp:n(105).EMPTY_TIMESTAMP},{silent:!0}),this._addComment(e),e},comparator:function(e,t){var i=e.attributes.timestamp===n(105).EMPTY_TIMESTAMP?1/0:e.attributes.timestamp,r=t.attributes.timestamp===n(105).EMPTY_TIMESTAMP?1/0:t.attributes.timestamp;return i-r||e.created_timestamp-t.created_timestamp},getThreadComments:function(e){var t,i,r=arguments[1],o=n(3).isNumber(r)?r:0,s=n(3).isBoolean(r)?r:!1;return t=0===o?this.getThreadAtTimestamp(e):n(3).find(this.threads,function(t){return Math.abs(e-t[0])<=o&&t[0]!==n(105).EMPTY_TIMESTAMP}),i=t?t[1]:[],i.filter(s?function(e){return e.id}:n(3).identity)},getTimestamps:function(){return n(3).pluck(this.threads,0)},getTimestampIndex:function(e){return n(3).sortedIndex(this.threads,[e],function(e){return e[0]===n(105).EMPTY_TIMESTAMP?1/0:e[0]})},getThreadAtTimestamp:function(e){var t=this.getTimestampIndex(e),n=this.threads[t];return n&&n[0]===e?n:null}})},,function(e,t,n){"use strict";e.exports=n(124).extend({model:n(341),filters:[function(e){return e.isAlbum()&&e.isLiked()}],setupSources:function(){return[new(n(885))(null,this.options)]},getSourceInfo:function(){return{type:"user-liked-albums",resourceId:this.options.userId,resourceType:"user"}}})},function(e,t,n){"use strict";function i(e){var t=e.object;this.add(n(341).getModelData(this.options.userId,"playlist",t.id),{at:0})}function r(e){var t=(e.targetType,e.state),i=e.origin,r=e.target,s=void 0;t?this.add(n(341).getModelData(i,"playlist-like",r),{at:0}):(s=o.call(this,r))&&this.remove(s)}function o(e){return this.find(function(t){return e===t.get("playlist").id})}var s=[{emitter:n(73),event:"like",getInstance:function(e,t){var n=t.origin,i=t.targetType;return e.options.userId===n&&"playlist"===i},handler:r},{emitter:n(73),event:"createPlaylist",getInstance:function(e,t){var n=t.object;return e.options.userId===n.get("user_id")},handler:i}];e.exports=n(143).extend(n(194).withOptions({events:s}),{model:n(341),defaults:{type:"playlists/liked_and_owned"},baseUrl:function(){return this.getEndpointUrl("collectionPlaylists",{id:this.options.userId})},audibleAt:function(e){var t=this.at(e);return t&&t.getAudible()}})},function(e,t,n){"use strict";var i=["liked","owned","all"];e.exports=n(124).extend({model:n(341),_filterType:"all",filters:[function(e){if(e.isAlbum())return!1;switch(this._filterType){case"owned":return e.isOwned();case"liked":return e.isLiked();default:return!0}}],setupSources:function(){return[new(n(885))(null,this.options)]},setTypeFilter:function(e){e!==this._filterType&&i.indexOf(e)>-1&&(this._filterType=e,this.recalculateFilters())},compareModels:function(e,t){return e.get("playlist").id===t.get("playlist").id},getSourceInfo:function(){return{type:"user-playlists",resourceId:this.options.userId,resourceType:"user"}}})},function(e,t,n){"use strict";e.exports=n(72).extend({model:n(65).extend(),baseUrl:function(){return this.getEndpointUrl("meRightsholders")},parse:function(e){var t=n(54).get("me"),i=t.getUrn(),r=n(3).uniq(e||[],function(e){return e.rightsholder_urn});return r.map(function(e){var n=e.name,r=e.rightsholder_urn;return n||r!==i?{name:n,rightsholder_urn:r}:{name:t.get("username"),rightsholder_urn:r}})},availableTerritories:function(){var e=this.models.reduce(function(e,t){return e[t.get("rightsholder_urn")]=t.get("name"),e},{}),t=n(3).object(n(3).map(n(92).monetizableCountryCodes(),function(t){return[t,e]}));return t}},{hashFn:function(){return 1}})},function(e,t,n){"use strict";e.exports=n(72).extend({model:n(64),defaults:{limit:250},baseUrl:function(){return this.getEndpointUrl("userTracks",{id:this.options.userId})}})},function(e,t,n){"use strict";e.exports=n(72).extend({model:n(314),url:null,defaults:{userId:null},setup:function(e){this.webProfiles=new(n(414))(null,e)},fetch:function(){var e=this;return this.webProfiles.fetch().done(function(t){e.lastFetchTime=Date.now(),e.reset(t)})},saveEdits:function(){var e=this,t=this.models.map(function(e){return e.validate()});return n(55).all(t).then(function(){for(var t=arguments.length,i=Array(t),r=0;t>r;r++)i[r]=arguments[r];return n(3).all(i)?n(22).sync("create",e,{url:e.webProfiles.url()}):n(55).reject()})}},{hashFn:function(e,t){return t.userId}})},function(e,t,n){"use strict";e.exports={onboardingLike:{viewType:"callout",viewOptions:{title:n(51).t("Keep track of this track"),body:n(51).t("Click the heart to save it to your list of likes.")},shouldDisplay:function(){return n(63).isLoggedIn()&&!n(54).get("me").hasLikes()&&"onboarding"===n(54).get("router").getLayoutInfo().layoutName}},pulseUpsell:{viewType:"modal",viewOptions:{Subview:n(1515),filter:"darken",width:500},shouldDisplay:function(){return n(63).isLoggedIn()&&n(54).get("rollouts").get("v2_pulse_upsell")}}}},function(e,t,n){"use strict";e.exports=[n(51).t("January"),n(51).t("February"),n(51).t("March"),n(51).t("April"),n(51).t("May"),n(51).t("June"),n(51).t("July"),n(51).t("August"),n(51).t("September"),n(51).t("October"),n(51).t("November"),n(51).t("December")]},function(e,t){"use strict";function n(e,t){return 1===t?"rgb("+e+")":"rgba("+e+","+t+")"}var i="0,0,0",r="102,102,102",o="153,153,153",s="229,229,229",a="255,0,0",l="255,191,153",u="255,51,0",c="255,85,0",d="255,119,0",h="255,101,0",p="255,255,255";e.exports={_config:{barWidth:2,gapWidth:1,fadeInSteps:10,fixedTimeIndicator:!0,commentLines:!1,fullHighlight:!0},"default":{progressGradient:[[0,d],[.7,u],[.701,c],[1,c]],loaderGradient:[[0,i,.5],[1,i,.5]],backgroundGradient:[[0,r],[.7,r],[.701,r,.5],[1,r,.5]],gapGradient:[[0,o,.5],[.7,o,.5],[.701,p,0],[1,p,0]],scrubberGradientBackward:[[0,r,.5],[.7,r,.5],[.701,r,0],[1,r,0]],scrubberGradientForward:[[0,c,.5],[.7,c,.5],[.701,c,0],[1,c,0]],highlightGradientPlayed:[[0,c],[.7,c],[.701,c],[1,c]],highlightGradientUnplayed:[[0,i,.5],[1,i,.5]],progressIndicatorBg:n(i,1),progressIndicatorColor:n(h,1),durationIndicatorBg:n(i,1),durationIndicatorColor:n(o,1),dividerColorPrevious:n(a,1),dividerColorUpcoming:n(o,1)},inverted:{progressGradient:[[0,d],[.7,u],[.701,l],[1,l]],loaderGradient:[[0,p],[1,p]],backgroundGradient:[[0,p],[.7,p],[.701,s],[1,s]],gapGradient:[[0,p,0],[.28,p,.3],[.7,p,.5],[.701,p,.125],[1,p,.125]],scrubberGradientBackward:[[0,p,.5],[.7,p,.5],[.701,p,0],[1,p,0]],scrubberGradientForward:[[0,c,.5],[.7,c,.5],[.701,c,0],[1,c,0]],highlightGradientPlayed:[[0,c],[.7,c],[.701,c],[1,c]],highlightGradientUnplayed:[[0,p],[1,p]],progressIndicatorBg:n(i,1),progressIndicatorColor:n(h,1),durationIndicatorBg:n(i,1),durationIndicatorColor:n(o,1),dividerColorPrevious:n(a,1),dividerColorUpcoming:n(o,1)}}},,,,,,,,,function(e,t,n){(function(t){"use strict";var i=(new Date).getFullYear();e.exports=n(82).extend({fields:{year:{defaultValue:null,datasource:n(3).range(i-13,i-100,-1).map(function(e){return{value:e,label:e}})},month:{defaultValue:null,datasource:n(891).map(function(e,t){return{value:t+1,label:e}})}},buttons:{save:{label:n(51).t("Verify age"),action:"save"}},actions:{"default":"save",save:function(){var e=this,t=n(55).defer();return this.validate().done(function(n){n?e.saveOwnAge().done(t.resolve).fail(t.reject):t.reject()}).fail(t.reject),t}},constraints:{year:[[n(67),{message:n(51).t("Select a year.")}]],month:[[n(67),{message:n(51).t("Select a month.")}]]},saveOwnAge:function(){var e="/users/"+n(54).get("me").getUrn(),i=n(62).stringify({path:e},n(54).get("api_v2_host"));return t.ajax({type:"PUT",url:i,contentType:"application/json",dataType:"json",data:JSON.stringify({date_of_birth:this.pick("year","month")})})}},{hashFn:function(){return 1}})}).call(t,n(1))},,function(e,t,n){(function(t){"use strict";var i,r=/^https?:\/\/.+?\//,o=/^https?/,s={likes:"favorites",people:"users",sound:"track",sounds:"tracks","web-profile":"web_profile"};e.exports={EDGE:"e1/",initialize:function(e){var o=this,s=n(54).get("client_id"),a=n(54).get("public_api_host");t.ajaxSetup({statusCode:e.statusCode,xhr:i,progress:null,timeout:4e4,beforeSend:function(e,t){var i=o.isPublicApiEndpoint(t.url),l=o.isApiV2Endpoint(t.url),u=o.isSigninApiEndpoint(t.url);t.crossDomain=!0,(i||l||u)&&(n(63).isLoggedIn()&&e.setRequestHeader("Authorization","OAuth "+n(63).getAuthToken()),i&&(t.url=a+t.url.replace(r,"")),t.url=n(62).modify(t.url,{query:{client_id:s,app_version:n(54).get("app_version")}}))}})},isPublicApiEndpoint:function(e){return!o.test(e)||0===e.indexOf(n(54).get("public_api_host"))},isApiV2Endpoint:function(e){return 0===e.indexOf(n(54).get("api_v2_host"))},isSigninApiEndpoint:function(e){return 0===e.indexOf("https://sign-in.soundcloud.com/")},toAPIResource:function(e){return s[e]||e}};i=function(){var e,n=t.ajaxSettings.xhr,i=["Date","Content-Type"];return e=function(){var e=this,t=e._getAllResponseHeaders();return t||200!==this.status?t:i.map(function(t){return e.getResponseHeader(t)?t+": "+e.getResponseHeader(t):void 0}).filter(Boolean).join("\n")+"\n"},function(){var t=n();return t._getAllResponseHeaders=t.getAllResponseHeaders,t.getAllResponseHeaders=e,this.progress&&t.upload.addEventListener("progress",this.progress.bind(this)),t}}()}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var i="https://api.appboy.com/users/track";e.exports={trackUserEvent:function(e){if(n(63).isLoggedIn()){var r=n(54).get("me"),o=r.getUrn(),s=window.btoa(o),a={app_group_id:"5414e11b-f5cf-4ad7-8f58-7a57ceb8f7e1",events:[{app_id:"2c0ba43c-af74-488e-9dfd-b87280e02a92",external_id:s,time:(new Date).toISOString(),name:e,properties:{creator_display_name:r.get("username"),creator_user_urn:o},_update_existing_only:!0}]};t.ajax({type:"POST",dataType:"json",contentType:"application/json",url:i,data:JSON.stringify(a),statusCode:n(3).mapObject(n(280),function(){return n(3).noop})})}}}}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function i(e,t){var i=new(n(1271))(n(3).defaults({$targetEl:t},e.viewOptions));return i.once("dismissed",s).once("closed",a),n(55).all([n(55).delay(c),n(148).whenInserted(t[0],{timeout:1e4})]).then(function(){i.disposed||(window.document.body.appendChild(i.el),i.render())}),i}function r(e){var t=new(n(70))(e.viewOptions);return t.once(n(70).Events.CLOSED,function(){s(),a()}),n(55).delay(c).then(function(){t.disposed||t.open()}),t}function o(e){var t=n(890)[e];return t}function s(){u.set(l.id,!0)}function a(){l=null}var l,u=new(n(111))("callouts"),c=500;u.prune(Object.keys(n(890))),n(56).on("connect:logout",u.reset,u);e.exports={shouldDisplay:function(e){return!l&&!u.get(e)&&o(e).shouldDisplay()},display:function(e,n){var s=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=t.extend(!0,{},o(e),s),u="callout"===a.viewType?i(a,n):"modal"===a.viewType?r(a):null;return l={id:e,config:a,view:u},u}}}).call(t,n(1))},function(e,t,n){"use strict";e.exports=n(97).extend({nullable:!1,message:n(51).t("Enter at least one territory."),check:function(e,t){t(e&&e.length>0)}})},,function(e,t,n){"use strict";function i(e){return n(3).has(e,"rightsholder_urn")?Boolean(e.territory&&e.rightsholder_urn):Boolean(e.territory)}e.exports=n(97).extend({nullable:!1,message:n(51).t("Enter a rightsholder for each territory."),check:function(e,t){t(n(3).every(e||[],i))}})},function(e,t){"use strict";function n(){var e=Error.apply(this,arguments);e.name=this.name="UnauthorizedViewerError",this.message="User is unauthorized to view this resource.",this.stack=e.stack}n.prototype=Object.create(Error.prototype),e.exports=n},,function(e,t,n){"use strict";var i=e.exports=n(251).extend();n(1313).applyTo(i.prototype)},function(e,t){"use strict";function n(e){return(e^16*Math.random()>>e/4).toString(16)}var i="10000000-1000-4000-8000-100000000000";e.exports={generate:function(){return i.replace(/[018]/g,n)}}},function(e,t){"use strict";e.exports={getByteFromBuffer:function(e,t){return t>=0&&t<e.byteLength?new Uint8Array(e,t,1)[0]:void 0},getBlobFromDataURI:function(e){var t,n,i,r,o=[],s=e.split(",");for(t=s[0].indexOf("base64")>-1?window.atob(s[1]):decodeURI(s[1]),n=/^.*?:(.*?);/.exec(e)[1],i=0,r=t.length;r>i;i++)o[i]=t.charCodeAt(i);return new window.Blob([new Uint8Array(o)],{type:n})}}},function(e,t,n){"use strict";e.exports={bytesToMB:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t.base,r=void 0===i?n(95).windows?1024:1e3:i,o=t.digits,s=void 0===o?1:o,a=t.unit,l=void 0===a?"MB":a,u=e/Math.pow(r,2);return u.toFixed(s)+l}}},,function(e,t){"use strict";var n=/\r?\n/g,i=/\s+/g;e.exports={cleanBlockText:function(e){return e.trim().replace(n," ").replace(i," ")}}},function(e,t,n){"use strict";var i;i={prefix:"sc-icon",size:"small",title:!1,variation:null};e.exports={render:function(e){var t,r;return e=e||{},e=n(3).defaults(e,i),t=[e.prefix,[e.prefix,e.type].join("-")+(e.variation?"-"+e.variation:""),[e.prefix,e.size].join("-"),e.title?"sc-ir":"",e["class"]||""].filter(Boolean).join(" "),r=e.title?n(20).Utils.escapeExpression(e.title):"",'<span class="'+t+'">'+r+"</span>"}}},,function(e,t,n){"use strict";function i(e,t){if(e.playlist)return{resourceType:"playlist",resourceId:e.playlist.resource_id,resourceUrn:"soundcloud:playlists:"+e.playlist.resource_id};if("station"===t.sourceInfo.resourceType)return{resourceType:"station",resourceId:t.sourceInfo.resourceId,resourceUrn:t.sourceInfo.resourceId};switch(t.sourceInfo.type){case"user-profile":case"user-tracks":case"user-reposts":case"user-likes":return{resourceType:"user",resourceId:t.sourceInfo.resourceId,resourceUrn:"soundcloud:users:"+t.sourceInfo.resourceId};default:return null}}var r=e.exports={waitForPlayThreshold:function(e,t){if("history"===t.sourceInfo.type)return n(55).reject();var o=i(e,t);return e.isAd()?n(55).reject():r.whenSoundPlayedMinimum(e).then(function(){return{soundId:e.id,playContext:o}})},getMinimumPlayTime:function(){return 1e3},whenSoundPlayedMinimum:function(e){function t(){window.clearTimeout(s),o.resolve()}function i(){window.clearTimeout(s),o.reject()}var o=n(55).defer(),s=window.setTimeout(function(){e.off(null,t),e.off(null,i),e.isPlaying()?o.resolve():o.reject()},r.getMinimumPlayTime());return e.once("finish",t),e.once("pause",i),o.promise()}}},function(e,t,n){"use strict";function i(e){return n(3).pluck(n(92).countries([e.value]),"value")}function r(e){return 0===n(3).difference(o,e).length}var o=n(92).countryCodes(),s=.8,a=e.exports={partition:function(e){var t=[],o=[],l=[];return r(e)?t.push(a.worldwide()):n(92).regions().forEach(function(r){var a=i(r),u=n(3).intersection(a,e),c=n(3).difference(a,e);u.length>a.length*s?(t=t.concat(r),l=l.concat(c)):o=o.concat(u)}),{regions:t,countries:o.map(n(92).country),exceptions:l.map(n(92).country)}},worldwide:function(){return{title:n(51).t("Worldwide"),value:"worldwide"}}}},function(e,t,n){"use strict";function i(e){e.forEach(function(e){var t=e.target;d.has(t)&&d.get(t).forEach(function(t){return t(e)})})}function r(e){return e.intersectionRatio>0}function o(e,t){a(e,t),f.observe(e)}function s(e){l(e),f.unobserve(e)}function a(e,t){d.has(e)?d.get(e).push(t):d.set(e,[t])}function l(e){d["delete"](e)}var u=n(148).whenInserted,c=!(!window.IntersectionObserver||!window.WeakMap);e.exports={whenElementVisible:c?function(e){return u(e).then(function(){return n(55).promise(function(t){o(e,function(n){r(n)&&(s(e),t())})})})}:function(){return n(55).resolve()}};var d=c?new WeakMap:{},h=[0,.25,.5,.75,1],p="40px",f=c?new window.IntersectionObserver(i,{threshold:h,rootMargin:p}):{}},function(e,t,n){"use strict";function i(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t.onCaptchaSuccess,o=t.onCaptchaExpire,s=n(55).defer();return r().then(function(){window.grecaptcha.render(e,{sitekey:l,callback:i,"expired-callback":o}),s.resolve()},s.reject),s}function r(){if(!a){a=n(55).defer();var e=n(62).modify("https://www.google.com/recaptcha/api.js",{query:{hl:o(),onload:u,render:"explicit"}});s(e,{onerror:function(){a.reject(),a=null}})}return a.promise()}var o=n(51).getLocale,s=n(148).insertScript;e.exports={renderRecaptcha:i};var a=void 0,l=n(54).get("recaptcha_public_key"),u="__onRecaptchaReady";window[u]=function(){a.resolve(),delete window[u]}},function(e,t,n){"use strict";e.exports=n(114).extend({includeFooter:".l-sidebar-left",css:n(2691),template:n(2321)})},function(e,t,n){"use strict";e.exports=new(n(21))({requires:["getSourceInfo"]})},function(e,t,n){"use strict";e.exports=new(n(21))({override:{model:n(960)},audibleAt:function(e){var t=this.at(e);return t&&t.getSound()}})},function(e,t,n){"use strict";function i(e){var t=e.state,n=e.target,i=e.targetType,r=void 0,o="sound"===i?"track":"playlist",s=o+"-repost";t?this.add({type:s,created_at:(new Date).toISOString(),track:"track"===o?{id:n,kind:o}:null,playlist:"playlist"===o?{id:n,kind:o}:null},{at:0}):(r=this.find(function(e){return e.get("type")===s&&e.get(o).id===n}))&&this.remove(r)}var r=[{emitter:n(73),event:"repost",getInstance:function(e,t){var n=t.origin;return e.options.userId===n},handler:i}];e.exports=new(n(21))(n(194).withOptions({events:r}),{override:{model:n(295)},audibleAt:function(e){var t=this.at(e);return t&&t.getAudible()}})},,function(e,t,n){(function(t){"use strict";function i(e){return!(!e||e===r||n(122).isGenreLabel(e))}var r="NO_GENRE",o="CUSTOM_GENRE",s=function(e){var t=n(122).genreLabel(e.id);return{id:t.toString(),value:t.toString(),label:t}},a={title:{defaultValue:""},description:{defaultValue:""},genre:{defaultValue:r,datasource:[{value:r,id:r}],groups:[{links:[{id:r,value:r,label:n(51).t("None")},{id:o,value:o,label:n(51).t("Custom")}]},{title:n(51).t("Music"),links:n(122).genres("music").map(s)},{title:n(51).t("Audio"),links:n(122).genres("audio").map(s)}]},customGenre:{defaultValue:""},tags:{defaultValue:function(){return[]}},artwork_url:{defaultValue:null},sharing:{defaultValue:"public",datasource:[{label:n(51).t("private"),value:"private"},{label:n(51).t("public"),value:"public"}]},permalink:{defaultValue:""}};e.exports=new(n(21))({requires:["getAudible"],merge:{requiredModelAttributes:["title","description","tag_list","artwork_url","sharing","permalink"]},applyTo:function(e){t.extend(!0,e,{fields:a})},around:{getAttributesToBeSaved:function(e){var t=e.apply(this,n(3).rest(arguments)),i=n(3).pick(this.attributes,"title","description","sharing","permalink","genre"),s=this.get("customGenre");return i.genre===r?i.genre="":i.genre===o?i.genre=s:i.genre=n(3).unescape(i.genre),i.tag_list=n(181).serialize(this.get("tags")),n(3).assign(i,t)},getAttributesFromModel:function(e){var t=this.getAudible(),s=e.apply(this,n(3).rest(arguments)),a=n(3).pick(t.attributes,"title","description","sharing","permalink","artwork_url","genre");return i(n(3).escape(a.genre))?(a.customGenre=a.genre,a.genre=o):a.genre?a.genre=n(3).escape(a.genre):a.genre=r,a.tags=n(181).extract(t.attributes),n(3).assign(a,s)}},isCustomGenre:function(){return i(this.get("genre"))}})}).call(t,n(1))},function(e,t,n){"use strict";e.exports=new(n(21))({requirePrototype:n(82).prototype,applyTo:function(e){var t,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=i.gender,o=void 0===r?"gender":r,s=i.genderCustom,a=void 0===s?"genderCustom":s,l=(t={},t[o]={defaultValue:null,datasource:[{label:n(51).t("Female"),value:"female"},{label:n(51).t("Male"),value:"male"},{label:n(51).t("Prefer not to say"),value:"secret"},{label:n(51).t("Custom"),value:"custom"}]},t[a]={defaultValue:""},t);this.merge(e,{fields:l})}})},function(e,t,n){(function(t){"use strict";function i(e){return e.get("default_license")}function r(e){var t=i(e);return t&&t!==n(123).ALL_RIGHTS}function o(e,t){t&&this.set("shareAlike",!1)}function s(e,t){t&&this.set("nonDerivative",!1)}function a(e){return"change:"+e}function l(){var e=n(123).serializeCCAttributes(this.attributes);this.set("creativeCommonsLicense",e)}function u(){var e=this.get("license");return e===n(123).ALL_RIGHTS?e:this.get("creativeCommonsLicense")}var c={license:{defaultValue:function(){return r(n(54).get("me"))?n(123).COMMONS:n(123).ALL_RIGHTS},datasource:[{label:n(51).t("All Rights Reserved"),value:n(123).ALL_RIGHTS},{label:"Creative Commons",value:n(123).COMMONS}]},creativeCommonsLicense:{defaultValue:function(){return r(n(54).get("me"))?i(n(54).get("me")):n(123).DEFAULT_CC}},attribution:{defaultValue:!0,readOnly:!0},nonCommercial:{defaultValue:!0},nonDerivative:{defaultValue:!1},shareAlike:{defaultValue:!0}};e.exports=new(n(21))({requires:["getAudible"],merge:{requiredModelAttributes:["license"]},applyTo:function(e){t.extend(!0,e,{fields:c})},before:{setup:function(){var e=["license"].concat(Object.keys(n(123).ccFields));this.listenTo(this,"change:nonDerivative",o).listenTo(this,"change:shareAlike",s).listenTo(this,e.map(a).join(" "),l)}},around:{getAttributesToBeSaved:function(e){var t=e.apply(this,n(3).rest(arguments)),i={license:u.call(this)};return n(3).assign(i,t)},getAttributesFromModel:function(e){var t=this.getAudible(),i=e.apply(this,n(3).rest(arguments)),r=n(123).parse(t.get("license"));return n(3).assign(r,i)}}})}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function i(e){return e&&n(51).dateTimeHelper.fromString(e)}function r(e){return e.toISOString()}function o(){var e=this.get("monetizationStart"),t=this.get("monetizationEnd"),n=this.get("monetizationEnabled");!n||e||t||(this.set("monetizationEnd",!0),this.set("monetizationEndDate",a(h(),this.defaultDurationDays)))}function s(){var e=this.get("monetizationStart"),t=this.get("monetizationEnd"),n=this.get("monetizationStartDate");e&&t&&n&&(this.set("monetizationEndTimezone",this.get("monetizationStartTimezone")),this.set("monetizationEndDate",a(n,this.defaultDurationDays)))}function a(e,t){return e=new Date(+e),e.setUTCDate(e.getUTCDate()+t),e}function l(e,t){if(t){var i=n(92).monetizableCountryCodes().map(function(e){return{territory:e}});this.set("monetizationRightsholders",i)}else this.set("monetizationRightsholders",[])}function u(e,t){var n=["monetizationStartTimezone","monetizationStart","monetizationStartLocalDate","monetizationStartDate","monetizationEndTimezone","monetizationEnd","monetizationEndLocalDate","monetizationEndDate"],i=!t||!p();this.setFieldDisabled(n,i)}function c(e){var t={start_timestamp:null,start_timezone:null,end_timestamp:null,end_timezone:null,territories:[]};return e.get("monetizationEnabled")&&(e.get("monetizationStart")&&(t.start_timestamp=r(e.get("monetizationStartDate")),t.start_timezone=e.get("monetizationStartTimezone")),e.get("monetizationEnd")&&(t.end_timestamp=r(e.get("monetizationEndDate")),t.end_timezone=e.get("monetizationEndTimezone")),t.territories=n(3).pluck(e.get("monetizationRightsholders"),"territory").concat(e.get("unknownTerritories")).filter(Boolean)),t}function d(e){var t=e.get("monetizationRightsholders")||[];return t.filter(function(e){var t=e.rightsholder_urn;return!!t})}function h(){var e=new Date;return e.setHours(0,0,0,0),e}function p(){return n(54).get("me").canEditMonetization()&&n(54).get("me").hasMonetization()}var f=n(3).negate(p),g={monetizationEnabled:{defaultValue:!1,disabled:f},monetizationStartTimezone:{defaultValue:null,disabled:f},monetizationStart:{defaultValue:!1,disabled:f},monetizationStartLocalDate:{defaultValue:null,disabled:f},monetizationStartDate:{defaultValue:null,disabled:f},monetizationEndTimezone:{defaultValue:null,disabled:f},monetizationEnd:{defaultValue:!1,disabled:f},monetizationEndLocalDate:{defaultValue:null,disabled:f},monetizationEndDate:{defaultValue:null,disabled:f},monetizationRightsholders:{defaultValue:null,disabled:f,datasource:function(){return new(n(887))}},unknownTerritories:{defaultValue:null}};e.exports=new(n(21))({merge:{requiredModelAttributes:["monetization"]},applyTo:function(e){t.extend(!0,e,{fields:g,constraints:{monetizationStartDate:[[n(67),{message:n(51).t("Select a date.")}],n(315),n(424)],monetizationEndDate:[[n(67),{message:n(51).t("Select a date.")}],n(315),n(424)],monetizationRightsholders:[n(906),n(908)]},constraintConditions:{monetizationStartDate:{fields:["monetizationStartDate","monetizationStart"],check:function(e,t){return t&&(!e||this.isDirty)}},monetizationEndDate:{fields:["monetizationEndDate","monetizationEnd"],check:function(e,t){return t&&(!e||this.isDirty)}},monetizationRightsholders:{fields:["monetizationEnabled"],check:function(e){return e}}}}),e.constraints.FORM=(e.constraints.FORM||[]).concat([[n(497),{nullable:!0,message:n(51).t("Monetization start must happen before monetization end."),fields:["monetizationStartDate","monetizationEndDate"]}]])},after:{setup:function(){var e=n(54).get("me");this.on("change:monetizationEnabled",u,this),this.forceChange("monetizationEnabled"),this.on("change:monetizationEnabled",l,this),!this.isEdit&&e.getCPPOption("default_monetizable")&&this.set("monetizationEnabled",!0),this.defaultDurationDays=e.getCPPOption("default_monetization_duration_in_days"),this.defaultDurationDays>0&&(this.isEdit||(this.on("change:monetizationEnabled",o,this),o.call(this)),this.on("change:monetizationStartDate change:monetizationEnd",s,this))}},around:{getAttributesToBeSaved:function(e){var t=e.apply(this,[].slice.call(arguments,1)),i=n(54).get("me").isCPPEnabled();return i?n(3).assign(t,{monetization:c(this),rightsholders:d(this)}):t},getAttributesFromModel:function(e){var t=e.apply(this,[].slice.call(arguments,1)),r=this.getAudible().get("monetization"),o=this.getAudible().get("rightsholders")||[],s=n(3).partition(r?r.territories:[],function(e){return n(3).contains(n(92).monetizableCountryCodes(),e)}),a=s[0],l=s[1];return r&&n(3).assign(t,{monetizationEnabled:!(!r.territories||!r.territories.length),monetizationStart:!!r.start_timestamp,monetizationEnd:!!r.end_timestamp,monetizationStartDate:i(r.start_timestamp),monetizationEndDate:i(r.end_timestamp),monetizationStartTimezone:r.start_timezone,monetizationEndTimezone:r.end_timezone}),this.attributes.monetizationRightsholders=a.map(function(e){var t=n(3).findWhere(o,{territory:e});return t||{territory:e}}),this.attributes.unknownTerritories=l,t}}})}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function i(){return"playlist-upload"===this.resource_type}function r(){this.setFieldDisabled("publisherIsrc",this.get("publisherIsrcGenerated")),this.setFieldDisabled("publisherIsrcGenerated",!(!this.get("publisherIsrcState")&&!this.get("publisherIsrc")))}function o(){return n(54).get("me").isCPPEnabled()}var s={publisherArtist:{defaultValue:null},publisherAlbumTitle:{defaultValue:null},publisherContainsMusic:{datasource:[{label:"",value:null},{label:n(51).t("Yes"),value:!0},{label:n(51).t("No"),value:!1}],defaultValue:null,disabled:i},publisher:{defaultValue:null},publisherIswc:{defaultValue:null},publisherUpcOrEan:{defaultValue:null},publisherIsrc:{defaultValue:null,disabled:i},publisherIsrcGenerated:{defaultValue:!1,disabled:i},publisherPLine:{defaultValue:null},publisherCLine:{defaultValue:null},publisherExplicit:{datasource:[{label:"",value:null},{label:n(51).t("Yes"),value:!0},{label:n(51).t("No"),value:!1}],defaultValue:null},publisherWriterComposer:{defaultValue:null},publisherReleaseTitle:{defaultValue:null}},a={artist:"publisherArtist",album_title:"publisherAlbumTitle",contains_music:"publisherContainsMusic",publisher:"publisher",iswc:"publisherIswc",upc_or_ean:"publisherUpcOrEan",isrc:"publisherIsrc",p_line:"publisherPLine",c_line:"publisherCLine",explicit:"publisherExplicit",writer_composer:"publisherWriterComposer",release_title:"publisherReleaseTitle"};e.exports=new(n(21))({requires:["getAudible","getAttributesFromModel"],requirePrototype:n(82).prototype,merge:{requiredModelAttributes:["publisher_metadata","isrc_state"]},applyTo:function(e){t.extend(!0,e,{fields:s,constraints:{publisher:[[n(67),{message:n(51).t("Enter a publisher.")}]],publisherIswc:[n(1275)],publisherIsrc:[[n(67),{message:n(51).t("Enter the ISRC.")}],n(1274)],publisherUpcOrEan:[n(1272)],publisherArtist:[[n(67),{message:n(51).t("Enter an artist.")}]],publisherContainsMusic:[[n(67),{message:n(51).t("Select an option.")}]],publisherWriterComposer:[[n(67),{message:n(51).t("Enter a composer.")}]]},constraintConditions:{publisherIsrc:{fields:["monetizationEnabled","publisherContainsMusic"],constraints:[n(67)],check:function(e,t){var i=n(54).get("me"),r=i.getCPPOption("is_isrc_required_for_audio"),o=i.hasMonetization();return e&&(t||r)&&o}},publisherArtist:{fields:["publisherContainsMusic","publisherIsrcGenerated"],check:function(e,t){return o()&&(e||t)}},publisherContainsMusic:{fields:["monetizationEnabled"],check:n(3).identity},publisher:{fields:["publisherContainsMusic"],check:function(e){return e&&n(54).get("me").hasMonetization()}},publisherWriterComposer:{fields:["publisherContainsMusic"],check:function(e){return o()&&e}}},isRequestingIsrcGeneration:function(){return this.get("publisherIsrcGenerated")&&!this.get("publisherIsrcState")},isPendingIsrcGeneration:function(){return"pending"===this.get("publisherIsrcState")}})},after:{setup:function(){!this.isEdit&&n(54).get("me").getCPPOption("default_is_audio")&&this.set("publisherContainsMusic",!1),this.listenTo(this,"change:publisherIsrcGenerated change:publisherIsrcState change:publisherIsrc",r),r.call(this)}},around:{getAttributesToBeSaved:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;t>r;r++)i[r-1]=arguments[r];var o=e.apply(this,i),s=this.isRequestingIsrcGeneration();return o.publisher_metadata=n(3).reduce(a,function(e,t,n){var i=this.get(t);return"isrc"===n?e[n]=s?null:i||null:e[n]=i,e},{},this),o.isrc_generate=s,o},getAttributesFromModel:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;t>r;r++)i[r-1]=arguments[r];var o=e.apply(this,i),s=this.getAudible(),l=s.get("publisher_metadata"),u=s.get("isrc_state");return l&&n(3).assign(o,n(3).reduce(a,function(e,t,n){return e[t]=l[n],e},{})),o.publisherIsrcState=u,o.publisherIsrcGenerated=!!u,o}}})}).call(t,n(1))},function(e,t,n){(function(t){"use strict";var i=n(318).typeToApi,r=n(318).apiToType,o=n(318).defaultReleaseType,s=n(318).releaseLabels,a={playlistType:{defaultValue:o,datasource:Object.keys(s).map(function(e){return{value:e,label:s[e]}})},releaseDate:{defaultValue:null}};e.exports=new(n(21))({requires:["getAudible"],requirePrototype:n(82).prototype,merge:{requiredModelAttributes:["set_type","release_date"]},applyTo:function(e){t.extend(!0,e,{fields:a,constraints:{releaseDate:[n(315),[n(67),{message:function(){return{album:n(51).t("Enter a release date for albums."),ep:n(51).t("Enter a release date for EPs."),single:n(51).t("Enter a release date for singles."),compilation:n(51).t("Enter a release date for compilations.")}[this.get("playlistType")]||n(51).t("Enter a release date.")}}]]},constraintConditions:{releaseDate:{fields:["playlistType"],constraints:[n(67)],check:function(e){return e!==o}}}})},around:{getAttributesToBeSaved:function(e){var t=e.apply(this,n(3).rest(arguments)),r=this.get("releaseDate");return n(3).assign({set_type:i(this.get("playlistType")),release_date:r&&n(51).dateTimeHelper.format(r,"iso")},t)},getAttributesFromModel:function(e){
var t=e.apply(this,n(3).rest(arguments)),i=this.getAudible();return n(3).assign({playlistType:r(i.get("set_type")),releaseDate:i.get("release_date")&&n(51).dateTimeHelper.fromString(i.get("release_date"))},t)}}})}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function i(){r.call(this,this.get("scheduledPublic"),this.get("scheduledPrivate"))}function r(e,t){var n;null!==t&&null!==e&&(n=!e&&(t||"public"===this.get("sharing")),this.set("sharing",n?"public":"private"))}var o;o={scheduledTimezone:{defaultValue:null},scheduledPublic:{defaultValue:!1},scheduledPublicLocalDate:{defaultValue:null},scheduledPublicDate:{defaultValue:null},scheduledPrivate:{defaultValue:!1},scheduledPrivateLocalDate:{defaultValue:null},scheduledPrivateDate:{defaultValue:null}};e.exports=new(n(21))({applyTo:function(e){t.extend(!0,e,{fields:o,constraints:{scheduledPublicDate:[[n(67),{message:n(51).t("Select a date.")}],n(315),n(424)],scheduledPrivateDate:[[n(67),{message:n(51).t("Select a date.")}],n(315),n(424)]},constraintConditions:{scheduledPublicDate:{fields:["scheduledPublicDate","scheduledPublic"],check:function(e,t){return t&&(!e||this.isDirty)}},scheduledPrivateDate:{fields:["scheduledPrivateDate","scheduledPrivate"],check:function(e,t){return t&&(!e||this.isDirty)}}}})},after:{setup:function(){this.listenTo(this,"change:scheduledPublic change:scheduledPrivate",i)}},getScheduledAttributes:function(){return["scheduled_public_date","scheduled_private_date","scheduled_timezone"]},getScheduledAttributesToBeSaved:function(){var e,t=n(54).get("me");return t.hasAnyScheduling()&&(e={},this.get("scheduledPublic")?e.scheduled_public_date=+this.get("scheduledPublicDate"):this.get("scheduledPublic")===!1&&(e.scheduled_public_date=null),this.get("scheduledPublic")||this.get("scheduledPrivate")?(e.scheduled_timezone=this.get("scheduledTimezone"),e.scheduled_public_timezone=this.get("scheduledTimezone")):(this.get("scheduledPublic")===!1||this.get("scheduledPrivate")===!1)&&(e.scheduled_timezone=null,e.scheduled_public_timezone=null),t.hasFullScheduling()&&(this.get("scheduledPrivate")?e.scheduled_private_date=+this.get("scheduledPrivateDate"):this.get("scheduledPrivate")===!1&&(e.scheduled_private_date=null))),e}})}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function i(){var e=this;this.trigger("generatingPermalink",!0),r.call(this,n(202).permalink(this.get("title"))).always(function(t){t=t||"",e.set("permalink",t),e.trigger("generatingPermalink",!1)})}function r(e,t,i){var o=this;return t=t||n(55).defer(),i=i||0,this._permalinkConstraint.check(e,function(n){n?t.resolve(e):a>i?r.call(o,o.increasePermalink(e),t,++i):t.reject()}),t}function o(){var e=this._sound||this._playlist;this.get("networks").forEach(function(t){var i=new(n(442))({id:t});s(["upload","share",i.get("type"),e.id,e.resource_type])})}var s=n(58).trackV0Click,a=10,l={networks:{defaultValue:function(){return[]}},apiStreamable:{defaultValue:!0},embeddableByAll:{defaultValue:!0},domainLocking:{defaultValue:!1},downloadable:{defaultValue:!1,disabled:function(){return!n(54).get("me").canEditDownloadable()}},feedable:{defaultValue:!1,disabled:function(){return!n(54).get("me").canEditRssEnabled()}},offlineSyncEnabled:{defaultValue:!0},buyLink:{defaultValue:""},buyTitle:{defaultValue:n(51).t("Buy").toString()},commentable:{defaultValue:!0},publicComments:{defaultValue:!0},stats:{defaultValue:!0},geoblocking:{defaultValue:!1},availableCountries:{defaultValue:null},labelName:{defaultValue:null},releaseDate:{defaultValue:null}},u={save:{label:n(51).t("Save"),pendingLabel:n(51).t("Saving"),action:"save"},cancel:{label:n(51).t("Cancel"),action:"cancel"}},c={buyLink:[[n(278),{strict:!1}]],buyTitle:[[n(491)]]},d={"default":"save",cancel:function(){n(426).confirm(n(51).t("Are you sure you want to stop your upload? Any unsaved changes will be lost.")).done(this.cancel.bind(this))}};e.exports=new(n(21))(n(928),n(930),n(248).withOptions({attr:"title"}),n(505),{applyTo:function(e){e.buttons=t.extend(!0,{},u,e.buttons||{}),e.fields=t.extend(!0,{},l,e.fields||{}),e.constraints=t.extend(!0,{},c,e.constraints||{}),e.actions=t.extend(!0,{},d,e.actions||{})},_permalinkConstraint:null,isEdit:!1,requires:["cancel","getAudible","createAudible","unsetAudible","getAttributesToBeSaved","getAttributesFromModel","onAudibleSaved"],before:{initialize:function(){var e={type:"playlist-upload"===this.resource_type?"playlist":"sound",getResource:function(){return this.getAudible()}};this._permalinkConstraint=new(n(421))(e,this)},setup:function(){this.on("imageDataChanged",this.markFieldsDirty.bind(this,"artwork_url")),this.on("change:commentable",function(e,t){t||this.set("publicComments",!1)},this),this.on("change:publicComments",function(e,t){t&&this.set("commentable",!0)},this)}},after:{setup:function(e,t){this.isEdit||(this.set("feedable",!!n(54).get("me").get("default_tracks_feedable")),t.inPlaylist||this.on("change:title",i,this))}},around:{getAttributesToBeSaved:function(e){var t=this.get("buyTitle"),i=this.get("buyLink"),r={};return this.get("networks")&&"public"===this.get("sharing")&&(r.shared_to={connections:this.get("networks").map(function(e){return{id:e}})}),r.embeddable=this.get("embeddableByAll"),r.purchase_url=i?n(62).normalize(i):null,r.purchase_title=t===this.getFieldMetadata("buyTitle").defaultValue?null:t,r.reveal_stats=this.get("stats"),r.label_name=this.get("labelName"),r.release_date=this.get("releaseDate")&&n(51).dateTimeHelper.format(this.get("releaseDate"),"iso"),r.geo_blockings=this.get("geoblocking")?n(92).complement(this.get("availableCountries")):[],n(3).assign(r,e())}},saveEdits:function(){var e=this.getAudibleWrapper(),t=e.model;return t.set(this.getAttributesToBeSaved()),t.save().then(e.afterSave).then(this.saveAudibleImage.bind(this,t)).then(this.onAudibleSaved.bind(this),this.onSaveFailed.bind(this)).done(this.trigger.bind(this,"saved"))},preSaveCheck:function(){return this.fileStatusCheck()},getAudibleWrapper:function(){var e,t=this.getAudible();return t?{model:t,afterSave:function(){}}:(e=this.createAudible(),e.on("destroy",function(){this.unsetAudible(),this.cancel()},this),{model:e,afterSave:o.bind(this)})},saveCleanup:function(e){this.markFieldsClean(Object.keys(this.getAttributesFromModel()))},setToFailed:function(e,t){var n="playlist-upload"===this.resource_type?"playlist":"track";t&&"string"!=typeof t&&(t=this.extractErrorMessage(t)),this.set({errorMessage:this.getErrorMessageTemplate(e,n,t)})},increasePermalink:function(e){var t=/-(\d+)$/,n=e.match(t);return n?e.replace(t,function(e,t){return t=parseInt(t,10)+1,"-"+t}):e+"-1"}})}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function i(){var e=this.getFileUpload();e&&e.set("hasBeenSaved",!0),this._fileSaveableDeferred=null,this.set("fileUploadSaved",!0),s.call(this)}function r(){this.markFieldsClean("fileUpload"),this.unsetFileUpload()}function o(e,t){var i=this.getAudible(),r=this.isEdit;switch(t){case n(87).TRANSCODING:r||this._fileSaveableDeferred.resolve();break;case n(87).FAILED:e.previous("status")===n(87).TRANSCODING?(i&&i.set("state",n(64).states.FAILED),this.setToFailed("transcode")):this.setToFailed("upload"),this.set("fileUploadFailed",!0);break;case n(87).COMPLETE:i&&i.set("state",n(64).states.FINISHED),r&&this._fileSaveableDeferred.resolve(),s.call(this)}}function s(){var e=this.get("fileUploadSaved"),t=this.getFileUpload(),i=t&&t.get("status")===n(87).COMPLETE;e&&i&&this.removeUpload()}var a={fileUploadSaved:{defaultValue:!1},fileUploadFailed:{defaultValue:!1},fileUpload:{defaultValue:null}};e.exports=new(n(21))({requires:["getAudible","isEdit","onAudibleSaved"],_fileSaveableDeferred:null,applyTo:function(e){e.fields=t.extend(!0,{},a,e.fields||{})},after:{onAudibleSaved:function(){var e=this.getAudible(),t=this.getFileUpload();e&&this.isEdit&&t&&n(64).prototype.createAudio.apply(e),t&&(n(56).trigger("upload_funnel:save"),n(58).trackUploadFunnel("save"),i.call(this))}},hasUnsavedUpload:function(){var e=this.getFileUpload();return e&&e.get("status")!==n(87).FAILED},setFileUpload:function(e){this.set({fileUpload:e,fileUploadFailed:!1,fileUploadSaved:!1}),this.markFieldsDirty("fileUpload"),e.hold(),this._fileSaveableDeferred=n(55).defer(),this.listenTo(e,"change:status",o).listenTo(e,"destroy",r)},unsetFileUpload:function(){var e=this.getAudible();e&&e.set("state",n(64).states.FINISHED),this.set("fileUpload",null),this._fileSaveableDeferred=null},getFileUpload:function(){return this.get("fileUpload")},removeUpload:function(){var e=this.getFileUpload();e&&(e.release(),e.remove())},getUploadAttributes:function(){var e=this.isEdit,t=this.getFileUpload(),n={};return t&&(n[e?"replacing_uid":"uid"]=t.getS3Key(),n[e?"replacing_original_filename":"original_filename"]=t.getFileName()),n},fileStatusCheck:function(){var e=this.getFileUpload(),t=this.isEdit?n(87).COMPLETE:n(87).TRANSCODING;if(!e)return n(55).resolve();var i=e.get("status");return t>i&&i!==n(87).FAILED?this._fileSaveableDeferred:n(55).resolve()}})}).call(t,n(1))},function(e,t,n){(function(t){"use strict";function i(e,t){this.has(e)&&this.set(e,Math.max(0,this.get(e)+(t?1:-1)))}e.exports=new(n(21))(n(924),n(1309),n(941),{requirePrototype:n(65).prototype,requires:["getPrevSound","getCurrentSound","getNextSound","getFirstSound","getLastSound","getSounds","getNumSounds","getSoundIndex","play","pause","isPlaying","isProcessing","isEditing","isPublic","isPrivate","isNowPlaying","duration","isGeoblocked","isMonetizable","isManagedByFeeds","hasScheduledPrivacy"],before:{setup:function(){this.listenTo(this,"destroy",this.pause)}},around:{destroy:function(e){var t=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return i.statusCode=n(3).defaults({202:function(){n(56).trigger("audible:delete-already-queued",t)}},i.statusCode),e(n(3).clone(i))}},getSourceInfo:function(){return{type:"single",resourceId:this.resource_id,resourceType:this.resource_type}},onLike:function(e){i.call(this,"likes_count",e.state)},onRepost:function(e){i.call(this,"reposts_count",e.state)},onComment:function(e){i.call(this,"comment_count",e.state)},onPlayRegistered:function(){n(54).get("me").owns(this)||i.call(this,"playback_count",!0)},getShareURL:function(e){var t,i,r,o=!(!e||!e.permalinkUrl),s=o?e.permalinkUrl:this.get("permalink_url");return r=this.playlist&&this.playlist.id,t={query:{"in":r?n(62).parse(this.playlist.getShareURL()).relative.substr(1):null}},o||(t.scheme="https"),e&&e.time&&(t.fragment="t="+e.time),i=this.isPrivate()&&!/\/s-[a-zA-Z0-9]{5}$/.test(s),n(62).stringify(t,s+(i?"/"+this.get("secret_token"):""))},resetSecretLink:function(){var e=this,i=n(62).stringify({path:"/"+n(62).joinPath([this.getUrn(),"secret_token","reset"])},n(54).get("api_v2_host"));return t.ajax({url:i,type:"POST",dataType:"json"}).done(function(t){e.set({secret_token:t.secret_token,permalink_url:t.permalink_url})})},getPermalink:function(){return this.get("permalink_url").replace(/^https?:.+?\w\//,"/")},isDisabled:function(){return!!this.get("disabled_reason")},isBlacklisted:function(){return"blacklisted"===this.get("disabled_reason")},isOverQuota:function(){return"quota"===this.get("disabled_reason")},toggle:function(e){this[this.isPlaying()?"pause":"play"](e)},isPaused:function(){return!this.isPlaying()},prefetchAudio:function(){var e=this.getCurrentSound();e&&e.initAudio()}})}).call(t,n(1))},function(e,t,n){"use strict";function i(e){return e?n(62).stringify({query:e}):"default"}function r(e){return!this.id||e.jqAjax||e.batch===!1||"private"===this.get("sharing")}function o(e,t,n,i,r){this.batchEndpoint=e,this.batchParams=t,this.maxQueueSize=n,this.flushInterval=i,this.queue={},this.timer=null,this.paramName=r}var s=50,a=50,l=function(){return null};e.exports=new(n(21))({applyTo:function(e,t){var n=t.batchEndpoint,u=t.flushInterval,c=void 0===u?s:u,d=t.maxQueueSize,h=void 0===d?a:d,p=t.getBatchParams,f=void 0===p?l:p,g=t.paramName,m=void 0===g?"ids":g,_={};this.around(e,{fetch:function(e,t){var s=this;if(t||(t={}),r.call(this,t))return e(t);if(this._requests||(this._requests={}),!this._requests[this.id]){var a=f(this)||null,l=i(a),u=_[l]||(_[l]=new o(n,a,h,c,m));this._requests[this.id]=u.add(this,t).always(function(){delete s._requests[s.id]})}return this._requests[this.id]}})}});o.prototype={getIds:function(){var e=n(3).reduce(this.queue,function(e,t,n){return"pending"===t.deferred.state()&&(e[n]=t),e},{});return Object.keys(e).sort()},add:function(e,t){var i=this.queue[e.id]=this.queue[e.id]||{callsigs:[],deferred:n(55).defer()};return i.callsigs.push({model:e,options:t}),this.timer||(this.timer=window.setTimeout(this.flush.bind(this),this.flushInterval)),Object.keys(this.queue).length===this.maxQueueSize&&this.flush(),i.deferred},flush:function(){var e,t=this.getIds(),i=this.queue;window.clearTimeout(this.timer),this.timer=null,this.queue={},t.length<1||n(23).callEndpoint(this.batchEndpoint,null,n(3).assign((e={},e[this.paramName]=t.join(","),e),this.batchParams)).then(function(e){var r=e.body,o=n(3).map(n(3).pluck(r,"id"),String);r.forEach(function(e){var t=e.id,n=i[t],r=Date.now();n&&(n.callsigs.forEach(function(t){var n=t.model;n.lastFetchTime=r,n.set(n.parse(e),t.options)}),n.deferred.resolve())}),n(3).difference(t,o).forEach(function(e){var t=i[e];t&&t.callsigs.forEach(function(e){e.model.trigger("error",e.model,new(n(909)),e.options)})}),n(3).each(i,function(e){e.deferred.reject()})})}}},function(e,t,n){"use strict";function i(e){return n(3).some(this.ownerAttributes,function(t){return e.indexOf(t)>-1})}e.exports=new(n(21))({requires:["ownerAttributes","ownerUrl","attrExists"],around:{fetch:function(e,t){var r,o=t&&t.attrs,s=n(3).clone(t),a=n(54).get("me").owns(this);return r=o&&!this.attrExists(o)&&i.call(this,o),a&&r&&(s.url=n(62).modify(this.ownerUrl(),{query:{representation:"owner"}}),s.batch=!1),e.call(this,s)}}})},function(e,t,n){(function(t){"use strict";function i(e){return"sound"!==e.resource_type}function r(e){return e&&e.attrs&&e.attrs.indexOf("visuals")>-1}function o(e){var t=e&&e.attrs;return!t||t.length>1||"visuals"!==t[0]}function s(){return this.getEndpointUrl("visuals",{},{urn:this.getUrn()})}function a(e){var t=e.visuals||this.get("visuals")||null;t&&e.tracking&&(t.tracking=e.tracking),this.set("visuals",t)}var l,u=1240,c=5e3;e.exports=new(n(21))({_lastVisualsFetch:null,around:{fetch:function(e,u){var d,h,p=this,f=[],g=i(this);return l||(l=new(n(155))({giveUp:1})),(!g||o(u))&&f.push(e(u)),g&&r(u)&&(this._lastVisualsFetch||this.attrExists("visuals")?h=this._lastVisualsFetch:(this._lastVisualsFetch=h=n(55).defer(),l.enabled?t.ajax({dataType:"json",url:s.call(this),timeout:c}).done(a.bind(this)).always(function(e,t,n){"timeout"===n&&l.failed(),p.set("visuals",p.get("visuals")||null),h.resolve()}):(this.set("visuals",null),h.resolve())),h&&f.push(h)),d=n(55).defer(),n(55).settled(f).done(function(e){d.resolve.apply(null,e)}).fail(d.reject),d}},getVisual:function(){var e=this.get("visuals");return e&&e.visuals&&(e=e.visuals),e&&e[0]||{}},getVisualURL:function(){var e=u*(n(95).isHiDPI?2:1);return n(83).setFormat(this.getVisual().visual_url,e)},hasVisuals:function(){return!n(3).isEmpty(this.get("visuals"))}})}).call(t,n(1))},function(e,t,n){"use strict";function i(e){return e&&e.replace(/^http:/,"https:")}e.exports=new(n(21))({applyTo:function(e,t){e.getTypes=n(3).constant(t&&t.types||{})},defaults:{getShareURL:function(e){return this.getShareAttributes(e).permalink_url}},getShareAttributes:function(e){var t=n(3).clone(this.attributes),r=e&&e.type,o=r&&this.getTypes()[r];return o&&n(3).each(o,function(e,n){t[n]=e.replace(/\:([a-zA-Z0-9_-]+)/g,function(e,n){return t[n]})}),t.permalink_url=i(t.permalink_url),t.uri=i(t.uri),"private"===t.sharing&&!t.secret_uri&&t.secret_token&&(t.secret_uri=n(62).modify(t.uri,{query:{secret_token:t.secret_token}})),t}})},function(e,t,n){"use strict";function i(e){return e._sdb=n(3).uniqueId("sdb"),e}function r(e){return e._sdb}function o(e,t){return e.hashFn?e.hashFn(t):t.id}function s(e,t,i){var o=e[i];return o&&r(t)&&(e[i]=n(3).isArray(o)?o.map(a.bind(null,t)):a(t,o)),e}function a(e,t){var i,s=r(e),a=o(e,t);return a?(u[s]=u[s]||{},(i=u[s][a])?n(3).assign(i,e.normalize?e.normalize(t):t):i=u[s][a]=t,i):t}function l(e,t){var n=r(e),i=o(e,t);i&&u[n]&&delete u[n][i]}var u={};e.exports=new(n(21))({applyTo:function(e){var t=e.constructor;this.before(t,{onCleanup:function(e){l(this.constructor,e.attributes)}}),i(t)},after:{initialize:function(){this.attributes=a(this.constructor,this.attributes)}},around:{set:function(e,t,i,r){var o,l;return"object"==typeof t?(o=t,r=i):(o={})[t]=i,o?(this.submodelMap&&(o=n(3).reduce(this.submodelMap,s,n(3).clone(o))),l=this.constructor,!this.resource_id&&l.hashFn(o)&&(o=a(l,o)),e(o,r)):this}}})},function(e,t,n){"use strict";e.exports=new(n(21))(n(3).assign({around:{set:function(e,t,n,i){var r,o,s=i&&i.silent;return s||(o=this.get(t)),r=e(t,n,i),s||o===n||this.trigger(t,{prev:o,current:n}),r},unset:function(e,t,n){var i,r,o=n&&n.silent;return o||(r=this.get(t)),i=e(t,n),o||void 0===r||this.trigger(t,{prev:r,current:void 0}),i},reset:function(e,t){var i,r,o;return t&&t.silent||(o=this.reduce(function(e,t,n){return t!==r&&(e[n]=t),e},{},this)),i=e(t),o&&n(3).each(o,function(e,t){this.trigger(t,{prev:e,current:void 0})},this),i}}},n(22).Events))},,,,,,function(e,t,n){"use strict";e.exports=n(1322)()},function(e,t,n){"use strict";var i;i={add:!0,remove:!0,merge:!0};e.exports=n(72).extend({model:null,setup:n(3).noop,_prepareModel:function(e){return e},_removeReference:n(3).noop,parse:function(e){return e&&e.collection||e},indexOfEquivalentModel:function(e,t,n){return(t||this.models).indexOf(e,n)},compareModels:function(e,t){return e===t},toJSON:function(){return this.models.slice()},set:function(e,t){var r,o,s,a,l=this.indexOfEquivalentModel.bind(this);for(t=n(3).defaults({},t,i),e=this.parse(e,t),e=n(3).isArray(e)?e.slice():[e],r=e.length;r--;)s=e[r],(l(s,e.slice(r+1))>-1||l(s)>-1)&&e.splice(r,1);return this.length+=e.length,o=null!==t.at&&t.at!==a?t.at:this.models.length,Array.prototype.splice.apply(this.models,[o,0].concat(e)),this.comparator&&this.sort({silent:!0}),t.silent||e.forEach(function(e){this.trigger("add",e,this,t)},this),this},remove:function(e,t){var i,r,o,s;for(t||(t={}),e=n(3).isArray(e)?e.slice():[e],i=0,r=e.length;r>i;i++)s=e[i],o=this.indexOf(s),o>=0&&(this.models.splice(o,1),this.length--,t.silent||(t.index=o,this.trigger("remove",s,this,t)));return this}})},function(e,t,n){"use strict";var i=window.document.referrer,r=n(62).parse(i).host||"",o=(n(62).getQueryParam("utm_medium")||"").toLowerCase(),s=[/\.ask\.com$/,/\.baidu\.com$/,/\.bing\.com$/,/\.duckduckgo\.com$/,/\.google\.com$/,/\.yahoo\.com$/,/\.yandex\.com$/];e.exports={facebook:"facebook"===o||/\bfacebook\.com/.test(i)||/\bw\.soundcloud\.com/.test(i)&&/origin=facebook/.test(i)||!!n(62).getQueryParam("fb_action_ids"),googleplus:"googleplus"===o,searchEngine:s.some(i.match,r)}},function(e,t,n){"use strict";e.exports=new(n(21))({canvas:null,context:null,isDirty:!1,isAnimating:!1,requires:["draw"],applyTo:function(e){e.defaults=n(3).assign({scale:1,$eventEl:null},e.defaults)},after:{draw:function(){this.setDirty(this.isAnimating)},onResize:function(){this.setDirty(!0)}},before:{setup:function(e){e.$eventEl||(e.$eventEl=this.$el),this.canvas=this.el,this.context=this.el.getContext("2d")}},override:{render:function(){this.hasData()?this.setDirty(!0):(this.setDirty(!1),this.fetchData())},destroyElement:n(3).noop},defaults:{onResize:n(3).noop},setDirty:function(e){(this.isDirty=e)&&this.trigger("dirty")}})},function(e,t,n){"use strict";function i(e){return a(e,n(140),{resource_id:e.resource_id})}function r(e){var t=a(e,n(140),{resource_id:e.resource_id});return n(1293).getDataFromFile(e.get("file")).done(function(e){e.artwork_data&&t.setImageFile(n(913).getBlobFromDataURI(e.artwork_data),"id3"),t.set(n(3).omit(e,"artwork_data"))}),t}function o(e){var t=a(e,n(327),{resource_id:e.resource_id}),i=e.getUploads().map(r);return t.addSoundForms(i),l(t),t}function s(e,t){var n=new e(null,t);return n.release(),n}function a(e,t,n){var i=s(t,n);return i.setFileUpload(e),i}function l(e){var t=new(n(305));t.add(e,{at:0}),t.release()}var u;e.exports={addFiles:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=t.toPlaylistUploadId,a=t.replaceSoundUploadId;u||(u=new(n(207)));var c,d=!s&&e.length>1&&n(528).getUploadAsPlaylist()&&n(54).get("me").canBulkUploadAsPlaylist();if(d){var h=u.addFiles(e,{asPlaylist:d});c=u.addUploadsAsAggregate(h)}else if(s){var h=u.addFiles(e,{toPlaylistUploadId:s});c=u.addUploadsToAggregate(h,s)}else a?u.addFiles(e,{replaceSoundUploadId:a}).forEach(i):u.addFiles(e).map(r).forEach(l);c&&o(c)}}},function(e,t,n){(function(t){"use strict";function i(e){return 400===e.status&&"RequestTimeout"===r(e.responseXML)}function r(e){return t(e).find("Error Code").text()}function o(e,t){function i(){s=e().done(u.resolve.bind(u)).progress(u.notify).fail(o)}function r(e){l.options.giveUp=0===e.status?1/0:a}function o(e){0===e.status||t(e)?(r(e),l.failed()):u.reject()}var s,a=3,l=new(n(155))({giveUp:a}),u=n(55).defer(),c=u.promise();return l.on("giveup",u.reject),l.on("enabled",i),u.always(function(){l.dispose()}),i(),c.abort=function(){s.abort(),u.reject()},c}function s(e){return function(){var t=n(55).defer(),i=t.promise(),r=t.notify,o=n(3).toArray(arguments).concat(r),s=e.apply(this,o);return s.then(t.resolve,t.reject),i.abort=s.abort,i}}e.exports=n(156).extend({upload:function(e){var t,n,r,a,l;return t=this.presign(e),n=s(this.uploadFile),l=this.resolveWith,a=t.then(function(t){return r=o(function(){return n(e,t)},i),r.then(function(){return l(t)})}),a.abort=function(){t.abort(),r&&r.abort()},a},presign:function(){return t.ajax({url:"upload/policy",dataType:"json",cache:!1})},uploadFile:function(e,i,r){var o,s;return s=n(62).stringify({scheme:"https",host:i.bucket+".s3.amazonaws.com"}),o=new window.FormData,n(3).each(i,function(e,t){o.append(t,e)}),o.append("file",e),t.ajax({url:s,type:"POST",data:o,processData:!1,contentType:!1,dataType:"xml",headers:{"x-amz-storage-class":"STANDARD_IA","x-amz-server-side-encryption":"AES256"},timeout:0,progress:r})},resolveWith:function(e){return e.key}})}).call(t,n(1))},,,,,,function(e,t,n){"use strict";e.exports=n(65).extend({submodelMap:{comment:n(105),playlist:n(85),promoted_by:n(60),track:n(64),user:n(60)},baseUrl:function(){var e={cursor:this.get("uuid"),limit:1};return this.getEndpointUrl("myActivitiesTracks",{},e)},parse:function(e){return e.collection?e.collection[0]:e},createSubmodel:function(){var e,t=n(3).last(this._submodels);n(65).prototype.createSubmodel.apply(this,arguments),e=n(3).last(this._submodels),e!==t&&this.listenTo(e,"destroy",this.onSubmodelDestroy)},onSubmodelDestroy:function(){this.destroy()},getSound:function(){var e,t;switch(this.get("type")){case"track":case"track-like":case"track-repost":case"track-sharing":case"track-promoted":e=this.get("track").id,t=n(64);break;case"comment":e=this.get("comment").track.id,t=n(64);break;case"playlist":case"playlist-like":case"playlist-repost":case"playlist-sharing":case"playlist-promoted":e=this.get("playlist").id,t=n(85)}return e?t.instances.get(e):null},equivalentTo:function(e){return this.get("uuid")===e.get("uuid")},getUuid:function(){return this.get("uuid")||this.id},isPromoted:function(){var e=this.get("type");return"track-promoted"===e||"playlist-promoted"===e}},{convert:function(e,t){var i,r,o,s={};if(r=(e.get||function(e){return this[e]}).bind(e),r("type")&&r("created_at")&&(r("track")||r("playlist"))&&(i={uuid:n(3).uniqueId(),type:r("type").replace(/_/g,"-"),created_at:r("created_at"),tags:"affiliated"},o=r("track"),o?i.track=o:i.playlist=r("playlist"),t))try{s=t.toJSON()}finally{i.user=s}return i},hashFn:function(){return null}})},function(e,t,n){"use strict";e.exports=n(65).extend({resource_type:"announcement",defaults:{dismissable:!0},baseUrl:function(){return this.getEndpointUrl("announcement",{id:this.id})},fetch:function(){},dismiss:function(){this.destroy()},isNew:function(){return!n(63).isLoggedIn()||!this.get("dismissable")}})},function(e,t,n){"use strict";e.exports=n(65).extend({resource_type:"app",baseUrl:function(){return this.getEndpointUrl("app",{id:this.id})}})},,,,,function(e,t,n){"use strict";e.exports=n(65).extend({baseUrl:function(){return this.getEndpointUrl("territoriesWhichRequireExplicitRightsholder",{},{isrc:this.id})},parse:function(e){return{territories:e}}},{hashFn:function(e){var t=e.id,n=void 0===t?"":t,i=e.resource_id;return i||"isrc:"+n}})},function(e,t,n){"use strict";e.exports=n(226).extend({maxResults:1e3,readOnly:!0,readEndpoint:"myFollowersIds"})},function(e,t,n){"use strict";e.exports=n(226).extend({readEndpoint:"likedStationIds",createEndpoint:"likeStation",deleteEndpoint:"unlikeStation"})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(20,function(e){i=n(1225);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(30,function(e){i=n(1226);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(21,function(e){i=n(1227);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(5,function(e){i=n(1228);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(25,function(e){i=n(1229);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(33,function(e){i=n(1230);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(38,function(e){i=n(1231);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(6,function(e){i=n(1232);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(17,function(e){i=n(1233);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(27,function(e){i=n(1234);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(4,function(e){i=n(1235);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(11,function(e){i=n(1236);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(36,function(e){i=n(1237);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(13,function(e){i=n(1238);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(28,function(e){i=n(1239);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(29,function(e){i=n(1240);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(7,function(e){i=n(1241);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(42,function(e){i=n(1242);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(41,function(e){i=n(1243);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(32,function(e){i=n(1244);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(19,function(e){i=n(1245);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(40,function(e){i=n(1246);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(10,function(e){i=n(1247);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(31,function(e){i=n(1248);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(23,function(e){i=n(1249);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(14,function(e){i=n(1250);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(18,function(e){i=n(1251);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(35,function(e){i=n(1252);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(24,function(e){i=n(1253);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(8,function(e){i=n(1254);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(26,function(e){i=n(1255);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(9,function(e){i=n(1256);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(37,function(e){i=n(1257);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(12,function(e){i=n(1258);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(15,function(e){i=n(1259);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(39,function(e){i=n(1260);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(16,function(e){i=n(1261);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(22,function(e){i=n(1262);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(3,function(e){i=n(1263);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},function(e,t,n){var i,r=[];e.exports=function(e){r?r.push(e):e(i)},n.e(34,function(e){i=n(1264);var t=r;r=null;for(var o=0,s=t.length;s>o;o++)t[o](i)})},,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/empty-states/playlists-17e39d.png"},,function(e,t,n){e.exports=n.p+"assets/images/empty-states/stream-d2c2a1.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/stream@2x-fab0f8.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/tracks-b8fba9.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/tracks@2x-59b77a.png"},function(e,t,n){e.exports=n.p+"assets/images/failed-25974f.png"},function(e,t,n){e.exports=n.p+"assets/images/failed@2x-0ba158.png"},function(e,t,n){e.exports=n.p+"assets/images/header/query-suggestion-ed120c.svg"},function(e,t,n){e.exports=n.p+"assets/images/header/search-dbfe5c.svg"},function(e,t,n){e.exports=n.p+"assets/images/notifications/error-18e777.png"},function(e,t,n){e.exports=n.p+"assets/images/notifications/good-248c30.png"},function(e,t,n){e.exports=n.p+"assets/images/notifications/good@2x-2dda7c.png"},function(e,t,n){e.exports=n.p+"assets/images/playback/volume-max-7a4115.svg";
},function(e,t,n){e.exports=n.p+"assets/images/playback/volume-medium-ca80e5.svg"},function(e,t,n){e.exports=n.p+"assets/images/playback/volume-muted-624fac.svg"},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-collection">\n  <div class="l-nav">\n\n  </div>\n  <div class="l-main">\n\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-main"></div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-front">\n  <div class="l-front-hero l-inner-fullwidth">\n\n  </div>\n  <div class="l-front-content">\n\n  </div>\n  <div class="l-front-mobile-teaser">\n\n  </div>\n  <div class="l-front-osc-teaser">\n\n  </div>\n  <div class="l-front-signup-teaser">\n\n  </div>\n  <div class="l-front-footer">\n\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-messages-left sc-border-box"></div>\n<div class="l-messages-top g-z-index-content"></div>\n<div class="l-messages-main"></div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-banner l-inner-fullwidth"></div>\n<div class="l-listen-hero"></div>\n<div class="l-engagement"></div>\n<div class="l-main"></div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-banner l-inner-fullwidth">\n\n</div>\n<div class="listen-content">\n\n</div>\n<div class="l-three-column listen-about">\n  <div class="l-sidebar-left">\n\n  </div>\n  <div class="l-main sc-border-light-right">\n\n  </div>\n  <div class="l-sidebar-right">\n\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-oscp m-about">\n  <div class="l-oscp-headline">\n\n  </div>\n  <div class="l-main">\n\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-oscp">\n  <div class="l-oscp__mainContainer">\n    <div class="l-oscp-headline">\n\n    </div>\n    <div class="l-main">\n\n    </div>\n  </div>\n  <div class="l-sidebar">\n\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-search l-fixed-fluid">\n  <div class="l-fixed-top">\n\n  </div>\n  <div class="l-fixed-left">\n\n  </div>\n  <div class="l-main">\n\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-station-hero l-inner-fullwidth">\n\n</div>\n<div class="l-one-column">\n  <div class="l-main l-station-main">\n\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-banner l-inner-fullwidth">\n\n</div>\n<div class="l-user-hero">\n\n</div>\n<div class="l-vertical-bar">\n\n</div>\n<div class="l-fluid-fixed">\n  <div class="l-main l-user-main sc-border-light-right">\n\n  </div>\n  <div class="l-sidebar-right l-user-sidebar-right">\n\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-one-column">\n  <div class="l-main">\n\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){(function(t){"use strict";function i(e,t){return 1===arguments.length?r(e):o(e,t)}function r(e){return JSON.parse(c.getItem(e))}function o(e,t){try{return c.setItem(e,JSON.stringify(t)),!0}catch(n){return!1}}function s(e){return c.removeItem(e)}function a(){return c.clear()}var l=n(2668),u=n(2669),c="localStorage"in t&&t.localStorage?t.localStorage:l;i.set=o,i.get=r,i.remove=s,i.clear=a,i.on=u.on,i.off=u.off,e.exports=i}).call(t,function(){return this}())},function(e,t,n){function i(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&s(v(e))}function o(e,t){return e="number"==typeof e||p.test(e)?+e:-1,t=null==t?_:t,e>-1&&e%1==0&&t>e}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&_>=e}function a(e){for(var t=u(e),n=t.length,i=n&&e.length,r=!!i&&s(i)&&(h(e)||d(e)),a=-1,l=[];++a<n;){var c=t[a];(r&&o(c,i)||g.call(e,c))&&l.push(c)}return l}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&s(t)&&(h(e)||d(e))&&t||0;for(var n=e.constructor,i=-1,r="function"==typeof n&&n.prototype===e,a=Array(t),u=t>0;++i<t;)a[i]=i+"";for(var c in e)u&&o(c,t)||"constructor"==c&&(r||!g.call(e,c))||a.push(c);return a}var c=n(2674),d=n(2676),h=n(2677),p=/^\d+$/,f=Object.prototype,g=f.hasOwnProperty,m=c(Object,"keys"),_=9007199254740991,v=i("length"),y=m?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?a(e):l(e)?m(e):[]}:a;e.exports=y},function(e,t,n){var i=n(1750);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1751);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1752);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1753);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1754);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1756);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1757);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1758);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1759);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1760);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1762);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},,,,,,,,,,,,function(e,t,n){function i(e){return n(r(e))}function r(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./activity":1036,"./activity.js":1036,"./charts":1037,"./charts.js":1037,"./collection":1038,"./collection.css":1113,"./collection.js":1038,"./collection.tmpl":1099,"./consumer-premium":1039,"./consumer-premium.js":1039,"./consumer-premium.tmpl":1100,"./copyright-form":1040,"./copyright-form.js":1040,"./developer-apps":1041,"./developer-apps.js":1041,"./error":1042,"./error.js":1042,"./front":1043,"./front.js":1043,"./front.tmpl":1101,"./inbox":1044,"./inbox.css":1114,"./inbox.js":1044,"./inbox.tmpl":1102,"./listen":1046,"./listen-blocked.tmpl":1103,"./listen-network":1045,"./listen-network.js":1045,"./listen-promoted.css":1115,"./listen-promoted.tmpl":1104,"./listen.css":1116,"./listen.js":1046,"./listen.tmpl":739,"./logout":1047,"./logout.js":1047,"./mobile":1049,"./mobile-pulse":1048,"./mobile-pulse.js":1048,"./mobile.js":1049,"./new-for-you":1050,"./new-for-you.js":1050,"./onboarding":1051,"./onboarding.js":1051,"./oscp":1052,"./oscp-about.tmpl":1105,"./oscp.css":1117,"./oscp.js":1052,"./oscp.tmpl":1106,"./password-reset-success":1053,"./password-reset-success.js":1053,"./people":1055,"./people-directory":1054,"./people-directory.js":1054,"./people.js":1055,"./personal-recommended":1056,"./personal-recommended.js":1056,"./popular-searches":1057,"./popular-searches.js":1057,"./premium":1058,"./premium.css":803,"./premium.js":1058,"./premium.tmpl":740,"./purchased":1059,"./purchased.js":1059,"./search":1060,"./search.css":1118,"./search.js":1060,"./search.tmpl":1107,"./settings":1061,"./settings.css":1119,"./settings.js":1061,"./signin":1062,"./signin.css":1120,"./signin.js":1062,"./static-page":1063,"./static-page.js":1063,"./station":1064,"./station.css":1121,"./station.js":1064,"./station.tmpl":1108,"./stats":1065,"./stats.js":1065,"./stream":1066,"./stream-explore.tmpl":462,"./stream.js":1066,"./subscriptions":1067,"./subscriptions.js":1067,"./tags":1068,"./tags.js":1068,"./track-manager":1069,"./track-manager.js":1069,"./track-stats":1070,"./track-stats.js":1070,"./two-column-sound-hero.css":1122,"./two-column-sound-hero.tmpl":2319,"./unsubscribed":1071,"./unsubscribed.js":1071,"./upload":1072,"./upload.css":2688,"./upload.js":1072,"./user":1074,"./user-network":1073,"./user-network.js":1073,"./user.css":1123,"./user.js":1074,"./user.tmpl":1109,"./widgets":1075,"./widgets.js":1075};i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=1135},,,,function(e,t,n){var i=n(51);e.exports=function(e,t){return i.dateTimeHelper.timecode(e,t.hash)}},function(e,t,n){var i=n(3),r="get",o="post",s="put",a="delete",l="public-api",u="api-v2",c="sign-in",d="visuals";e.exports=i.mapObject({announcement:[r,l,"announcements/:id"],announcements:[r,l,"announcements"],app:[r,l,"app/:id"],appV2TrackComments:[r,l,"app/v2/tracks/:id/comments"],audioAd:[r,u,"audio-ad"],charts:[r,u,"charts"],checkIdentifier:[r,c,"identifier",{q:null}],collectionPlaylists:[r,u,"users/:id/playlists/liked_and_owned"],comment:[r,l,"comments/:id"],developerApps:[r,u,"apps"],playlistLikesIds:[r,u,"me/playlist_likes/ids"],playlistLikesCreate:[s,u,"users/:userId/playlist_likes/:id"],playlistLikesDelete:[a,u,"users/:userId/playlist_likes/:id"],playlistRepostsIds:[r,l,"e1/me/playlist_reposts/ids"],playlistRepostsCreate:[s,l,"e1/me/playlist_reposts/:id"],playlistRepostsDelete:[a,l,"e1/me/playlist_reposts/:id"],soundLikesIds:[r,l,"e1/me/track_likes/ids"],soundLikesCreate:[s,u,"users/:userId/track_likes/:id"],soundLikesDelete:[a,u,"users/:userId/track_likes/:id"],edgePlaylistCategory:[r,l,"e1/playlists/:id/:category"],edgeTrackCategory:[r,l,"e1/tracks/:id/:category"],soundReposters:[r,u,"tracks/:id/reposters"],soundRepostsIds:[r,l,"e1/me/track_reposts/ids"],soundRepostsCreate:[s,l,"e1/me/track_reposts/:id"],soundRepostsDelete:[a,l,"e1/me/track_reposts/:id"],featuredProfiles:[r,u,"users/:id/featured-profiles"],feedPlaylistUpdate:[s,u,"feed-playlists/:id"],feedTrackUpdate:[s,u,"feed-tracks/:urn"],me:[r,u,"me"],meConnections:[r,l,"me/connections"],meRightsholders:[r,u,"me/rightsholders"],meUpdate:[s,u,"me"],myActivitiesTracks:[r,l,"me/activities/tracks"],myConnection:[r,l,"me/connections/:id"],myFollowersIds:[r,u,"me/followers/ids"],myFollowingsIds:[r,u,"users/:userId/followings/ids"],myFollowingsCreate:[o,u,"me/followings/:id"],myFollowingsDelete:[a,u,"me/followings/:id"],mySuggestedUsers:[r,u,"me/suggested/users/:category"],newForYou:[r,u,"me/new-for-you"],onboardingTrackRecommendations:[r,u,"onboarding/tracks/recommendations"],oscpStatus:[r,u,"oscp/status"],oscpUserCreate:[o,u,"oscp/user_info"],oscpPayoutCreate:[o,u,"oscp/payout"],oscpAvailableContract:[r,u,"oscp/contracts/available/:variant"],oscpActiveContract:[r,u,"oscp/contracts/active/:id"],oscpContractSign:[o,u,"oscp/contracts/sign/:variant"],paymentCheckout:[r,u,"payments/checkout"],paymentCheckoutItem:[r,u,"payments/checkout/:id"],paymentOrders:[r,u,"payments/orders/:type"],paymentQuotations:[r,u,"payments/quotations/:category"],paymentQuotationsCode:[r,u,"payments/quotations/code/:id"],paymentsConsumerSubscriptionsActive:[r,u,"payments/consumer-subscriptions/active"],paymentsSubscriptionsActive:[r,u,"payments/subscriptions/active"],personalizedTracks:[r,u,"me/personalized-tracks"],playHistoryTracks:[r,u,"me/play-history/tracks"],playHistoryContexts:[r,u,"me/play-history/contexts"],playHistoryAdd:[o,u,"me/play-history"],playHistoryClear:[a,u,"me/play-history"],playlist:[r,u,"playlists/:id"],playlistUpdate:[s,u,"playlists/:id"],playlistArtworkUpdate:[s,l,"playlists/:id"],playlistDelete:[a,l,"playlists/:id"],playlistCategory:[r,u,"playlists/:id/:category"],playlistCreate:[o,u,"playlists"],playlistDiscovery:[r,u,"playlists/discovery"],playlistsForTrack:[r,u,"tracks/:trackId/playlists"],playlistsWithoutAlbumsForTrack:[r,u,"tracks/:trackId/playlists_without_albums"],albumsForTrack:[r,u,"tracks/:trackId/albums"],promotedSearch:[r,u,"promoted/search"],promotedUploadTakeover:[r,u,"promoted/upload-takeover"],promotedUploadText:[r,u,"promoted/upload-text"],promotedUsers:[r,u,"promoted/users"],recommendedStations:[r,u,"stations/:type"],relatedSounds:[r,u,"tracks/:track_id/related"],reportCopyrightInfringement:[o,u,"copyright_reports"],resetPassword:[o,u,"users/password_reset",{email:null}],resolve:[r,u,"resolve",{url:""}],search:[r,u,"search"],searchQueries:[r,u,"search/queries"],searchCategory:[r,u,"search/:category"],searchSounds:[r,l,"search/sounds"],searchSuggestTags:[r,l,"search/suggest/tags"],shortcutsFollowings:[r,u,"me/shortcuts/followings"],shortcutsTrackLikes:[r,u,"me/shortcuts/track-likes"],signinWithFacebook:[o,c,"sign-in/facebook"],signinWithGoogle:[o,c,"sign-in/google"],signinWithPassword:[o,c,"sign-in/password"],signupWithEmail:[o,c,"sign-up/email"],signupWithEmailToken:[o,c,"sign-up/email/token"],signupWithFacebook:[o,c,"sign-up/facebook"],signupWithGoogle:[o,c,"sign-up/google"],station:[r,u,"stations/:urn"],stationBatch:[r,u,"stations",{urns:null}],stationTracks:[r,u,"stations/:urn/tracks"],likedStations:[r,u,"stations/liked"],likedStationIds:[r,u,"stations/liked/ids"],likeStation:[s,u,"stations/liked/:id"],unlikeStation:[a,u,"stations/liked/:id"],stream:[r,u,"stream"],streamNotifications:[r,u,"stream/notifications"],streamUserProfile:[r,u,"stream/users/:id"],streamUserReposts:[r,u,"stream/users/:id/reposts"],tagsSuggested:[r,u,"tags/suggested/:urn"],tagsSuggestedCategory:[r,u,"tags/suggested/:category/:urn"],territoriesWhichRequireExplicitRightsholder:[r,u,"tracks/explicit-rightsholder-required-in"],timeseriesTrack:[r,u,"users/:user_id/tracks/:track_id/stats/timeseries/:metric"],timeseriesUser:[r,u,"users/:user_id/stats/timeseries/:metric"],track:[r,u,"tracks/:urn"],trackAsOwner:[r,u,"tracks/:urn",{representation:"owner"}],trackBatch:[r,u,"tracks"],trackCategory:[r,u,"tracks/:id/:category"],trackCreate:[r,u,"tracks"],trackComments:[r,u,"tracks/:id/comments"],trackDelete:[a,u,"tracks/:id"],trackImageUpdate:[s,l,"tracks/:id"],trackPatchUpdate:[s,l,"tracks/:id"],trackPermalinkAvailability:[r,u,"track_permalink_availability",{permalink:null}],trackStreams:[r,l,"i1/tracks/:id/streams"],trackUpdate:[r,u,"tracks/:urn"],trinityPublish:[r,l,"tpub/publish"],trinitySubscribe:[r,l,"tsub/subscribe"],user:[r,l,"users/:id"],userAlbums:[r,u,"users/:id/albums"],userAsOwner:[r,u,"users/:urn",{representation:"owner"}],userComments:[r,l,"users/:id/comments"],userDelete:[o,u,"users/:urn/deletion"],userEmailCreate:[o,u,"users/:user_id/emails"],userEmailDelete:[a,u,"users/:user_id/emails/:id"],userEmailResendConfirmation:[o,u,"users/:user_id/emails/:id/confirmation"],userEmailUpdate:[s,u,"users/:user_id/emails/:id"],userEmails:[r,u,"users/:id/emails"],userFollowers:[r,u,"users/:id/followers"],userFollowersFollowedBy:[r,u,"users/:id/followers/followed_by/:followed_by"],userFollowings:[r,u,"users/:id/followings"],userFollowingsNotFollowedBy:[r,u,"users/:id/followings/not_followed_by/:not_followed_by"],userImageUpdate:[s,l,"users/:id"],userLikes:[r,u,"users/:id/likes"],userTrackLikes:[r,u,"users/:id/track_likes"],userNotificationsPreferences:[r,u,"users/:id/notifications/preferences"],userPlaylists:[r,u,"users/:id/playlists"],userPlaylistsWithoutAlbums:[r,u,"users/:id/playlists_without_albums"],userResetPassword:[o,u,"users/:id/password_reset"],userSettings:[r,u,"users/:id/settings"],userSpotlight:[r,u,"users/:id/spotlight"],userTracks:[r,u,"users/:id/tracks"],userWebProfiles:[r,u,"users/:urn/web-profiles"],userWebProfilesUpdate:[o,u,"users/:urn/web-profiles"],visuals:[r,d,"visuals"],userBlockingsIds:[r,l,"me/mutings/users/ids"],userBlockingsDelete:[a,l,"me/mutings/users/:id"],userBlockingsCreate:[o,l,"me/blockings",{user_id:null,reported:null,remove_activities:null}]},function(e){return{method:e[0],service:e[1],path:e[2],query:e[3]}})},function(e,t){var n=["free","lite","solo","pro","pro-plus","creator-pro","creator-pro-unlimited"],i={customBuyTitle:[!1,!0,!0,!0,!0,!0,!0],quietMode:[!1,!0,!0,!0,!0,!0,!0],fileReplace:[!1,!0,!0,!0,!0,!0,!0],planLevel:[0,1,2,2,2,1,2],spotlight:[!1,!0,!0,!0,!0,!0,!0],stats:[0,1,2,2,2,1,2],visuals:[!1,!0,!0,!0,!0,!0,!0],widgets:[!1,!0,!0,!0,!0,!0,!0],widgetOptions:[!1,!1,!1,!1,!0,!1,!0]},r=["free","go"],o={adFree:[!1,!0]};e.exports={get:function(e,t,s){var a;return(a=i[s])?a[n.indexOf(e)]:(a=o[s])?a[r.indexOf(t)]:void 0}}},function(e,t,n){function i(e){return s.isFunction(e.toJSON)?e.toJSON():e}function r(e){return e.replace(/^https?:.+?\w\//,"/")}function o(e,t){return t&&(t.metric&&(e.push(t.metric),t.from&&t.to&&e.push(t.from,t.to)),t.expanded&&e.push("expanded")),e}var s=n(3),a=n(54),l=n(470),u=n(241);e.exports={listen:function(e,t){if(e=i(e),"playlist"===e.kind)return this.getRoute("playlist",e,t);var n,o={};return t=t?"/comment-"+t:"",e._playlist&&e._playlist.id&&(n=e._playlist.permalink_url.replace(/\/s-[a-zA-Z0-9]{5}$/,""),o.query={"in":r(n).substr(1)+(this.includeSecretTokenForPlaylist(e._playlist)?"/"+e._playlist.secret_token:"")}),o.path=e.user?"/"+e.user.permalink+"/"+e.permalink+t+(this.includeSecretTokenForSound(e)?"/"+e.secret_token:""):r(e.permalink_url+t),l.stringify(o)},listenNetwork:function(e,t,n){e=i(e);var o={};return"related"===t&&(t="recommended"),o.path=e.user?"/"+e.user.permalink+"/"+e.permalink+(this.includeSecretTokenForSound(e)?"/"+e.secret_token:""):r(e.permalink_url),o.path+="/"+t+("comments"===t&&n?"/"+n:""),l.stringify(o)},playlistEdit:function(e){return e=i(e),"/"+l.stringify({path:[e.user.permalink,"sets",e.permalink,"edit"]})},playlist:function(e){return e=i(e),e.user?"/"+e.user.permalink+"/sets/"+e.permalink+(this.includeSecretTokenForPlaylist(e)?"/"+e.secret_token:""):r(e.permalink_url)},playlistNetwork:function(e,t){e=i(e);var n={};return n.path=e.user?"/"+e.user.permalink+"/sets/"+e.permalink+(this.includeSecretTokenForPlaylist(e)?"/"+e.secret_token:""):r(e.permalink_url),n.path+="/"+t,l.stringify(n)},user:function(e,t){return e=i(e),"/"+e.permalink+(t?"/"+t:"")},userNetwork:function(e,t){return e=i(e),"/"+e.permalink+"/"+t},root:function(){return"/"},explore:function(e){return e=(e||"").toLowerCase(),"/"+l.stringify({path:["explore",e]})},charts:function(e,t){return"/"+l.stringify({path:["charts",s.findWhere(u.kinds,{id:e||u.defaultKind}).urlPart],query:{genre:t}})},people:function(e){return"/"+l.stringify({path:["people",e]})},peopleDirectory:function(e){return"/people/directory"+(e?"/"+e:"")},popularSearches:function(e){return"/popular/searches"+(e?"/"+e:"")},pages:function(e){return"/"+e},embedPage:function(){return"/pages/embed"},emailUnsubscribedPage:function(){return"/pages/unsubscribed"},pagesPages:function(e){return"/pages/"+e},pressPages:function(e){return(e||"").replace(/^(\/?press\/|\/?)/,"/press/")},tags:function(e){return l.stringify({path:"/tags/"+e.toLowerCase()})},search:function(e,t,n){var i={sounds:"sounds",high_tier:"go",sets:"sets",playlists:"sets",albums:"albums",people:"people"}[e];return"/"+l.stringify({path:["search",i],query:s.assign({q:t},n)})},activity:function(){return"/notifications"},stream:function(e){return"/stream"+(e?"/"+e:"")},logout:function(){return"/logout"},mobile:function(e){return"/mobile"+(e?"/"+e:"")},upload:function(){return"/upload"},onboarding:function(){return"/welcome"},youNetwork:function(e,t){return"/you/"+t},messages:function(e){return"/messages"+(e?"/"+e:"")},premium:function(e,t,n){var i=["pro",e];return t&&i.push("buy",t),"/"+l.stringify({path:i,query:{ref:n}})},redeem:function(e){return"/pro/redeem/"+e},purchased:function(e){var t=e.indexOf("gift")>-1?"gifts":"",n=e.replace(/(gift|creator)-/,"");return"/pro/purchased/"+l.stringify({path:[t,n]})},consumerPremium:function(e){var t=["go"];return"/"+l.stringify({path:t,query:{ref:e}})},consumerPremiumCheckout:function(e,t){var n=["go","buy",e];return"/"+l.stringify({path:n,query:{ref:t}})},consumerPremiumPurchased:function(e,t){var n=["go","purchased",e];return"/"+l.stringify({path:n,query:{ref:t}})},settings:function(e){return"/"+l.stringify({path:["settings",e]})},subscriptionSettings:function(e){return"/"+l.stringify({path:["you/subscriptions",e]})},oscpSettings:function(e){return"/"+l.stringify({path:["you/premier",e]})},developerApps:function(e){return"/"+l.stringify({path:["you/apps",e]})},signin:function(e){return"/"+l.stringify({path:["signin"],query:{redirect_url:e}})},v1:function(e,t){return t=t||"","/"+e+t},station:function(e){return"/stations/"+i(e).permalink},stations:function(){return"/you/stations"},stats:function(e){var t=[a.get("me").get("permalink"),"stats"];return"/"+l.joinPath(o(t,e))},"track-stats":function(e,t){e=i(e);var n=[e.user.permalink,e.permalink,"stats"];return"/"+l.joinPath(o(n,t))},recommended:function(){return"/discover"},reportCopyright:function(e){var t={path:"/pages/copyright/report/form"};return e&&(e=i(e),t.query={track:e.permalink,user:e.user.permalink}),l.stringify(t)},"new-for-you":function(){return"/discover/new-for-you"}}},function(e,t,n){function i(e){var t=o.genres.reduce(function(t,n){return t||(n.id===e?n:null)},null);return t?t.id:o.defaultGenre}function r(e){return e?o.kinds.reduce(function(t,n){return t||(n.urlPart===e?n.id:null)},null):o.defaultKind}var o=n(241);e.exports=[{route:"(top|new)?",handler:function(e){return this.apply("charts",{chartKind:r(e),genre:i(this.getQueryParams().genre)})}}]},function(e,t){e.exports=[{route:"",handler:function(){return this.apply("consumer-premium")}},{route:"buy/go",handler:function(e){return this.apply("consumer-premium",{buyPlan:"go"})}},{route:"purchased/go",handler:function(e){return this.apply("consumer-premium",{purchased:!0,plan:"go"})}}]},function(e,t){e.exports=[{route:"",handler:function(){return this.apply("premium")}},{route:"gifts(?:/buy/:planName)?",handler:function(e){return this.apply("premium",{secondary:"gifts",buyPlan:e})}},{route:"buy/:planName",handler:function(e){return this.apply("premium",{buyPlan:e})}},{route:"redeem/:code",handler:function(e){return this.apply("premium",{secondary:"redeem",code:e})}},{route:"purchased(?:/(gifts))?/:planName",handler:function(e,t){return this.apply("purchased",{subpage:e,plan:t})}}]},function(e,t){e.exports=[{route:"",requiresLogin:!0,handler:function(){return this.apply("developer-apps")}},{route:"new",redirect:function(){return"https://docs.google.com/forms/d/e/1FAIpQLSfNxc82RJuzC0DnISat7n4H-G7IsPQIdaMpe202iiHZEoso9w/viewform"}}]},function(e,t){e.exports=[{route:"",requiresLogin:!0,handler:function(){return this.apply("personal-recommended")}},{route:"new-for-you",requiresLogin:!0,handler:function(){return this.getRolloutValue("internal_qa")?this.apply("new-for-you"):this.navigate("/discover",{replace:!0,trigger:!0})}}]},function(e,t){e.exports=[{route:"(iphone|android)?",handler:function(e){return this.apply("mobile",{platform:e})}},{route:"pulse",handler:function(){return this.apply("mobile-pulse")}}]},function(e,t){e.exports=[{route:"embed",handler:function(){return this.apply("widgets")}},{route:"widgets",redirect:"/pages/embed"},{route:"unsubscribed",code:401,handler:function(){return this.apply("unsubscribed")}},{route:"((?:privacy|cookies)(?:/:monthYear)?)",handler:function(e){return this.apply("static-page",{pageName:"pages/"+e})}},{route:"(copyright/report|copyright|contact|competition|dmca_policy|model-withdrawal-form)",handler:function(e){return this.apply("static-page",{pageName:"pages/"+e})}},{route:"(help-community/(?:guidelines|privacy-policy|terms-of-use|cookies-policy))",handler:function(e){return this.apply("static-page",{pageName:"pages/"+e})}},{route:"who-we-are",redirect:"/pages/contact"},{route:"(copyright/report/form)",requiresLogin:!0,handler:function(e){return this.apply("copyright-form",{pageName:"pages/"+e})}}]},function(e,t){e.exports=[{route:"",code:401,handler:function(){return this.apply("people")}},{route:"(following|followers)",redirect:function(e){return"/you/"+e}},{route:"directory(?:/(:alphanum+))?",handler:function(e){return this.apply("people-directory",{subpage:e||"A"})}},{route:"finder|genre|find_friends",redirect:"/people"}]},function(e,t){e.exports=[{name:"playlist",route:":secretToken?",handler:function(e,t,n){return this.apply("listen",{userPermalink:e,playlistPermalink:t,secretToken:n})}},{route:"(?::secretToken/)?(likes|reposts)",handler:function(e,t,n,i){return this.apply("listen-network",{userPermalink:e,playlistPermalink:t,secretToken:n,subpage:i})}},{route:"edit",redirect:function(e,t){return"/"+e+"/sets/"+t}}]},function(e,t){e.exports=[{route:"((?::alphanum+/?)*)",handler:function(e){return this.apply("static-page",{pageName:["press",e].filter(Boolean).join("/")})}},{route:"material",redirect:"/press"}]},function(e,t){e.exports=[{route:"(content|notifications)?",requiresLogin:!0,handler:function(e){return this.apply("settings",{subpage:e||""})}},{route:"account",requiresLogin:!0,redirect:"/settings"},{route:"extra",redirect:"/settings/content"},{route:"plan",redirect:"/you/subscriptions"},{route:"email",redirect:"/settings/notifications"}]},function(e,t){e.exports=[{route:"reset/success",requiresLogin:!0,handler:function(){return this.apply("password-reset-success")}},{route:"(forgot)?",handler:function(e){return this.isLoggedIn()?this.navigate("/stream",{replace:!0,trigger:!0}):this.apply("signin",{subpage:e})}}]},function(e,t){function n(e){return"/"+Array.prototype.filter.call(arguments,Boolean).join("/")}e.exports=[{name:"listen",route:"(?::secretToken|comment-:id)?",handler:function(e,t,n,i){return this.apply("listen",{userPermalink:e,soundPermalink:t,secretToken:n,commentId:parseInt(i,10)})}},{route:"(?::secretToken/)?groups",code:410,redirect:function(e,t,i){return n(e,t,i)}},{route:"(?::secretToken/)?(likes|reposts|sets|albums|recommended)",handler:function(e,t,n,i){return"recommended"===i&&(i="related"),this.apply("listen-network",{userPermalink:e,soundPermalink:t,secretToken:n,subpage:i})}},{route:"(?::secretToken/)?comments(?:/:id)?",redirect:function(e,t,i,r){var o=r?"comment-"+r:null;return n(e,t,i,o)}},{route:"(?::secretToken/)?related",redirect:function(e,t,i){return n(e,t,i,"recommended")}},{route:"download(?:/:secretToken)?",code:410,redirect:function(e,t,i){return n(e,t,i)}},{route:"edit",redirect:function(e,t){return n(e,t)}}]},function(e,t){e.exports=[{route:"",redirect:"/you/stations"},{route:":stationType/:stationIdentifier",handler:function(e,t){return this.apply("station",{type:e,identifier:t})}}]},function(e,t){e.exports=[{route:":tag",handler:function(e){return this.apply("tags",{tag:e})}}]},function(e,t){function n(e){return function(t,n,i,r,o,s){var a=this.getCurrentUserPermalink();return t!==a?this.navigate("/"+t,{replace:!0,trigger:!0}):e.apply(this,arguments)}}e.exports=[{route:"",requiresLogin:!0,handler:n(function(e,t){return this.apply("track-stats",{trackPermalink:t,userPermalink:e})})},{route:":metric(?:/:date/:date)?(/expanded)?",requiresLogin:!0,handler:n(function(e,t,n,i,r,o){return this.apply("track-stats",{metric:n,from:i,to:r,trackPermalink:t,userPermalink:e,expanded:!!o})})}]},function(e,t){function n(e){return function(t,n,i,r,o){var s=this.getCurrentUserPermalink();return t!==s?this.navigate("/"+t,{replace:!0,trigger:!0}):e.apply(this,arguments)}}e.exports=[{route:"",requiresLogin:!0,handler:n(function(e){return this.apply("stats")})},{route:":metric(?:/:date/:date)?(/expanded)?",requiresLogin:!0,handler:n(function(e,t,n,i,r){return this.apply("stats",{metric:t,from:n,to:i,expanded:!!r})})}]},function(e,t){e.exports=[{name:"user",route:"",handler:function(e){return this.apply("user",{userPermalink:e})}},{route:"(albums|reposts|sets|tracks)",handler:function(e,t){return this.apply("user",{userPermalink:e,subpage:t})}},{route:"(likes|followers|following|comments)",handler:function(e,t){return this.apply("user-network",{userPermalink:e,subpage:t})}},{route:"favorites",redirect:function(e){return"/"+e+"/likes"}},{route:"groups",code:410,redirect:function(e){return"/"+e}}]},function(e,t){e.exports=[{route:"",requiresLogin:!0,redirect:function(){return"/"+this.getCurrentUserPermalink()}},{route:"tracks",requiresLogin:!0,handler:function(){return this.apply("track-manager")}},{route:"(collection|likes|sets|albums|following|stations|history)",requiresLogin:!0,handler:function(e){return this.apply("collection",{subpage:e})}},{route:"(followers|comments|reposts)",requiresLogin:!0,redirect:function(e){return"/"+this.getCurrentUserPermalink()+"/"+e}},{route:"subscriptions(?:/(go|pro))?",requiresLogin:!0,handler:function(e){return this.apply("subscriptions",{subpage:e})}},{route:"premier(?:/(agreement|getting-started|faqs))?",requiresLogin:!0,handler:function(e){return this.getRolloutValue("internal_qa")?this.apply("oscp",{subpage:e||""}):this.navigate("/",{replace:!0,trigger:!0})}},{route:"(stats(?:/.*)?)",requiresLogin:!0,redirect:function(e){return"/"+this.getCurrentUserPermalink()+"/"+e}}]},,function(e,t){e.exports={user:{likes:{permalink_url:":permalink_url/likes",uri:":uri/favorites"},spotlight:{permalink_url:":permalink_url",uri:":uri/spotlight"}}}},function(e,t,n){var i=n(3),r=/^[]/,o={en:"English (US)",fr:"Franais",pt_BR:"Portugus (Brasil)"},s={de:"Deutsch",asterisk:"Asterisk"},a=i.extend({},o,s),l=i.keys(o),u=i.keys(a),c=i.keys(s);e.exports={defaultLocale:"en",publicLanguages:o,publicLanguageCodes:l,experimentalLanguages:s,experimentalLanguageCodes:c,experimentalAndPublicLanguages:a,experimentalAndPublicLanguageCodes:u,isLocaleExperimental:function(e){var t=r.test(e);return t||c.indexOf(e)>-1},normalizeLocale:function(e){return/^fr/.test(e)?e.substr(0,2):e}}},function(e,t,n){var i=n(45).Deferred,r=4;e.exports=function(e){var t,n,o,s,a,l,u,c;e&&(o=e.data||null,n=e.url||"",t=e.type||"GET",s=e.dataType||"text",a=e.async,l=e.timeout,u=e.beforeSend||null);var d=i();a=a!==!1;var h=new XMLHttpRequest;return h.open(t,n,a),a&&(h.responseType="text"),u&&u(h),h.onreadystatechange=function(){if(h.readyState===r)if(clearTimeout(c),0!==h.status&&h.status<400){var e=h.responseText;if("json"===s)try{e=JSON.parse(e)}catch(t){return void d.reject(h)}d.resolve(e)}else d.reject(h)},null!=l&&(c=setTimeout(function(){h.readyState!==r&&(h.abort(),d.reject(h))},l)),h.send(o),d.promise()}},function(e,t){e.exports=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i,r=n(1),o=n(12),s=n(13),a=n(28),l=n(33),u=n(29),c=n(15),d=n(32),h=n(91),p=n(92);e.exports=i=function(e){e=e||{},this._players={},this._volume=1,this._mute=!1,this.States=a,this.Errors=l,this._settings=o({},e,i.defaults)},i.MimeTypes=p,i.Protocols=h,i.Events=u,i.States=a,i.Errors=l,i.BrowserUtils=c,i.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:50,bufferTime:8e3,maxBufferTime:9e4,bufferingDelay:500,streamUrlProvider:null},i.capabilities=d.names,i.createDefaultMediaDescriptor=function(e,t,n){if(!e||!t||!t.length)throw new Error("invalid input to create media descriptor");return n||(n=0),{id:e,src:t,duration:n,forceSingle:!1,forceFlash:!1,forceHTML5:!1,mimeType:void 0}},i.prototype.getAudioPlayer=function(e){return this._players[e]},i.prototype.hasAudioPlayer=function(e){return void 0!==this._players[e]},i.prototype.removeAudioPlayer=function(e){this.hasAudioPlayer(e)&&delete this._players[e]},i.prototype.setVolume=function(e){e=Math.min(1,e),this._volume=Math.max(0,e);for(var t in this._players)this._players.hasOwnProperty(t)&&this._players[t].setVolume(this._volume)},i.prototype.getVolume=function(){return this._volume},i.prototype.setMute=function(e){
this._muted=e;for(var t in this._players)this._players.hasOwnProperty(t)&&this._players[t].setMute(this._muted)},i.prototype.getMute=function(){return this._muted},i.prototype.createAudioPlayer=function(e,t){var n,i=r({},this._settings,t);if(!e)throw"AudioManager: No media descriptor object passed, can`t build any player";if(e.id||(e.id=Math.floor(1e10*Math.random()).toString()+(new Date).getTime().toString()),!e.src)throw new Error("AudioManager: You need to pass a valid media source URL");if(!this._players[e.id]){if(n=s.createAudioPlayer(e,i),!n)throw new Error("AudioManager: No player could be created from the given descriptor");this._players[e.id]=n}return this._players[e.id].setVolume(this._volume),this._players[e.id].setMute(this._muted),this._players[e.id].on(u.STATE_CHANGE,this._onStateChange,this),this._players[e.id]},i.prototype._onStateChange=function(e,t){t.getState()===a.DEAD&&this.removeAudioPlayer(t.getId())}},function(e,t,n){function i(e,t,n){for(var i=-1,r=s(t),o=r.length;++i<o;){var a=r[i],l=e[a],u=n(l,t[a],a,e,t);(u===u?u===l:l!==l)&&(void 0!==l||a in e)||(e[a]=u)}return e}var r=n(2),o=n(8),s=n(4),a=o(function(e,t,n){return n?i(e,t,n):r(e,t)});e.exports=a},function(e,t,n){function i(e,t){return null==t?e:r(t,o(t),e)}var r=n(3),o=n(4);e.exports=i},function(e,t){function n(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}e.exports=n},function(e,t,n){function i(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&s(v(e))}function o(e,t){return e="number"==typeof e||p.test(e)?+e:-1,t=null==t?_:t,e>-1&&e%1==0&&t>e}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&_>=e}function a(e){for(var t=u(e),n=t.length,i=n&&e.length,r=!!i&&s(i)&&(h(e)||d(e)),a=-1,l=[];++a<n;){var c=t[a];(r&&o(c,i)||g.call(e,c))&&l.push(c)}return l}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&s(t)&&(h(e)||d(e))&&t||0;for(var n=e.constructor,i=-1,r="function"==typeof n&&n.prototype===e,a=Array(t),u=t>0;++i<t;)a[i]=i+"";for(var c in e)u&&o(c,t)||"constructor"==c&&(r||!g.call(e,c))||a.push(c);return a}var c=n(5),d=n(6),h=n(7),p=/^\d+$/,f=Object.prototype,g=f.hasOwnProperty,m=c(Object,"keys"),_=9007199254740991,v=i("length"),y=m?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?a(e):l(e)?m(e):[]}:a;e.exports=y},function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function r(e){return o(e)&&h.call(e)==a}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:r(e)?p.test(c.call(e)):n(e)&&l.test(e)}var a="[object Function]",l=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,h=u.toString,p=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t){function n(e){return r(e)&&f.call(e,"callee")&&(!m.call(e,"callee")||g.call(e)==c)}function i(e){return null!=e&&s(e.length)&&!o(e)}function r(e){return l(e)&&i(e)}function o(e){var t=a(e)?g.call(e):"";return t==d||t==h}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return!!e&&"object"==typeof e}var u=9007199254740991,c="[object Arguments]",d="[object Function]",h="[object GeneratorFunction]",p=Object.prototype,f=p.hasOwnProperty,g=p.toString,m=p.propertyIsEnumerable;e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&_>=e}function o(e){return s(e)&&f.call(e)==u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:o(e)?g.test(h.call(e)):n(e)&&c.test(e)}var l="[object Array]",u="[object Function]",c=/^\[object .+?Constructor\]$/,d=Object.prototype,h=Function.prototype.toString,p=d.hasOwnProperty,f=d.toString,g=RegExp("^"+h.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=i(Array,"isArray"),_=9007199254740991,v=m||function(e){return n(e)&&r(e.length)&&f.call(e)==l};e.exports=v},function(e,t,n){function i(e){return s(function(t,n){var i=-1,s=null==t?0:n.length,a=s>2?n[s-2]:void 0,l=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=r(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),l&&o(n[0],n[1],l)&&(a=3>s?void 0:a,s=1);++i<s;){var c=n[i];c&&e(t,c,a)}return t})}var r=n(9),o=n(10),s=n(11);e.exports=i},function(e,t){function n(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,s){return e.call(t,n,i,r,o,s)}}return function(){return e.apply(t,arguments)}}function i(e){return e}e.exports=n},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function i(e){return null!=e&&s(c(e))}function r(e,t){return e="number"==typeof e||l.test(e)?+e:-1,t=null==t?u:t,e>-1&&e%1==0&&t>e}function o(e,t,n){if(!a(n))return!1;var o=typeof t;if("number"==o?i(n)&&r(t,n.length):"string"==o&&t in n){var s=n[t];return e===e?e===s:s!==s}return!1}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=/^\d+$/,u=9007199254740991,c=n("length");e.exports=o},function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=r(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(i=-1;++i<t;)a[i]=n[i];return a[t]=s,e.apply(this,a)}}var i="Expected a function",r=Math.max;e.exports=n},function(e,t,n){function i(e,t){return void 0===e?t:e}function r(e,t){return s(function(n){var i=n[0];return null==i?i:(n.push(t),e.apply(void 0,n))})}var o=n(1),s=n(11),a=r(o,i);e.exports=a},function(e,t,n){e.exports=n(14)},function(e,t,n){var i,r=n(15),o=n(16),s=n(35),a=n(37),l=n(39),u=n(93),c=n(92);e.exports=i=function(){},i.createAudioPlayer=function(e,t){var n;if(n=e.src.split(":")[0],("rtmp"===n||"rtmpt"===n||e.forceFlash)&&!e.forceHTML5)return new o(e,t);if(e.mimeType=i.getMimeType(e),e.mimeType===c.M3U8){if(r.isMSESupportMPEG()||r.isMSESupportMP4())return e.forceSingle?new u(e,t):new l(e,t);if(r.isNativeHlsSupported())return r.isMobile()||e.forceSingle?new a(e,t):new s(e,t)}else{if(r.supportHTML5Audio()&&r.canPlayType(e.mimeType)||e.forceHTML5)return r.isMobile()||e.forceSingle?new a(e,t):new s(e,t);if(e.mimeType===c.MP3)return new o(e,t)}return null},i.getMimeType=function(e){if(e.mimeType)return e.mimeType;var t=e.src.split("?")[0];return t=t.substring(t.lastIndexOf(".")+1,t.length),c.getTypeByExtension(t)}},function(e,t){function n(){return!(!window.MediaSource&&!window.WebKitMediaSource)}e.exports={supportHTML5Audio:function(){var e;try{if(window.HTMLAudioElement&&"undefined"!=typeof Audio)return e=new Audio,!0}catch(t){return!1}},createAudioElement:function(){var e=document.createElement("audio");return e.setAttribute("msAudioCategory","BackgroundCapableMedia"),e.mozAudioChannelType="content",e},isMobile:function(e){var t=window.navigator.userAgent,n=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return n.some(function(e){return e=new RegExp(e,"i"),e.test(t)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(e){var t=document.createElement("audio");return t&&t.canPlayType&&t.canPlayType(e).match(/maybe|probably/i)?!0:!1},isNativeHlsSupported:function(){var e,t,n,i=navigator.userAgent,r=["iPhone","iPad","iPod"];return e=function(e){return e.test(i)},t=!e(/chrome/i)&&!e(/opera/i)&&e(/safari/i),n=r.some(function(t){return e(new RegExp(t,"i"))}),n||t},isMSESupported:n,isMSESupportMPEG:function(){return n()&&MediaSource.isTypeSupported("audio/mpeg")},isMSESupportMP4:function(){return n()&&MediaSource.isTypeSupported("audio/mp4")},isOnLine:function(){return window.navigator.onLine!==!1}}},function(e,t,n){function i(e,t){a.call(this,"FlashAudioProxy",e,t),i.players[e.id]=this,this._errorMessage=null,this._errorID=null,this._volume=1,this._muted=!1,i.creatingFlashAudio||(i.flashAudio?this._createFlashAudio():i.createFlashObject(t))}var r=n(1),o=n(17),s=n(23),a=n(25),l=n(29),u=n(33),c=n(28),d=n(34);e.exports=i,r(i.prototype,a.prototype),i.players={},i.createFlashObject=function(e){i.creatingFlashAudio=!0,i.containerElement=document.createElement("div"),i.containerElement.setAttribute("id",e.flashObjectID+"-container"),i.flashElementTarget=document.createElement("div"),i.flashElementTarget.setAttribute("id",e.flashObjectID+"-target"),i.containerElement.appendChild(i.flashElementTarget),document.body.appendChild(i.containerElement);var t=function(t){if(t.success)i.flashAudio=document.getElementById(e.flashObjectID),window.setTimeout(function(){if(i.flashAudio&&!("PercentLoaded"in i.flashAudio))for(var e in i.players)i.players.hasOwnProperty(e)&&(i.players[e]._errorID=u.FLASH_PROXY_FLASH_BLOCKED,i.players[e]._errorMessage="Flash object blocked",i.players[e]._setState(c.ERROR),i.players[e]._logger.type=i.players[e].getType(),i.players[e]._logger.log(i.players[e]._errorMessage))},e.flashLoadTimeout),i.flashAudio.triggerEvent=function(e,t){i.players[e]._triggerEvent(t)},i.flashAudio.onPositionChange=function(e,t,n,r){i.players[e]._onPositionChange(t,n,r)},i.flashAudio.onDebug=function(e,t,n){i.players[e]._logger.type=t,i.players[e]._logger.log(n)},i.flashAudio.onStateChange=function(e,t){i.players[e]._setState(t),t===c.DEAD&&delete i.players[e]},i.flashAudio.onInit=function(e){i.creatingFlashAudio=!1,o(s(i.players),"_createFlashAudio")};else for(var n in i.players)i.players.hasOwnProperty(n)&&(i.players[n]._errorID=u.FLASH_PROXY_CANT_LOAD_FLASH,i.players[n]._errorMessage="Cannot create flash object",i.players[n]._setState(c.ERROR))};document.getElementById(e.flashObjectID)||d.embedSWF(e.flashAudioPath,e.flashObjectID+"-target","1","1","9.0.24","",{json:encodeURIComponent(JSON.stringify(e))},{allowscriptaccess:"always"},{id:e.flashObjectID,tabIndex:"-1"},t)},i._ready=function(){return i.flashAudio&&!i.creatingFlashAudio},i.prototype._createFlashAudio=function(){i.flashAudio.createAudio(this.getDescriptor()),this._state=i.flashAudio.getState(this.getId()),this.setVolume(this._volume),this.setMute(this._muted)},i.prototype._triggerEvent=function(e){this._logger.log("Flash element triggered event: "+e),this.trigger(e,this)},i.prototype._setState=function(e){this._state!==e&&(this._state=e,this.trigger(l.STATE_CHANGE,e,this))},i.prototype._onPositionChange=function(e,t,n){this.trigger(l.POSITION_CHANGE,e,t,n,this)},i.prototype.getType=function(){return i._ready()?i.flashAudio.getType(this.getId()):this._type},i.prototype.getContainerElement=function(){return i.containerElement},i.prototype.play=function(e){if(i._ready()){if(this.getState()===c.PAUSED)return void this.resume();e=void 0===e?0:e,i.flashAudio.playAudio(this.getId(),e)}},i.prototype.pause=function(){i._ready()&&i.flashAudio.pauseAudio(this.getId())},i.prototype.seek=function(e){i._ready()&&i.flashAudio.seekAudio(this.getId(),e)},i.prototype.resume=function(){i._ready()&&i.flashAudio.resumeAudio(this.getId())},i.prototype.setVolume=function(e){this._volume=e,i._ready()&&i.flashAudio.setVolume(this.getId(),e)},i.prototype.getVolume=function(){return i._ready()?i.flashAudio.getVolume(this.getId()):this._volume},i.prototype.setMute=function(e){this._muted=e,i._ready()&&i.flashAudio.setMute(this.getId(),e)},i.prototype.getMute=function(){return i._ready()?i.flashAudio.getMute(this.getId()):this._muted},i.prototype.getState=function(){return this._state},i.prototype.getCurrentPosition=function(){return i._ready()?i.flashAudio.getCurrentPosition(this.getId()):0},i.prototype.getLoadedPosition=function(){return i._ready()?i.flashAudio.getLoadedPosition(this.getId()):0},i.prototype.getDuration=function(){return i._ready()?i.flashAudio.getDuration(this.getId()):0},i.prototype.kill=function(){return i._ready()?void i.flashAudio.killAudio(this.getId()):0},i.prototype.getErrorMessage=function(){return this._errorMessage?this._errorMessage:i.flashAudio.getErrorMessage(this.getId())},i.prototype.getErrorID=function(){return this._errorID?this._errorID:i.flashAudio.getErrorID(this.getId())},i.prototype.getLevelNum=function(){return i._ready()?i.flashAudio.getLevelNum(this.getId()):0},i.prototype.getLevel=function(){return i._ready()?i.flashAudio.getLevel(this.getId()):0},i.prototype.setLevel=function(e){return i._ready()?i.flashAudio.setLevel(this.getId(),e):0}},function(e,t,n){function i(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&s(m(e))}function o(e,t){var n=typeof e;if("string"==n&&f.test(e)||"number"==n)return!0;if(d(e))return!1;var i=!p.test(e);return i||null!=t&&e in a(t)}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&g>=e}function a(e){return l(e)?e:Object(e)}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var u=n(18),c=n(19),d=n(7),h=n(11),p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,f=/^\w*$/,g=9007199254740991,m=i("length"),_=h(function(e,t,n){var i=-1,s="function"==typeof t,a=o(t),l=r(e)?Array(e.length):[];return u(e,function(e){var r=s?t:a&&null!=e?e[t]:void 0;l[++i]=r?r.apply(e,n):c(e,t,n)}),l});e.exports=_},function(e,t,n){function i(e,t){return p(e,t,c)}function r(e){return function(t){return null==t?void 0:t[e]}}function o(e,t){return function(n,i){var r=n?f(n):0;if(!a(r))return e(n,i);for(var o=t?r:-1,s=l(n);(t?o--:++o<r)&&i(s[o],o,s)!==!1;);return n}}function s(e){return function(t,n,i){for(var r=l(t),o=i(t),s=o.length,a=e?s:-1;e?a--:++a<s;){var u=o[a];if(n(r[u],u,r)===!1)break}return t}}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&d>=e}function l(e){return u(e)?e:Object(e)}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var c=n(4),d=9007199254740991,h=o(i),p=s(),f=r("length");e.exports=h},function(e,t,n){function i(e,t,n){null==e||r(t,e)||(t=c(t),e=1==t.length?e:l(e,u(t,0,-1)),t=s(t));var i=null==e?e:e[t];return null==i?void 0:i.apply(e,n)}function r(e,t){var n=typeof e;if("string"==n&&p.test(e)||"number"==n)return!0;if(d(e))return!1;var i=!h.test(e);return i||null!=t&&e in o(t)}function o(e){return a(e)?e:Object(e)}function s(e){var t=e?e.length:0;return t?e[t-1]:void 0}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=n(20),u=n(21),c=n(22),d=n(7),h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,p=/^\w*$/;e.exports=i},function(e,t){function n(e,t,n){if(null!=e){void 0!==n&&n in i(e)&&(t=[n]);for(var r=0,o=t.length;null!=e&&o>r;)e=e[t[r++]];return r&&r==o?e:void 0}}function i(e){return r(e)?e:Object(e)}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}e.exports=n},function(e,t,n){function i(e){return null==e?"":e+""}function r(e){if(o(e))return e;var t=[];return i(e).replace(s,function(e,n,i,r){t.push(i?r.replace(a,"$1"):n||e)}),t}var o=n(7),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;e.exports=r},function(e,t,n){function i(e){return r(e,o(e))}var r=n(24),o=n(4);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e[t[n]];return r}e.exports=n},function(e,t,n){function i(e,t,n,i){this._type=e,this._id=t.id,this._descriptor=t,this._settings=n,this._currentPosition=this._loadedPosition=this._positionBeforeSeek=this._duration=0,this._capabilities=r({},u.createDefaults(),i),this._logger=new l(this.getType(),this.getId(),t.title),this._isWaitingForPlayheadToMove=!1;try{u.validate(this.getCapabilities())}catch(o){return this.getLogger().log("Bad caps: "+o),void this.updateState(s.ERROR)}this.updateState(s.INITIALIZE)}var r=n(1),o=n(26),s=n(28),a=n(29),l=n(30),u=n(32);e.exports=i,r(i.prototype,o),i.prototype.canPlay=function(){return!1},i.prototype.getCapabilities=function(){return this._capabilities},i.prototype.getLogger=function(){return this._logger},i.prototype.getSettings=function(){return this._settings},i.prototype.getDescriptor=function(){return this._descriptor},i.prototype.getType=function(){return this._type},i.prototype.getId=function(){return this._id+""},i.prototype.beforeStateChange=function(e,t){return!0},i.prototype.notifyStateChange=function(e,t){return!0},i.prototype.afterStateChange=function(e,t){},i.prototype.updateState=function(e){var t=this._state;t!==e&&t!==s.DEAD&&this.beforeStateChange(t,e)&&(this._isInOneOfStates(s.LOADING,s.SEEKING)||e!==s.LOADING&&e!==s.SEEKING||(this._positionBeforeSeek=this._currentPosition),this._state=e,this._logger.log('state changed "'+this.getState()+'", position: '+this.getCurrentPosition()+", duration: "+this.getDuration()),this.notifyStateChange(t,e)&&this.trigger(a.STATE_CHANGE,e,this),this.afterStateChange(t,e))},i.prototype.getState=function(){return this._state},i.prototype._isInOneOfStates=function(){for(var e in arguments)if(arguments[e]===this.getState())return!0;return!1},i.prototype.getCurrentPosition=function(){return this._isInOneOfStates(s.LOADING,s.SEEKING)?this._positionBeforeSeek:this._currentPosition},i.prototype.getLoadedPosition=function(){return this._loadedPosition},i.prototype.getDuration=function(){return this._duration},i.prototype._triggerPositionChangeEvent=function(){this.trigger(a.POSITION_CHANGE,this.getCurrentPosition(),this.getLoadedPosition(),this.getDuration(),this)},i.prototype._mediaHasProgressed=function(){var e=!1,t=Date.now();if(this._lastMediaClockCheck){var n=t-this._lastMediaClockCheck,i=this._currentPosition-this._lastMediaClockValue;if(.1*n>i){if(this.getState()===s.PLAYING&&0===i&&n<this._settings.bufferingDelay)return this._isWaitingForPlayheadToMove=!0,!0;this.getState()===s.PLAYING&&i>0&&n<this._settings.bufferingDelay&&this._isWaitingForPlayheadToMove?(this._isWaitingForPlayheadToMove=!1,e=!1):e=!0}}return this._lastMediaClockValue=this._currentPosition,this._lastMediaClockCheck=t,!e}},function(e,t,n){e.exports=n(27)},function(e,t,n){!function(){function n(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++a+"";return e?e+t:t},has:function(e,t){return o.call(e,t)},each:function(e,t,n){if(null!=e)if(r&&e.forEach===r)e.forEach(t,n);else if(e.length===+e.length)for(var i=0,o=e.length;o>i;i++)t.call(n,e[i],i,e);else for(var s in e)this.has(e,s)&&t.call(n,e[s],s,e)},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}}var i,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,l=n();i={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var i=this,r=l.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var i,r,o,s,a,u,d,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:l.keys(this._events),a=0,u=s.length;u>a;a++)if(e=s[a],o=this._events[e]){if(this._events[e]=i=[],t||n)for(d=0,h=o.length;h>d;d++)r=o[d],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var o in i)i[o].off(t,n,this),r&&delete this._listeners[o];return this}};var u=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};l.each(h,function(e,t){i[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=l.uniqueId("l"));return r[o]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return l.each(t,function(t){e[t]=this[t]},this),e},"undefined"!=typeof e&&e.exports&&(t=e.exports=i),t.BackboneEvents=i}(this)},function(e,t){e.exports={PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}},function(e,t){e.exports={POSITION_CHANGE:"position-change",STATE_CHANGE:"state-change",DATA:"data",NETWORK_TIMEOUT:"network-timeout",METADATA:"metadata"}},function(e,t,n){var i,r=n(31),o=null;e.exports=function(e,t,n){if(!i&&(i=r({label:"audiomanager",buffer:!0}),o)){var s=i;i=function(){s(o(arguments[0]+"%s",Array.prototype.slice.call(arguments,1)))}}return n=n&&n.length?" ["+n.replace(/\s/g,"").substr(0,6)+"]":"",{log:i.bind(null,"%s (%s)%s",e,t,n)}}},function(e,t){"use strict";function n(){function e(e,n){if(p){for(var i=arguments.length,r=Array(i>2?i-2:0),o=2;i>o;o++)r[o-2]=arguments[o];"string"==typeof n?n=" "+n:(r.unshift(n),n="");var s=[t()+" | "+E+(k?"%c":"")+n].concat(A,r);m?T.push({level:e,logArgs:s})>x&&T.shift():h[e].apply(h,s)}}function t(){var e=new Date,t=null===S?0:e-S,n=k?"%c":"";return S=+e,n+i(e)+(n+" ("+n)+r("+"+t+"ms"," ",8)+(n+")")}function n(e){return e.enable=function(){p=!0},e.disable=function(){p=!1},e.bufferOn=function(){m=!0},e.bufferOff=function(){m=!1,T.length=0},e.flush=u()?function(){T.forEach(function(e){var t=e.level,n=e.logArgs;h[t].apply(h,n)}),T.length=0}:function(){},e}var o=c.apply(void 0,arguments),s=o.enabled,p=void 0===s?!0:s,g=o.buffer,m=void 0===g?!1:g,_=o.label,v=void 0===_?"":_,y=o.plainOutput,b=void 0===y?!1:y,w=o.bufferSize,x=void 0===w?1e3:w;if(!u())return n(d.reduce(function(e,t){return e[t]=e},function(){}));h.CL||(h.CL={_cssCounter:0});var k=!b&&l(),S=null,T=[],E=a(v,k),A=k?["color: green","color: grey","color: blue","color: grey",f(v),""]:[],C=h.CL[v]=n(d.reduce(function(t,n){return t[n]=e.bind(null,n),t},e.bind(null,"log")));return C}function i(e){return o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())+"."+r(e.getMilliseconds(),"0",3)}function r(e,t,n){return s(t,n-(""+e).length)+e}function o(e){return r(e,"0",2)}function s(e,t){return t>0?new Array(t+1).join(e):""}function a(e,t){return(t?"%c":"")+(e?e:"")}function l(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent;return/chrome|firefox|opr/i.test(e)&&!/msie|edge/i.test(e)}function u(){return h&&d.every(function(e){return"function"==typeof h[e]})}function c(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return"object"==typeof e&&e||{enabled:e,label:t}}e.exports=n;var d=["log","info","warn","error"],h="undefined"!=typeof console?console:null,p=["color:#fff","border-radius:3px","padding:2px 4px","font-family:sans-serif","text-transform:uppercase","font-size:9px"].join(";")+";",f=function(){var e=["#51613C","#447848","#486E5F","#787444","#6E664E"];return function(t){return t?"background:"+e[h.CL._cssCounter++%e.length]+";"+p:""}}()},function(e,t){function n(e){for(var t in r)if(r.hasOwnProperty(t)&&void 0===e[r[t]])throw new Error("Caps lack required field: "+t);if(!(e[r.PROTOCOLS]instanceof Array))throw new Error("Caps protocols must be an array");if(!(e[r.MIMETYPES]instanceof Array))throw new Error("Caps mimetypes must be an array");return!0}function i(){var e={};return e[r.MIMETYPES]=[],e[r.PROTOCOLS]=[],e[r.AUDIO_ONLY]=!0,e[r.CAN_SEEK_ALWAYS]=!0,e[r.NEEDS_URL_REFRESH]=!0,e}var r={MIMETYPES:"mimetypes",PROTOCOLS:"protocols",AUDIO_ONLY:"audioOnly",CAN_SEEK_ALWAYS:"canSeekAlways",NEEDS_URL_REFRESH:"needsUrlRefresh"},o={createDefaults:i,names:r,validate:n};e.exports=o},function(e,t){e.exports={FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",GENERIC_AUDIO_ENDED_EARLY:"GENERIC_AUDIO_ENDED_EARLY",GENERIC_AUDIO_OVERRUN:"GENERIC_AUDIO_OVERRUN",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",MSE_BAD_OBJECT_STATE:"MSE_BAD_OBJECT_STATE",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}},function(e,t){function n(){if(!Y&&document.getElementsByTagName("body")[0]){try{var e,t=y("span");t.style.display="none",e=z.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(n){return}Y=!0;for(var i=V.length,r=0;i>r;r++)V[r]()}}function i(e){Y?e():V[V.length]=e}function r(e){if(typeof U.addEventListener!=R)U.addEventListener("load",e,!1);else if(typeof z.addEventListener!=R)z.addEventListener("load",e,!1);else if(typeof U.attachEvent!=R)w(U,"onload",e);else if("function"==typeof U.onload){var t=U.onload;U.onload=function(){t(),e()}}else U.onload=e}function o(){var e=z.getElementsByTagName("body")[0],t=y(L);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",N);var n=e.appendChild(t);if(n){var i=0;!function r(){if(typeof n.GetVariable!=R)try{var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),J.pv=[b(o[0]),b(o[1]),b(o[2])])}catch(a){J.pv=[8,0,0]}else if(10>i)return i++,void window.setTimeout(r,10);e.removeChild(t),n=null,s()}()}else s()}function s(){var e=q.length;if(e>0)for(var t=0;e>t;t++){var n=q[t].id,i=q[t].callbackFn,r={success:!1,id:n};if(J.pv[0]>0){var o=v(n);if(o)if(!x(q[t].swfVersion)||J.wk&&J.wk<312)if(q[t].expressInstall&&l()){var s={};s.data=q[t].expressInstall,s.width=o.getAttribute("width")||"0",s.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(s.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(s.align=o.getAttribute("align"));for(var d={},h=o.getElementsByTagName("param"),p=h.length,f=0;p>f;f++)"movie"!==h[f].getAttribute("name").toLowerCase()&&(d[h[f].getAttribute("name")]=h[f].getAttribute("value"));u(s,d,n,i)}else c(o),i&&i(r);else S(n,!0),i&&(r.success=!0,r.ref=a(n),r.id=n,i(r))}else if(S(n,!0),i){var g=a(n);g&&typeof g.SetVariable!=R&&(r.success=!0,r.ref=g,r.id=g.id),i(r)}}}function a(e){var t=null,n=v(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==R?n:n.getElementsByTagName(L)[0]||n),t}function l(){return!K&&x("6.0.65")&&(J.win||J.mac)&&!(J.wk&&J.wk<312)}function u(e,t,n,i){var r=v(n);if(n=_(n),K=!0,I=i||null,D={success:!1,id:n},r){"OBJECT"===r.nodeName.toUpperCase()?(A=d(r),C=null):(A=r,C=n),e.id=B,(typeof e.width==R||!/%$/.test(e.width)&&b(e.width)<310)&&(e.width="310"),(typeof e.height==R||!/%$/.test(e.height)&&b(e.height)<137)&&(e.height="137");var o=J.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(U.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(z.title.slice(0,47)+" - Flash Player Installation");if(typeof t.flashvars!=R?t.flashvars+="&"+s:t.flashvars=s,J.ie&&4!==r.readyState){var a=y("div");n+="SWFObjectNew",a.setAttribute("id",n),r.parentNode.insertBefore(a,r),r.style.display="none",g(r)}p(e,t,n)}}function c(e){if(J.ie&&4!==e.readyState){e.style.display="none";var t=y("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),g(e)}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=y("div");if(J.win&&J.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(L)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;r>o;o++)1===i[o].nodeType&&"PARAM"===i[o].nodeName||8===i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function h(e,t){var n=y("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function p(e,t,n){var i,r=v(n);if(n=_(n),J.wk&&J.wk<312)return i;if(r){var o,s,a,l=y(J.ie?"div":L);typeof e.id==R&&(e.id=n);for(a in t)t.hasOwnProperty(a)&&"movie"!==a.toLowerCase()&&f(l,a,t[a]);J.ie&&(l=h(e.data,l.innerHTML));for(o in e)e.hasOwnProperty(o)&&(s=o.toLowerCase(),"styleclass"===s?l.setAttribute("class",e[o]):"classid"!==s&&"data"!==s&&l.setAttribute(o,e[o]));J.ie?W[W.length]=e.id:(l.setAttribute("type",N),l.setAttribute("data",e.data)),r.parentNode.replaceChild(l,r),i=l}return i}function f(e,t,n){var i=y("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function g(e){var t=v(e);t&&"OBJECT"===t.nodeName.toUpperCase()&&(J.ie?(t.style.display="none",function n(){if(4===t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}else window.setTimeout(n,10)}()):t.parentNode.removeChild(t))}function m(e){return e&&e.nodeType&&1===e.nodeType}function _(e){return m(e)?e.id:e}function v(e){if(m(e))return e;var t=null;try{t=z.getElementById(e)}catch(n){}return t}function y(e){return z.createElement(e)}function b(e){return parseInt(e,10)}function w(e,t,n){e.attachEvent(t,n),G[G.length]=[e,t,n]}function x(e){e+="";var t=J.pv,n=e.split(".");return n[0]=b(n[0]),n[1]=b(n[1])||0,n[2]=b(n[2])||0,t[0]>n[0]||t[0]===n[0]&&t[1]>n[1]||t[0]===n[0]&&t[1]===n[1]&&t[2]>=n[2]?!0:!1}function k(e,t,n,i){var r=z.getElementsByTagName("head")[0];if(r){var o="string"==typeof n?n:"screen";if(i&&(P=null,M=null),!P||M!==o){var s=y("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),P=r.appendChild(s),J.ie&&typeof z.styleSheets!=R&&z.styleSheets.length>0&&(P=z.styleSheets[z.styleSheets.length-1]),M=o}P&&(typeof P.addRule!=R?P.addRule(e,t):typeof z.createTextNode!=R&&P.appendChild(z.createTextNode(e+" {"+t+"}")))}}function S(e,t){if(Q){var n=t?"visible":"hidden",i=v(e);Y&&i?i.style.visibility=n:"string"==typeof e&&k("#"+e,"visibility:"+n)}}function T(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=R?encodeURIComponent(e):e}/*!    SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject>
		    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
		*/
var E,A,C,I,D,P,M,R="undefined",L="object",F="Shockwave Flash",O="ShockwaveFlash.ShockwaveFlash",N="application/x-shockwave-flash",B="SWFObjectExprInst",$="onreadystatechange",U=window,z=document,H=navigator,j=!1,V=[],q=[],W=[],G=[],Y=!1,K=!1,Q=!0,X=!1,J=function(){var e=typeof z.getElementById!=R&&typeof z.getElementsByTagName!=R&&typeof z.createElement!=R,t=H.userAgent.toLowerCase(),n=H.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),r=n?/mac/.test(n):/mac/.test(t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s="Microsoft Internet Explorer"===H.appName,a=[0,0,0],l=null;if(typeof H.plugins!=R&&typeof H.plugins[F]==L)l=H.plugins[F].description,l&&typeof H.mimeTypes!=R&&H.mimeTypes[N]&&H.mimeTypes[N].enabledPlugin&&(j=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=b(l.replace(/^(.*)\..*$/,"$1")),a[1]=b(l.replace(/^.*\.(.*)\s.*$/,"$1")),a[2]=/[a-zA-Z]/.test(l)?b(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof U.ActiveXObject!=R)try{var u=new ActiveXObject(O);u&&(l=u.GetVariable("$version"),l&&(s=!0,l=l.split(" ")[1].split(","),a=[b(l[0]),b(l[1]),b(l[2])]))}catch(c){}return{w3:e,pv:a,wk:o,ie:s,win:i,mac:r}}();(function(){J.w3&&((typeof z.readyState!=R&&("complete"===z.readyState||"interactive"===z.readyState)||typeof z.readyState==R&&(z.getElementsByTagName("body")[0]||z.body))&&n(),Y||(typeof z.addEventListener!=R&&z.addEventListener("DOMContentLoaded",n,!1),J.ie&&(z.attachEvent($,function e(){"complete"===z.readyState&&(z.detachEvent($,e),n())}),U===top&&!function t(){if(!Y){try{z.documentElement.doScroll("left")}catch(e){return void window.setTimeout(t,0)}n()}}()),J.wk&&!function i(){return Y?void 0:/loaded|complete/.test(z.readyState)?void n():void window.setTimeout(i,0)}()))})();V[0]=function(){j?o():s()};(function(){J.ie&&window.attachEvent("onunload",function(){for(var e=G.length,t=0;e>t;t++)G[t][0].detachEvent(G[t][1],G[t][2]);for(var n=W.length,i=0;n>i;i++)g(W[i]);for(var r in J)J[r]=null;J=null;for(var o in E)E[o]=null;E=null})})();e.exports=E={registerObject:function(e,t,n,i){if(J.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,q[q.length]=r,S(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return J.w3?a(e):void 0},embedSWF:function(e,t,n,r,o,s,a,c,d,h){var f=_(t),g={success:!1,id:f};J.w3&&!(J.wk&&J.wk<312)&&e&&t&&n&&r&&o?(S(f,!1),i(function(){n+="",r+="";var i={};if(d&&typeof d===L)for(var m in d)i[m]=d[m];i.data=e,i.width=n,i.height=r;var _={};if(c&&typeof c===L)for(var v in c)_[v]=c[v];if(a&&typeof a===L)for(var y in a)if(a.hasOwnProperty(y)){var b=X?encodeURIComponent(y):y,w=X?encodeURIComponent(a[y]):a[y];typeof _.flashvars!=R?_.flashvars+="&"+b+"="+w:_.flashvars=b+"="+w}if(x(o)){var k=p(i,_,t);i.id===f&&S(f,!0),g.success=!0,g.ref=k,g.id=k.id}else{if(s&&l())return i.data=s,void u(i,_,t,h);S(f,!0)}h&&h(g)})):h&&h(g)},switchOffAutoHideShow:function(){Q=!1},enableUriEncoding:function(e){X=typeof e===R?!0:e},ua:J,getFlashPlayerVersion:function(){return{major:J.pv[0],minor:J.pv[1],release:J.pv[2]}},hasFlashPlayerVersion:x,createSWF:function(e,t,n){return J.w3?p(e,t,n):void 0},showExpressInstall:function(e,t,n,i){J.w3&&l()&&u(e,t,n,i)},removeSWF:function(e){J.w3&&g(e)},createCSS:function(e,t,n,i){J.w3&&k(e,t,n,i)},addDomLoadEvent:i,addLoadEvent:r,getQueryParamValue:function(e){var t=z.location.search||z.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return T(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))===e)return T(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(K){var e=v(B);e&&A&&(e.parentNode.replaceChild(A,e),C&&(S(C,!0),J.ie&&(A.style.display="block")),I&&I(D)),K=!1}},version:"2.3"}},function(e,t,n){function i(e,t,n,i){this._duration=0,this._currentPosition=0,this._loadedPosition=0,u.prototype.constructor.call(this,n||"HTML5AudioPlayer",e,t),this._providedAudioElement=i,this._isLoaded=!1,this._positionUpdateTimer=null,this._playRequested=!1,this._startFromPosition=0,this.getDescriptor().duration&&(this._duration=this.getDescriptor().duration),this._bindHandlers(),this._initMediaElement(),this.updateState(s.IDLE)}var r=n(1),o=n(36).bindAll,s=n(28),a=n(29),l=n(33),u=n(25),c=n(15);e.exports=i,r(i.prototype,u.prototype),i.MediaAPIEvents=["ended","play","playing","pause","seeking","waiting","seeked","error","loadeddata","loadedmetadata","timeupdate","stalled"],i.prototype.play=function(e){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):this._isInOneOfStates(s.LOADING)?void this._logger.log("play called but already loading. ignoring..."):(this._logger.log("play from "+e),this._startFromPosition=e||0,this._playRequested=!0,this._isInOneOfStates(s.PAUSED,s.ENDED)?void this.resume():(this.updateState(s.LOADING),this._html5Audio.readyState>0&&this._onLoadedMetadata(),this._html5Audio.readyState>1&&this._onLoaded(),void(this._isLoaded?this._playAfterLoaded():this.once(a.DATA,this._playAfterLoaded))))},i.prototype.pause=function(){this._isInOneOfStates(s.ERROR,s.DEAD)||(this._logger.log("pause"),this._playRequested=!1,this._html5Audio&&this._html5Audio.pause())},i.prototype.seek=function(e){var t,n=!1,i=e/1e3,r=this._html5Audio.seekable;if(!this._isInOneOfStates(s.ERROR,s.DEAD)){if(!this._isLoaded)return this.once(a.DATA,function(){this.seek(e)}),void this._logger.log("postponing seek for when loaded");if(c.isIE10Mobile)n=!0;else for(t=0;t<r.length;t++)if(i<=r.end(t)&&i>=r.start(t)){n=!0;break}if(!n)return void this._logger.log("can not seek");this._logger.log("seek"),this.updateState(s.SEEKING),this._html5Audio.currentTime=i,this._currentPosition=e,this._lastMediaClockCheck=null}},i.prototype.resume=function(){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("resume called but state is ERROR or DEAD"):(this._logger.log("resume"),void(this.getState()===s.PAUSED?(this.updateState(s.PLAYING),this._html5Audio.play()):this.getState()===s.ENDED&&(this._html5Audio.currentTime=0,this._html5Audio.play())))},i.prototype.setVolume=function(e){this._html5Audio&&(this._html5Audio.volume=e)},i.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},i.prototype.setMute=function(e){this._html5Audio&&(this._html5Audio.muted=e)},i.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},i.prototype.kill=function(){this._state!==s.DEAD&&(this._logger.log("killing ..."),this._resetPositionInterval(!1),this._playRequested=!1,this._toggleEventListeners(!1),this.pause(),this._disposeMediaElement(),this.updateState(s.DEAD),this._logger.log("dead"))},i.prototype.getErrorMessage=function(){return this._errorMessage},i.prototype.getErrorID=function(){return this._errorID},i.prototype._bindHandlers=function(){o(this,["_onPositionChange","_onHtml5MediaEvent","_onLoaded","_onLoadedMetadata"])},i.prototype._initMediaElement=function(){this._html5Audio=this._providedAudioElement||c.createAudioElement(),this._html5Audio.id=this.getSettings().audioObjectID+"_"+this.getId(),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load(),this._toggleEventListeners(!0)},i.prototype._disposeMediaElement=function(){this._html5Audio.src="",this._html5Audio.removeAttribute("src")},i.prototype._playAfterLoaded=function(){return this._trySeekToStartPosition(),this._playRequested?void this._html5Audio.play():(this._logger.log("paused whilst loading."),void this.updateState(s.PAUSED))},i.prototype._isInOneOfStates=function(){for(var e in arguments)if(arguments[e]===this._state)return!0;return!1},i.prototype._toggleEventListeners=function(e){if(this._html5Audio){var t=e?"addEventListener":"removeEventListener";i.MediaAPIEvents.forEach(function(e){switch(e){case"loadeddata":this._html5Audio[t]("loadeddata",this._onLoaded);break;case"loadedmetadata":this._html5Audio[t]("loadedmetadata",this._onLoadedMetadata);break;default:this._html5Audio[t](e,this._onHtml5MediaEvent)}},this)}},i.prototype._trySeekToStartPosition=function(){var e;return this._startFromPosition<=0?!0:(this._logger.log("seek to start position: "+this._startFromPosition),e=this._startFromPosition/1e3,this._html5Audio.currentTime=e,this._html5Audio.currentTime===e?(this._lastMediaClockCheck=null,this._currentPosition=this._startFromPosition,this._startFromPosition=0,!0):!1)},i.prototype._onLoaded=function(){this._logger.log("HTML5 media loadeddata event"),this.trigger(a.DATA,this)},i.prototype._onLoadedMetadata=function(){this._logger.log("HTML5 media loadedmetadata event"),(void 0===this._duration||0===this._duration)&&(this._duration=1e3*this._html5Audio.duration),this._loadedPosition=this._duration,this._isLoaded=!0,this.trigger(a.METADATA,this)},i.prototype._resetPositionInterval=function(e){this._positionUpdateTimer&&(window.clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=null),e&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},i.prototype._onPositionChange=function(){if(!this._isInOneOfStates(s.DEAD)){var e;if(this._currentPosition=1e3*this._html5Audio.currentTime,this._triggerPositionChangeEvent(),!this._isInOneOfStates(s.PLAYING,s.LOADING))return void(this._state===s.SEEKING&&e>0&&this.updateState(s.PLAYING));var t=this._mediaHasProgressed();return this.getState()!==s.PLAYING||t?void(this.getState()===s.LOADING&&t&&this.updateState(s.PLAYING)):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(s.LOADING))}},i.prototype._onHtml5MediaEvent=function(e){switch("timeupdate"!==e.type&&this._logger.log("HTML5 media event: "+e.type),e.type){case"playing":if(!this._trySeekToStartPosition())break;this._onPositionChange(),this._resetPositionInterval(!0),this.updateState(s.PLAYING);break;case"pause":this._onPositionChange(),this._resetPositionInterval(!1),this.updateState(s.PAUSED);break;case"timeupdate":this._onPositionChange();break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._resetPositionInterval(!1),this.updateState(s.ENDED);break;case"seeking":this.updateState(s.SEEKING);break;case"seeked":this._startFromPosition=0,this._html5Audio.paused?this.updateState(s.PAUSED):this.updateState(s.PLAYING),this._onPositionChange();break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},i.prototype._html5AudioErrorCodeToErrorId=function(){return{1:l.HTML5_AUDIO_ABORTED,2:l.HTML5_AUDIO_NETWORK,3:l.HTML5_AUDIO_DECODE,4:l.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},i.prototype._error=function(e,t){var n="error: ";t&&(n="error (native): "),this._errorID=e,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(n+this._errorID+" "+this._errorMessage),this.updateState(s.ERROR),this._toggleEventListeners(!1)},i.prototype._getErrorMessage=function(e){var t={};return t[l.HTML5_AUDIO_ABORTED]="The fetching process for the media resource was aborted by the user agent at the user's request.",t[l.HTML5_AUDIO_NETWORK]="A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.",t[l.HTML5_AUDIO_DECODE]="An error of some description occurred while decoding the media resource, after the resource was established to be usable.",t[l.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource indicated by the src attribute was not suitable.",t[e]}},function(e,t){function n(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n}function i(e){for(var t=[],n=0;n<e.length;n++)t.push({start:1e3*e.start(n),end:1e3*e.end(n)});return t}e.exports={bindAll:function(e,t){t.forEach(function(t){if(!e[t])throw new Error(t+" doesn't exist.");e[t]=e[t].bind(e)})},concatBuffersToUint8Array:n,timeRangesToFlatMap:i}},function(e,t,n){function i(e,t,n){r.prototype.constructor.call(this,o,e,t,n||"HTML5SingleAudioPlayer")}var r=n(38),o=n(35),s=n(1);e.exports=i,s(i.prototype,r.prototype)},function(e,t,n){function i(e,t,n,i){o(this,["_onStateChange","_onPositionChange"]),l.prototype.constructor.call(this,i||"BaseSingleAudioPlayer",t,n),this._Player=e,this._player=null,this._volume=1,this._mute=!1,this._startedPlaying=!1,this._currentPositionWhenWentInactive=0,this._loadedPositionWhenWentInactive=0,this._durationWhenWentInactive=this.getDescriptor().duration||0,this._playerErrorMessage=null,this._playerErrorID=null,this.updateState(s.IDLE)}var r=n(1),o=n(36).bindAll,s=n(28),a=n(29),l=n(25),u=n(15),c=null,d=u.createAudioElement();e.exports=i,r(i.prototype,l.prototype),i.prototype._addEventListeners=function(e){var t=e===!1?"off":"on";this._player[t](a.STATE_CHANGE,this._onStateChange),this._player[t](a.POSITION_CHANGE,this._onPositionChange)},i.prototype._makeInactive=function(){if(!this._player)throw new Error("Already inactive.");this._logger.log("Making inactive: "+this.getId()),this._addEventListeners(!1),this._currentPositionWhenWentInactive=this._player.getCurrentPosition(),this._loadedPositionWhenWentInactive=this._player.getLoadedPosition(),this._durationWhenWentInactive=this._player.getDuration(),this._player.kill(),this._player=null,c=null,this._startedPlaying=!1,this.getState!==s.ERROR&&this.updateState(s.PAUSED)},i.prototype._activate=function(){if(this._player)throw new Error("Already active.");if(this.getState()===s.ERROR)throw new Error("Cannot reactivate a player that is in the ERROR state.");c&&this._makeInactive.call(c),c=this,this._logger.log("Making active: "+this.getId()),this._player=new this._Player(this._descriptor,this._settings,this._type+"*",d),this._addEventListeners(!0),this._player.setVolume(this._volume),this._player.setMute(this._mute),this._player.seek(this._currentPositionWhenWentInactive)},i.prototype._onStateChange=function(e){e===s.PLAYING&&(this._startedPlaying=!0),e===s.ERROR&&(this._playerErrorID=this._player.getErrorID(),this._playerErrorMessage=this._player.getErrorMessage(),this._makeInactive()),e!==s.IDLE&&this.updateState(e)},i.prototype._onPositionChange=function(e,t,n){this.trigger(a.POSITION_CHANGE,e,t,n,this)},i.prototype.play=function(e){c!==this&&this._activate(),this._player.play(e)},i.prototype.pause=function(){if(!this._isInOneOfStates(s.IDLE,s.PAUSED,s.DEAD)){if(c!==this)throw new Error("Player is inactive so should be either DEAD or PAUSED. Was "+this.getState());this._player.pause()}},i.prototype.seek=function(e){if(c===this)this._player.seek(e);else{if(this.getState()===s.DEAD)return;if(!this._isInOneOfStates(s.IDLE,s.PAUSED))throw new Error("Inactive player should be PAUSED or IDLE. Was "+this.getState());this._currentPositionWhenWentInactive=e,this.updateState(s.SEEKING),this._onPositionChange(this._currentPositionWhenWentInactive,this._loadedPositionWhenWentInactive,this._durationWhenWentInactive),this.updateState(s.PAUSED)}},i.prototype.resume=function(){c!==this&&this._activate(),this._player.resume()},i.prototype.setVolume=function(e){this._volume=e,this._player&&this._player.setVolume(e)},i.prototype.getVolume=function(){return this._volume},i.prototype.setMute=function(e){this._mute=e,this._player&&this._player.setMute(e)},i.prototype.getMute=function(){return this._mute},i.prototype.getErrorMessage=function(){return this._playerErrorMessage},i.prototype.getErrorID=function(){return this._playerErrorID},i.prototype.getCurrentPosition=function(){return this._player&&this._startedPlaying?this._player.getCurrentPosition():this._currentPositionWhenWentInactive},i.prototype.getLoadedPosition=function(){return this._player&&this._startedPlaying?this._player.getLoadedPosition():this._loadedPositionWhenWentInactive},i.prototype.getDuration=function(){return this._player&&this._startedPlaying?this._player.getDuration():this._durationWhenWentInactive},i.prototype.kill=function(){this._logger.log("kill()"),this.getState()!==s.DEAD&&(c===this&&(this._player.kill(),c=null),this._player=null,this.updateState(s.DEAD))}},function(e,t,n){function i(e,t,n,i){return l.prototype.constructor.call(this,n||"HLSMSEPlayer",e,t,A()),o(this,["_onPositionChange","_onPlaylistLoaded","_onPlaylistFailed","_onSegmentLoaded","_onSegmentProgress","_onSegmentFailed","_onHtml5MediaEvent","_onLoadedData","_onLoadedMetadata","_onMediaSourceAppend","_onMediaSourceReady","_onMediaSourceDestroy","_onMediaSourceError"]),this._providedAudioElement=i,this._streamUrlProvider=this.getSettings().streamUrlProvider||null,this._maxBufferLength=parseInt(this.getSettings().maxBufferTime,10),this._streamUrlRetryTimer=null,this._streamUrlTimesFailed=0,this._playlistRetryTimer=null,this._playlistTimesFailed=0,this._playlistRefreshInProgress=!1,this._positionUpdateTimer=null,this._isPlaylistLoaded=!1,this._loadOnInit=!1,this._schedulingSegmentIndex=-1,this._segmentsDownloading=[],this._nextSchedulingTimeout=null,this._networkErrors=0,this._segmentErrors=0,this._mimeType=C(),this._mimeType?(this._initMediaElement(),void this.updateState(p.IDLE)):void this._error(a.MSE_NOT_SUPPORTED)}var r=n(1),o=n(36).bindAll,s=n(29),a=n(33),l=n(25),u=n(35),c=n(40),d=n(48),h=n(49),p=n(28),f=n(32),g=n(91),m=n(92),_=n(15),v=n(36),y=200,b=500,w=3,x=1e4,k=3,S=1500,T=3,E=function(e){var t=e/w,n=b*(Math.pow(Math.E,t)/Math.E);return n+=Math.random()*y,n>x&&(n=x),n},A=function(){var e={};return e[f.names.PROTOCOLS]=[g.HLS],e[f.names.MIMETYPES]=[m.HLS,m.M3U8,m.MP3],e[f.names.NEEDS_URL_REFRESH]=!1,e},C=function(){return _.isMSESupportMPEG()&&!_.isNativeHlsSupported()?"audio/mpeg":_.isMSESupportMP4()?"audio/mp4":null};e.exports=i,r(i.prototype,l.prototype),i.prototype._onLoadedData=function(){this._logger.log("loadeddata event handler"),this._triggerDataEvent()},i.prototype._triggerDataEvent=function(){this.trigger(s.DATA,v.timeRangesToFlatMap(this._html5Audio.buffered))},i.prototype._onLoadedMetadata=function(){this._logger.log("loadedmetadata event handler")},i.prototype._onMediaSourceReady=function(){this.getDescriptor().duration&&(this._setDuration(this.getDescriptor().duration),this._logger.log("duration set from descriptor to "+this._duration)),this._loadInitialPlaylist()},i.prototype._onMediaSourceDestroy=function(){this._logger.log("MediaSource destroyed"),this.kill()},i.prototype._onMediaSourceError=function(e){this._logger.log("MediaSource API error: "+e.message),this._error(a.MSE_BAD_OBJECT_STATE),this.kill()},i.prototype._onMediaSourceAppend=function(e){if(this._logger.log("segment appended: "+e.index),this._triggerDataEvent(),this._loadedPosition=e.endPosition,this._playRequested&&this._mseToolkit.hasDataAtPosition(this._currentPosition)){this._logger.log("triggering playback after appending enough segments"),this._html5Audio.currentTime=this._currentPosition/1e3;var t=this._html5Audio.play();t&&t["catch"](function(){}),this._playRequested=!1}},i.prototype._notifyNetworkTimeout=function(){this._networkErrors++,this.trigger(s.NETWORK_TIMEOUT)},i.prototype._onSegmentProgress=function(e){var t=Math.round(e.loaded/e.total*100);this._logger.log("segment "+e.index+" loaded "+e.loaded+" of "+e.total+" bytes ("+t+"%)"),this._loadedPosition=e.endPosition-e.duration*(e.loaded/e.total)},i.prototype._onSegmentLoaded=function(e,t){return t||(this._networkErrors=0,this._segmentErrors=0),this._mseToolkit.sourceIsReady()?void this._appendSegments():void this._logger.log("we have been disposed while loading a segment, noop")},i.prototype._onSegmentFailed=function(e){switch(this._logger.log("segment loading failed handler: "+e.status),e.status){case c.Status.NOT_FOUND:case c.Status.FORBIDDEN:this._networkErrors=0,this._segmentErrors++,this._cancelNextScheduling(),this._cancelAllInFlightSegmentRequests(),this._segmentErrors<k?this._refreshPlaylist():this._error("MSE_HLS_SEGMENT_NOT_FOUND");break;case c.Status.TIMEOUT:(0===this._networkErrors||_.isOnLine())&&this._refreshPlaylist(),this._notifyNetworkTimeout();case c.Status.SERVER_ERROR:if(e.aborted){this._logger.log("aborted segment has been prevented from being retried");break}e.scheduleRetry(E(e.timesFailed),this._hlsToolkit.loadSegment,this._hlsToolkit,T);break;case c.Status.FAILED:this._logger.log("WARNING: segment loading failed for unknown reason!");break;default:throw new Error("Invalid status on failed segment: "+e.status)}},i.prototype._onPlaylistLoaded=function(){this._mseToolkit.whenStable(function(){return this._logger.log("playlist loaded handler"),this._mseToolkit.sourceIsReady()?(this._networkErrors=0,this._playlistTimesFailed=0,this._isPlaylistLoaded=!0,this._setDuration(this._hlsToolkit.getDuration()),this._playlistRefreshInProgress&&(this._playlistRefreshInProgress=!1,this._cancelAllInFlightSegmentRequests(),this._cancelNextScheduling(),this._runScheduling()),this._inspectEncryptionData(),this._logger.log("duration set from playlist info to "+this._duration),void this.trigger(s.METADATA)):void this._logger.log("we have been disposed while loading the playlist, noop")}.bind(this))},i.prototype._onPlaylistFailed=function(e){if(this._logger.log("playlist loading failed handler. HTTP status code is "+e),!this._mseToolkit.sourceIsReady())return void this._logger.log("we have been disposed while loading the playlist, noop");this._logger.log("Playlist loading failed  "+this._playlistTimesFailed+" times before"),this._playlistTimesFailed++;var t=E(this._playlistTimesFailed);this._playlistRetryTimer=window.setTimeout(function(){this._logger.log("Retrying"),this.hasStreamUrlProvider()?this._refreshPlaylist():this._hlsToolkit.updatePlaylist(!0)}.bind(this),t),this._logger.log("Retrying in "+t+" milliseconds"),0===e?this._notifyNetworkTimeout():this._networkErrors=0},i.prototype.afterStateChange=function(e,t){switch(t){case p.PLAYING:this._runScheduling();break;case p.PAUSED:this._cancelNextScheduling(),e===p.PLAYING&&this._cancelAllInFlightSegmentRequests()}},i.prototype._resetPositionInterval=function(e){this._positionUpdateTimer&&(window.clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=null),e&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},i.prototype._onPositionChange=function(){if(!this._isInOneOfStates(p.DEAD)){var e;if(this._currentPosition=1e3*this._html5Audio.currentTime,this.trigger(s.POSITION_CHANGE,this.getCurrentPosition(),this._loadedPosition,this._duration,this),!this._isInOneOfStates(p.PLAYING,p.LOADING))return void(this._state===p.SEEKING&&e>0&&this.updateState(p.PLAYING));var t=this._mediaHasProgressed();return this.getState()!==p.PLAYING||t?void(this.getState()===p.LOADING&&t&&(this._logger.log("media clock check determined playhead is advancing"),this.updateState(p.PLAYING))):(this._logger.log("media clock check failed, playhead is not advancing anymore"),this._html5Audio.paused||this._logger.log("Browser thinks it is playing!"),void this.updateState(p.LOADING))}},i.prototype._onHtml5MediaEvent=function(e){switch(this._logger.log('HTML5 media event "'+e.type+'"'),this._waitingToPause=!1,e.type){case"playing":if(this.getState()===p.PLAYING||this._html5Audio.readyState<3)break;this._playRequested=!1,this._onPositionChange(),this._resetPositionInterval(!0),this.updateState(p.PLAYING);break;case"pause":this._onPositionChange(),this._resetPositionInterval(!1),this.updateState(p.PAUSED);break;case"timeupdate":this._onPositionChange();break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._onPositionChange(),this._resetPositionInterval(!1),this.updateState(p.ENDED);break;case"seeking":this.updateState(p.SEEKING);break;case"seeked":this._html5Audio.paused?this.updateState(p.PAUSED):this.updateState(p.PLAYING),this._onPositionChange();break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},i.prototype._toggleEventListeners=function(e){if(this._html5Audio){var t=e?"addEventListener":"removeEventListener";u.MediaAPIEvents.forEach(function(e){switch(e){case"loadeddata":this._html5Audio[t]("loadeddata",this._onLoadedData);break;case"loadedmetadata":this._html5Audio[t]("loadedmetadata",this._onLoadedMetadata);break;default:this._html5Audio[t](e,this._onHtml5MediaEvent)}},this)}},i.prototype._loadInitialPlaylist=function(){this.updateState(p.LOADING),this._hlsToolkit.updatePlaylist(!0)},i.prototype._refreshPlaylist=function(){if(!this._playlistRefreshInProgress){if(this._playlistRefreshInProgress=!0,!this.hasStreamUrlProvider())return this._logger.log("can't update playlist, got no stream URL provider"),void(this._playlistRefreshInProgress=!1);var e=E(++this._streamUrlTimesFailed);this._streamUrlProvider().done(function(e){this._logger.log("got new M3u8 URL: "+e),this._streamUrlTimesFailed=0,this._hlsToolkit.setUri(e),this._hlsToolkit.updatePlaylist(!1)}.bind(this)).fail(function(){this._logger.log("failed to retrieve stream URL :("),this._streamUrlRetryTimer=window.setTimeout(function(){this._logger.log("Retrying"),this._playlistRefreshInProgress=!1,this._refreshPlaylist()}.bind(this),e),this._logger.log("Retrying in "+e+" milliseconds")}.bind(this))}},i.prototype._setDuration=function(e){this._duration=Math.floor(10*e)/10;try{this._mseToolkit.duration(this._duration)}catch(t){this._onMediaSourceError(t)}},i.prototype._initTransmuxerOnce=function(e,t){if(!this._transmuxer){var n=this._mimeType!==e.mimeType?h.Configs.MP3_TO_FMP4:h.Configs.VOID;this._transmuxer=new h(n),this._transmuxer.on("segment",function(e){this._logger.log("transmuxed data ready, "+e.data.length+" bytes for segment "+e.index),t(e)}.bind(this))}},i.prototype._transmuxSegment=function(e,t){this._logger.log("transmuxing segment "+e.index),this._initTransmuxerOnce(e,t),this._transmuxer.process(e)},i.prototype._appendSegments=function(){var e=!0;this._segmentsDownloading.slice().forEach(function(t){t.isComplete()&&e?(this._decryptSegment(t),this._transmuxSegment(t,function(e){this._mseToolkit.append(e)}.bind(this)),this._segmentsDownloading.shift()):e=!1},this)},i.prototype._cancelNextScheduling=function(){this._logger.log("cancelling next scheduling"),window.clearTimeout(this._nextSchedulingTimeout),this._nextSchedulingTimeout=null},i.prototype._getBufferUntilTime=function(){return this._currentPosition+this._maxBufferLength},i.prototype._isTimeBuffered=function(e){if(!this._html5Audio)return!1;for(var t=this._html5Audio.buffered,n=e/1e3,i=0;i<t.length;i++)if(n>=t.start(i)&&n<=t.end(i))return!0;return!1},i.prototype._getCurrentSegment=function(){return this._schedulingSegmentIndex>0?this._hlsToolkit.getSegment(this._schedulingSegmentIndex):this._hlsToolkit.getSegmentForTime(this._currentPosition)},i.prototype._runScheduling=function(){function e(){var t=!1,n=this._getBufferUntilTime(),i=this._getCurrentSegment(),r=i?i.duration:Math.Infinity;if(this._logger.log("scheduling next requests, current buffer-until time: "+n+" ms"),!i)return void this._logger.log("no segment to schedule, closing loop");for(this._logger.log("current segment index: "+i.index);i.endPosition<=n;){if(this._logger.log("scheduling loop at "+this._currentPosition+" ms, current segment "+i.index),this._requestSegment(i),this._schedulingSegmentIndex=i.index+1,i.isLast){t=!0,this._logger.log("end of playlist reached");break}i=this._hlsToolkit.getSegment(this._schedulingSegmentIndex)}this._isInOneOfStates(p.DEAD,p.PAUSED)||t?(this._logger.log("not re-scheduling"),this._nextSchedulingTimeout=null):(this._logger.log("timing next check for more data in "+r+" ms"),this._nextSchedulingTimeout=window.setTimeout(e.bind(this),r))}this.getState()!==p.DEAD&&(this._nextSchedulingTimeout||this._playlistRefreshInProgress||e.call(this))},i.prototype._cancelAllInFlightSegmentRequests=function(){this._schedulingSegmentIndex=-1,this._hlsToolkit.cancelIncompleteSegments(),this._segmentsDownloading=[]},i.prototype._requestSegment=function(e){return this._segmentsDownloading.push(e),e.isComplete()?(this._logger.log("requested data is already loaded from segment "+e.index),void this._onSegmentLoaded(e,!0)):e.hasBeenRequested()||e.hasFailed()?void this._logger.log("segment already in flight or failed (will retry): "+e.timesFailed+" times"):void this._hlsToolkit.loadSegment(e,T)},i.prototype._decryptSegment=function(e){this._hlsToolkit.isAES128Encrypted()&&this._hlsToolkit.decryptSegmentAES128(e)},i.prototype._inspectEncryptionData=function(){this._hlsToolkit.isAES128Encrypted()&&(this._logger.log("got key of byte length "+this._hlsToolkit.getEncryptionKey().byteLength),this._hlsToolkit.getEncryptionIv()?this._logger.log("got IV of byte length "+this._hlsToolkit.getEncryptionIv().byteLength):this._logger.log("no IV found in header, will use per-segment-index IV"))},i.prototype._html5AudioErrorCodeToErrorId=function(){return{1:a.HTML5_AUDIO_ABORTED,2:a.HTML5_AUDIO_NETWORK,3:a.HTML5_AUDIO_DECODE,4:a.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},i.prototype._error=function(e,t){this._errorID=e,this._errorMessage=this._getErrorMessage(this._errorID),t&&this._html5Audio.error&&(this._errorMessage+=" (native message: "+this._html5Audio.error.message+")"),this._logger.log(this._errorID+" "+this._errorMessage),this.updateState(p.ERROR),this._toggleEventListeners(!1)},i.prototype._getErrorMessage=function(e){var t={};return t[a.MSE_NOT_SUPPORTED]="The browser does not support MediaSource API",t[a.MSE_BAD_OBJECT_STATE]="MediaSource API has thrown an exception",t[e]?"Error: "+e+" ("+t[e]+")":"Error: "+e},i.prototype.setVolume=function(e){this._html5Audio&&(this._html5Audio.volume=e)},i.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},i.prototype.setMute=function(e){this._html5Audio&&(this._html5Audio.muted=e)},i.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},i.prototype.getErrorID=function(){return this._errorID},i.prototype.play=function(e){return this._isInOneOfStates(p.ERROR,p.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):(e=e||0,this._isInOneOfStates(p.IDLE,p.INITIALIZE)?(this._logger.log("play from "+e),this._playRequested=!0,void this.seek(e)):(e&&(this._currentPosition=e),void this.resume()))},i.prototype.pause=function(){this._html5Audio&&(this._playRequested=!1,this._html5Audio.pause())},i.prototype.seek=function(e){if(!this._isInOneOfStates(p.ERROR,p.DEAD)){if(e=parseInt(e,10)||0,!this._isPlaylistLoaded)return void this.once(s.METADATA,function(){this.seek(e)}.bind(this));if(e>this._duration)return void this._logger.log("can not seek to position over duration");this._logger.log("seek to "+e+" ms"),this._lastMediaClockCheck=null,!this._isTimeBuffered(e)&&this._isTimeBuffered(e+S)&&(e+=S,this._logger.log("detected smart seeking opportunity, adjusting target to: "+e)),this._currentPosition=e;try{this._html5Audio.currentTime=e/1e3}catch(t){this._logger.log("error seeking: "+t.message)}if(this._playRequested&&this._mseToolkit.hasDataAtPosition(e)){var n=this._html5Audio.play();n&&n["catch"](function(){})}else this.updateState(p.SEEKING);this._cancelAllInFlightSegmentRequests(),this._cancelNextScheduling(),this._runScheduling()}},i.prototype.resume=function(){if(this._html5Audio){this._playRequested=!0,this._logger.log("resume from "+this._currentPosition),this._html5Audio.currentTime=this._currentPosition/1e3,this.updateState(p.PLAYING);var e=this._html5Audio.play();e&&e["catch"](function(){})}},i.prototype.kill=function(){this.getState()!==p.DEAD&&(this._logger.log("kill"),this._cancelNextScheduling(),this._cancelAllInFlightSegmentRequests(),this._resetPositionInterval(!1),this._addMseAndHlsEventListeners(!1),this._hlsToolkit.kill(),this._hlsToolkit=null,this._mseToolkit.kill(),this._mseToolkit=null,window.clearTimeout(this._playlistRetryTimer),window.clearTimeout(this._streamUrlRetryTimer),this._playRequested=!1,this._toggleEventListeners(!1),this._disposeMediaElement(),this.updateState(p.DEAD))},i.prototype.getErrorMessage=function(){return this._errorMessage},i.prototype.hasStreamUrlProvider=function(){return!!this._streamUrlProvider;
},i.prototype._initMediaElement=function(){this._html5Audio=this._providedAudioElement||_.createAudioElement(),this._toggleEventListeners(!0),this._setupMseToolkitAndHlsToolkit(),this._mseToolkit.attachSource()},i.prototype._disposeMediaElement=function(){this._html5Audio.src="",this._html5Audio.removeAttribute("src")},i.prototype._setupMseToolkitAndHlsToolkit=function(){this._mseToolkit=new d(this._html5Audio,this._logger,this._mimeType),this._hlsToolkit=new c(this._logger,this.getDescriptor().src),this._addMseAndHlsEventListeners(!0)},i.prototype._addMseAndHlsEventListeners=function(e){var t=e===!1?"off":"on";this._mseToolkit[t](d.Events.SEGMENT_APPENDED,this._onMediaSourceAppend),this._mseToolkit[t](d.Events.SOURCE_READY,this._onMediaSourceReady),this._mseToolkit[t](d.Events.SOURCE_DESTROY,this._onMediaSourceDestroy),this._mseToolkit[t](d.Events.SOURCE_ERROR,this._onMediaSourceError),this._hlsToolkit[t](c.Events.SEGMENT_LOADED,this._onSegmentLoaded),this._hlsToolkit[t](c.Events.SEGMENT_PROGRESS,this._onSegmentProgress),this._hlsToolkit[t](c.Events.SEGMENT_FAILED,this._onSegmentFailed),this._hlsToolkit[t](c.Events.PLAYLIST_LOADED,this._onPlaylistLoaded),this._hlsToolkit[t](c.Events.PLAYLIST_FAILED,this._onPlaylistFailed),this._hlsToolkit[t](c.Events.PLAYLIST_PARSE_ERROR,this._onPlaylistFailed)}},function(e,t,n){var i,r=n(1),o=n(41),s=n(46),a=null,l=n(26),u={NEW:"new",QUEUED:"queued",REQUESTED:"requested",COMPLETE:"complete",TIMEOUT:"timeout",FORBIDDEN:"forbidden",NOT_FOUND:"not-found",SERVER_ERROR:"server-error",FAILED:"failed"},c={FIRST:"#EXTM3U",PLAYLIST:"#EXT-X-STREAM-INF:",SEGMENT:"#EXTINF:",END_TAG:"#EXT-X-ENDLIST",ENCRYPTION:"#EXT-X-KEY:"},d=6e3;e.exports=i=function(e,t){this._logger=e,this._duration=0,this._segments=[],this._playlistXHR=null,this.setUri(t)},i.Events={PLAYLIST_LOADED:"playlist-loaded",PLAYLIST_PARSE_ERROR:"playlist-parse-error",PLAYLIST_FAILED:"playlist-failed",SEGMENT_LOADED:"segment-loaded",SEGMENT_PROGRESS:"segment-progress",SEGMENT_FAILED:"segment-failed",SEGMENT_CANCELED:"segment-canceled"},i.Status=u,r(i.prototype,l),i.Segment=function(e,t,n,i,o){r(this,{toolkit:e,uri:t,startPosition:n,endPosition:n+i,duration:i,index:o,data:null,status:u.NEW,isLast:!1,timesFailed:0,loaded:0,total:-1,aborted:!1,xhr:null,mimeType:"audio/mpeg"}),this._logger=e._logger},i.Segment.prototype.containsTime=function(e){return e>=this.startPosition&&e<=this.endPosition},i.Segment.prototype.isComplete=function(){return this.status===u.COMPLETE},i.Segment.prototype.hasFailed=function(){return this.status===u.TIMEOUT||this.status===u.FORBIDDEN||this.status===u.NOT_FOUND||this.status===u.SERVER_ERROR||this.status===u.FAILED},i.Segment.prototype.isNew=function(){return this.status===u.NEW},i.Segment.prototype.hasBeenRequested=function(){return this.status===u.REQUESTED},i.Segment.prototype.scheduleRetry=function(e,t,n,i){var r=this;this._retryTimer=window.setTimeout(function(){t.call(n,r,i)},e)},i.Segment.prototype.cancel=function(){this._logger.log("segment cancelled, clearing timeout: "+this.index),window.clearTimeout(this._retryTimer),this.xhr&&(this._logger.log("will abort & reset segment: "+this.index),this.status=u.NEW,this.aborted=!0,this.data=null,this.timesFailed=0,this.xhr.abort(),this.xhr=null,this.toolkit.trigger(i.Events.SEGMENT_CANCELED,this))},i.prototype.setUri=function(e){var t=this._uri=e;t.indexOf("?")>-1&&(t=t.substr(0,t.indexOf("?"))),this._baseURI=t.substr(0,t.lastIndexOf("/")+1)},i.prototype.updatePlaylist=function(e){var t=!1,n=new XMLHttpRequest;n.open("GET",this._uri,!0),n.responseType="text",n.timeout=d,this._logger.log("downloading playlist from: "+this._uri);var r=function(e){t||(t=!0,this._playlistXHR=null,this.trigger(i.Events.PLAYLIST_FAILED,n.status))}.bind(this);n.onload=function(t){return 200!==n.status?void r():(this._playlistXHR=null,e&&(this._segments=[],this._duration=0),this._parsePlaylist(n.responseText,e)?(this.getLastSegment().isLast=!0,this._logger.log("playlist download complete"),void this._retrieveEncryptionKey(function(){this.trigger(i.Events.PLAYLIST_LOADED)})):(this._logger.log("error parsing playlist"),void this.trigger(i.Events.PLAYLIST_PARSE_ERROR)))}.bind(this),n.onerror=n.ontimeout=r,this._playlistXHR=n,n.send()},i.prototype._parsePlaylist=function(e,t){for(var n,r,o,s=e.split("\n"),a=0,l=!1,u=0,d=0;u<s.length;)n=s[u++],0===n.indexOf(c.SEGMENT)?(o=1e3*Number(n.substr(8,n.indexOf(",")-8)),r=this._createSegmentURL(s[u]),t||!this._segments[a]?this._addSegment(new i.Segment(this,r,this._duration,o,d++)):this._segments[a].uri=r,a++,u++):0===n.indexOf(c.ENCRYPTION)?this._parsePlaylistEncryptionHeader(n):0===n.indexOf(c.END_TAG)&&(l=!0);return 0!==this.getNumSegments()&&l?!0:!1},i.prototype._addSegment=function(e){this._segments.push(e),this._duration+=e.duration},i.prototype._parsePlaylistEncryptionHeader=function(e){var t,n,i,r=e.substr(c.ENCRYPTION.length).split(",");if(s(r,function(e){e.indexOf("METHOD")>=0?n=e.split("=")[1]:e.indexOf("URI")>=0?t=e.split("=")[1]:e.indexOf("IV")>=0&&(i=e.split("=")[1])}),!(n&&t&&n.length&&t.length))throw new Error("Failed to parse M3U8 encryption header");n=n.trim(),t=t.trim().replace(/"/g,""),this._encryptionMethod=n,this._encryptionKeyUri=t,i&&i.length?(this._encryptionIvHexString=i.trim(),this._parseEncryptionIvHexString()):this._encryptionIv=null},i.prototype._parseEncryptionIvHexString=function(){var e,t=this._encryptionIvHexString.replace("0x",""),n=new Uint16Array(8),i=0;if(t.length%4!==0)throw new Error("Failed to parse M3U8 encryption IV (length is not multiple of 4)");for(;i<t.length;i+=4){if(e=parseInt(t.substr(i,4),16),isNaN(e))throw new Error("Failed to parse hex number in IV string");n[i/4]=e}this._encryptionIv=n},i.prototype._encryptionIvForSegment=function(e){var t=new DataView(new ArrayBuffer(16));return t.setUint32(0,e.index,!0),t.buffer},i.prototype._retrieveEncryptionKey=function(e){if(e){if(!this._encryptionKeyUri)return void e.call(this);var t=this._encryptionKeyUri,n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=o(function(i){200===n.status?this._encryptionKey=new Uint8Array(n.response):this._logger.log("Failed to retrieve encryption key from "+t+", returned status "+n.status),e.call(this)},this),n.send(),this._logger.log("Downloading encryption key from "+t)}},i.prototype._removeEncryptionPaddingBytes=function(e){var t=e.data[e.data.byteLength-1];t?(this._logger.log("Detected PKCS7 padding length of "+t+" bytes, slicing segment."),e.data=e.data.subarray(0,e.data.byteLength-t)):this._logger.log("No padding detected (last byte is zero)")},i.prototype.decryptSegmentAES128=function(e){if(this._logger.log("Decrypting AES-128 cyphered segment ..."),!a)throw new Error("AES decryption not built-in");var t=a.cipher.createDecipher("AES-CBC",a.util.createBuffer(this._encryptionKey)),n=0,i=e.data.byteLength,r=this._encryptionIv||this._encryptionIvForSegment(e);for(this._logger.log("Using IV ->"),t.start({iv:a.util.createBuffer(r)}),t.update(a.util.createBuffer(e.data)),t.finish(),e.data=new Uint8Array(i);i>n;n++)e.data[n]=t.output.getByte();this._removeEncryptionPaddingBytes(e)},i.prototype.isAES128Encrypted=function(){return"AES-128"===this._encryptionMethod},i.prototype.getEncryptionKeyUri=function(){return this._encryptionKeyUri},i.prototype.getEncryptionIv=function(){return this._encryptionIv},i.prototype.getEncryptionKey=function(){return this._encryptionKey},i.prototype._createSegmentURL=function(e){return"http://"===e.substr(0,7)||"https://"===e.substr(0,8)||"/"===e.substr(0,1)?e:this._baseURI+e},i.prototype._handleLoadSegmentFailure=function(e,t,n){e.aborted||(this._logger.log("segment aborted: "+e.aborted),this._logger.log("segment loading failure: HTTP response status: "+t.status),0===t.status?e.status=u.TIMEOUT:403===t.status?e.status=u.FORBIDDEN:404===t.status?e.status=u.NOT_FOUND:t.status>=500?e.status=u.SERVER_ERROR:e.status=u.FAILED,e.timesFailed++,this.trigger(i.Events.SEGMENT_FAILED,e))},i.prototype.getNumberOfSegmentsRequested=function(){var e=0;return this._segments.forEach(function(t){t.status===u.REQUESTED&&e++}),e},i.prototype._loadSegmentsQueued=function(e){this._segments.forEach(function(t){t.status===u.QUEUED&&(this._logger.log("attempt to load queue segment "+t.index),this.loadSegment(t,e))}.bind(this))},i.prototype._doRequest=function(e,t){var n=!1,r=new XMLHttpRequest,o=e.uri,s=function(i){n||(n=!0,this._handleLoadSegmentFailure(e,r,i),this._loadSegmentsQueued(t))}.bind(this);return e.hasBeenRequested()||e.isComplete()?void this._logger.log("segment cant be loaded, requested: ",!!e.hasBeenRequested()," complete: ",e.isComplete()):(r.open("GET",o,!0),r.responseType="arraybuffer",r.onload=function(){if(!e.aborted){if(200!==r.status)return void s();this._logger.log("download of segment "+e.index+" complete"),e.status=u.COMPLETE,e.data=new Uint8Array(r.response),e.downloadTime=Date.now()-e.downloadStartTime,this.trigger(i.Events.SEGMENT_LOADED,e),this._loadSegmentsQueued(t)}}.bind(this),r.onprogress=function(t){e.aborted||t.loaded&&t.total&&(e.loaded=t.loaded,e.total=t.total,this.trigger(i.Events.SEGMENT_PROGRESS,e))}.bind(this),r.onerror=function(e){s(e)}.bind(this),this._logger.log("requesting segment "+e.index+" from "+o),e.xhr=r,e.aborted=!1,e.downloadStartTime=Date.now(),e.status=u.REQUESTED,void r.send())},i.prototype.loadSegment=function(e,t){return!isNaN(t)&&this.getNumberOfSegmentsRequested()>t?(this._logger.log("setting segment "+e.index+" queued"),void(e.status=u.QUEUED)):void this._doRequest(e,t)},i.prototype.getSegment=function(e){return this._segments[e]?this._segments[e]:null},i.prototype.getSegmentIndexForTime=function(e){var t,n;if(e>this._duration||0>e||0===this._segments.length)return-1;for(t=Math.floor(this._segments.length*(e/this._duration)),n=this._segments[t];!(n.startPosition<=e&&n.startPosition+n.duration>e);)n.startPosition+n.duration>=e?t--:t++,n=this._segments[t];return t},i.prototype.getSegmentForTime=function(e){var t=this.getSegmentIndexForTime(e);return t>=0?this._segments[t]:null},i.prototype.getDuration=function(){return this._duration},i.prototype.getNumSegments=function(){return this._segments.length},i.prototype.getLastSegment=function(){return this._segments.length?this._segments[this._segments.length-1]:null},i.prototype.cancelIncompleteSegments=function(){this._segments.filter(function(e){return!e.isComplete()}).forEach(function(e){e.cancel()})},i.prototype.kill=function(){this.cancelIncompleteSegments(),this._playlistXHR&&(this._playlistXHR.abort(),this._playlistXHR=null)}},function(e,t,n){var i=n(42),r=n(45),o=n(11),s=1,a=32,l=o(function(e,t,n){var o=s;if(n.length){var u=r(n,l.placeholder);o|=a}return i(e,o,t,n,u)});l.placeholder={},e.exports=l},function(e,t,n){function i(e,t,n){var i=n.length;switch(i){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){return e="number"==typeof e||j.test(e)?+e:-1,t=null==t?R:t,e>-1&&e%1==0&&t>e}function o(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;)e[n]===t&&(e[n]=O,o[++r]=n);return o}function s(e,t,n){for(var i=n.length,r=-1,o=G(e.length-i,0),s=-1,a=t.length,l=Array(a+o);++s<a;)l[s]=t[s];for(;++r<i;)l[n[r]]=e[r];for(;o--;)l[s++]=e[r++];return l}function a(e,t,n){for(var i=-1,r=n.length,o=-1,s=G(e.length-r,0),a=-1,l=t.length,u=Array(s+l);++o<s;)u[o]=e[o];for(var c=o;++a<l;)u[c+a]=t[a];for(;++i<r;)u[c+n[i]]=e[o++];return u}function l(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}function u(e,t,n){function i(){var t=this&&this!==w&&this instanceof i?o:e;return t.apply(r?n:this,arguments)}var r=t&x,o=c(e);return i}function c(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=K(e.prototype),i=e.apply(n,t);return v(i)?i:n}}function d(e,t,n){function r(){for(var a=arguments.length,l=a,u=Array(a),c=this&&this!==w&&this instanceof r?s:e,d=r.placeholder;l--;)u[l]=arguments[l];var p=3>a&&u[0]!==d&&u[a-1]!==d?[]:o(u,d);return a-=p.length,n>a?f(e,t,h,d,void 0,u,p,void 0,void 0,n-a):i(c,this,u)}var s=c(e);return r}function h(e,t,n,i,r,l,u,d,p,g){function _(){for(var x=arguments.length,k=x,T=Array(x);k--;)T[k]=arguments[k];if(i&&(T=s(T,i,r)),l&&(T=a(T,l,u)),S||A){var E=_.placeholder,I=o(T,E);if(x-=I.length,g>x)return f(e,t,h,E,n,T,I,d,p,g-x)}var D=y?n:this,M=b?D[e]:e;return d?T=m(T,d):C&&T.length>1&&T.reverse(),v&&p<T.length&&(T.length=p),this&&this!==w&&this instanceof _&&(M=P||c(M)),M.apply(D,T)}var v=t&I,y=t&x,b=t&k,S=t&T,A=t&E,C=t&D,P=b?void 0:c(e);return _}function p(e,t,n,r){function o(){for(var t=-1,l=arguments.length,u=-1,c=r.length,d=Array(c+l),h=this&&this!==w&&this instanceof o?a:e;++u<c;)d[u]=r[u];for(;l--;)d[u++]=arguments[++t];return i(h,s?n:this,d)}var s=t&x,a=c(e);return o}function f(e,t,n,i,r,o,s,a,u,c){var d=t&T,h=a?l(a):void 0,p=d?s:void 0,f=d?void 0:s,g=d?o:void 0,m=d?void 0:o;t|=d?A:C,t&=~(d?C:A),t&S||(t&=~(x|k));var _=n(e,t,r,g,p,m,f,h,u,c);return _.placeholder=i,_}function g(e,t,n,i,r,o,s,a){var l=t&k;if(!l&&"function"!=typeof e)throw new TypeError(P);var c=i?i.length:0;if(c||(t&=~(A|C),i=r=void 0),s=void 0===s?s:G(y(s),0),a=void 0===a?a:y(a),c-=r?r.length:0,t&C){var f=i,g=r;i=r=void 0}var m=[e,t,n,i,r,f,g,o,s,a];if(e=m[0],t=m[1],n=m[2],i=m[3],r=m[4],a=m[9]=null==m[9]?l?0:e.length:G(m[9]-c,0),!a&&t&(T|E)&&(t&=~(T|E)),t&&t!=x)_=t==T||t==E?d(e,t,a):t!=A&&t!=(x|A)||r.length?h.apply(void 0,m):p(e,t,n,i);else var _=u(e,t,n);return _}function m(e,t){for(var n=e.length,i=Y(t.length,n),o=l(e);i--;){var s=t[i];e[i]=r(s,n)?o[s]:void 0}return e}function _(e){var t=v(e)?W.call(e):"";return t==N||t==B}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if(!e)return 0===e?e:0;if(e=b(e),e===M||e===-M){var t=0>e?-1:1;return t*L}var n=e%1;return e===e?n?e-n:e:0}function b(e){if(v(e)){var t=_(e.valueOf)?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace($,"");var n=z.test(e);return n||H.test(e)?V(e.slice(2),n?2:8):U.test(e)?F:+e}var w=n(43),x=1,k=2,S=4,T=8,E=16,A=32,C=64,I=128,D=512,P="Expected a function",M=1/0,R=9007199254740991,L=1.7976931348623157e308,F=NaN,O="__lodash_placeholder__",N="[object Function]",B="[object GeneratorFunction]",$=/^\s+|\s+$/g,U=/^[-+]0x[0-9a-f]+$/i,z=/^0b[01]+$/i,H=/^0o[0-7]+$/i,j=/^(?:0|[1-9]\d*)$/,V=parseInt,q=Object.prototype,W=q.toString,G=Math.max,Y=Math.min,K=function(){function e(){}return function(t){if(v(t)){e.prototype=t;var n=new e;e.prototype=void 0}return n||{}}}();e.exports=g},function(e,t,n){(function(e,n){function i(e){return e&&e.Object===Object?e:null}var r={"function":!0,object:!0},o=r[typeof t]&&t&&!t.nodeType?t:void 0,s=r[typeof e]&&e&&!e.nodeType?e:void 0,a=i(o&&s&&"object"==typeof n&&n),l=i(r[typeof self]&&self),u=i(r[typeof window]&&window),c=i(r[typeof this]&&this),d=a||u!==(c&&c.window)&&u||l||c||Function("return this")();e.exports=d}).call(t,n(44)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(e,t){for(var n=-1,r=e.length,o=-1,s=[];++n<r;)e[n]===t&&(e[n]=i,s[++o]=n);return s}var i="__lodash_placeholder__";e.exports=n},function(e,t,n){function i(e,t){return function(n,i,r){return"function"==typeof i&&void 0===r&&a(n)?e(n,i):t(n,s(i,r,3))}}var r=n(47),o=n(18),s=n(9),a=n(7),l=i(r,o);e.exports=l},function(e,t){function n(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}e.exports=n},function(e,t,n){var i,r=n(26),o=n(36).bindAll,s=n(1);e.exports=i=function(e,t,n){o(this,["_onMSEInit","_onMSEDispose","_onSourceBufferUpdate"]),this.mimeType=n,this._logger=t,this._html5Audio=e,this._segmentsAwaitingAppendance=[],this._isNotReady=!0,this._objectUrl=null,this._sourceBuffer=null,this._mediaSource=null,this._appendedSegments=[]},i.Events={SOURCE_READY:"source-ready",SOURCE_ERROR:"source-error",SEGMENT_APPENDED:"segment-appended"},s(i.prototype,r),s(i.prototype,{_onMSEInit:function(){if(this._logger.log("source open handler"),this._isNotReady=!1,this._mediaSource.removeEventListener("sourceopen",this._onMSEInit,!1),this._sourceBuffer=this._mediaSource.addSourceBuffer(this.mimeType),this._sourceBuffer.addEventListener("update",this._onSourceBufferUpdate),this.trigger(i.Events.SOURCE_READY),this._appendedSegments.length>0){var e=this._appendedSegments.slice(0);this._appendedSegments.length=0,e.forEach(this._appendNextSegment.bind(this))}},_onMSEDispose:function(){this._isNotReady=!0,this._logger.log("source dispose handler"),this._objectUrl=null,this._sourceBuffer=null,this._mediaSource.removeEventListener("sourceclose",this._onMSEDispose,!1),this._mediaSource=null},_appendNextSegment:function(e){try{if(this._sourceBuffer.updating)return this._logger.log("source buffer is busy updating already, enqueuing data for later appending"),void this._segmentsAwaitingAppendance.unshift(e);if(this._appendedSegments.some(function(t){return t.index===e.index}))return;e.isLast&&this._logger.log("about to append last segment"),this._currentSegmentAppending=e,this._sourceBuffer.timestampOffset=e.startPosition/1e3,this._sourceBuffer.appendBuffer(e.data.buffer.slice(0)),this._appendedSegments.push(e),this._logger.log("appending segment "+e.index)}catch(t){this._logger.log("error while appending to SourceBuffer: "+t.message+")"),this.trigger(i.Events.SOURCE_ERROR,t)}},_tryAppendEos:function(){this._logger.log("attempting to finalize stream");try{"open"!==this._mediaSource.readyState||this._sourceBuffer.updating?this._logger.log("couldn't call endOfStream because SourceBuffer is still updating, we'll call it once its done"):(this._mediaSource.endOfStream(),this._logger.log("called endOfStream"))}catch(e){this._logger.log("SourceBuffer endOfStream() call failed with error: "+e.message),this.trigger(i.Events.SOURCE_ERROR,e)}},_onSourceBufferUpdate:function(){(this._currentSegmentAppending||this._sourceBuffer.updating)&&(this._logger.log("done updating SourceBuffer with segment "+this._currentSegmentAppending.index),this.trigger(i.Events.SEGMENT_APPENDED,this._currentSegmentAppending),this._currentSegmentAppending.isLast&&(this._logger.log("was last segment, setting on EOS on SourceBuffer"),this._tryAppendEos()),this._segmentsAwaitingAppendance.length&&!this._sourceBuffer.updating&&this.isAttached()&&this._appendNextSegment(this._segmentsAwaitingAppendance.pop()))},attachSource:function(){this.isAttached()||(this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._onMSEInit,!1),this._mediaSource.addEventListener("sourceclose",this._onMSEDispose,!1),this._objectUrl=URL.createObjectURL(this._mediaSource),this._html5Audio.removeAttribute("src"),this._html5Audio.src=this._objectUrl)},detachSource:function(){this.isAttached()&&(this._mediaSource.removeEventListener("sourceopen",this._onMSEInit),this._mediaSource.removeEventListener("sourceclose",this._onMSEDispose),this._sourceBuffer&&this._mediaSource.removeSourceBuffer(this._sourceBuffer),this._html5Audio.src="",this._html5Audio.removeAttribute("src"),this._objectUrl=null)},append:function(e){if(!this.sourceIsReady())throw new Error("MediaSource is not ready yet");this.isAttached()?this._appendNextSegment(e):this._segmentsAwaitingAppendance.unshift(e)},isAttached:function(){return this._objectUrl===this._html5Audio.src},sourceIsReady:function(){return!this._isNotReady},duration:function(e){return this._mediaSource.duration=e/1e3,1e3*this._mediaSource.duration},whenStable:function a(e){var t;this._sourceBuffer.updating?(t=function(){this._sourceBuffer.removeEventListener("update",t),a.call(this,e)}.bind(this),this._sourceBuffer.addEventListener("update",t)):e()},hasDataAtPosition:function(e){return this._appendedSegments.some(function(t){return t.startPosition<=e&&t.endPosition>=e})},kill:function(){this.detachSource()}})},function(e,t,n){var i,r=n(36).concatBuffersToUint8Array,o=n(1),s=n(26),a=n(50);e.exports=i=function(e){this.config=e,this.reset(),this.segments=[],this.pushedInitData=!1},o(i.prototype,s),i.prototype.process=function(e){switch(this.segments.push(e),this.config){case i.Configs.VOID:this.trigger("segment",e);break;case i.Configs.MP3_TO_FMP4:this.src.enqueue(new a.Unit.Transfer(e.data,"binary")),this.src.enqueue(a.Unit.Transfer.Flush());break;default:throw new Error("Config "+this.config+" not supported")}},i.prototype.dequeue=function(){return this.segments.shift()},i.prototype.reset=function(){switch(this.config){case i.Configs.VOID:break;case i.Configs.MP3_TO_FMP4:this.gotInitData=!1,this.src=new a.Unit.BasePushSrc,this.parser=new a.Units.MP3Parser,this.muxer=new a.Units.MP4Mux(a.Units.MP4Mux.Profiles.MP3_AUDIO_ONLY),this.sink=new a.Unit.BaseSink,this.sink._onData=function(){var e,t=this.sink.dequeue().data;return this.gotInitData?(e=this.dequeue(),e.mimeType="audio/mp4",this.gotInitData&&!this.pushedInitData?(e.data=r(this.initData,t),this.pushedInitData=!0):e.data=t,this.trigger("segment",e),void this.reset()):(this.gotInitData=!0,void(this.initData=t))}.bind(this),a.Unit.link(this.src,this.parser,this.muxer,this.sink);break;default:throw new Error("Config "+this.config+" not supported")}},i.Configs={VOID:"VOID",MP3_TO_FMP4:"MP3_TO_FMP4"}},function(e,t,n){var i,r=n(51),o=n(78),s=n(81),a=n(84),l=n(87),u=n(88);e.exports=i={Unit:r,Units:{File:u,MP4Mux:o,MP3Parser:s,MSESink:a,XHR:l}}},function(e,t,n){(function(t){var i,r,o,s,a,l,u,c,d,h,p=n(56),f=n(58),g=n(1),m=n(60),_=n(61);e.exports=i=function(){m.call(this),this.inputs||(this.inputs=[]),this.outputs||(this.outputs=[])},i.create=function(e){return f(i.prototype,e)},i.createBaseSrc=function(e){return f(l.prototype,e)},i.createBasePushSrc=function(e){return f(u.prototype,e)},i.createBaseSink=function(e){return f(c.prototype,e)},i.createBaseTransform=function(e){return f(a.prototype,e)},i.createBaseParser=function(e){return f(d.prototype,e)},i.link=function(e,t){if(arguments.length>2)return i.linkArray(arguments);for(var n=0;n<Math.min(e.numberOfOuts(),t.numberOfIns());n++)e.out(n).pipe(t["in"](n));return t},i.linkArray=function(e){var t,n,r;for(r=0;r<e.length;r++)t=e[r],e.length>r+1&&(n=e[r+1],i.link(t,n));return n};var v=i.Event={CHAIN:"chain",NEED_DATA:"need-data",FINISH:"finish",PIPE:"pipe",UNPIPE:"unpipe",ERROR:"error",END:"end",OPEN:"open",CLOSE:"close"};i.prototype=f(m.prototype,{constructor:i,"in":function(e){return this.inputs[e]},out:function(e){return this.outputs[e]},numberOfIns:function(){return this.inputs.length},numberOfOuts:function(){return this.outputs.length},add:function(e){return e instanceof r?this.addInput(e):e instanceof o&&this.addOutput(e),this},remove:function(e){e instanceof r?this.removeInput(e):e instanceof o&&this.removeOutput(e)},addInput:function(e){this._installEventForwarder(e,v.FINISH),this._installEventForwarder(e,v.OPEN),this._installEventForwarder(e,v.PIPE),this._installEventForwarder(e,v.UNPIPE),this._installEventForwarder(e,v.ERROR),this._installEventForwarder(e,v.CHAIN),this.inputs.push(e)},addOutput:function(e){this._installEventForwarder(e,v.END),this._installEventForwarder(e,v.OPEN),this._installEventForwarder(e,v.CLOSE),this._installEventForwarder(e,v.ERROR),this._installEventForwarder(e,v.NEED_DATA),this.outputs.push(e)},removeInput:function(e){removePut(this.inputs,e)},removeOutput:function(e){removePut(this.outputs,e)},removePut:function(e,t){e.slice().forEach(function(n,i){n==t&&e.splice(i,1)})},_installEventForwarder:function(e,t){e.on(t,function(n){this.emit(t,e,n)}.bind(this))}}),i.Transfer=s=function(e,n,i){n||(n=e instanceof t?"buffer":e instanceof String?"utf8":"object"),this.resolved=!1,this.data=e,this.encoding=n,this.doneCallback=i},s.prototype=f(Object.prototype,{constructor:s,resolve:function(){this.doneCallback&&!this.resolved&&(this.doneCallback(),this.resolved=!0)},setFlushing:function(e){return this.data.flush=e,this},setEmpty:function(e){return this.data.empty=e,this}}),s.Flush=function(){return new s({},"binary").setFlushing(!0).setEmpty(!0)},s.EOS=function(){return new s(null,"binary")},i.Input=r=function(e,t){_.Writable.prototype.constructor.call(this,{objectMode:!0,decodeStrings:!1})},r.prototype=f(_.Writable.prototype,{constructor:r,_write:function(e,t,n){p("_write: "+t),this.emit(i.Event.CHAIN,new s(e,t,n))}}),i.Output=o=function(e){_.Readable.prototype.constructor.call(this,{objectMode:!0}),this._dataRequested=0,this._shouldPushMore=!0},o.eos=function(e){e.push(null,"null")},o.prototype=f(_.Readable.prototype,{constructor:o,_read:function(e){this._dataRequested++,this.emit(v.NEED_DATA,this)},push:function(e,t){return this._dataRequested--,this._shouldPushMore=_.Readable.prototype.push.call(this,e,t),this._shouldPushMore},isPulling:function(){return this._dataRequested>0},eos:function(){_.Readable.prototype.push.call(this,null,"null")}}),i.BaseTransform=a=function(){i.prototype.constructor.apply(this,arguments),this.add(new r).add(new o),this.on(v.CHAIN,this._onChain.bind(this)),this.on(v.FINISH,this._onFinish.bind(this))},a.prototype=f(i.prototype,{constructor:a,_onChain:function(e,t){this._transform(t),this.out(0).push(t.data,t.encoding),t.resolve()},_onFinish:function(e){o.eos(this.out(0))},_transform:function(e){}}),i.BaseSrc=l=function(){i.prototype.constructor.apply(this,arguments),this.add(new o),this.on(v.NEED_DATA,this.squeeze.bind(this))},l.prototype=f(i.prototype,{constructor:l,squeeze:function(){p("squeeze");var e=this._source();e&&(this.out(0).push(e.data,e.encoding),e.resolve())},_source:function(){}}),i.BasePushSrc=u=function(){l.prototype.constructor.apply(this,arguments),this._bufferOut=[]},u.prototype=f(l.prototype,{constructor:u,_source:function(){return this._bufferOut.length?this._bufferOut.shift():null},enqueue:function(e){this._bufferOut.push(e),this.out(0).isPulling&&this.out(0).isPulling()&&this.squeeze()}}),i.BaseSink=c=function(){i.prototype.constructor.apply(this,arguments),this.add(new r),this.on(v.CHAIN,this._onChain.bind(this)),this._bufferIn=[]},c.prototype=f(i.prototype,{constructor:c,_onChain:function(e,t){p("BaseSink._onChain: "+t.encoding),this._bufferIn.push(t),this._onData(),t.resolve()},_onData:function(){},dequeue:function(){return this._bufferIn.length?this._bufferIn.shift():null}}),i.BaseParser=d=function(){u.prototype.constructor.apply(this,arguments),c.prototype.constructor.apply(this,arguments),this.on("finish",this._onFinish.bind(this))},g(d.prototype,i.prototype,m.prototype,l.prototype,u.prototype,c.prototype,{constructor:d,_onData:function(){this._parse(this.dequeue())},_onFinish:function(){p("BaseParser._onFinish"),o.eos(this.out(0))},_parse:function(e){}}),i.InputSelector=h=function(e){for(a.prototype.constructor.apply(this,arguments),e=(e||1)-1;e-->0;)this.add(new r);this.selectedInputIndex=0},g(h.prototype,a.prototype,{constructor:h,_onChain:function(e,t){var n=this["in"](this.selectedInputIndex);return e!==n?void t.resolve():(this._transform(t),this.out(0).push(t.data,t.encoding),void t.resolve())},_onFinish:function(e){var t=this["in"](this.selectedInputIndex);e===t&&o.eos(this.out(0))}})}).call(t,n(52).Buffer)},function(e,t,n){(function(e,i){/*!
		 * The buffer module from node.js, for the browser.
		 *
		 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
		 * @license  MIT
		 */
"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function o(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,n){if(o()<n)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=e.prototype):(null===t&&(t=new e(n)),t.length=n),t}function e(t,n,i){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,n,i);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,n,i)}function a(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,i):"string"==typeof t?d(e,t,n):f(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,i){return l(t),0>=t?s(e,t):void 0!==n?"string"==typeof i?s(e,t).fill(n,i):s(e,t).fill(n):s(e,t)}function c(t,n){if(l(n),t=s(t,0>n?0:0|g(n)),!e.TYPED_ARRAY_SUPPORT)for(var i=0;n>i;++i)t[i]=0;return t}function d(t,n,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!e.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|_(n,i);t=s(t,r);var o=t.write(n,i);return o!==r&&(t=t.slice(0,o)),t}function h(e,t){var n=t.length<0?0:0|g(t.length);e=s(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function p(t,n,i,r){if(n.byteLength,0>i||n.byteLength<i)throw new RangeError("'offset' is out of bounds");if(n.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return n=void 0===i&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,i):new Uint8Array(n,i,r),e.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=e.prototype):t=h(t,n),t}function f(t,n){if(e.isBuffer(n)){var i=0|g(n.length);return t=s(t,i),0===t.length?t:(n.copy(t,0,0,i),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||Q(n.length)?s(t,0):h(t,n);if("Buffer"===n.type&&Z(n.data))return h(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function m(t){return+t!=t&&(t=0),e.alloc(+t)}function _(t,n){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(r)return q(t).length;n=(""+n).toLowerCase(),r=!0}}function v(e,t,n){var i=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,t>=n)return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function y(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function b(t,n,i,r,o){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:-2147483648>i&&(i=-2147483648),i=+i,isNaN(i)&&(i=o?0:t.length-1),0>i&&(i=t.length+i),i>=t.length){if(o)return-1;i=t.length-1}else if(0>i){if(!o)return-1;i=0}if("string"==typeof n&&(n=e.from(n,r)),e.isBuffer(n))return 0===n.length?-1:w(t,n,i,r,o);if("number"==typeof n)return n=255&n,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,n,i):Uint8Array.prototype.lastIndexOf.call(t,n,i):w(t,[n],i,r,o);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,i,r){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,l=t.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}var u;if(r){var c=-1;for(u=n;a>u;u++)if(o(e,u)===o(t,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===l)return c*s}else-1!==c&&(u-=u-c),c=-1}else for(n+l>a&&(n=a-l),u=n;u>=0;u--){for(var d=!0,h=0;l>h;h++)if(o(e,u+h)!==o(t,h)){d=!1;break}if(d)return u}return-1}function x(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;i>s;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function k(e,t,n,i){return K(q(t,e.length-n),e,n,i)}function S(e,t,n,i){return K(W(t),e,n,i)}function T(e,t,n,i){return S(e,t,n,i)}function E(e,t,n,i){return K(Y(t),e,n,i)}function A(e,t,n,i){return K(G(t,e.length-n),e,n,i)}function C(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;n>r;){var o=e[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=r+a){var l,u,c,d;switch(a){case 1:128>o&&(s=o);break;case 2:l=e[r+1],128===(192&l)&&(d=(31&o)<<6|63&l,d>127&&(s=d));break;case 3:l=e[r+1],u=e[r+2],128===(192&l)&&128===(192&u)&&(d=(15&o)<<12|(63&l)<<6|63&u,d>2047&&(55296>d||d>57343)&&(s=d));break;case 4:l=e[r+1],u=e[r+2],c=e[r+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(d=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,d>65535&&1114112>d&&(s=d))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return D(i)}function D(e){var t=e.length;if(ee>=t)return String.fromCharCode.apply(String,e);for(var n="",i=0;t>i;)n+=String.fromCharCode.apply(String,e.slice(i,i+=ee));return n}function P(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;++r)i+=String.fromCharCode(127&e[r]);return i}function M(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;++r)i+=String.fromCharCode(e[r]);return i}function R(e,t,n){var i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=t;n>o;++o)r+=V(e[o]);return r}function L(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function F(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,n,i,r,o,s){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||s>n)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function N(e,t,n,i){0>t&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);o>r;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function B(e,t,n,i){0>t&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);o>r;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function $(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function U(e,t,n,i,r){return r||$(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,i,23,4),n+4}function z(e,t,n,i,r){return r||$(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,i,52,8),n+8}function H(e){if(e=j(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function j(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return 16>e?"0"+e.toString(16):e.toString(16)}function q(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],s=0;i>s;++s){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function G(e,t){for(var n,i,r,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function Y(e){return X.toByteArray(H(e))}function K(e,t,n,i){for(var r=0;i>r&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function Q(e){return e!==e}var X=n(53),J=n(54),Z=n(55);t.Buffer=e,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=o(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,n){return a(null,e,t,n)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,n){return u(null,e,t,n)},e.allocUnsafe=function(e){return c(null,e)},e.allocUnsafeSlow=function(e){return c(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,r=n.length,o=0,s=Math.min(i,r);s>o;++o)if(t[o]!==n[o]){i=t[o],r=n[o];break}return r>i?-1:i>r?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var i;if(void 0===n)for(n=0,i=0;i<t.length;++i)n+=t[i].length;var r=e.allocUnsafe(n),o=0;for(i=0;i<t.length;++i){var s=t[i];if(!e.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},e.byteLength=_,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)y(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;e>t;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):v.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,n,i,r,o){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),0>n||i>t.length||0>r||o>this.length)throw new RangeError("out of range index");if(r>=o&&n>=i)return 0;if(r>=o)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var s=o-r,a=i-n,l=Math.min(s,a),u=this.slice(r,o),c=t.slice(n,i),d=0;l>d;++d)if(u[d]!==c[d]){s=u[d],a=c[d];break}return a>s?-1:s>a?1:0},e.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},e.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},e.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return T(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,n){var i=this.length;t=~~t,n=void 0===n?i:~~n,0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),0>n?(n+=i,0>n&&(n=0)):n>i&&(n=i),t>n&&(n=t);var r;if(e.TYPED_ARRAY_SUPPORT)r=this.subarray(t,n),r.__proto__=e.prototype;else{var o=n-t;r=new e(o,void 0);for(var s=0;o>s;++s)r[s]=this[s+t]}return r},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||F(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||F(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},e.prototype.readUInt8=function(e,t){return t||F(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||F(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||F(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||F(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||F(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){t||F(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||F(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||F(e,4,this.length),J.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||F(e,4,this.length),J.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||F(e,8,this.length),J.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||F(e,8,this.length),J.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){var r=Math.pow(2,8*n)-1;O(this,e,t,n,r,0)}var o=1,s=0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){var r=Math.pow(2,8*n)-1;O(this,e,t,n,r,0)}var o=n-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n},e.prototype.writeUInt8=function(t,n,i){return t=+t,n=0|n,i||O(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,i){return t=+t,n=0|n,i||O(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):N(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,i){return t=+t,n=0|n,i||O(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):N(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,i){return t=+t,n=0|n,i||O(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):B(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,i){return t=+t,n=0|n,i||O(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):B(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)0>e&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)0>e&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeInt8=function(t,n,i){return t=+t,n=0|n,i||O(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,i){return t=+t,n=0|n,i||O(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):N(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,i){return t=+t,n=0|n,i||O(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):N(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,i){return t=+t,n=0|n,i||O(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):B(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,i){return t=+t,n=0|n,i||O(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):B(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},e.prototype.copy=function(t,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&i>r&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);var o,s=r-i;if(this===t&&n>i&&r>n)for(o=s-1;o>=0;--o)t[o+n]=this[o+i];else if(1e3>s||!e.TYPED_ARRAY_SUPPORT)for(o=0;s>o;++o)t[o+n]=this[o+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),n);return s},e.prototype.fill=function(t,n,i,r){if("string"==typeof t){if("string"==typeof n?(r=n,n=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var o=t.charCodeAt(0);256>o&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!e.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t=255&t);if(0>n||this.length<n||this.length<i)throw new RangeError("Out of range index");if(n>=i)return this;n>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0);var s;if("number"==typeof t)for(s=n;i>s;++s)this[s]=t;else{var a=e.isBuffer(t)?t:q(new e(t,r).toString()),l=a.length;for(s=0;i-n>s;++s)this[s+n]=a[s%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(52).Buffer,function(){return this}())},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function r(e){var t,i,r,o,s,a,l=e.length;s=n(e),a=new c(3*l/4-s),r=s>0?l-4:l;var d=0;for(t=0,i=0;r>t;t+=4,i+=3)o=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],a[d++]=o>>16&255,a[d++]=o>>8&255,a[d++]=255&o;return 2===s?(o=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,a[d++]=255&o):1===s&&(o=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,a[d++]=o>>8&255,a[d++]=255&o),a}function o(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function s(e,t,n){for(var i,r=[],s=t;n>s;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],r.push(o(i));return r.join("")}function a(e){for(var t,n=e.length,i=n%3,r="",o=[],a=16383,u=0,c=n-i;c>u;u+=a)o.push(s(e,u,u+a>c?c:u+a));return 1===i?(t=e[n-1],r+=l[t>>2],r+=l[t<<4&63],r+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],r+=l[t>>10],r+=l[t>>4&63],r+=l[t<<2&63],r+="="),o.push(r),o.join("")}t.byteLength=i,t.toByteArray=r,t.fromByteArray=a;for(var l=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=d.length;p>h;++h)l[h]=d[h],u[d.charCodeAt(h)]=h;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?r-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+e[t+d],d+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,i),o-=u}return(p?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var s,a,l,u=8*o-r-1,c=(1<<u)-1,d=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+d>=1?h/l:h*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*l-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;e[n+p]=255&s,p+=f,s/=256,u-=8);e[n+p-f]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var i=n(57);e.exports=function(){i.loggingEnabled()&&console.log.apply(console,arguments)}},function(e,t){var n=!1;e.exports={loggingEnabled:function(e){return void 0!==e&&(n=e),n}}},function(e,t,n){function i(e,t,n){var i=o(e);return n&&s(e,t,n)&&(t=void 0),t?r(i,t):i}var r=n(2),o=n(59),s=n(10);e.exports=i},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var i=function(){function e(){}return function(t){if(n(t)){e.prototype=t;var i=new e;e.prototype=void 0}return i||{}}}();e.exports=i},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,a,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),u=n.slice(),r=u.length,l=0;r>l;l++)u[l].apply(this,a);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){function i(){r.call(this)}e.exports=i;var r=n(60).EventEmitter,o=n(62);o(i,r),i.Readable=n(63),i.Writable=n(74),i.Duplex=n(75),i.Transform=n(76),i.PassThrough=n(77),i.Stream=i,i.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function i(){u.readable&&u.resume&&u.resume()}function o(){c||(c=!0,e.end())}function s(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){u.removeListener("data",n),e.removeListener("drain",i),u.removeListener("end",o),u.removeListener("close",s),u.removeListener("error",a),e.removeListener("error",a),u.removeListener("end",l),u.removeListener("close",l),e.removeListener("close",l)}var u=this;u.on("data",n),e.on("drain",i),e._isStdio||t&&t.end===!1||(u.on("end",o),u.on("close",s));var c=!1;return u.on("error",a),e.on("error",a),u.on("end",l),u.on("close",l),e.on("close",l),e.emit("pipe",u),e}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(i){t=e.exports=n(65),t.Stream=n(61),t.Readable=t,t.Writable=n(70),t.Duplex=n(69),t.Transform=n(72),t.PassThrough=n(73),i.browser||"disable"!==i.env.READABLE_STREAM||(e.exports=n(61))}).call(t,n(64))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){g&&p&&(g=!1,p.length?f=p.concat(f):m=-1,f.length&&a())}function a(){if(!g){var e=r(s);g=!0;for(var t=f.length;t;){for(p=f,f=[];++m<t;)p&&p[m].run();m=-1,t=f.length}p=null,g=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,d,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var p,f=[],g=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||g||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){(function(t){function i(e,t){var i=n(69);e=e||{};var r=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(C||(C=n(71).StringDecoder),this.decoder=new C(e.encoding),this.encoding=e.encoding)}function r(e){n(69);return this instanceof r?(this._readableState=new i(e,this),this.readable=!0,void E.call(this)):new r(e)}function o(e,t,n,i,r){var o=u(t,n);if(o)e.emit("error",o);else if(A.isNullOrUndefined(n))t.reading=!1,t.ended||c(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&r){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||r||i||(n=t.decoder.write(n)),r||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&d(e)),p(e,t);else r||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=D)e=D;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function l(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||A.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function u(e,t){var n=null;return A.isBuffer(t)||A.isString(t)||A.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,d(e)}function d(e){var n=e._readableState;n.needReadable=!1,n.emittedReadable||(I("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?t.nextTick(function(){h(e)}):h(e))}function h(e){I("emit readable"),e.emit("readable"),v(e)}function p(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(function(){f(e,n)}))}function f(e,t){
for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(I("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;I("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&T.listenerCount(e,"data")&&(t.flowing=!0,v(e))}}function m(e,n){n.resumeScheduled||(n.resumeScheduled=!0,t.nextTick(function(){_(e,n)}))}function _(e,t){t.resumeScheduled=!1,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}function v(e){var t=e._readableState;if(I("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function y(e,t){var n,i=t.buffer,r=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(s)n=i.shift();else if(!e||e>=r)n=o?i.join(""):S.concat(i,r),i.length=0;else if(e<i[0].length){var a=i[0];n=a.slice(0,e),i[0]=a.slice(e)}else if(e===i[0].length)n=i.shift();else{n=o?"":new S(e);for(var l=0,u=0,c=i.length;c>u&&e>l;u++){var a=i[0],d=Math.min(e-l,a.length);o?n+=a.slice(0,d):a.copy(n,l,0,d),d<a.length?i[0]=a.slice(d):i.shift(),l+=d}}return n}function b(e){var n=e._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,t.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)}function x(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}e.exports=r;var k=n(66),S=n(52).Buffer;r.ReadableState=i;var T=n(60).EventEmitter;T.listenerCount||(T.listenerCount=function(e,t){return e.listeners(t).length});var E=n(61),A=n(67);A.inherits=n(62);var C,I=n(68);I=I&&I.debuglog?I.debuglog("stream"):function(){},A.inherits(r,E),r.prototype.push=function(e,t){var n=this._readableState;return A.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new S(e,t),t="")),o(this,n,e,t,!1)},r.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},r.prototype.setEncoding=function(e){return C||(C=n(71).StringDecoder),this._readableState.decoder=new C(e),this._readableState.encoding=e,this};var D=8388608;r.prototype.read=function(e){I("read",e);var t=this._readableState,n=e;if((!A.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return I("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?b(this):d(this),null;if(e=l(e,t),0===e&&t.ended)return 0===t.length&&b(this),null;var i=t.needReadable;I("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,I("length less than watermark",i)),(t.ended||t.reading)&&(i=!1,I("reading or ended",i)),i&&(I("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=l(n,t));var r;return r=e>0?y(e,t):null,A.isNull(r)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&b(this),A.isNull(r)||this.emit("data",r),r},r.prototype._read=function(e){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(e,n){function i(e){I("onunpipe"),e===d&&o()}function r(){I("onend"),e.end()}function o(){I("cleanup"),e.removeListener("close",l),e.removeListener("finish",u),e.removeListener("drain",m),e.removeListener("error",a),e.removeListener("unpipe",i),d.removeListener("end",r),d.removeListener("end",o),d.removeListener("data",s),!h.awaitDrain||e._writableState&&!e._writableState.needDrain||m()}function s(t){I("ondata");var n=e.write(t);!1===n&&(I("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,d.pause())}function a(t){I("onerror",t),c(),e.removeListener("error",a),0===T.listenerCount(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",u),c()}function u(){I("onfinish"),e.removeListener("close",l),c()}function c(){I("unpipe"),d.unpipe(e)}var d=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,I("pipe count=%d opts=%j",h.pipesCount,n);var p=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,f=p?r:o;h.endEmitted?t.nextTick(f):d.once("end",f),e.on("unpipe",i);var m=g(d);return e.on("drain",m),d.on("data",s),e._events&&e._events.error?k(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",l),e.once("finish",u),e.emit("pipe",d),h.flowing||(I("pipe resume"),d.resume()),e},r.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;i>r;r++)n[r].emit("unpipe",this);return this}var r=x(t.pipes,e);return-1===r?this:(t.pipes.splice(r,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},r.prototype.on=function(e,n){var i=E.prototype.on.call(this,e,n);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&d(this,r);else{var o=this;t.nextTick(function(){I("readable nexttick read 0"),o.read(0)})}}return i},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var e=this._readableState;return e.flowing||(I("resume"),e.flowing=!0,e.reading||(I("resume read 0"),this.read(0)),m(this,e)),this},r.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(I("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(r){if(I("wrapped data"),t.decoder&&(r=t.decoder.write(r)),r&&(t.objectMode||r.length)){var o=i.push(r);o||(n=!0,e.pause())}});for(var r in e)A.isFunction(e[r])&&A.isUndefined(this[r])&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return w(o,function(t){e.on(t,i.emit.bind(i,t))}),i._read=function(t){I("wrapped _read",t),n&&(n=!1,e.resume())},i},r._fromList=y}).call(t,n(64))},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function i(e){return"boolean"==typeof e}function r(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function u(e){return void 0===e}function c(e){return"[object RegExp]"===m(e)}function d(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===m(e)}function p(e){return"[object Error]"===m(e)||e instanceof Error}function f(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=i,t.isNull=r,t.isNullOrUndefined=o,t.isNumber=s,t.isString=a,t.isSymbol=l,t.isUndefined=u,t.isRegExp=c,t.isObject=d,t.isDate=h,t.isError=p,t.isFunction=f,t.isPrimitive=g,t.isBuffer=e.isBuffer}).call(t,n(52).Buffer)},function(e,t){},function(e,t,n){(function(t){function i(e){return this instanceof i?(l.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(e)}function r(){this.allowHalfOpen||this._writableState.ended||t.nextTick(this.end.bind(this))}function o(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)}e.exports=i;var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},a=n(67);a.inherits=n(62);var l=n(65),u=n(70);a.inherits(i,l),o(s(u.prototype),function(e){i.prototype[e]||(i.prototype[e]=u.prototype[e])})}).call(t,n(64))},function(e,t,n){(function(t){function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function r(e,t){var i=n(69);e=e||{};var r=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var t=n(69);return this instanceof o||this instanceof t?(this._writableState=new r(e,this),this.writable=!0,void k.call(this)):new o(e)}function s(e,n,i){var r=new Error("write after end");e.emit("error",r),t.nextTick(function(){i(r)})}function a(e,n,i,r){var o=!0;if(!(x.isBuffer(i)||x.isString(i)||x.isNullOrUndefined(i)||n.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),t.nextTick(function(){r(s)}),o=!1}return o}function l(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&x.isString(t)&&(t=new w(t,n)),t}function u(e,t,n,r,o){n=l(t,n,r),x.isBuffer(n)&&(r="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new i(n,r,o)):c(e,t,!1,s,n,r,o),a}function c(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function d(e,n,i,r,o){i?t.nextTick(function(){n.pendingcb--,o(r)}):(n.pendingcb--,o(r)),e._writableState.errorEmitted=!0,e.emit("error",r)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,n){var i=e._writableState,r=i.sync,o=i.writecb;if(h(i),n)d(e,i,r,n,o);else{var s=_(e,i);s||i.corked||i.bufferProcessing||!i.buffer.length||m(e,i),r?t.nextTick(function(){f(e,i,s,o)}):f(e,i,s,o)}}function f(e,t,n,i){n||g(e,t),t.pendingcb--,i(),y(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],i=0;i<t.buffer.length;i++)n.push(t.buffer[i].callback);t.pendingcb++,c(e,t,!0,t.length,t.buffer,"",function(e){for(var i=0;i<n.length;i++)t.pendingcb--,n[i](e)}),t.buffer=[]}else{for(var i=0;i<t.buffer.length;i++){var r=t.buffer[i],o=r.chunk,s=r.encoding,a=r.callback,l=t.objectMode?1:o.length;if(c(e,t,!1,l,o,s,a),t.writing){i++;break}}i<t.buffer.length?t.buffer=t.buffer.slice(i):t.buffer.length=0}t.bufferProcessing=!1}function _(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function v(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function y(e,t){var n=_(e,t);return n&&(0===t.pendingcb?(v(e,t),t.finished=!0,e.emit("finish")):v(e,t)),n}function b(e,n,i){n.ending=!0,y(e,n),i&&(n.finished?t.nextTick(i):e.once("finish",i)),n.ended=!0}e.exports=o;var w=n(52).Buffer;o.WritableState=r;var x=n(67);x.inherits=n(62);var k=n(61);x.inherits(o,k),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var i=this._writableState,r=!1;return x.isFunction(t)&&(n=t,t=null),x.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),x.isFunction(n)||(n=function(){}),i.ended?s(this,i,n):a(this,i,e,n)&&(i.pendingcb++,r=u(this,i,e,t,n)),r},o.prototype.cork=function(){var e=this._writableState;e.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||m(this,e))},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,n){var i=this._writableState;x.isFunction(e)?(n=e,e=null,t=null):x.isFunction(t)&&(n=t,t=null),x.isNullOrUndefined(e)||this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||b(this,i,n)}}).call(t,n(64))},function(e,t,n){function i(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function r(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=n(52).Buffer,l=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},u=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),i(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r);var r=t.length-1,i=t.charCodeAt(r);if(i>=55296&&56319>=i){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,r)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t}},function(e,t,n){function i(e,t){this.afterTransform=function(e,n){return r(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,l.isNullOrUndefined(n)||e.push(n),r&&r(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new i(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){l.isFunction(this._flush)?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=o;var a=n(69),l=n(67);l.inherits=n(62),l.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("not implemented")},o.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;l.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},function(e,t,n){function i(e){return this instanceof i?void r.call(this,e):new i(e)}e.exports=i;var r=n(72),o=n(67);o.inherits=n(62),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(70)},function(e,t,n){e.exports=n(69)},function(e,t,n){e.exports=n(72)},function(e,t,n){e.exports=n(73)},function(e,t,n){(function(t){var i,r=n(56),o=n(51),s=(o.BaseTransform,o.BaseParser),a=n(79);e.exports=i=function(e,t){o.BaseParser.prototype.constructor.apply(this,arguments),e||(e={audioTrackId:-1,videoTrackId:-1,tracks:[]}),this.muxer=new a(e),this.muxer.ondata=this._onMp4Data.bind(this),this.muxer.oncodecinfo=this._onCodecInfo.bind(this),this._codecInfo=null,this._timestamp=0,t&&(this.worker="undefined"!=typeof Worker?new Worker("/dist/mp4-mux-worker-bundle.js"):null),this.worker&&(this.worker.onmessage=function(e){this._onMp4Data(e.data)}.bind(this),this.worker.postMessage({mp4MuxProfile:e}))},i.Profiles=a.Profiles,i.prototype=o.createBaseParser({constructor:i,_onMp4Data:function(e){r("_onMp4Data"),this.enqueue(new o.Transfer(new t(e),"buffer"))},_onCodecInfo:function(e){r("Codec info: "+e),this._codecInfo=e},_onFinish:function(e){r("MP4Mux._onFinish"),this.worker?this.worker.postMessage({eos:!0}):this.muxer&&this.muxer.flush(),s.prototype._onFinish.call(this,e)},_parse:function(e){var t;e.data&&(t=this._timestamp=e.data.timestamp),e.data.flush&&(this._needFlush=!0),r("UnitMP4Mux Timestamp: "+this._timestamp),r("UnitMP4Mux._parse: Payload type: "+typeof e.data),this.worker?(e.data.empty||this.worker.postMessage({data:e.data,meta:e.data.meta,timestamp:t,packetType:a.TYPE_AUDIO_PACKET}),this._needFlush&&(this.worker.postMessage({eos:!0}),this._needFlush=!1)):this.muxer&&(e.data.empty||this.muxer.pushPacket(a.TYPE_AUDIO_PACKET,new Uint8Array(e.data),t,e.data.meta),this._needFlush&&(this.muxer.flush(),this._needFlush=!1))}})}).call(t,n(52).Buffer)},function(e,t,n){function i(e){for(var t=e.length>>1,n=new Uint8Array(t),i=0;t>i;i++)n[i]=parseInt(e.substr(2*i,2),16);return n}function r(e,t){var n,i=0,r=s.RAW;switch(t.codecId){case d:var o=e[i++];r=o,n=1024;break;case c:var l=e[i+1]>>3&3,h=e[i+1]>>1&3;n=1===h?3===l?1152:576:3===h?384:1152}return info={codecDescription:u[t.codecId],codecId:t.codecId,data:e.subarray(i),rate:t.sampleRate,size:t.sampleSize,channels:t.channels,samples:n,packetType:r},a("parsed audio packet with %d samples",n),info}function o(e){var t=0,n=e[t]>>4,i=15&e[t];t++;var r={frameType:n,codecId:i,codecDescription:p[i]};switch(i){case g:var o=e[t++];r.packetType=o,r.compositionTime=(e[t]<<24|e[t+1]<<16|e[t+2]<<8)>>8,t+=3;break;case f:r.packetType=m.NALU,r.horizontalOffset=e[t]>>4&15,r.verticalOffset=15&e[t],r.compositionTime=0,t++}return r.data=e.subarray(t),r}var s,a=n(56),l=n(80),u=["PCM","ADPCM","MP3","PCM le","Nellymouser16","Nellymouser8","Nellymouser","G.711 A-law","G.711 mu-law",null,"AAC","Speex","MP3 8khz"],c=2,d=10;!function(e){e[e.HEADER=0]="HEADER",e[e.RAW=1]="RAW"}(s||(s={}));var h,p=[null,"JPEG","Sorenson","Screen","VP6","VP6 alpha","Screen2","AVC"],f=4,g=7;!function(e){e[e.KEY=1]="KEY",e[e.INNER=2]="INNER",e[e.DISPOSABLE=3]="DISPOSABLE",e[e.GENERATED=4]="GENERATED",e[e.INFO=5]="INFO"}(h||(h={}));var m;!function(e){e[e.HEADER=0]="HEADER",e[e.NALU=1]="NALU",e[e.END=2]="END"}(m||(m={}));var _,v=8,y=9,b=!0;!function(e){e[e.CAN_GENERATE_HEADER=0]="CAN_GENERATE_HEADER",e[e.NEED_HEADER_DATA=1]="NEED_HEADER_DATA",e[e.MAIN_PACKETS=2]="MAIN_PACKETS"}(_||(_={}));var w=function(){function e(e){var t=this;this.oncodecinfo=function(e){throw new Error("MP4Mux.oncodecinfo is not set")},this.ondata=function(e){throw new Error("MP4Mux.ondata is not set")},this.metadata=e,this.trackStates=this.metadata.tracks.map(function(e,n){var i={trackId:n+1,trackInfo:e,cachedDuration:0,samplesProcessed:0,initializationData:[]};return t.metadata.audioTrackId===n&&(t.audioTrackState=i),t.metadata.videoTrackId===n&&(t.videoTrackState=i),i},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return e.prototype.pushPacket=function(e,t,n,i){switch(this.state===_.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),e){case v:var a=this.audioTrackState,l=r(t,i);if(!a||a.trackInfo.codecId!==l.codecId)throw new Error("Unexpected audio packet codec: "+l.codecDescription);switch(l.codecId){default:throw new Error("Unsupported audio codec: "+l.codecDescription);case c:break;case d:if(l.packetType===s.HEADER)return void a.initializationData.push(l.data)}this.cachedPackets.push({packet:l,timestamp:n,trackId:a.trackId});break;case y:var u=this.videoTrackState,h=o(t);if(!u||u.trackInfo.codecId!==h.codecId)throw new Error("Unexpected video packet codec: "+h.codecDescription);switch(h.codecId){default:throw new Error("unsupported video codec: "+h.codecDescription);case f:break;case g:if(h.packetType===m.HEADER)return void u.initializationData.push(h.data)}this.cachedPackets.push({packet:h,timestamp:n,trackId:u.trackId});break;default:throw new Error("unknown packet type: "+e)}this.state===_.NEED_HEADER_DATA&&this._tryGenerateHeader()},e.prototype.flush=function(){this.cachedPackets.length>0&&this._chunk()},e.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(e){return e.trackInfo.codecId===d||e.trackInfo.codecId===g})?this.state=_.NEED_HEADER_DATA:this.state=_.CAN_GENERATE_HEADER},e.prototype._tryGenerateHeader=function(){var e=this.trackStates.every(function(e){switch(e.trackInfo.codecId){case d:case g:return e.initializationData.length>0;default:return!0}});if(e){for(var t=["isom"],n=1,r=1,o=[],s=0;s<this.trackStates.length;s++){var a,u=this.trackStates[s],h=u.trackInfo;switch(h.codecId){case d:var p=u.initializationData[0];a=new l.AudioSampleEntry("mp4a",n,h.channels,h.samplesize,h.samplerate);var m=new Uint8Array(41+p.length);m.set(i("0000000003808080"),0),m[8]=32+p.length,m.set(i("00020004808080"),9),m[16]=18+p.length,m.set(i("40150000000000FA000000000005808080"),17),m[34]=p.length,m.set(p,35),m.set(i("068080800102"),35+p.length),a.otherBoxes=[new l.RawTag("esds",m)];var v=p[0]>>3;u.mimeTypeCodec="mp4a.40."+v;break;case c:a=new l.AudioSampleEntry(".mp3",n,h.channels,h.samplesize,h.samplerate),u.mimeTypeCodec="mp3";break;case g:var y=u.initializationData[0];a=new l.VideoSampleEntry("avc1",r,h.width,h.height),a.otherBoxes=[new l.RawTag("avcC",y)];var b=y[1]<<16|y[2]<<8|y[3];u.mimeTypeCodec="avc1."+(16777216|b).toString(16).substr(1),t.push("iso2","avc1","mp41");break;case f:a=new l.VideoSampleEntry("VP6F",r,h.width,h.height),a.otherBoxes=[new l.RawTag("glbl",i("00"))],u.mimeTypeCodec="avc1.42001E";break;default:throw new Error("not supported track type")}var w,x=l.TrackHeaderFlags.TRACK_ENABLED|l.TrackHeaderFlags.TRACK_IN_MOVIE;u===this.audioTrackState?w=new l.TrackBox(new l.TrackHeaderBox(x,u.trackId,-1,0,0,1,s),new l.MediaBox(new l.MediaHeaderBox(h.timescale,-1,h.language),new l.HandlerBox("soun","SoundHandler"),new l.MediaInformationBox(new l.SoundMediaHeaderBox,new l.DataInformationBox(new l.DataReferenceBox([new l.DataEntryUrlBox(l.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new l.SampleTableBox(new l.SampleDescriptionBox([a]),new l.RawTag("stts",i("0000000000000000")),new l.RawTag("stsc",i("0000000000000000")),new l.RawTag("stsz",i("000000000000000000000000")),new l.RawTag("stco",i("0000000000000000")))))):u===this.videoTrackState&&(w=new l.TrackBox(new l.TrackHeaderBox(x,u.trackId,-1,h.width,h.height,0,s),new l.MediaBox(new l.MediaHeaderBox(h.timescale,-1,h.language),new l.HandlerBox("vide","VideoHandler"),new l.MediaInformationBox(new l.VideoMediaHeaderBox,new l.DataInformationBox(new l.DataReferenceBox([new l.DataEntryUrlBox(l.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new l.SampleTableBox(new l.SampleDescriptionBox([a]),new l.RawTag("stts",i("0000000000000000")),new l.RawTag("stsc",i("0000000000000000")),new l.RawTag("stsz",i("000000000000000000000000")),new l.RawTag("stco",i("0000000000000000"))))))),o.push(w)}var k=new l.MovieExtendsBox(null,[new l.TrackExtendsBox(1,1,0,0,0),new l.TrackExtendsBox(2,1,0,0,0)],null),S=new l.BoxContainerBox("udat",[new l.MetaBox(new l.RawTag("hdlr",i("00000000000000006D6469726170706C000000000000000000")),[new l.RawTag("ilst",i("00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034"))])]),T=new l.MovieHeaderBox(1e3,0,this.trackStates.length+1),E=new l.MovieBox(T,o,k,S),A=new l.FileTypeBox("isom",512,t),C=A.layout(0),I=E.layout(C),D=new Uint8Array(C+I);A.write(D),E.write(D),this.oncodecinfo(this.trackStates.map(function(e){return e.mimeTypeCodec})),this.ondata(D),this.filePos+=D.length,this.state=_.MAIN_PACKETS}},e.prototype._chunk=function(){var e=this.cachedPackets;if(b&&this.videoTrackState){for(var t=e.length-1,n=this.videoTrackState.trackId;t>0&&(e[t].trackId!==n||e[t].packet.frameType!==h.KEY);)t--;t>0&&(e=e.slice(0,t))}if(0!==e.length){for(var i=[],r=0,o=[],s=[],a=0;a<this.trackStates.length;a++){var u=this.trackStates[a],p=u.trackInfo,m=u.trackId,_=e.filter(function(e){return e.trackId===m});if(0!==_.length){var v,y,w,x=new l.TrackFragmentBaseMediaDecodeTimeBox(u.cachedDuration);switch(s.push(r),p.codecId){case d:case c:w=[];for(var t=0;t<_.length;t++){var k=_[t].packet,S=Math.round(k.samples*p.timescale/p.samplerate);i.push(k.data),r+=k.data.length,w.push({duration:S,size:k.data.length}),u.samplesProcessed+=k.samples}var T=l.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new l.TrackFragmentHeaderBox(T,m,0,0,0,0,l.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var E=l.TrackRunFlags.DATA_OFFSET_PRESENT|l.TrackRunFlags.SAMPLE_DURATION_PRESENT|l.TrackRunFlags.SAMPLE_SIZE_PRESENT;y=new l.TrackRunBox(E,w,0,0),u.cachedDuration=Math.round(u.samplesProcessed*p.timescale/p.samplerate);break;case g:case f:w=[];for(var A=u.samplesProcessed,C=A*p.timescale/p.framerate,I=Math.round(C),t=0;t<_.length;t++){var D=_[t].packet;A++;var P=Math.round(A*p.timescale/p.framerate),M=P-I;I=P;var R=Math.round(A*p.timescale/p.framerate+D.compositionTime*p.timescale/1e3);i.push(D.data),r+=D.data.length;var L=D.frameType===h.KEY?l.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:l.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|l.SampleFlags.SAMPLE_IS_NOT_SYNC;w.push({duration:M,size:D.data.length,flags:L,compositionTimeOffset:R-P})}var T=l.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new l.TrackFragmentHeaderBox(T,m,0,0,0,0,l.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var E=l.TrackRunFlags.DATA_OFFSET_PRESENT|l.TrackRunFlags.SAMPLE_DURATION_PRESENT|l.TrackRunFlags.SAMPLE_SIZE_PRESENT|l.TrackRunFlags.SAMPLE_FLAGS_PRESENT|l.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;y=new l.TrackRunBox(E,w,0,0),u.cachedDuration=I,u.samplesProcessed=A;break;default:throw new Error("Un codec")}var F=new l.TrackFragmentBox(v,x,y);o.push(F)}}this.cachedPackets.splice(0,e.length);for(var O=new l.MovieFragmentHeaderBox(++this.chunkIndex),N=new l.MovieFragmentBox(O,o),B=N.layout(0),$=new l.MediaDataBox(i),U=$.layout(B),z=B+8,a=0;a<o.length;a++)o[a].run.dataOffset=z+s[a];var H=new Uint8Array(B+U);N.write(H),$.write(H),this.ondata(H),this.filePos+=H.length}},e}();e.exports=w,w.MP3_SOUND_CODEC_ID=c,w.AAC_SOUND_CODEC_ID=d,w.TYPE_AUDIO_PACKET=v,w.TYPE_VIDEO_PACKET=y,w.Profiles={MP3_AUDIO_ONLY:{audioTrackId:0,videoTrackId:-1,tracks:[{codecId:w.MP3_SOUND_CODEC_ID,channels:2,samplerate:44100,samplesize:16,timescale:44100}]}}},function(e,t){function n(e){for(var t=new Uint8Array(4*e.length),n=0,i=0,r=e.length;r>i;i++){var o=e.charCodeAt(i);if(127>=o)t[n++]=o;else{if(o>=55296&&56319>=o){var s=e.charCodeAt(i+1);s>=56320&&57343>=s&&(o=((1023&o)<<10)+(1023&s)+65536,++i)}0!==(4292870144&o)?(t[n++]=248|o>>>24&3,t[n++]=128|o>>>18&63,t[n++]=128|o>>>12&63,t[n++]=128|o>>>6&63,t[n++]=128|63&o):0!==(4294901760&o)?(t[n++]=240|o>>>18&7,t[n++]=128|o>>>12&63,t[n++]=128|o>>>6&63,t[n++]=128|63&o):0!==(4294965248&o)?(t[n++]=224|o>>>12&15,t[n++]=128|o>>>6&63,t[n++]=128|63&o):(t[n++]=192|o>>>6&31,t[n++]=128|63&o)}}return t.subarray(0,n)}function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Array.prototype.concat.apply(e,t)}function r(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function o(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}function s(e){return(e-p)/1e3|0}function a(e){return 65536*e|0}function l(e){return 1073741824*e|0}function u(e){return 256*e|0}function c(e){return(31&e.charCodeAt(0))<<10|(31&e.charCodeAt(1))<<5|31&e.charCodeAt(2)}var d,h=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};e.exports=d={};var p=-20828448e5,f=[1,0,0,0,1,0,0,0,1],g=[0,0,0],m=function(){function e(e,t){this.boxtype=e,"uuid"===e&&(this.userType=t)}return e.prototype.layout=function(e){this.offset=e;var t=8;return this.userType&&(t+=16),this.size=t,t},e.prototype.write=function(e){return r(e,this.offset,this.size),r(e,this.offset+4,o(this.boxtype)),this.userType?(e.set(this.userType,this.offset+8),24):8},e.prototype.toUint8Array=function(){var e=this.layout(0),t=new Uint8Array(e);return this.write(t),t},e}();d.Box=m;var _=function(e){function t(t,n,i){void 0===n&&(n=0),void 0===i&&(i=0),e.call(this,t),this.version=n,this.flags=i}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.version<<24|this.flags),n+4},t}(m);d.FullBox=_;var v=function(e){function t(t,n,i){e.call(this,"ftype"),this.majorBrand=t,this.minorVersion=n,this.compatibleBrands=i}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4*(2+this.compatibleBrands.length),this.size},t.prototype.write=function(t){var n=this,i=e.prototype.write.call(this,t);return r(t,this.offset+i,o(this.majorBrand)),r(t,this.offset+i+4,this.minorVersion),i+=8,this.compatibleBrands.forEach(function(e){r(t,n.offset+i,o(e)),i+=4},this),i},t}(m);d.FileTypeBox=v;var y=function(e){function t(t,n){e.call(this,t),this.children=n}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.children.forEach(function(e){e&&(n+=e.layout(t+n))}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return this.children.forEach(function(e){e&&(n+=e.write(t))}),n},t}(m);d.BoxContainerBox=y;var b=function(e){function t(t,n,r,o){e.call(this,"moov",i([t],n,[r,o])),this.header=t,this.tracks=n,this.extendsBox=r,this.userData=o}return h(t,e),t}(y);d.MovieBox=b;var w=function(e){function t(t,n,i,r,o,s,a,l){void 0===r&&(r=1),void 0===o&&(o=1),void 0===s&&(s=f),void 0===a&&(a=p),void 0===l&&(l=p),e.call(this,"mvhd",0,0),this.timescale=t,this.duration=n,this.nextTrackId=i,this.rate=r,this.volume=o,this.matrix=s,this.creationTime=a,this.modificationTime=l}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+16+4+2+2+8+36+24+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,s(this.creationTime)),r(t,this.offset+n+4,s(this.modificationTime)),r(t,this.offset+n+8,this.timescale),r(t,this.offset+n+12,this.duration),n+=16,r(t,this.offset+n,a(this.rate)),r(t,this.offset+n+4,u(this.volume)<<16),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),n+=16,r(t,this.offset+n,a(this.matrix[0])),r(t,this.offset+n+4,a(this.matrix[1])),r(t,this.offset+n+8,a(this.matrix[2])),r(t,this.offset+n+12,a(this.matrix[3])),r(t,this.offset+n+16,a(this.matrix[4])),r(t,this.offset+n+20,a(this.matrix[5])),r(t,this.offset+n+24,l(this.matrix[6])),
r(t,this.offset+n+28,l(this.matrix[7])),r(t,this.offset+n+32,l(this.matrix[8])),n+=36,r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),r(t,this.offset+n+16,0),r(t,this.offset+n+20,0),n+=24,r(t,this.offset+n,this.nextTrackId),n+=4},t}(_);d.MovieHeaderBox=w,function(e){e[e.TRACK_ENABLED=1]="TRACK_ENABLED",e[e.TRACK_IN_MOVIE=2]="TRACK_IN_MOVIE",e[e.TRACK_IN_PREVIEW=4]="TRACK_IN_PREVIEW"}(d.TrackHeaderFlags||(d.TrackHeaderFlags={}));var x=(d.TrackHeaderFlags,function(e){function t(t,n,i,r,o,s,a,l,u,c,d){void 0===a&&(a=0),void 0===l&&(l=0),void 0===u&&(u=f),void 0===c&&(c=p),void 0===d&&(d=p),e.call(this,"tkhd",0,t),this.trackId=n,this.duration=i,this.width=r,this.height=o,this.volume=s,this.alternateGroup=a,this.layer=l,this.matrix=u,this.creationTime=c,this.modificationTime=d}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+20+8+6+2+36+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,s(this.creationTime)),r(t,this.offset+n+4,s(this.modificationTime)),r(t,this.offset+n+8,this.trackId),r(t,this.offset+n+12,0),r(t,this.offset+n+16,this.duration),n+=20,r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,this.layer<<16|this.alternateGroup),r(t,this.offset+n+12,u(this.volume)<<16),n+=16,r(t,this.offset+n,a(this.matrix[0])),r(t,this.offset+n+4,a(this.matrix[1])),r(t,this.offset+n+8,a(this.matrix[2])),r(t,this.offset+n+12,a(this.matrix[3])),r(t,this.offset+n+16,a(this.matrix[4])),r(t,this.offset+n+20,a(this.matrix[5])),r(t,this.offset+n+24,l(this.matrix[6])),r(t,this.offset+n+28,l(this.matrix[7])),r(t,this.offset+n+32,l(this.matrix[8])),n+=36,r(t,this.offset+n,a(this.width)),r(t,this.offset+n+4,a(this.height)),n+=8},t}(_));d.TrackHeaderBox=x;var k=function(e){function t(t,n,i,r,o){void 0===i&&(i="unk"),void 0===r&&(r=p),void 0===o&&(o=p),e.call(this,"mdhd",0,0),this.timescale=t,this.duration=n,this.language=i,this.creationTime=r,this.modificationTime=o}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+16+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,s(this.creationTime)),r(t,this.offset+n+4,s(this.modificationTime)),r(t,this.offset+n+8,this.timescale),r(t,this.offset+n+12,this.duration),r(t,this.offset+n+16,c(this.language)<<16),n+20},t}(_);d.MediaHeaderBox=k;var S=function(e){function t(t,i){e.call(this,"hdlr",0,0),this.handlerType=t,this.name=i,this._encodedName=n(this.name)}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8+12+(this._encodedName.length+1),this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,0),r(t,this.offset+n+4,o(this.handlerType)),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),r(t,this.offset+n+16,0),n+=20,t.set(this._encodedName,this.offset+n),t[this.offset+n+this._encodedName.length]=0,n+=this._encodedName.length+1},t}(_);d.HandlerBox=S;var T=function(e){function t(t){void 0===t&&(t=0),e.call(this,"smhd",0,0),this.balance=t}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,u(this.balance)<<16),n+4},t}(_);d.SoundMediaHeaderBox=T;var E=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=g),e.call(this,"vmhd",0,0),this.graphicsMode=t,this.opColor=n}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.graphicsMode<<16|this.opColor[0]),r(t,this.offset+n+4,this.opColor[1]<<16|this.opColor[2]),n+8},t}(_);d.VideoMediaHeaderBox=E,d.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var A=function(e){function t(t,i){void 0===i&&(i=null),e.call(this,"url ",0,t),this.location=i,t&d.SELF_CONTAINED_DATA_REFERENCE_FLAG||(this._encodedLocation=n(i))}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this._encodedLocation&&(n+=this._encodedLocation.length+1),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return this._encodedLocation&&(t.set(this._encodedLocation,this.offset+n),t[this.offset+n+this._encodedLocation.length]=0,n+=this._encodedLocation.length),n},t}(_);d.DataEntryUrlBox=A;var C=function(e){function t(t){e.call(this,"dref",0,0),this.entries=t}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4;return this.entries.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.entries.length),this.entries.forEach(function(e){n+=e.write(t)}),n},t}(_);d.DataReferenceBox=C;var I=function(e){function t(t){e.call(this,"dinf",[t]),this.dataReference=t}return h(t,e),t}(y);d.DataInformationBox=I;var D=function(e){function t(t){e.call(this,"stsd",0,0),this.entries=t}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return n+=4,this.entries.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.entries.length),n+=4,this.entries.forEach(function(e){n+=e.write(t)}),n},t}(_);d.SampleDescriptionBox=D;var P=function(e){function t(t,n,i,r,o){e.call(this,"stbl",[t,n,i,r,o]),this.sampleDescriptions=t,this.timeToSample=n,this.sampleToChunk=i,this.sampleSizes=r,this.chunkOffset=o}return h(t,e),t}(y);d.SampleTableBox=P;var M=function(e){function t(t,n,i){e.call(this,"minf",[t,n,i]),this.header=t,this.info=n,this.sampleTable=i}return h(t,e),t}(y);d.MediaInformationBox=M;var R=function(e){function t(t,n,i){e.call(this,"mdia",[t,n,i]),this.header=t,this.handler=n,this.info=i}return h(t,e),t}(y);d.MediaBox=R;var L=function(e){function t(t,n){e.call(this,"trak",[t,n]),this.header=t,this.media=n}return h(t,e),t}(y);d.TrackBox=L;var F=function(e){function t(t,n,i,r,o){e.call(this,"trex",0,0),this.trackId=t,this.defaultSampleDescriptionIndex=n,this.defaultSampleDuration=i,this.defaultSampleSize=r,this.defaultSampleFlags=o}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+20,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.trackId),r(t,this.offset+n+4,this.defaultSampleDescriptionIndex),r(t,this.offset+n+8,this.defaultSampleDuration),r(t,this.offset+n+12,this.defaultSampleSize),r(t,this.offset+n+16,this.defaultSampleFlags),n+20},t}(_);d.TrackExtendsBox=F;var O=function(e){function t(t,n,r){e.call(this,"mvex",i([t],n,[r])),this.header=t,this.tracDefaults=n,this.levels=r}return h(t,e),t}(y);d.MovieExtendsBox=O;var N=function(e){function t(t,n){e.call(this,"meta",0,0),this.handler=t,this.otherBoxes=n}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return n+=this.handler.layout(t+n),this.otherBoxes.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return n+=this.handler.write(t),this.otherBoxes.forEach(function(e){n+=e.write(t)}),n},t}(_);d.MetaBox=N;var B=function(e){function t(t){e.call(this,"mfhd",0,0),this.sequenceNumber=t}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.sequenceNumber),n+4},t}(_);d.MovieFragmentHeaderBox=B,function(e){e[e.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",e[e.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",e[e.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",e[e.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",e[e.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT"}(d.TrackFragmentFlags||(d.TrackFragmentFlags={}));var $=d.TrackFragmentFlags,U=function(e){function t(t,n,i,r,o,s,a){e.call(this,"tfhd",0,t),this.trackId=n,this.baseDataOffset=i,this.sampleDescriptionIndex=r,this.defaultSampleDuration=o,this.defaultSampleSize=s,this.defaultSampleFlags=a}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4,i=this.flags;return i&$.BASE_DATA_OFFSET_PRESENT&&(n+=8),i&$.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(n+=4),i&$.DEFAULT_SAMPLE_DURATION_PRESENT&&(n+=4),i&$.DEFAULT_SAMPLE_SIZE_PRESENT&&(n+=4),i&$.DEFAULT_SAMPLE_FLAGS_PRESENT&&(n+=4),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t),i=this.flags;return r(t,this.offset+n,this.trackId),n+=4,i&$.BASE_DATA_OFFSET_PRESENT&&(r(t,this.offset+n,0),r(t,this.offset+n+4,this.baseDataOffset),n+=8),i&$.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(r(t,this.offset+n,this.sampleDescriptionIndex),n+=4),i&$.DEFAULT_SAMPLE_DURATION_PRESENT&&(r(t,this.offset+n,this.defaultSampleDuration),n+=4),i&$.DEFAULT_SAMPLE_SIZE_PRESENT&&(r(t,this.offset+n,this.defaultSampleSize),n+=4),i&$.DEFAULT_SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,this.defaultSampleFlags),n+=4),n},t}(_);d.TrackFragmentHeaderBox=U;var z=function(e){function t(t){e.call(this,"tfdt",0,0),this.baseMediaDecodeTime=t}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+4,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,this.baseMediaDecodeTime),n+4},t}(_);d.TrackFragmentBaseMediaDecodeTimeBox=z;var H=function(e){function t(t,n,i){e.call(this,"traf",[t,n,i]),this.header=t,this.decodeTime=n,this.run=i}return h(t,e),t}(y);d.TrackFragmentBox=H,function(e){e[e.IS_LEADING_MASK=201326592]="IS_LEADING_MASK",e[e.SAMPLE_DEPENDS_ON_MASK=50331648]="SAMPLE_DEPENDS_ON_MASK",e[e.SAMPLE_DEPENDS_ON_OTHER=16777216]="SAMPLE_DEPENDS_ON_OTHER",e[e.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]="SAMPLE_DEPENDS_ON_NO_OTHERS",e[e.SAMPLE_IS_DEPENDED_ON_MASK=12582912]="SAMPLE_IS_DEPENDED_ON_MASK",e[e.SAMPLE_HAS_REDUNDANCY_MASK=3145728]="SAMPLE_HAS_REDUNDANCY_MASK",e[e.SAMPLE_PADDING_VALUE_MASK=917504]="SAMPLE_PADDING_VALUE_MASK",e[e.SAMPLE_IS_NOT_SYNC=65536]="SAMPLE_IS_NOT_SYNC",e[e.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]="SAMPLE_DEGRADATION_PRIORITY_MASK"}(d.SampleFlags||(d.SampleFlags={}));d.SampleFlags;!function(e){e[e.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",e[e.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",e[e.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",e[e.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_COMPOSITION_TIME_OFFSET=2048]="SAMPLE_COMPOSITION_TIME_OFFSET"}(d.TrackRunFlags||(d.TrackRunFlags={}));var j=d.TrackRunFlags,V=function(e){function t(t,n,i,r){e.call(this,"trun",1,t),this.samples=n,this.dataOffset=i,this.firstSampleFlags=r}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+4,i=this.samples.length,r=this.flags;return r&j.DATA_OFFSET_PRESENT&&(n+=4),r&j.FIRST_SAMPLE_FLAGS_PRESENT&&(n+=4),r&j.SAMPLE_DURATION_PRESENT&&(n+=4*i),r&j.SAMPLE_SIZE_PRESENT&&(n+=4*i),r&j.SAMPLE_FLAGS_PRESENT&&(n+=4*i),r&j.SAMPLE_COMPOSITION_TIME_OFFSET&&(n+=4*i),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t),i=this.samples.length,o=this.flags;r(t,this.offset+n,i),n+=4,o&j.DATA_OFFSET_PRESENT&&(r(t,this.offset+n,this.dataOffset),n+=4),o&j.FIRST_SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,this.firstSampleFlags),n+=4);for(var s=0;i>s;s++){var a=this.samples[s];o&j.SAMPLE_DURATION_PRESENT&&(r(t,this.offset+n,a.duration),n+=4),o&j.SAMPLE_SIZE_PRESENT&&(r(t,this.offset+n,a.size),n+=4),o&j.SAMPLE_FLAGS_PRESENT&&(r(t,this.offset+n,a.flags),n+=4),o&j.SAMPLE_COMPOSITION_TIME_OFFSET&&(r(t,this.offset+n,a.compositionTimeOffset),n+=4)}return n},t}(_);d.TrackRunBox=V;var q=function(e){function t(t,n){e.call(this,"moof",i([t],n)),this.header=t,this.trafs=n}return h(t,e),t}(y);d.MovieFragmentBox=q;var W=function(e){function t(t){e.call(this,"mdat"),this.chunks=t}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t);return this.chunks.forEach(function(e){n+=e.length}),this.size=n},t.prototype.write=function(t){var n=this,i=e.prototype.write.call(this,t);return this.chunks.forEach(function(e){t.set(e,n.offset+i),i+=e.length},this),i},t}(m);d.MediaDataBox=W;var G=function(e){function t(t,n){e.call(this,t),this.dataReferenceIndex=n}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+8,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,0),r(t,this.offset+n+4,this.dataReferenceIndex),n+8},t}(m);d.SampleEntry=G;var Y=function(e){function t(t,n,i,r,o,s){void 0===i&&(i=2),void 0===r&&(r=16),void 0===o&&(o=44100),void 0===s&&(s=null),e.call(this,t,n),this.channelCount=i,this.sampleSize=r,this.sampleRate=o,this.otherBoxes=s}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,this.channelCount<<16|this.sampleSize),r(t,this.offset+n+12,0),r(t,this.offset+n+16,this.sampleRate<<16),n+=20,this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.write(t)}),n},t}(G);d.AudioSampleEntry=Y,d.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var K=function(e){function t(t,n,i,r,o,s,a,l,u,c){if(void 0===o&&(o=""),void 0===s&&(s=72),void 0===a&&(a=72),void 0===l&&(l=1),void 0===u&&(u=d.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===c&&(c=null),e.call(this,t,n),this.width=i,this.height=r,this.compressorName=o,this.horizResolution=s,this.vertResolution=a,this.frameCount=l,this.depth=u,this.otherBoxes=c,o.length>31)throw new Error("invalid compressor name")}return h(t,e),t.prototype.layout=function(t){var n=e.prototype.layout.call(this,t)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.layout(t+n)}),this.size=n},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);r(t,this.offset+n,0),r(t,this.offset+n+4,0),r(t,this.offset+n+8,0),r(t,this.offset+n+12,0),n+=16,r(t,this.offset+n,this.width<<16|this.height),r(t,this.offset+n+4,a(this.horizResolution)),r(t,this.offset+n+8,a(this.vertResolution)),n+=12,r(t,this.offset+n,0),r(t,this.offset+n+4,this.frameCount<<16),n+=6,t[this.offset+n]=this.compressorName.length;for(var i=0;31>i;i++)t[this.offset+n+i+1]=i<this.compressorName.length?127&this.compressorName.charCodeAt(i):0;return n+=32,r(t,this.offset+n,this.depth<<16|65535),n+=4,this.otherBoxes&&this.otherBoxes.forEach(function(e){n+=e.write(t)}),n},t}(G);d.VideoSampleEntry=K;var Q=function(e){function t(t,n){e.call(this,t),this.data=n}return h(t,e),t.prototype.layout=function(t){return this.size=e.prototype.layout.call(this,t)+this.data.length,this.size},t.prototype.write=function(t){var n=e.prototype.write.call(this,t);return t.set(this.data,this.offset+n),n+this.data.length},t}(m);d.RawTag=Q},function(e,t,n){(function(t){var i,r=n(56),o=n(51),s=(o.BaseTransform,n(82));n(83);e.exports=i=function(){o.BaseParser.prototype.constructor.apply(this,arguments),this.parser=new s,this.parser.onFrame=this._onMp3Frame.bind(this),this.parser.onNoise=this._onNoise.bind(this),this.parser.onClose=this._onClose.bind(this),this._sampleRate=0,this._bitRate=0,this._timestamp=0},i.prototype=o.createBaseParser({constructor:i,_onMp3Frame:function(e,n,i){r("Found frame length "+e.length+" bitRate="+n+", sampleRate="+i);var s=new t(e),a=1152;s.meta={mimeType:"audio/mpeg",codecId:2,channels:2,bitRate:n,sampleRate:i,sampleSize:16},s.duration=a,s.timestamp=this._timestamp,this.enqueue(new o.Transfer(s,"buffer")),this._bitRate=n,this._timestamp+=a},_onNoise:function(){r("mp3 has noise")},_onClose:function(){r("parser closed")},_parse:function(e){return r("parse called"),e.data.empty?(r("empty transfer"),void this.enqueue(e)):void this.parser.push(new Uint8Array(e.data))}})}).call(t,n(52).Buffer)},function(e,t,n){var i=n(56),r=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],o=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s=function(){function e(){this.buffer=null,this.bufferSize=0}return e.prototype.push=function(e){var t;if(this.bufferSize>0){var n=e.length+this.bufferSize;if(!this.buffer||this.buffer.length<n){var r=new Uint8Array(n);this.bufferSize>0&&r.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=r}this.buffer.set(e,this.bufferSize),this.bufferSize=n,e=this.buffer,t=n}else t=e.length;i("push "+t);for(var o,s=0;t>s&&(o=this._parse(e,s,t))>0;)s+=o;var a=t-s;a>0&&(!this.buffer||this.buffer.length<a?this.buffer=new Uint8Array(e.subarray(s,t)):this.buffer.set(e.subarray(s,t))),this.bufferSize=a},e.prototype._parse=function(e,t,n){if(i("_parse"),t+2>n)return-1;if(255===e[t]||224===(224&e[t+1])){if(t+24>n)return-1;var s=e[t+1]>>3&3,a=e[t+1]>>1&3,l=e[t+2]>>4&15,u=e[t+2]>>2&3,c=!!(2&e[t+2]);if(1!==s&&0!==l&&15!==l&&3!==u){var d=3===s?3-a:3===a?3:4,h=1e3*r[14*d+l-1],p=3===s?0:2===s?1:2,f=o[3*p+u],g=c?1:0,m=3===a?(3===s?12:6)*h/f+g<<2:(3===s?144:72)*h/f+g|0;return t+m>n?-1:(this.onFrame&&(i("onFrame"),this.onFrame(e.subarray(t,t+m),h,f)),m)}}for(var _=t+2;n>_;){if(255===e[_-1]&&224===(224&e[_]))return this.onNoise&&this.onNoise(e.subarray(t,_-1)),_-t-1;_++}return-1},e.prototype.close=function(){this.bufferSize>0&&this.onNoise&&this.onNoise(this.buffer.subarray(0,this.bufferSize)),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()},e}();e.exports=s},function(e,t){var n=1e9;e.exports={TIMESCALE_SECONDS:n}},function(e,t,n){var i,r=n(85),o=n(51),s=o.BaseSink,a=n(86);e.exports=i=function(e){if(s.prototype.constructor.call(this),!r.haveMediaSourceSupportMimeType(e))throw new Error("Local MediaSource doesn't support provided MIME type: "+e);var t;t=arguments.length>1?Array.prototype.slice.call(arguments):e instanceof Array?e:[e],this.mimeTypes=t,this.mediaSource=new MediaSource,this.mseWriter=new a(this.mediaSource),this.dataSources=[],this.selectedDataSourceIndex=0,this.mimeTypes.forEach(function(e){var t={mimeType:e};this.mseWriter.listen(t),this.dataSources.push(t)}.bind(this))},i.prototype=o.createBaseSink({constructor:i,_onData:function(){var e=this.dataSources[this.selectedDataSourceIndex];if(!e||!e.onData)throw new Error("DataSource is not existing or has no onData function defined");var t=this.dequeue();t&&e.onData(t.data)},getMediaSourceUrl:function(){return URL.createObjectURL(this.mediaSource)}})},function(e,t){var n;e.exports=n={haveGlobalWindow:function(){return"undefined"!=typeof window},haveMediaSourceExtensions:function(){return n.haveGlobalWindow()&&window.MediaSource},haveMediaSourceSupportMimeType:function(e){return n.haveMediaSourceExtensions()&&window.MediaSource.isTypeSupported(e)}}},function(e,t){var n=function(){function e(e,t){this.mediaSource=e,this.dataSource=t,this.dataSource.onData=this.pushData.bind(this),this.updateEnabled=!1,this.buffer=[],this.sourceBuffer=null,this.sourceBufferUpdatedBound=null}return e.prototype.allowWriting=function(){this.updateEnabled=!0,this.update()},e.prototype.pushData=function(e){this.buffer.push(e),this.update()},e.prototype.update=function(){if(this.updateEnabled&&0!==this.buffer.length){this.sourceBuffer||(this.sourceBuffer=this.mediaSource.addSourceBuffer(this.dataSource.mimeType),this.sourceBufferUpdatedBound=this._sourceBufferUpdated.bind(this),this.sourceBuffer.addEventListener("update",this.sourceBufferUpdatedBound)),this.updateEnabled=!1;var e=this.buffer.shift();if(null===e)return void this.sourceBuffer.removeEventListener("update",this.sourceBufferUpdatedBound);e.timestamp&&(this.sourceBuffer.timestampOffset=e.timestamp/1e9),this.sourceBuffer.appendBuffer(e)}},e.prototype._sourceBufferUpdated=function(e){this.updateEnabled=!0,this.update()},e.prototype.finish=function(){this.buffer.push(null),this.update()},e}(),i=function(){function e(e){this.bufferWriters=[],this.mediaSource=e,this.mediaSourceOpened=!1,this.mediaSource.addEventListener("sourceopen",function(e){this.mediaSourceOpened=!0,this.bufferWriters.forEach(function(e){e.allowWriting()})}.bind(this)),this.mediaSource.addEventListener("sourceend",function(e){this.mediaSourceOpened=!1}.bind(this))}return e.prototype.listen=function(e){var t=new n(this.mediaSource,e);this.bufferWriters.push(t),this.mediaSourceOpened&&t.allowWriting()},e}();e.exports=i},function(e,t,n){var i,r,o=n(51);r=function(e){o.BasePushSrc.prototype.constructor.call(this);var t=this.req=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(e){this.enqueue(new o.Transfer(new Uint8Array(t.response),"binary")),this.enqueue(new o.Transfer(null,"binary"))}.bind(this),t.send()},r.prototype=o.createBasePushSrc({constructor:r}),e.exports=i={Src:r}},function(e,t,n){var i,r,o,s=n(51),a=n(89);n(58);r=function(e,t){s.prototype.constructor.call(this);var n=a.createReadStream(e,t);this.on("end",function(){n.close()}),this.addOutput(n)},r.prototype=s.create({constructor:r}),o=function(e,t){s.prototype.constructor.call(this);var n=a.createWriteStream(e,t);this.on("finish",function(){n.close()}),this.addInput(n)},o.prototype=s.create({constructor:o}),e.exports=i={Src:r,Sink:o}},function(e,t,n){var i=n(85);e.exports=i.haveGlobalWindow()?new(n(90)):n(!function(){var e=new Error('Cannot find module "fs"');throw e.code="MODULE_NOT_FOUND",e}())},function(e,t,n){!function(t){e.exports=t()}(function(){function e(){return!1}function t(e){return!(!(e&&e.data instanceof Object)||n(e))}function n(e){return!!(e&&e.data instanceof ArrayBuffer)}function i(e,n){var i,r=e.length,o=n;for(i=0;r>i;++i){if(!t(o))throw new Error("ENOENT");o=o.data[e[i]]}return o}String.prototype.trim||!function(){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(e,"")}}();var r={utf8:"utf-8",utf16le:"utf-16le",utf16be:"utf-16be"},o=function(e){var t=Date.now();this.root={mtime:t,ctime:t,atime:t,data:{}},this.fnDone=function(){var t=arguments;"function"==typeof e&&setTimeout(function(){e.apply(null,t)},0)}};return o.prototype.arrayBufferToString=function(e,t){return"undefined"==typeof TextDecoder?String.fromCharCode.apply(null,new Uint16Array(e)):(t=r[t]||"utf8",new TextDecoder(t).decode(new DataView(e)))},o.prototype.stringToArrayBuffer=function(e,t){var n;if(t=r[t]||"utf8","undefined"==typeof TextEncoder){n=new ArrayBuffer(2*e.length);for(var i=new Uint16Array(n),o=0,s=e.length;s>o;++o)i[o]=e.charCodeAt(o)}else n=new TextEncoder(t).encode(e).buffer;return n},o.prototype.getNode=function(e){return i(this.parsePath(e),this.root)},o.prototype.joinPath=function(){var e=[],t=arguments||[];return e=this.parsePath(Array.prototype.slice.call(t).join("/")),("/"===t[0][0]?"/":"")+e.join("/")},o.prototype.parsePath=function(e){var t=[];return e=e||"/",e.split(/\/+/).forEach(function(e){e=e.trim(),e.length&&"."!==e&&(".."===e?t.pop():t.push(e))}),t},o.prototype.normalizePath=function(e){return"/"+this.parsePath(e).join("/")},o.prototype.dirname=function(e){var t=this.parsePath(e);return t=t.slice(0,t.length-1),"/"+t.join("/")},o.prototype.basename=function(e){var t=this.parsePath(e);return t.length?t.pop():""},o.prototype.fileSizeSI=function(e,t,n,i,r){return(t=Math,n=t.log,i=1e3,r=n(e)/n(i)|0,e/t.pow(i,r)).toFixed(r?2:0)+" "+(r?"kMGTPEZY"[--r]+"B":"Bytes")},o.prototype.fileSizeIEC=function(e,t,n,i,r){return(t=Math,n=t.log,i=1024,r=n(e)/n(i)|0,e/t.pow(i,r)).toFixed(r?2:0)+" "+(r?"KMGTPEZY"[--r]+"iB":"Bytes")},o.prototype.statSync=function(n){var r=this.parsePath(n),o=i(r,this.root),s=t(o);if(!o||!o.data)throw new Error("ENOENT");return this.fnDone("stat",n),{size:s?Object.keys(o.data).length:o.data.byteLength,ctime:new Date(o.ctime),mtime:new Date(o.mtime),atime:new Date(o.atime),isFile:function(){return!s},isDirectory:function(){return s},isBlockDevice:e,isCharacterDevice:e,isSymbolicLink:e,isFIFO:e,isSocket:e}},o.prototype.existsSync=function(e){var n,i=this.parsePath(e),r=i.length,o=this.root;for(n=0;r>n;++n){if(!t(o))return this.fnDone("exists",e),!1;o=o.data[i[n]]}return this.fnDone("exists",e),!!o},o.prototype.mkdirSync=function(e){var n,r=this.parsePath(e),o=i(r.slice(0,r.length-1),this.root),s=Date.now();if(!r.length||!t(o))throw new Error("ENODIR");return n=r[r.length-1],o.data[n]||(o.data[n]={data:{},ctime:s,mtime:s,atime:s},o.mtime=s),this.fnDone("mkdir",e),this},o.prototype.mkdirpSync=function(e){var r,o,s,a=this.parsePath(e),l=a.length;if(!a.length)throw new Error("ENODIR");for(o=0;l>o;++o){if(r=a.slice(0,o+1),s=i(r,this.root),n(s))throw new Error("ENODIR");t(s)||this.mkdirSync(r.join("/"))}return this.fnDone("mkdirp",e),this},o.prototype.readdirSync=function(e){var n=this.parsePath(e),r=i(n,this.root);if(!t(r))throw new Error("ENODIR");return r.atime=Date.now(),this.fnDone("readdir",e),Object.keys(r.data)},o.prototype.rmdirSync=function(e){var n=this.parsePath(e),r=i(n,this.root),o=n.pop(),s=i(n,this.root);if(!t(r))throw new Error("ENODIR");if(Object.keys(r.data).length)throw new Error("ENOTEMPTY");return delete s.data[o],s.mtime=Date.now(),this.fnDone("rmdir",e),this},o.prototype.unlinkSync=function(e){var t=this.dirname(e),n=this.basename(e),r=i(this.parsePath(t),this.root);return delete r.data[n],r.mtime=Date.now(),this.fnDone("unlink",e),this},o.prototype.rmrfSync=function(e){var n=this.parsePath(e),r=n.pop(),o=i(n,this.root);if(!t(o))throw new Error("ENODIR");return r?delete o.data[r]:o.data={},o.mtime=Date.now(),this.fnDone("rmrf",e),this},o.prototype.writeFileSync=function(e,n,r){var o,s,a=this.parsePath(e),l=a.pop(),u=this.existsSync(e),c=i(a,this.root);if(!t(c))throw new Error("ENODIR");if(!l)throw new Error("EINVALIDPATH");return"string"==typeof r&&(r={encoding:r}),r=r||{encoding:null},o="string"==typeof n?this.stringToArrayBuffer(n,r.encoding):n,s=Date.now(),u?(c.data[l].data=o,c.data[l].atime=s,c.data[l].mtime=s):(c.data[l]={data:o,ctime:s,mtime:s,atime:s},c.mtime=s),c.atime=s,this.fnDone("writeFile",e),this},o.prototype.readFileSync=function(e,t){var r=this.parsePath(e),o=i(r,this.root);if("string"==typeof t&&(t={encoding:t}),t=t||{encoding:null},!n(o))throw new Error("ENOENT");return o.atime=Date.now(),this.fnDone("readFile",e),t.encoding?this.arrayBufferToString(o.data,t.encoding):o.data},o.prototype.renameSync=function(e,n){var r=this.parsePath(e),o=i(r,this.root),s=i(r.slice(0,r.length-1),this.root),a=r[r.length-1],l=this.parsePath(n),u=i(l,this.root),c=i(l.slice(0,l.length-1),this.root),d=l[l.length-1],h=Date.now();if(!r.length||!l.length)throw new Error("ENOENT");if(!t(s||!t(c)))throw new Error("ENODIR");if(u)throw new Error("EEXISTS");return c.data[d]=u=o,u.ctime=h,c.mtime=h,delete s.data[a],s.mtime=h,this.fnDone("rename",{oldPath:e,newPath:n}),this},["stat","exists","readdir","mkdirp","mkdir","rmdir","rmrf","unlink"].forEach(function(e){o.prototype[e]=function(t,n){var i;try{i=this[e+"Sync"](t)}catch(r){return n(r)}return n(null,i)}}),["readFile"].forEach(function(e){o.prototype[e]=function(t,n,i){var r;i||(i=n,n=void 0);try{r=this[e+"Sync"](t,n)}catch(o){return i(o)}return i(null,r)}}),["rename"].forEach(function(e){o.prototype[e]=function(t,n,i){var r;try{r=this[e+"Sync"](t,n)}catch(o){return i(o)}return i(null,r)}}),["writeFile"].forEach(function(e){o.prototype[e]=function(t,n,i,r){var o;r||(r=i,i=void 0);try{o=this[e+"Sync"](t,n,i)}catch(s){return r(s)}return r(null,o)}}),o})},function(e,t){var n={HTTP:"http",RTMP:"rtmp",HLS:"hls"};e.exports=n},function(e,t){e.exports={AAC:"audio/aac",M3U8:"application/x-mpegURL",HLS:"application/vnd.apple.mpegurl",MP4A:"audio/mp4",MP3:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBMA:"audio/webm",getTypeByExtension:function(e){var t={mp3:this.MP3,aac:this.AAC,mp4:this.MP4A,mp4a:this.MP4A,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return t[e]||null}}},function(e,t,n){function i(e,t,n){r.prototype.constructor.call(this,o,e,t,n||"HLSMSESingleAudioPlayer")}var r=n(38),o=n(39),s=n(1);e.exports=i,s(i.prototype,r.prototype)}])},function(e,t,n){var i=n(802),r=n(25),o=n(1111),s="trinity-broadcast",a=e.exports=i({},r,{broadcast:function(e,t){o.set(s,{event:e,data:t,now:Date.now()})}});o.on(s,function(e){var t=e.event,n=e.data;t&&a.trigger(t,n)})},function(e,t){function n(e){return e.toUpperCase().replace(/-/g,"_")}var i=0,r={STOP:"stop",HEARTBEAT:"heartbeat"},o={PLAY:"play"};e.exports={events:o,actions:r,createMessage:function(e){return{version:i,timestamp:Math.floor(Date.now()/1e3),registration_id:e}},parseAction:function(e){return e&&e.action&&r[n(e.action)]?e.action:null}}},function(e,t,n){function i(e){function t(){x&&(x.close(),x=null),b=!0}function n(){b||(x=new EventSource(g,{withCredentials:m}),x.onopen=c,x.onerror=p,x.onmessage=f)}function i(){return x&&h[x.readyState]}function l(){b||x.readyState===d&&n()}function c(){b||(w=0,k.trigger(a.OPEN))}function p(e){if(!b){if(++w>u){var t=r(w);y("More than "+u+" errors in a row. "+("Will use back-off timeout to reconnect in "+t+" ms")),window.setTimeout(l,t)}else y("Will try to reconnect ASAP"),l();k.trigger(a.ERROR,e)}}function f(e){if(!b){var t=e.data;if(_)try{t=JSON.parse(t)}catch(n){t={},y("syntax error parsing data to object",n.message,e)}k.trigger(a.DATA,t)}}var g=e.eventUrl,m=e.withCredentials,_=e.json,v=e.log,y=void 0===v?function(){}:v,b=!1,w=0,x=null,k=o({},s,{dispose:t,getEventSourceReadyState:i});return n(),k}function r(e){var t=e/u,n=l*Math.pow(2,t);return Math.min(c,n)}var o=n(802),s=n(25),a=n(866),l=2e3,u=1,c=1e4,d=2,h={0:"connecting",1:"open",2:"closed"};e.exports=i},function(e,t){"use strict";function n(){function e(e,n){if(p){for(var i=arguments.length,r=Array(i>2?i-2:0),o=2;i>o;o++)r[o-2]=arguments[o];"string"==typeof n?n=" "+n:(r.unshift(n),n="");var s=[t()+" | "+E+(k?"%c":"")+n].concat(A,r);m?T.push({level:e,logArgs:s})>x&&T.shift():h[e].apply(h,s)}}function t(){var e=new Date,t=null===S?0:e-S,n=k?"%c":"";return S=+e,n+i(e)+(n+" ("+n)+r("+"+t+"ms"," ",8)+(n+")")}function n(e){return e.enable=function(){p=!0},e.disable=function(){p=!1},e.bufferOn=function(){m=!0},e.bufferOff=function(){m=!1,T.length=0},e.flush=u()?function(){T.forEach(function(e){var t=e.level,n=e.logArgs;h[t].apply(h,n)}),T.length=0}:function(){},e}var o=c.apply(void 0,arguments),s=o.enabled,p=void 0===s?!0:s,g=o.buffer,m=void 0===g?!1:g,_=o.label,v=void 0===_?"":_,y=o.plainOutput,b=void 0===y?!1:y,w=o.bufferSize,x=void 0===w?1e3:w;if(!u())return n(d.reduce(function(e,t){return e[t]=e},function(){}));h.CL||(h.CL={_cssCounter:0});var k=!b&&l(),S=null,T=[],E=a(v,k),A=k?["color: green","color: grey","color: blue","color: grey",f(v),""]:[],C=h.CL[v]=n(d.reduce(function(t,n){return t[n]=e.bind(null,n),t},e.bind(null,"log")));return C}function i(e){return o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())+"."+r(e.getMilliseconds(),"0",3)}function r(e,t,n){return s(t,n-(""+e).length)+e}function o(e){return r(e,"0",2)}function s(e,t){return t>0?new Array(t+1).join(e):""}function a(e,t){return(t?"%c":"")+(e?e:"")}function l(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent;return/chrome|firefox|opr/i.test(e)&&!/msie|edge/i.test(e)}function u(){return h&&d.every(function(e){return"function"==typeof h[e]})}function c(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return"object"==typeof e&&e||{enabled:e,label:t}}e.exports=n;var d=["log","info","warn","error"],h="undefined"!=typeof console?console:null,p=["color:#fff","border-radius:3px","padding:2px 4px","font-family:sans-serif","text-transform:uppercase","font-size:9px"].join(";")+";",f=function(){var e=["#51613C","#447848","#486E5F","#787444","#6E664E"];
return function(t){return t?"background:"+e[h.CL._cssCounter++%e.length]+";"+p:""}}()},function(e,t){function n(){return d.call(arguments,function(e,t){return t&&h(t).forEach(function(i){void 0===e[i]?e[i]=t[i]:"object"==typeof e[i]&&"object"==typeof t[i]&&(e[i]=n(e[i],t[i]))}),e},{})}function i(e){return"function"==typeof e?e():e}function r(e,t,i,r){if(f.forEach(function(e){if(!(e in t))throw new Error('Endpoint "'+i+'" missing required field: "'+e+'"')}),e.indexOf(t.service)<0)throw new Error('Endpoint "'+i+'" references unknown service: "'+t.service+'"');return n(t,r,p)}function o(e,t,i){return m.forEach(function(n){if(!(n in e))throw new Error('Service "'+t+'" missing required field: "'+n+'"')}),n(e,i,g)}function s(e,t){return e.replace(/:([\w-]+)/g,function(e,n){return null!=t[n]?t[n]:""})}function a(e,t){var n=e[t];if(!n)throw new Error('Could not find config for endpoint "'+t+'"');return n}function l(e,t,r,o){var l=a(e.endpoints,t),u=e.services[l.service],c=n(o,i(l.query),u.query);return e.formatUrl(u.protocol,u.hostname,u.port,s(l.path,r),c)}function u(e,t,i,r,o,s,u){var c=a(e.endpoints,t),d=e.services[c.service];return e.apiTransport({method:c.method,url:l(e,t,i,r),dataType:c.dataType,data:s||null,headers:n(o,c.headers,d.headers),timeout:c.timeout},{name:t,endpointCustomSettings:c.customSettings||{},serviceCustomSettings:d.customSettings||{},args:u||[]})}var c=Array.prototype,d=(c.slice,c.reduce),h=Object.keys,p={dataType:"json",method:"get",query:{},timeout:3e3,customSettings:{}},f=["path","service"],g={headers:{},port:null,protocol:"http",query:{},customSettings:{}},m=["hostname"];e.exports=function(e,t,n){var i,s=e.endpoints,a=e.services,c=e.defaults||{},d={};if(!s||!a)throw new Error("Cannot create endpoints: invalid config format");if("function"!=typeof t)throw new Error("Cannot create endpoints: no api transport given");if(d.apiTransport=t,"function"!=typeof n)throw new Error("Cannot create endpoints: no url formatter given");return d.formatUrl=n,d.services=h(a).reduce(function(e,t){return e[t]=o(a[t],t,c.services),e},{}),i=h(d.services),d.endpoints=h(s).reduce(function(e,t){return e[t]=r(i,s[t],t,c.endpoints),e},{}),{callEndpoint:u.bind(null,d),getUrlForEndpoint:l.bind(null,d)}}},function(e,t,n){e.exports=n(1173)},function(e,t){function n(e,t){return"function"==typeof t.test?t.test(e):e===t}e.exports=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{get:function(t,i){return e[t]&&n(e[t].experiment_name,i)?e[t].variant_name:!1},getAll:function(){return e},getVariantIds:function(){return Object.keys(e).reduce(function(t,n){return null!=e[n].variant_id&&(t[n]=e[n].variant_id),t},{})}}}},function(e,t){function n(e){var t=e.data[0],n=e.data[1];if(!/https?:\/\/(.+\.|)soundcloud\.(com|dev\:[0-9]{4})/.test(e.origin))return!1;switch(t){case"i18n-locale:rendered":return i(n);case"i18n-locale:set-locale-always":return o.onLocaleChange()}}function i(e){r.style.width=e.width,r.style.height=e.height}var r,o=e.exports={init:function(e){if(!e||!e.selector||!e.host)throw new Error("i18n locale iframe: Missing parameter(s)");r=window.document.createElement("iframe"),r.src=e.host+"/i18n-locale-switcher.html",r.frameBorder=0,r.style.border="none",r.style.backgroundColor="transparent",window.addEventListener("message",n),window.document.querySelector(e.selector).appendChild(r)},onLocaleChange:function(){window.location.reload()}}},function(e,t,n){function i(e){this.phrases={},this.setLocale(e)}function r(){var e=o.call(this);this.number=new f(e),this.dateTime=new p(e,this.number)}function o(){return w[this.locale]||w[b]}function s(e,t){return t?e.replace(y,function(e,n,i,r){var o=t[n||i||r];return i?_(o):o}):e}function a(e,t){return w[e].pluralForm(t)}function l(e){return Array.isArray(e)?e[0]:e.toString()}function u(e){for(var t,n,i=1,r=arguments.length;r>i;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function c(e){for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];for(var r in i)void 0===e[r]&&(e[r]=i[r])}return e}function d(e){var t=e.dates,n=e.d3;return{decimal:e.delimiters.decimal,thousands:e.delimiters.thousands,grouping:n.grouping,currency:n.currency,dateTime:n.dateTime,date:n.date,time:n.time,periods:n.periods,days:t.weekdays,shortDays:t.shortWeekdays,months:t.months,shortMonths:t.monthsShort}}function h(e){var t=e.datePicker,n=e.dates;return{closeText:t.closeText,prevText:t.prevText,nextText:t.nextText,currentText:t.currentText,weekHeader:t.weekHeader,dateFormat:t.dateFormat,firstDay:t.firstDay,isRTL:t.isRTL,showMonthAfterYear:t.showMonthAfterYear,yearSuffix:t.yearSuffix,monthNames:n.months,monthNamesShort:n.monthsShort,dayNames:n.weekdays,dayNamesShort:n.shortWeekdays,dayNamesMin:n.minWeekdays}}var p=n(1176),f=n(1177),g="sclocale",m={};e.exports=i;var _,v="[a-zA-Z0-9_]+",y=new RegExp("\\[\\[\\[("+v+")\\]\\]\\]|\\[\\[("+v+")\\]\\]|(%d)","g"),b="en",w={en:n(867),en_GB:n(867),pt_BR:n(1181),fr:n(1180),es:n(1179),de:n(1178)};i.prototype.getLocaleCookieName=function(){return g},i.prototype.setLocale=function(e){this.locale=w[e]?e:b,r.call(this)},i.prototype.setPhrases=function(e){this.phrases=e||{}},i.prototype.extend=function(e){u(this.phrases,e)},i.prototype.getLocaleDataFor=function(e){var t=o.call(this),n=m;switch(e){case"d3":return n.d3=n.d3||d(t);case"jquery.datepicker":return n["jquery.datepicker"]=n["jquery.datepicker"]||h(t);default:return t}},i.prototype.t=function(e,t,n,i){var r=(n?n+"::":"")+e,o=this.phrases[r]||e;return s.call(this,l(o),t)},i.prototype.tp=function(e,t,n,i,r,o){var u=(r?r+"::":"")+e,d=this.phrases[u],h=this.number.format(n);return d=d?d[a(this.locale,n)]:a("en",n)?t:e,s.call(this,l(d),c({"%d":h},i))},_=function(){function e(e){return t[e]||"&amp;"}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/[&<>"'`]/g,i=/[&<>"'`]/;return function(t){return t||0===t?(t=""+t,i.test(t)?t.replace(n,e):t):""}}()},function(e,t){function n(e,t){function n(t,n,i){if(!(t instanceof Date))throw new Error("toRelativeTime method expects first argument to be Date");i=i||Date.now();var r,o,s,a=i-t,l=a>0,u=null,c=e.relativeTime;if(n=n&&parseInt(n,10)||1e3,a=Math.abs(a),n>=a)return l?c.justNow:c.rightNow;for(r in m)if(m.hasOwnProperty(r)){if(a<m[r])break;u=r,a/=m[r]}return a=Math.floor(a),o=l?c.past:c.future,s=c[u](a),o.replace(/%s/i,s)}function c(t,i){var r,o,s,a,l,u,c=e.dates;if(!(t instanceof Date))throw new Error("format method expects first argument to be Date");return"relative"===i?n(t):(r=t.getDate(),o=t.getDay(),s=t.getMonth(),a=t.getFullYear(),l=d(t.getMinutes()),u=[["YYYY",a],["MMMM",c.months[s]],["DDDD",c.weekdays[o]],["MMM",c.monthsShort[s]],["DD",r],["MM",s+1],["HH",t.getHours()],["mm",l]],u.reduce(function(e,t){return e.replace(new RegExp(t[0],"g"),t[1])},v(i)))}function v(t){var n;switch(t){case"iso":return"YYYY-MM-DD";case"readable":n="readable";break;case"readable_time":n="readableTime";break;case"readable_abbreviated":n="readableAbbreviated";break;case"readable_with_weekday":n="readableWithWeekday";break;default:n="default"}return e.dateFormats[n]}function y(e){var t,n;return t="number"==typeof e?new Date(e):i(e),n=t-Date.now(),Math.abs(n)>7*g?!1:(k=n,!0)}function b(){return Date.now()+k}function w(t,n){if(isNaN(t))return t;var i=[],r=Math.floor(t/f),o=Math.floor(t/p%60),s=Math.floor(t/h%60),a=e.relativeTime;return n&&n.inWords?(r>0&&i.push(a.hour(r)),o>0&&i.push(a.min(o)),(s>0||0===o&&0===r)&&i.push(a.sec(s)),i.join(" ")):(r>0&&i.push(r),n&&n.minimal&&0===r&&0===o?i.push(""):i.push(10>o&&r>0?"0"+o:o),i.push(10>s?"0"+s:s),i.join(":"))}function x(e){return t.zeroPad(e.getHours(),2)+":"+t.zeroPad(e.getMinutes(),2)}var k=0;return{time:_,toRelativeTime:n,format:c,fromString:i,setServerTime:y,nowAtServer:b,timecode:w,stringToTime:r,convert:o,floorTo30Minutes:s,parseTime:a,formatTime:x,getTimezoneOffset:l,getBounds:u}}function i(e){return new Date(Date.parse(e)||e)}function r(e){var t,n=/^\d+(\.\d+)?$/g,i=/^(?:npt:)?(?:(?:(\d+):)?(\d\d?):)?(\d\d?)(\.\d+)?$/,r=/^(?:(\d\d?)[hH])?(?:(\d\d?)[mM])?(\d\d?)[sS]$/;return n.test(e)?1e3*parseFloat(e):(t=i.exec(e)||r.exec(e),t?1e3*(3600*(parseInt(t[1],10)||0)+60*(parseInt(t[2],10)||0)+parseInt(t[3],10)+(parseFloat(t[4])||0)):0)}function o(e,t,n){n=n||"s";var i="smh",r=i.indexOf(t),o=i.indexOf(n);if(-1===r||-1===o)throw new Error('Units must be expressed as either "h", "m" or "s"');return Math.round(Math.pow(60,o-r)*e)}function s(e){return e=new Date(e),e.setMinutes(e.getMinutes()-e.getMinutes()%30),e}function a(e){var t,n,i,r=e.match(/^\s*(\d{1,2})\s*(?::\s*(\d{1,2}))?\s*(?:(a|p)m?)?\s*$/i);if(r&&(t=r[1]&&parseInt(r[1],10),n=r[2]&&parseInt(r[2],10),i=r[3]&&r[3].toLowerCase(),!(t>23||n>59))){if(i)if("p"===i){if(12>t)t+=12;else if(t>13)return}else if("a"===i)if(12===t)t=0;else if(t>12)return;return n||(n=0),[t,n]}}function l(){var e,t=new Date(2009,0,1,6,0,0),n=new Date(2009,6,1,6,0,0);return e=t.getUTCHours()>n.getUTCHours()?t.getTimezoneOffset():n.getTimezoneOffset()}function u(e){if(null==e.offset)return{};var t=new Date;c(t,e.resolution);var n=+new Date(+t+e.offset*_[e.resolution]),i=+new Date(n+(e.duration-1)*_[e.resolution]);return{from:n,to:i}}function c(e,t){switch(t){case"day":e.setUTCHours(0,0,0,0);break;case"hour":e.setUTCMinutes(0,0,0)}}function d(e){return("0"+e).substr(-2)}e.exports=n;var h=1e3,p=6e4,f=60*p,g=24*f,m={sec:1e3,min:60,hour:60,day:24,month:30,year:12},_={minute:p,hour:f,day:g}},function(e,t){function n(e){return{round:i,format:function(t,n){if(""===t||null==t||isNaN(t)||Math.abs(t)===1/0)return"";t=parseFloat(t);var r=n&&n.precision||0,o=e.delimiters;return r=Math.max(Math.min(r,20),0),t=i(t,r,n&&n.roundingFn),(""+t).split(".").map(function(e,t){return 0===t?e.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o.thousands):e}).join(o.decimal)},zeroPad:function(e,t){if(null==e)return e;e+="";var n=t-e.length;return n>0&&(e=new Array(n+1).join("0")+e),e}}}function i(e,t,n){n=n||Math.round;var i=Math.pow(10,t||0);return n(e*i)/i}e.exports=n},function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Vor kurzem",rightNow:"Jetzt",future:"in %s",past:"vor %s",sec:n(["1 Sekunde","%d Sekunden"]),min:n(["1 Minute","%d Minuten"]),hour:n(["1 Stunde","%d Stunden"]),day:n(["1 Tag","%d Tage"]),month:n(["1 Monat","%d Monate"]),year:n(["1 Jahr","%d Jahre"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"DD MMM YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD.MM.YYYY"},dates:{months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],weekdays:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortWeekdays:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],minWeekdays:["So","Mo","Di","Mi","Do","Fr","Sa"]},d3:{grouping:[3],currency:[""," "],dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Schlieen",prevText:"Zurck",nextText:"Weiter",currentText:"Heute",weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return 1!==e?1:0}};e.exports=i},function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i=e.exports={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Ahora mismo",rightNow:"Ahora mismo",future:"dans %s",past:"%s",sec:n(["1 segundo","%d segundos"]),min:n(["1 minuto","%d minutos"]),hour:n(["1 hora","%d horas"]),day:n(["1 da","%d das"]),month:n(["1 mes","%d meses"]),year:n(["1 ao","%d aos"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"DD MMM YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdays:["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],shortWeekdays:["Dom.","Lun.","Mar.","Mi.","Jue.","Vie.","Sb."],minWeekdays:["Do","Lu","Ma","Mi","Ju","Vi","S"]},d3:{grouping:[3],currency:["$",""],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Cerrar",prevText:"Ant",nextText:"Sig",currentText:"Hoy",weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return 1!==e?1:0}}},function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i=e.exports={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Rcemment",rightNow:"Maintenant",future:"dans %s",past:"%s",sec:n(["1 seconde","%d secondes"]),min:n(["1 minute","%d minutes"]),hour:n(["1 heure","%d heures"]),day:n(["1 jour","%d jours"]),month:n(["1 mois","%d mois"]),year:n(["1 an","%d ans"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"DD MMM YYYY",readableWithWeekday:"DDDD DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],monthsShort:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],weekdays:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortWeekdays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],minWeekdays:["Di","Lu","Ma","Me","Je","Ve","Sa"]},d3:{grouping:[3],currency:["$",""],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Fermer",prevText:"Prcdent",nextText:"Suivant",currentText:"Aujourd'hui",weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return e>1?1:0}}},function(e,t){function n(e,t){return function(t){return e[i.pluralForm(t)].replace(/%d/i,t)}}var i=e.exports={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Agora a pouco",rightNow:"Agora a pouco",future:"em %s",past:"%s",sec:n(["1 segundo","%d segundos"]),min:n(["1 minuto","%d minutos"]),hour:n(["1 hora","%d horas"]),day:n(["1 dia","%d dias"]),month:n(["1 ms","%d meses"]),year:n(["1 ano","%d anos"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"MMM DD, YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],weekdays:["Domingo","Segunda-Feira","Tera-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","Sbado"],shortWeekdays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],minWeekdays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"]},d3:{grouping:[3],currency:["$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Fechar",prevText:"Anterior",nextText:"Prximo",currentText:"Hoje",weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(e){return 1!==e?1:0}}},function(e,t,n){e.exports=n(1183)},function(e,t){"use strict";e.exports=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{get:function(t){return!!e[t]},getAll:function(){return e}}}},function(e,t){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.definitions,n=void 0===t?{}:t,r=e.includeQueryParams,l=void 0===r?!1:r,u=e.caseInsensitive,d=void 0===u?!1:u,h=i(n),p=s({},a,h),f=o(p,!0),g=l?"(?:\\?([\\s\\S]*))?":"",m=d?"i":"";return function(e){var t=new RegExp("^"+f(e)+g+"$",m);return t[c]=e,t}}function i(e){return Object.keys(e).reduce(function(t,n){var i=e[n];return t[n]=u(i),t},{})}function r(e,t){return t.length-e.length}function o(e,t){var n=Object.keys(e).sort(r).join("|"),i=new RegExp("(?:\\(\\?)?:("+n+")"+l,"g"),o=/^\(\?:/,s=t?"":"?:",a=function(t,n){var i=arguments.length<=2||void 0===arguments[2]?"":arguments[2];if(o.test(t))return t;var r=i?"(?:"+e[n]+")":e[n];return"("+s+r+i+")"};return function(e){return i.lastIndex=0,e.replace(i,a)}}function s(e){return[].slice.call(arguments,1).reduce(function(e,t){for(var n in t)e[n]=t[n];return e},e)}var a={alpha:"[a-zA-Z_-]",alphanum:"[a-zA-Z0-9_-]",num:"[0-9]"},l="(\\+|\\*|\\?|\\{\\d+,?\\d*\\})?",u=o(a,!1),c="function"==typeof Symbol?Symbol("source"):"routeabout.source";e.exports=n,n.sourceKey=c},function(e,t){"use strict";function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return n.reduce(i,e)}function i(e,t){for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.exports=n},function(e,t){"use strict";function n(e){return i.innerHTML=e.replace(r,"&lt;"),i.value}e.exports=n;var i=document.createElement("textarea"),r=/</g},function(e,t){"use strict";function n(e){return null==e||e===!1?"":o.test(e)?e.replace(r,s):e}e.exports=n;var i={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=/&(?!\w+;)|[<>"'`]/g,o=/[&<>"'`]/,s=function(e){return i[e]||"&amp;"}},function(e,t){"use strict";function n(e,t,n){return!e||n&&n.test(t)?t:e.replace(i,window.encodeURIComponent(t))}e.exports=n;var i=/%s/},function(e,t,n){"use strict";function i(e,t){function n(e){if(t>0){var n=e.data.length;t-=n,0>=t&&(e.data=e.substringData(0,e.data.length+t))}else e.data=""}function i(){return t>0}function a(e){for(var t=void 0;e;)t=e,e=e.nextSibling,t.parentNode.removeChild(t)}return e.length<t?e:(s.innerHTML=o.innerHTML=e,r(o,n,i,a),o.innerHTML+(o.innerHTML===s.innerHTML?"":"&hellip;"))}var r=n(868);e.exports=i;var o=document.createElement("div"),s=document.createElement("div")},function(e,t){"use strict";function n(){var e=[],t=Math.floor(1e4*Math.random()),n=/xxxLINK[0-9]+\|([0-9]+)xxx/g;return{addPlaceholder:function(n,i){return e.push({href:n,text:i}),"xxxLINK"+t+"|"+(e.length-1)+"xxx"},flatten:function(t,i){var r=t.replace(n,function(t,n){var r=e[parseInt(n,10)];return r?i(r.href,r.text):t});return e.length=0,r}}}e.exports=n},function(e,t,n){"use strict";function i(e,t){function n(e){i.lastIndex=0,i.test(e.data)&&(e.data=e.data.replace(i,function(e){return e.split(s).filter(Boolean).join("")}))}var i=new RegExp("\\S{"+t+",}","g"),s=new RegExp("(\\S{"+Math.floor(t/2)+"}(?=\\S{2}))");return i.test(e)?(o.innerHTML=e,r(o,n),o.innerHTML):e}var r=n(868);e.exports=i;var o=document.createElement("div")},function(e,t){"use strict";function n(e,t,n){e=n?e.replace(n,""):e;var o=e.match(r)||[],s=i(o,1),a=s[0];if(a&&e.length>t){var l=e.search(r)+a.length,u=Math.floor((t-l)/2);return e.slice(0,l+u)+"&hellip;"+e.slice(-u)}return e}var i=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.exports=n;var r=/\.[a-z-]{2,30}\//},function(e,t,n){(function(t){"use strict";function i(){function e(e,t){}var t=arguments.length<=0||void 0===arguments[0]?2:arguments[0],r=n(54).get("me"),o=arguments[1];return o||(o=n(55).defer().done(function(){n(60).instances.add(r),n(56).trigger("connect:hasUserData")})),r.id?o.resolve():r.fetch().done(o.resolve).fail(function(r){403===r.status?(e("Frozen user account, removing token",r),n(63).logout(),o.reject(r)):t?(e("Error fetching user information. Retrying...",r),i(t-1,o)):(e("Could not fetch user information. Giving up...",r),n(63).logout().always(function(){window.location.reload()}),o.reject(r))}),o}function r(){var e=10;!function i(){t(window.document).one("ajaxSuccess",function(t,r){!n(51).dateTimeHelper.setServerTime(r.getResponseHeader("Date"))&&--e&&i()})}()}function o(){n(903).initialize({statusCode:n(280)}),n(319).initialize()}function s(){n(54).set("geoip",new(n(1359)))}function a(){var e,i,r=window.document;e=new(n(61)),e.setRoutes(n(863),n(1142)),e.setLoader(n(1300)),n(154)&&n(154).initialize(),n(54).set("router",e),n(93).setAudioAd(n(1355)),n(71).initialize(n(93),n(73),n(56)),n(71).setFallbackSource(n(273),function(e){return n(61).getRoute("listenNetwork",e,"related")}),h(),n(58).initialize(t(r)),n(1326).initialize(),g(),i=new(n(1370))({el:t("#app"),appVersion:_}),i.render(),n(22).history.start({root:"/",pushState:!0}),t(window).on("unload",p)}function l(){var e=new(n(60))({id:n(54).get("systemUserId")});e.release=e.hold=n(3).noop}function u(){n(1296)(),n(54).get("me").on("change:consumer_subscription",function(){if(this.hasHighTier()){var e=n(64).instances.filter(function(e){return e.isBlocked()||e.isSnippetized()}).map(function(e){return e.isPlaying()?e.fetch().then(function(){var t=e.currentTime();e.disposeAudio(),e.play({seek:t})}):(e.disposeAudio(),e.fetch())});n(55).mapEither(function(){n(56).trigger("policyRefresh")},n(55).settled(e))}})}function c(){n(253).activate(),n(253).on(n(253).actions.STOP,f);var e=void 0,t=function(){window.clearTimeout(e)},i=function(){n(154)&&n(154).some(function(e){return e.get("playing")})||n(253).disconnect()};n(56).on("audio:play",function(){n(253).reconnect(),n(253).publishEvent(n(253).events.PLAY),t()}),n(56).on("audio:pause",function(){t(),e=window.setTimeout(i,w)})}function d(){function e(e){return"user"===e.originType&&e.origin===n(54).get("me").id}var t=function(t,i,r){var o=r.state!==!1;if(o&&e(r)){var s=n(71).getCurrentMetadata(),a=void 0;r.context&&"promoted"===r.context.campaign?a=r.context:s&&s.promotedInfo&&s.sound&&s.sound.getUrn()===i&&(a=s.promotedInfo),o&&a&&n(80).trackEvent(t,a)}},i=function(e,i){switch(i){case"target":return function(i){var r=n(100).generate(i.targetType,i.target);return t(e,r,i)};case"object":default:return function(n){var i=n.object&&n.object.getUrn();return t(e,i,n)}}};n(73).on("like",i("like","target")).on("comment",i("comment","target")).on("addToPlaylist",i("addToPlaylist","object")).on("createPlaylist",i("createPlaylist","object")).on("follow",i("follow","target")).on("repost",i("repost","target")).on("join",i("join","target")).on("likeStation",i("like","target"))}function h(){var e=function(e){var t=n(71).getCurrentSound(),i=t&&t.getUrn(),r={click_name:"repeat::"+(e?"on":"off")};i&&(r.click_object=i),n(58).trackClick(["play_controls","repeat_track",e?"on":"off"],r)};n(71).on("state:repeating",e)}function p(){n(58).dispose(t(window.document))}function f(){var e=n(71).getCurrentSound();e&&!e.isPaused()&&(e.pause({pause_reason:"concurrent_streaming"}),n(56).trigger("concurrent_streaming:pause"))}function g(){if(n(54).get("rollouts").get("v2_desktop_notifications")){var e=0,t=2;n(71).on("change:currentSound",function(i){var r=i.current,o=n(279).allowed(),s=!n(223).focused(),a=n(150).get("newTrackNotifications");"never"!==a&&n(63).isLoggedIn()&&(null===o&&s?++e===t&&n(56).trigger("desktop-notification-reminder"):o&&("always"===a||"bg"===a&&s)&&!function(){var e=function(){var e=r.get("user");n(279).create(r.get("title"),{icon:n(83).urlFrom(r,100),body:e.username,tag:"nowPlaying"}).closeAfter(5e3).on("click",window.focus,window)};r.attrExists(["title","user"])?e():r.fetch().then(function(){r.isPlaying()&&r===n(71).getCurrentSound()&&e()})}())})}}var m,_,v=n(112).getFacebookToken,y=n(112).loadFacebookSDK,b=7e3,w=2e4;e.exports={start:function(e){window.document.head;window.console&&window.console.info&&window.console.info("You like to look under the hood? Why not help us build the engine? http://soundcloud.com/jobs"),_=e?e:"DEVELOPMENT",n(54).set("app_version",_),window._scAuthCallbacks=n(1269),m()}},m=n(3).once(function(){function e(){t=i(),window.setTimeout(n(63).loginToClassicSoundCloud,b)}var t,h=n(55).defer();n(63).setSigninView(n(605)),r(),o(),n(1295)({}),n(1297)({}),u(),s(),l(),c(),d(),n(174).startPlayTracking(),n(1265).initialize(),n(163).setExperiments(n(54).get("experiments").getVariantIds()),(n(63).isLoggedIn()?n(55).resolve():n(63).loginWithCookies()).done(e).fail(function(){n(56).once("connect:login",e),n(54).get("me").lastFetchTime=Date.now(),t=n(55).resolve()}).always(function(){t.fail(n(116).ajaxFatal(n(137).USER_INFO_NOT_LOADED)).always(a).done(h.resolve).fail(h.reject)}),h.always(function(){if(!n(63).isLoggedIn()){var e=n(62).getFragmentParam("access_token");e?(n(61).removeFragmentParams("access_token","expires_in"),n(63).loginWithFacebook(e)):n(951).facebook&&y().then(function(){return v({promptUser:!1})}).then(n(63).loginWithFacebook)}})})}).call(t,n(1))},function(e,t,n){(function(e){"use strict";var t;window.__sc_abortApp||(n(51).initialize(),t=n(1193),e(function(){t.start(window.__sc_version)}))}).call(t,n(1))},function(e,t,n){"use strict";function i(e){return this.message.indexOf(e)>-1}function r(e,t,i){o(t)&&(s>0?(e.lastFetchTime=Date.now(),e.reset([u])):(s++,n(3).delay(function(){e.fetch().done(function(){s=0})},5e3)))}function o(e){var t=e.status;return t>=500}var s=0,a=new(n(111))("already-seen"),l={"cookies-notification-29-03-2016":{message:n(51).t('SoundCloud uses cookies. By using our services, youre agreeing to our Cookie Policy. We have updated our <a href="/pages/privacy" class="sc-link-dark">Privacy</a> and <a href="/pages/cookies" class="sc-link-dark">Cookie Policy</a>, effective 29 March 2016. By using our services youre agreeing to the updated policy.')},"email-confirmation-announcement":{message:n(51).t('Please confirm your email address to make the most of your SoundCloud experience. Check your <a href="[[href]]" class="sc-link-dark">settings</a> to resend the confirmation email.',{href:n(61).getRoute("settings")}),shouldAddAnnouncement:function(){return n(63).isLoggedIn()&&!n(54).get("me").get("primary_email_confirmed")}},"email-missing-announcement":{message:n(51).t('Dont lose access to your account. <a href="[[href]]" class="sc-link-dark">Add an email address</a>.',{href:n(61).getRoute("settings")}),shouldAddAnnouncement:function(){return n(63).isLoggedIn()&&/nosend\.soundcloudmail\.com$/.test(n(54).get("me").get("primary_email"))}}},u={message:n(51).t('Were currently experiencing issues, but we are working to get them resolved as soon as possible. Please check our <a href="http://status.soundcloud.com/" target="_blank">Status blog</a> for more information.'),dismissable:!1},c=["old search system","We will no longer be showing Favorites","making some changes to the Classic Dashboard"];e.exports=n(1323).extend({model:n(961),baseUrl:function(){return this.getEndpointUrl("announcements")},setup:function(){var e=this;this.on("error",r,this),Object.keys(l).filter(function(e){var t=l[e].shouldAddAnnouncement;return 1!==a.get(e)&&(!t||t())}).forEach(function(t){e.add({message:l[t].message}),a.set(t,1),e.lastFetchTime=Date.now()})},parse:function(e){return e.filter(function(e){return!c.some(i,e)})}},{neverRelease:!0,hashFn:function(){return 1}})},function(e,t,n){"use strict";e.exports=n(72).extend(n(144),{model:n(1354),next_href:!1,audibleAt:function(e){var t=this.at(e);return t&&t.getAudible()},getSourceInfo:function(){var e=n(152).instances.get(this.options.conversationId);return{type:"conversation",resourceType:"user",resourceId:e.getRecipient().id}},comparator:function(e){return e.get("timestamp")}},{hashFn:function(e,t){return t&&t.conversationId}})},,,,function(e,t,n){"use strict";function i(e){this.add(e)}e.exports=n(72).extend({model:n(442),baseUrl:function(){return this.getEndpointUrl("meConnections")},setup:function(){this.listenTo(n(56),"connect:newConnection",i)},getByType:function(e){return this.findWhere({type:e})}},{hashFn:function(){return 1},neverRelease:!0})},function(e,t,n){"use strict";function i(e){this.add(e.object,{at:0})}var r=function(){return 1},o=(e.exports=n(124).extend(n(428).withOptions({fields:["title"]}),{model:n(85),setupSources:function(){return[new o(null,this.options)]}},{hashFn:r}),n(72).extend({model:n(85),defaults:{offset:0,limit:50},baseUrl:function(){return this.getEndpointUrl("userPlaylists",{id:n(54).get("me").id})},setup:function(){var e=n(54).get("me").id;this.listenTo(n(73),"createPlaylist:origin:user:"+e,i)}},{neverRelease:!0,hashFn:r}))},,,function(e,t,n){"use strict";e.exports=n(124).extend({model:n(64),defaults:{sourceType:"likes"},filters:[function(e){return"sound"===e.resource_type}],setupSources:function(){var e=n(54).get("me").id;return"likes"===this.options.sourceType?[new(n(275))(null,{userId:e})]:[new(n(203))(null,{userId:e})]},extractModel:function(e){return e.getAudible()}},{hashFn:function(e,t){return t&&t.resource_id}})},,function(e,t,n){"use strict";function i(e){var t=e.collection,i=e.query_urn;return t.map(function(e){var t=e.output,r=e.query,o=e.highlights;return{output:t,highlights:o,kind:"query",link:n(61).getRoute("search",null,r,{query_urn:i}),artwork_url:null}})}function r(e){var t=(e.queries,e.results);return t.filter(function(e){return e.entity})}e.exports=n(72).extend({model:n(230),defaults:{query:null,entityKind:null},queryUrn:null,_currentlyFetching:!1,baseUrl:function(){var e=this.options,t=e.query,n=e.entityKind;return"query"===n?this.getEndpointUrl("searchQueries",{},{q:t}):this.getEndpointUrl("searchCategory",{category:"autocomplete"},{q:t,queries_limit:0,results_limit:this.limit})},parse:function(e){return this.queryUrn=e.query_urn,"query"===this.options.entityKind?i(e):r(e)},updateQuery:function(e){var t=this;this.options.query=e,this._currentlyFetching||(this._currentlyFetching=!0,this.queryUrn=null,this.next_href=null,this.fetch({reset:!0}).always(function(){t._currentlyFetching=!1,e!==t.options.query&&t.updateQuery(t.options.query)}))}})},,function(e,t,n){"use strict";e.exports=n(950).extend({defaults:{prefix:"",context:null,urn:null},baseUrl:function(){var e=this.options,t={q:e.prefix.toLowerCase(),highlight_mode:"offsets",context:e.context&&e.context.map(function(e){return e.toLowerCase()}).join(","),urn:e.urn,user_id:n(54).get("me").id};return this.getEndpointUrl("searchSuggestTags",{},t)},parse:function(e){return n(3).pluck(e.suggestions,"id")}},{hashFn:function(e,t){var n=t.prefix,i=t.context,r=t.urn;return n+";"+JSON.stringify(i)+";"+r}})},function(e,t,n){"use strict";function i(e){return"News"===e?"News & Politics":e}e.exports=n(310).extend({defaults:{limit:21,category:null,excludeFollowing:!0,view:null,shuffle:!1},model:n(342),meIds:null,setup:function(){this.meIds=new(n(443))},baseUrl:function(){var e=this.options.view,t=e?{view:e}:{};return this.getEndpointUrl("mySuggestedUsers",{category:i(this.options.category)},t)},fetch:function(){for(var e=this,t=arguments.length,i=Array(t),r=0;t>r;r++)i[r]=arguments[r];var o=n(55).defer();return this.meIds.fetch().done(function(){n(310).prototype.fetch.apply(e,i).done(o.resolve).fail(o.reject)}).fail(o.reject),o},getTokens:function(){return this.map(function(e){return e.get("token")})},parse:function(e){var t=this,i=this.options,r=i.shuffle,o=i.excludeFollowing,s=e.collection;return r&&(s=n(3).shuffle(s)),this.next_href=s.length>0?null:!1,n(3).filter(s,function(e){return!o||t.isValidUserSuggestion(e.user.id)})},isValidUserSuggestion:function(e){return!this.meIds.get(e)}},{hashFn:function(e,t){return t&&t.category||1},onCleanup:function(e){e.meIds.release(),e.meIds=null}})},,,,,function(e,t,n){"use strict";function i(){return new(n(307))(null,{resource_id:this.options.userId,playlists_for:"user",limit:this.options.limit})}e.exports=n(124).extend(n(428).withOptions({fields:"title"}),{model:n(76),defaults:{limit:25,includePrivateSounds:!1,includePlaylists:!0},regex:null,filters:[function(e){return this.options.includePrivateSounds||e.isPublic()}],setupSources:function(){
var e=[];return this.options.includePlaylists&&e.push(i.call(this)),e.push(new(n(888))(null,{userId:this.options.userId})),e},extractModel:function(e){return e}},{hashFn:function(e,t){var n=t.includePlaylists!==!1;return t.userId+"_audibles"+(n?"_includes_playlists":"")}})},,,,,,function(e,t,n){"use strict";e.exports={userBadge:{Subview:n(1733),minHeight:199,width:"150",offset:"0 10"},audibleAttribute:{Subview:n(233),relativeElementAnchor:"center bottom",width:"200",anchor:"right top",offset:"18 10",smallText:!0},genericDialog:{relativeElementAnchor:"center bottom",anchor:"right top",offset:"18 10",smallText:!1,text:""}}},,function(e,t,n){"use strict";var i=n(62).parse("https://api-v2.soundcloud.com/"),r=n(62).parse("https://api.soundcloud.com/"),o=n(62).parse("https://visuals.soundcloud.com"),s=n(62).parse("https://sign-in.soundcloud.com/");e.exports={"api-v2":{hostname:i.host,protocol:i.scheme,port:i.port,headers:{Accept:"application/json, text/javascript, */*; q=0.1"},query:{client_id:"02gUJC0hH2ct1EGOcYXQIzRFU91c72Ea"}},"public-api":{hostname:r.host,protocol:r.scheme,query:{client_id:"02gUJC0hH2ct1EGOcYXQIzRFU91c72Ea"}},"sign-in":{hostname:s.host,protocol:s.scheme,port:s.port,headers:{Accept:"application/json, text/javascript, */*; q=0.1"},query:{client_id:"02gUJC0hH2ct1EGOcYXQIzRFU91c72Ea"},customSettings:{timeout:5e3}},visuals:{hostname:o.host,protocol:o.scheme,query:{client_id:"02gUJC0hH2ct1EGOcYXQIzRFU91c72Ea"}}}},,function(e,t,n){"use strict";n(41),n(42),n(43),n(32),n(31),n(33),n(34),n(35),n(38),n(40),n(95).ios&&n(30)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=e.exports=n(3).assign({},n(22).Events,{initialize:function(){n(73).bindErrorHandler(i.onActionError)},onActionError:function(e){if("follow"===e.action){var t=i.getErrorFromXhr(e.xhr)||{};switch(t.error_message){case"DENY_AGE_RESTRICTED":return n(56).trigger("error:followDeniedAge",{errorType:"DENY_AGE_RESTRICTED",requiredAge:t.age}),!1;case"DENY_AGE_UNKNOWN":return n(56).trigger("error:followDeniedAge",{errorType:"DENY_AGE_UNKNOWN",context:e.context,followeeId:e.target}),!1}}},getErrorFromXhr:function(e){return e&&403===e.status&&e.responseJSON?n(3).find(e.responseJSON.errors,function(e){return"DENY_AGE_RESTRICTED"===e.error_message||"DENY_AGE_UNKNOWN"===e.error_message}):void 0}})},function(e,t,n){"use strict";function i(e,t,n){return o(e,t,n,function(e,t){e.unshift(!1,t)})}function r(e,t,n){return o(t,e,n,function(e,t){e.push(!0,t)})}function o(e,t,n,i){for(var r=[],o=e.length,s=t.length,a=0,l=0;o>=s;){if(0===o)return r;0!==s&&n(e[a],t[l])?(l++,s--):i(r,a),a++,o--}return!1}function s(e){for(var t=[],n=0,i=0;n<e.length;n+=2,++i)t.unshift(e[n],e[n+1]+i);return t}function a(e,t){var n,i=arguments.length<=2||void 0===arguments[2]?d:arguments[2],r=[],o=[[],[]],a=[[],[]],l=[];return c(0,e.length,0,t.length,e,t,r,o,a,i),n=0,r.forEach(function(e){switch(e){case g:case m:l.push(!1,n);break;case f:++n}}),l=s(l),n=0,r.forEach(function(e){switch(e){case _:case m:l.push(!0,n);case f:++n}}),l}function l(e,t,n,i,r,o,s,a){var l,u,c;for(r[e%2][n]=0,u=n+1;i>=u;u++)r[e%2][u]=r[e%2][u-1]+1;for(l=e+1;t>=l;l++)for(r[l%2][n]=r[(l-1)%2][n]+1,u=n+1;i>=u;u++)c=r[(l-1)%2][u-1],a(o[l-1],s[u-1])||c++,r[l%2][u]=Math.min(c,Math.min(r[(l-1)%2][u]+1,r[l%2][u-1]+1))}function u(e,t,n,i,r,o,s,a){var l,u,c;for(r[t%2][i]=0,u=i-1;u>=n;u--)r[t%2][u]=r[t%2][u+1]+1;for(l=t-1;l>=e;l--)for(r[l%2][i]=r[(l+1)%2][i]+1,u=i-1;u>=n;u--)c=r[(l+1)%2][u+1],a(o[l],s[u])||c++,r[l%2][u]=Math.min(c,Math.min(r[(l+1)%2][u]+1,r[l%2][u+1]+1))}function c(e,t,n,i,r,o,s,a,d,h){var p,v,y,b,w,x,k;if(e>=t)for(p=n;i>p;p++)s.push(_);else if(n>=i)for(p=e;t>p;p++)s.push(g);else if(t-1===e){for(v=r[e],y=n,p=n+1;i>p;p++)h(o[p],v)&&(y=p);for(p=n;i>p;p++)p===y?h(o[p],v)?s.push(f):s.push(m):s.push(_)}else{for(b=Math.floor((e+t)/2),l(e,b,n,i,a,r,o,h),u(b,t,n,i,d,r,o,h),w=n,x=1/0,p=n;i>=p;p++)k=a[b%2][p]+d[b%2][p],x>k&&(x=k,w=p);c(e,b,n,w,r,o,s,a,d,h),c(b,t,w,i,r,o,s,a,d,h)}}var d=function(e,t){return e===t},h=n(500).equal,p=e.exports={align:function(e){var t,n,i,r=e.source,o=e.target,s=e.add,a=e.remove,l=e.comparisonFn,u=void 0===l?d:l,c=p.getAlignInstructions(r,o,u);for(t=0;t<c.length;t+=2)n=c[t+1],c[t]?(i=o[n],s(i,n)):(i=r[n],a(i,n))},getAlignInstructions:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?d:arguments[2],o=e.length,s=t.length,l=s-o,u=void 0,c=void 0,p=void 0,f=void 0;if(1===Math.abs(l)){if(p=l>0,u=p?t:e,c=p?e:t,h(u.slice(0,-1),c,n))return[p,o-(p?0:1)];if(h(u.slice(1),c,n))return[p,0]}else{if(0===l&&h(e,t,n))return[];if(0>l&&(f=i(e,t,n)))return f;if(l>0&&(f=r(e,t,n)))return f}return a(e,t,n)}},f=0,g=1,m=2,_=3},function(e,t,n){"use strict";var i="https://eventlogger.soundcloud.com/audio_error";e.exports={log:function(e){var t=n(62).stringify({query:e}),r=new window.Image;r.src=i+t}}},function(e,t,n){(function(t){"use strict";function i(e){var n=e.controller,i=t(n.getContainerElement()),o=n.getState()===r.States.ERROR;i.toggleClass("blocked",o)}var r,o=1e3/60;e.exports={getInstance:function(e){if(!r){var t=n(54).get("rollouts").get("audiomanager_beta"),s=n(t?1166:471);t&&window.console&&window.console.info&&window.console.info("Using beta version of AudioManager."),r=new s({flashAudioPath:n(e?2318:2317),flashObjectID:"flashAudioObject",updateInterval:o}),r.Errors=n(471).Errors,r.States=n(471).States,r.UPDATE_INTERVAL=o,n(56).once("flash:block flash:unblock",i)}return r}}}).call(t,n(1))},function(e,t,n){"use strict";function i(e,t){return t.reduce(function(t,n){return t[n]=e[n].bind(e),t},{})}e.exports={facebook:i(n(442),["callback"]),payment:i(n(84),["handleCallback"])}},function(e,t,n){"use strict";function i(e,t){var n=t.x,i=t.y,r=t.w,o=t.h,s=t.radius,a=t.holeSize,u=t.arcAmount,c=t.bgAlpha,d=t.scrollTop,h=t.scrollLeft,p=e.canvas,f=p.width,m=p.height,_=r/2,v=o/2;e.save(),e.clearRect(0,0,f,m),e.save(),e.globalAlpha=c*g,e.fillStyle="#000",e.fillRect(0,0,f,m),e.restore(),e.translate(-h,-d),a&&(e.save(),e.beginPath(),l(e,n,i,r,o,s,a),e.globalCompositeOperation="destination-out",e.globalAlpha=1,e.fill(),e.restore()),u&&a&&(e.save(),e.beginPath(),e.translate(n+_,i+v),e.moveTo(0,0),e.arc(0,0,r+o,k,S*u+k,!1),e.restore(),e.clip(),e.save(),e.beginPath(),l(e,n,i,r,o,s,a),e.globalCompositeOperation="source-over",e.lineWidth=2,e.strokeStyle=y,e.stroke(),e.restore()),e.restore()}function r(e){var t=e[0],n=e.offset(),i=n.top,r=n.left,o=t.offsetHeight,s=t.offsetWidth;return{x:r,y:i,w:s,h:o}}function o(e,t,i){return function(r){return i((n(176).clamp(r,e,t)-e)/(t-e))}}function s(e){return(1-Math.cos(e*Math.PI))/2}function a(e,t,n){var i=e/S*Math.asin(1),r=S/e;return function(e){return Math.pow(2,-n*e)*Math.sin((e*t-i)*r)+1}}function l(e,t,n,i,r,o,s){f>=o?u(e,t+i/2,n+r/2,o*s):c(e,t,n,i,r,s)}function u(e,t,n,i){e.arc(t,n,i,0,S,!1)}function c(e,t,n,i,r,o){var s=m,a=_,l=v,u=!1,c=i/2,d=r/2,h=-c-a+s,p=-h,f=-d-l+s,g=-f;e.save(),e.translate(t+c,n+d),e.scale(o,o),e.moveTo(h,f-s),e.arc(p,f,s,k,b,u),e.arc(p,g,s,b,w,u),e.arc(h,g,s,w,x,u),e.arc(h,f,s,x,k,u),e.restore()}var d=1e3,h=300,p=10,f=40,g=.5,m=25,_=18,v=15,y="#ff5500",b=0,w=.5*Math.PI,x=Math.PI,k=1.5*Math.PI,S=2*Math.PI,T=window.document,E=o(0,.5,s),A=o(.2,.8,a(400,1e3,10)),C=o(.66,1,s);e.exports=n(329).extend({className:"calloutBackground g-opacity-transition-300",css:n(2689),defaults:{$targetEl:null,delay:0},states:{hidden:"m-hidden"},recalcOnWindowResizeX:!0,recalcOnWindowResizeY:!0,fullScreen:!0,_animId:null,_animState:null,setup:function(){this.getTargetDimensions=n(3).memoize(this.getTargetDimensions)},dispose:function(){this._animId&&window.cancelAnimationFrame(this._animId)},renderDecorate:function(){var e=this;window.setTimeout(function(){e.disposed||(n(329).prototype.renderDecorate.call(e),e.listenTo(n(99),"scroll:throttled",e.requestFrame))},this.options.delay)},teardown:function(){this.stopListening(n(99),"scroll:throttled",this.requestFrame)},onCanvasResize:function(){this.getTargetDimensions.cache={},this.requestFrame()},getTVal:function(){var e=Date.now();return this.getTVal=function(){return Math.min(1,(Date.now()-e)/d)},0},getTargetDimensions:function(){var e=r(this.options.$targetEl),t=e.x,n=e.y,i=e.w,o=e.h,s=(Math.sqrt(i*i+o*o)+p)/2;return{x:t,y:n,w:i,h:o,radius:s}},animateOut:function(){return this.toggleState("hidden",!0),n(55).delay(h)},getNextAnimationState:function(e,t){var n=this.getTargetDimensions(),i=n.x,r=n.y,o=n.w,s=n.h,a=n.radius,l=A(t),u=C(t),c=E(t),d=T.body.scrollLeft||T.documentElement.scrollLeft,h=T.body.scrollTop||T.documentElement.scrollTop,p=e?e.scrollTop:h,f=e?e.scrollLeft:d,g=h-p,m=d-f,_=p+g/8,v=f+m/8,y=t-(e?e.t:0);return{x:i,y:r,w:o,h:s,t:t,radius:a,holeSize:l,arcAmount:u,bgAlpha:c,scrollTop:_,scrollLeft:v,scrollDeltaLeft:m,scrollDeltaTop:g,deltaT:y}},requestFrame:function(){var e=this;this._animId||(this._animId=window.requestAnimationFrame(function(){e._animId=null,e.draw()}))},draw:function(){var e=this._animState=this.getNextAnimationState(this._animState,this.getTVal());i(this.context,e),this.queueFrame(e),e.t>=1&&e.deltaT>0&&this.trigger("animationDone")},queueFrame:function(e){(!e||e.t<1||Math.abs(e.scrollDeltaTop)>1||Math.abs(e.scrollDeltaLeft)>1)&&this.requestFrame()}})},function(e,t,n){(function(t){"use strict";function i(){this.getTargetDimensions.cache={},s.call(this)}function r(){a.call(this)}function o(){this.dismiss()}function s(){var e=this.getElement("bubble");e.length&&e.position({my:"left-50 bottom-8",at:"top center",of:this.options.$targetEl,offset:"0 -45px"})}function a(){this._renderRequested&&(this._hasRendered?l.call(this,h)===!1&&this.dismiss():l.call(this,d)&&this.render())}function l(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=this.getTargetDimensions(),n=t.x,i=t.y,r=t.h;if(0===n&&0===i)return null;var o=p.body.scrollTop||p.documentElement.scrollTop,s=o+window.innerHeight;return i>o-e&&s+e>i+r}var u=500,c=300,d=-100,h=50,p=window.document,f=t(p);e.exports=n(53).extend({className:"callout g-z-index-callout",css:n(2690),template:n(2320),defaults:{title:null,body:null,$targetEl:null,delay:0},element2selector:{bubble:".callout__bubble"},events:{"click .callout__button button":o,"click .calloutBackground":o},states:{active:"m-active",hidden:"m-hidden"},_hasRendered:!1,_renderRequested:!1,setup:function(){this.getTargetDimensions=n(3).memoize(this.getTargetDimensions),this.close=n(3).once(this.close),this.dismiss=n(3).once(this.dismiss),this.onDocumentKeydown=this.onDocumentKeydown.bind(this),this.listenTo(n(99),"resize:debounced",i).listenTo(n(99),"scroll:debounced",r)},dispose:function(){this.stopListening(n(99)),this.trigger("closed")},hasData:function(){return this._renderRequested=!0,this.getTargetDimensions.cache={},!!l.call(this,d)},renderDecorate:function(){var e=this;this._hasRendered=!0,f.on("keydown",this.onDocumentKeydown),this.toggleState("hidden",!0).toggleState("active",!0),this.getTargetDimensions.cache={},s.call(this),this.subviews.background.once("animationDone",function(){e.addTimeout(function(){e.toggleState("hidden",!1)},u)})},teardown:function(){f.off("keydown",this.onDocumentKeydown)},getTargetDimensions:function(){var e=this.options.$targetEl[0],t=this.options.$targetEl.offset(),n=t.top,i=t.left,r=e.offsetHeight,o=e.offsetWidth;return{x:i,y:n,w:o,h:r}},close:function(){var e=this;return this.stopListening(n(99)),this.subviews.background?(this.toggleState("hidden",!0),n(55).all([this.subviews.background.animateOut(),n(55).delay(c)]).then(function(){e._dispose()})):(this._dispose(),n(55).resolve())},dismiss:function(){this.trigger("dismissed"),this.close()},onDocumentKeydown:function(e){e.which===n(113).ESC&&this.dismiss()}})}).call(t,n(1))},function(e,t,n){"use strict";var i=/\s+/g,r=/^\d{6,18}$/;e.exports=n(97).extend({message:n(51).t("This is an invalid barcode."),check:function(e,t){e=e.replace(i,"");var n=!e.length||r.test(e);t(n)}})},function(e,t,n){"use strict";function i(e){return null==e}var r=e.exports=n(156).extend({fields:null,nullable:!0,validate:function(e){var t=n(55).defer(),r=this.fields.map(e.get,e);return r.every(i)?this.result(t,this.nullable):this.check(r,this.fields,this.result.bind(this,t)),t},affectsField:function(e){return this.fields.indexOf(e)>-1},getOwnerField:function(){return this.fields[0]}});n(422).applyTo(r.prototype)},function(e,t,n){"use strict";var i=/\W+/g,r=/^\w{5}\d{7}$/;e.exports=n(97).extend({message:n(51).t("This is an invalid ISRC."),check:function(e,t){e=e.replace(i,"");var n=!e.length||r.test(e);t(n)}})},function(e,t,n){"use strict";var i=/\W+/g,r=/^\w\d{10}$/;e.exports=n(97).extend({message:n(51).t("This is an invalid ISWC."),check:function(e,t){e=e.replace(i,"");var n=!e.length||r.test(e);t(n)}})},function(e,t,n){"use strict";e.exports=n(97).extend({minLength:0,message:n(51).t("[[minLength]] characters min"),check:function(e,t){t(e.length>=this.minLength)}})},function(e,t,n){"use strict";e.exports=n(97).extend({minValue:0,message:null,check:function(e,t){var n=Number(e);t(!window.isNaN(n)&&n>=this.minValue)}})},function(e,t,n){"use strict";e.exports=n(97).extend({constraints:[],check:function(e,t){var i=this,r=this.constraints.map(function(e){return n(422).hydrateConstraintDefinition.call(i,e)}).map(function(t){return t.validate(i._form,e)});n(55).settled(r).then(function(){for(var e=arguments.length,i=Array(e),r=0;e>r;r++)i[r]=arguments[r];var o=n(3).any(i.map(function(e){return e[0].success}));t(o)})}})},,,,,function(e,t,n){"use strict";var i=[{rule:/^(?![_-])/,errorMessage:n(51).t("Profile URLs must not start with an underscore or hyphen.")},{rule:/^(?!.*[-_]$)/,errorMessage:n(51).t("Profile URLs must not end with an underscore or hyphen.")},{rule:/^(?!.*[\-_]{2,})/,errorMessage:n(51).t("Profile URLs must not have two consecutive underscores or hyphens.")},{rule:/^[a-z0-9_-]*$/,errorMessage:n(51).t("Use only numbers, letters, underscores, or hyphens.")},{rule:/^.{3,255}$/,errorMessage:n(51).t("Profile URLs must be between 3 and 255 characters.")},{rule:new RegExp("^(?!("+["101","accounts","activate","activity","admin","android","announcements","api","apps","artworks","assets","comments","community-guidelines","connect","customize","creativecommons","creator","creators","dashboard","dropbox","emails","errors","events","explore","facebook","faqs","favorites","feedbacks","feeds","for","forums","genres","gifts","google_plus","groups","guestlist","help","hot","invite","imprint","iphone","ipad","ipod","jobs","latest","login","logout","mac","manage","me","messages","mobile","music","newsletters","notifications","oauth","oauth2","orders","oembed","pages","partners","people","player","playlists","posts","press","pro","press_release","search","session","sets","settings","signup","sitemap","sound","sounds","stations","stats","stream","subscription","terms-of-use","tour","tracks","track-manager","turn_off_notifications","tags","upload","users","videos","waveform","welcome","widgets","you"].join("|")+")$)"),errorMessage:n(51).t("This permalink is reserved. Enter another one.")}];e.exports=n(97).extend({initialize:function(){n(97).prototype.initialize.apply(this,arguments),this.constraints=i},checkExisting:!0,check:function(e,t){var i=this;if(""===e)return void t(!0);var r=n(3).find(this.constraints,function(t){return t.rule.lastIndex=0,!t.rule.test(e)});r||!this.checkExisting?(this.message=r&&r.errorMessage,t(!r)):this.resolvePermalink(e).done(function(){i.message=n(51).t("This profile URL is already in use. Try a different one."),t(!1)}).fail(function(){t(!0)})},resolvePermalink:function(e){var t=this.getResource.call(this._form);return t&&e===t.get("permalink")?n(55).reject():n(60).resolve(e)}})},function(e,t,n){"use strict";e.exports=n(156).extend({_propagate:!0,data:null,initialize:function(e){this.data=e||{}},stopPropagation:function(){this._propagate=!1},isPropagationStopped:function(){return!this._propagate}})},,function(e,t,n){"use strict";function i(){this.actions=n(3).reduce(this.actions,function(e,t,i){return"default"===i?e["default"]=t:n(3).isFunction(t)?e[i]={fn:t,state:"enabled"}:e[i]=n(3).assign({state:"enabled"},t),e},{})}e.exports=new(n(21))({before:{initialize:function(){i.call(this)}},actions:null,performAction:function(e){var t=this,n=this.actions[e],i=void 0;if("default"===e){if(!n)return;"string"==typeof n&&(e=n,n=this.actions[e])}return"enabled"===n.state?(i=n.fn.apply(this,Array.prototype.slice.call(arguments,1)),i&&"function"==typeof i.state&&("pending"===i.state()&&(this.setActionState(e,"pending"),i.always(function(){"pending"===t.getActionState(e)&&t.setActionState(e,"enabled")})),i.then(function(n){t.trigger("complete:action:"+e,n)})),i):void 0},getActionState:function(e){var t=this.actions[e];return t.state},setActionState:function(e,t){var i=this.actions[e];i.state!==t&&(this.trigger("change:action:"+e,t,i.state),i.state=t,this.buttons&&n(3).each(this.buttons,function(n,i){n.action===e&&this.setButtonConfig(i,{state:t})},this))}})},function(e,t,n){"use strict";function i(){var e=this.buttons;this.buttons={},n(3).each(e,function(e,t){this.buttons[t]=n(3).clone(e);var i=r.call(this,t);this.setButtonConfig(t,{state:i&&i.state||"enabled"})},this)}function r(e){var t=this.buttons[e];return n(3).find(this.actions,function(e,n){return n===t.action})}e.exports=new(n(21))({before:{initialize:function(){i.call(this)}},buttons:null,setButtonConfig:function(e,t){var i,r=this.buttons[e],o={};n(3).each(t,function(e,t){r[t]!==e&&(i=!0,o[t]=r[t]=e)}),i&&this.trigger("change:button:"+e,o)}})},function(e,t,n){"use strict";function i(){this.fields=n(3).reduce(this.fields,o,{},this),this.set(n(3).assign(n(3).reduce(this.fields,a,{},this),this.attributes),{silent:!0}),this.resetChanges()}function r(e){return e&&e.hold&&e.release}function o(e,t,i){return e[i]=n(3).defaults(n(3).reduce(t,s,{},this),{isDirty:!1}),e}function s(e,t,n){return"function"==typeof t&&(t=t.call(this)),r(t)&&this._submodels.push(t),e[n]=t,e}function a(e,t,n){return e[n]=t.defaultValue,e}e.exports=new(n(21))({before:{initialize:function(){this._submodels=this._submodels||[],i.call(this)}},fields:null,getFieldMetadata:function(e){return this.fields[e]||{}},setFieldDatasource:function(e,t){var n=this;[].concat(e).forEach(function(e){var i=n.getFieldMetadata(e);t!==i.datasource&&(i.datasource=t,n.trigger("datasourceChange:"+e,i))})},setFieldDisabled:function(e,t){var n=this;e=[].concat(e);var i=e.reduce(function(e,i){var r=n.getFieldMetadata(i);return t!==r.disabled?(r.disabled=t,n.trigger("disabledChange:"+i,r),n.trigger("disabledChange",i,r),!0):e},!1);i&&this.validate({fields:e})},hasDefaultValue:function(){var e=this,t=arguments[0]?n(3).flatten(arguments):Object.keys(this.fields);return!t.some(function(t){var n=e.fields[t];return n&&n.defaultValue!==e.get(t)})},isDirty:function(){var e=arguments[0]?n(3).flatten(arguments):Object.keys(this.fields);return e.some(function(e){return this[e]&&this[e].isDirty},this.fields)},markFieldsClean:function(){if(this.isDirty()){var e=arguments[0]?n(3).flatten(arguments):Object.keys(this.fields);e.forEach(function(e){this[e]&&(this[e].isDirty=!1)},this.fields),this.isDirty()||this.trigger("form:clean")}},markFieldsDirty:function(e){var t=!this.isDirty();e="string"==typeof e?[e]:e,e&&(e.forEach(function(e){this[e]&&(this[e].isDirty=!0)},this.fields),t&&this.trigger("form:dirty"))},triggerApplyAll:function(e){var t=this;e="string"==typeof e?[e]:e,e.forEach(function(e){return t.trigger("applyAll",e,t.get(e))})}})},function(e,t,n){"use strict";function i(e,t){return!e.constraints||n(3).any(e.constraints,n(3).partial(f,t))}function r(){var e=this,t=this.constraints=n(422).hydrateConstraintDefinitions.call(this,this.constraints);t.FORM=t.FORM||[],this.constraintConditions=this.constraintConditions||{},n(3).each(this.fields,function(t,n){var i=e.hasConstraintsOwnedBy(n);t.validity=i?g:m,t.message="",t.isValid=!0}),this.on("change",function(){o.call(e,Object.keys(e.changed))}),this.on("disabledChange",function(t){o.call(e,[t])})}function o(e){var t=Object.keys(e.reduce(c.bind(this),{})),i=[];n(3).each(this.constraintConditions,function(t,r){n(3).intersection(t.fields,e).length&&i.push(r)}),n(3).uniq(t.concat(i)).forEach(l,this)}function s(e){var t=void 0,n=m;h.call(this,e).some(function(e){switch(e.state){case _:return t=e.getLastError(),n=e.state,!0;case g:return n=e.state,!0}return!1}),a.call(this,e,n,t)}function a(e,t,n){var i=t===m,r=this.fields[e];r.validity=t,(r.isValid!==i||r.message!==n)&&(r.message=n,r.isValid=i,this.trigger("validation:"+e,r))}function l(e){var t=this;this.fields[e].validity=g,h.call(this,e).forEach(function(e){e.reset(t),e.getOwnerField&&(t.fields[e.getOwnerField()].validity=g)})}function u(e){var t=this,n=!0,i=e.every(function(e){var i=t.fields[e];return n=n&&i.validity===m,i.validity!==g});return i?n?m:_:g}function c(e,t){return d.call(this,t).forEach(function(i){var r=n(3).result(i,"getOwnerField")||t,o=e[r];o||(o=e[r]=[]),-1===o.indexOf(i)&&o.push(i)}),e}function d(e){return p.call(this,e,"affected")}function h(e){return p.call(this,e,"owned")}function p(e,t){var n=(this.constraints[e]||[]).slice(),i="owned"===t?function(t){return t.getOwnerField()===e}:function(t){return t.affectsField(e)};return n.push.apply(n,this.constraints.FORM.filter(i)),n}function f(e,t){return e===t||e.constructor===t||e.constructor===t.constructor}var g=n(172).UNKNOWN,m=n(172).VALID,_=n(172).INVALID;e.exports=new(n(21))(n(1288),{constraints:null,constaintConditions:null,before:{initialize:function(){r.call(this)}},override:{_validate:function(){return!0},isValid:function(){return n(3).every(this.fields,function(e){return e.validity===m})}},hasConstraintsOwnedBy:function(e){return h.call(this,e).length>0},resetFieldValidation:function(e){var t=this.fields[e];l.call(this,e),t.validity=this.hasConstraintsOwnedBy(e)?g:m,t.message="",t.isValid=!0,this.trigger("validation:"+e,t)},validate:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=t.fields,r=void 0===i?Object.keys(this.fields):i,o=n(55).defer(),l=r.filter(Boolean);switch(u.call(this,l)){case _:o.resolve(!1);break;case m:o.resolve(!0);break;case g:var d=n(3).chain(l).filter(function(t){return e.fields[t].validity===g}).reduce(c.bind(this),{}).map(function(t,i){var r=e.isConstraintEnabledForField.bind(e,i),o=n(3).partition(t,r),l=o[0],u=o[1];n(3).invoke(u,"disable");var c=n(3).invoke(l,"validate",e,e.get(i));return c.length?n(55).settled(c).always(s.bind(e,i)):void a.call(e,i,m)}).compact().value();n(55).all(d).always(function(){o.resolve(u.call(e,l)===m)})}return l.length===Object.keys(this.fields).length&&o.done(function(t){e.trigger("validation",t)}),o},getValidFieldValues:function(e){var t=this,i=n(55).defer();return this.validate({fields:e}).then(function(n){if(n){var r=e.map(function(e){return t.get(e)});i.resolve.apply(i,r)}else i.reject()}),i},isConstraintEnabledForField:function(e,t){var r=this.fields[e];if(!r)return!1;var o=this.constraintConditions[e],s=o?o.fields.map(this.get,this):[];return!r.disabled&&n(3).chain(d.call(this,e)).filter(function(e){return f(e,t)}).any(function(e){return o&&i(o,e)?Boolean(o.check.apply(r,s)):!0}).value()},getInvalidFields:function(){return n(3).compact(n(3).map(this.fields,function(e,t){return e.validity===_?t:void 0}))}})},function(e,t,n){(function(t){"use strict";function i(){this._modal||(this._modal=new(n(70))({width:600,Subview:n(1740)}),n(56).on("gsWarningButtonClicked",r,this),this._modal.on(n(70).Events.CLOSED,l,this)),this._modal.open()}function r(e){e&&e.isSubmit&&(u.set("dialog-shown",!0),a()),s.call(this)}function o(){return!u.get(d)&&n(63).isLoggedIn()}function s(){l.call(this),window.open(c,"_blank")}function a(){t.ajax({url:n(54).get("api_v2_host")+"users/fastpass",type:"GET",dataType:"json"}).done(function(e){e&&e.url&&n(148).insertScript(e.url)})}function l(){n(56).off(),this._modal&&(this._modal.off(),this._modal.close(),this._modal=null)}var u=new(n(111))("gs-warning-dialog"),c="https://www.soundcloudcommunity.com",d="dialog-shown";e.exports={_modal:null,redirectToHelpForum:function(){o()?i.call(this):(a(),s.call(this))}}}).call(t,n(1))},,function(e,t){"use strict";e.exports={or:function(e,t){return e|t}}},function(e,t,n){"use strict";function i(e){var t=void 0,i=e.name.replace(/\.[a-z0-9]{2,}$/,"");return t=i.replace(/_/g," ").replace(/(\S)-(\S)/g,"$1 - $2"),t=n(243).capitalize(t).trim(),t||i.trim()}function r(e){for(var t=e.length,n=new Array(t),i=0;t>i;i++)n[i]=String.fromCharCode(e[i]);return window.btoa(n.join(""))}e.exports={getTitleFromFile:i,getDataFromFile:function(e){var t=n(55).defer();return n(39).read(e,{onSuccess:function(o){var s=o.tags,a=n(3).pick({title:s.title||i(e),publisherArtist:s.artist,publisherAlbumTitle:s.album,tags:n(3).compact([s.genre]),artwork_data:s.picture?"data:"+s.picture.format+";base64,"+r(s.picture.data):void 0},n(3).identity);t.resolve(a)},onError:function(n){t.resolve({title:i(e)})}}),t}}},function(e,t,n){(function(t){"use strict";function i(e){var t=!e||e.indexOf(u)>-1?l:e;return t.replace(g,".json")}function r(e){return t.ajax({url:e,type:"GET",dataType:"json",timeout:d})}function o(e){var t,o=e.model,l=i(o.get("waveform_url")),u=h.get(l);return u?t=n(55).resolve({data:u}):(t=r(l).then(function(e){return{data:e.samples.reduce(m(e.height),new a(e.samples.length)),key:l}},function(){return n(55).resolve({key:l,data:_()})}),t.then(s)),t.then(function(t){e.waveformData=t.data}),t}function s(e){h.set(e.key,e.data)}var a=n(98).typedArrays?Uint8Array:Array,l=n(54).get("wisHost")+"/90GaSwazbrh1_m.png",u="/images/player-waveform-medium.png",c=500,d=1e4,h=new(n(251))({maxLength:c}),p=1.5,f=1800,g=/\.png$/,m=(e.exports={loadWaveformDataForView:o},n(3).memoize(function(e){return function(t,n,i){return t[i]=Math.round(Math.pow((e-n)/e,1/p)*e),t}})),_=n(3).memoize(function(){for(var e=new a(f),t=0;f>t;++t)e[t]=Math.round(15*Math.sin(t/f*Math.PI*10)+105);return e})}).call(t,n(1))},function(e,t,n){"use strict";e.exports=function(e){n(54).get("experiments")||n(54).set("experiments",n(1172)(e))}},function(e,t,n){"use strict";e.exports=function(e){var t=n(54).get("me");t?t.set(e,{parse:!0}):(t=new(n(60))(e,{isMe:!0,parse:!0}),t.baseUrl=function(){return this.getEndpointUrl("me")},t.saveUrl=function(){return this.getEndpointUrl("meUpdate")},n(54).set("me",t)),e&&(t.lastFetchTime=Date.now())}},function(e,t,n){"use strict";e.exports=function(e){n(54).get("rollouts")||n(54).set("rollouts",n(1182)(e))}},function(e,t){"use strict";var n=e.exports={segments:function(){return n._retrieveKruxValue("kxsegs")&&n._retrieveKruxValue("kxsegs").split(",")||[]},_retrieveKruxValue:function(e){var t="";return window.localStorage&&(t=window.localStorage.getItem(e)),void 0!==t&&""!==t?t:(window.navigator.cookieEnabled&&(t=window.document.cookie.match(e+"=([^;]*)"),t=t&&unescape(t[1])||""),t)}}},,function(e,t,n){"use strict";var i={};e.exports={loadLayout:function(e){var t,r=i[e];return r?r:(t=n(55).defer(),n(1135)("./"+e.replace("layouts/",""))(function(e){t.resolve(e)}),r=i[e]=t.promise())}}},,function(e,t,n){"use strict";e.exports=new(n(21))({requires:["adZone"],around:{parse:function(e,t){var i=n(80).parseResponse(t),r=i.data,o=[];return r&&o.push({ad_urn:i.ad_urn,campaign:"promoted",kind:r.kind,origin:r,promoted_by:i.promoted_by_user,promoted_by_urn:i.promoted_by_urn,tracking:i.tracking}),e(o)}},defaults:{parse:function(e){return e}},override:{url:function(){return null!==this.next_href?this.next_href:n(80).getAdUrl(this.adZone,n(3).result(this,"adZoneParams"))}}})},function(e,t,n){"use strict";function i(e,t,i){return this._shuffleEnabled&&n(3).isArray(t)&&t.length>1&&(t=n(3).shuffle(t)),e(t,i)}e.exports=new(n(21))({requirePrototype:n(72).prototype,requires:["unshuffle"],_shuffleEnabled:!1,isShuffled:function(){return this._shuffleEnabled},toggleShuffle:function(){var e=arguments.length<=0||void 0===arguments[0]?!this._shuffleEnabled:arguments[0];if(e!==this._shuffleEnabled){var t=this.models.slice();return e?t=n(3).shuffle(t):(t=n(3).sortBy(t,this.unshuffle),this._shuffleEnabled=e),this.reset(t),this._shuffleEnabled=e,this.trigger("shuffled",this,e),this}},around:{set:i}})},function(e,t,n){"use strict";var i=n(3).identity;e.exports=new(n(21))({requirePrototype:n(82).prototype,applyTo:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=t.recaptchas,o=void 0===r?[]:r,s=o.reduce(function(e,t){return e.fields[t]={defaultValue:""},e.fields[t+"_required"]={defaultValue:!1},e.constraints[t]=[[n(67),{message:n(51).t("Check the reCAPTCHA checkbox.")}]],e.constraintConditions[t]={fields:[t+"_required"],check:i},e},{fields:{},constraints:{},constraintConditions:{}}),a=s.fields,l=s.constraints,u=s.constraintConditions;this.merge(e,{fields:a,constraints:l,constraintConditions:u})},defaults:{toggleRecaptcha:function(e,t){var n;this.set((n={},n[e+"_required"]=t,n))}}})},,function(e,t,n){"use strict";function i(e){var t=e?"on":"off";this._onFieldsChange=this._onFieldsChange||n(3).throttle(r.bind(this),this.serialization.saveOnceIn,{leading:!1}),this[t](o.call(this),this._onFieldsChange)}function r(){var e=this,t=this.serialization.fields.reduce(function(t,n){return t[n]=e.get(n),t},{});l.set(this.serialization.storeKey,t)}function o(){return"change:"+this.serialization.fields.join(" change:")}function s(){return!this._isStoringFields&&this.serialization.storeKey&&this.serialization.fields&&this.serialization.fields.length}var a,l=new(n(111))("persistentFormFields","session");a={fields:[],storeKey:null,saveOnceIn:3e3,restoreAndStoreOnSetup:!1};e.exports=new(n(21))({_isStoringFields:!1,_onFieldsChange:null,after:{setup:function(){this.serialization=n(3).assign({},a,this.serialization),this.serialization.restoreAndStoreOnSetup&&(this.restoreFields(),this.startStoringFields())}},applyTo:function(e){e.constructor.onCleanup=function(e){e.stopStoringFields()}},restoreFields:function(){var e=l.get(this.serialization.storeKey);e&&this.set(e)},startStoringFields:function(){s.call(this)&&(this._isStoringFields=!0,i.call(this,!0))},stopStoringFields:function(){this._isStoringFields&&(this._isStoringFields=!1,i.call(this,!1),this._onFieldsChange=null)},clearStoredValues:function(){l.set(this.serialization.storeKey,null)},_getStore:function(){return l}})},function(e,t,n){"use strict";function i(e){return e&&new Date(e)}e.exports=new(n(21))(n(934),{requires:["requiredModelAttributes"],applyTo:function(e){e.constraints.FORM=(e.constraints.FORM||[]).concat([[n(497),{nullable:!0,message:n(51).t("Track must be made available before its made unavailable."),fields:["scheduledPublicDate","scheduledPrivateDate"]}]]),this.merge(e,{requiredModelAttributes:e.getScheduledAttributes()})},around:{getAttributesToBeSaved:function(e){var t=e.apply(this,[].slice.call(arguments,1));return n(3).assign(t,this.getScheduledAttributesToBeSaved()),t},getAttributesFromModel:function(e){var t=e.apply(this,[].slice.call(arguments,1)),r=this.getAudible();return n(3).assign(t,{scheduledPublic:!!r.get("scheduled_public_date"),scheduledPrivate:!!r.get("scheduled_private_date"),scheduledPublicDate:i(r.get("scheduled_public_date")),scheduledPrivateDate:i(r.get("scheduled_private_date")),scheduledTimezone:r.get("scheduled_timezone")}),t}}})},function(e,t,n){"use strict";function i(e,t,n){function i(){s.clearTimeout(l),s.clearTimeout(a)}function o(){e()&&(i(),n())}var s=window,a=s.setTimeout(i,t),l=s.setInterval(o,r);o()}var r=50,o=2e4,s=window.performance&&window.performance.timing,a="fetchStart",l=!0;e.exports=s?new(n(21))({defaults:{performanceSelector:null},after:{render:function(){var e,t,r,u=this;l&&(l=!1,(e=this.performanceSelector)&&(t=function(){return u.$(e).length},r=function(){var e=Date.now()-s[a];n(56).trigger("tracking:appLoad",{latency:e})},i(t,o,r)))}}}):new(n(21))({})},function(e,t,n){"use strict";e.exports=new(n(21))({requirePrototype:n(65).prototype,defaults:{isPrivate:function(){return"private"===this.get("sharing")},extractSecretToken:n(3).noop},isPublic:function(){return!this.isPrivate()},around:{url:function(e,t){
var i=this.get("secret_token"),r=e(t);return i&&this.isPrivate()?n(62).modify(r,{query:{secret_token:i}}):r},parse:function(e,t){var i;return"string"==typeof this.baseUrl&&(i=n(62).parse(this.baseUrl).query.secret_token),i||(i=this.extractSecretToken(t)),i&&(t.secret_token=i),e(t)}}})},function(e,t,n){(function(t){"use strict";function i(e,i){var r=n(3).reduce(i,function(i,r){var o=e.get(r);return n(3).isObject(o)?i[r]=t.extend(!0,{},o):e.attrExists(r)&&(i[r]=o),i},{}),o=n(3).reject(i,function(t){return e.attrExists(t)});this.rollback=function(){n(3).each(o,function(t){e.unset(t)}),e.set(r)}}e.exports=new(n(21))({requirePrototype:n(65).prototype,createSnapshot:function(e){return new i(this,e)}})}).call(t,n(1))},function(e,t,n){"use strict";var i=2e3,r=3e4,o=100;e.exports=new(n(21))({applyTo:function(e){var t=e.constructor;this.before(t,{onCleanup:function(e){e.pollOff()}})},after:{initialize:function(){this._polling={circuit:null,callbacks:{}}}},pollOn:function(e,t,s){var a=this._polling,l=a.circuit;l||(l=a.circuit=new(n(155))({tolerance:1,baseDelay:i,maxDelay:r,backoffRate:1.5,giveUp:o,enabled:!1}),l.on("enabled",function(){this.fetch({attrs:Object.keys(a.callbacks),batch:!1}),l.failed()},this).on("giveup",function(){this.pollOff()},this)),a.callbacks[e]=a.callbacks[e]||[],a.callbacks[e].length||l.succeeded(),this._polling.callbacks[e].push({callback:t,context:s}),this.on("change:"+e,t,s)},pollOff:function(e,t,i){var r,o=this._polling,s={};3===arguments.length&&o.callbacks[e]?(r=[],s[e]=[],o.callbacks[e].forEach(function(n){n.callback===t&&n.context===i?s[e].push(n):r.push(n)}),o.callbacks[e]=r,o.callbacks[e].length||delete o.callbacks[e]):e?(s={attr:o.callbacks[e]||[]},delete o.callbacks[e]):(s=o.callbacks,o.callbacks={}),n(3).each(s,function(e,t){e.forEach(function(e){this.off("change:"+t,e.callback,e.context)},this)},this),!Object.keys(o.callbacks).length&&o.circuit&&(o.circuit.dispose(),o.circuit=null)}})},function(e,t,n){"use strict";function i(e,t){return[l,e,t].join(u)}function r(e){var t=e.storage,n=e.keyName,i=e._store;if(t)try{return t.setItem(n,JSON.stringify(i)),!0}catch(r){return!1}}function o(e){return"local"===e&&n(98).localStorage?window.localStorage:"session"===e&&n(98).sessionStorage?window.sessionStorage:null}function s(e){var t=e.storage,n=e.keyName;if(t)try{return JSON.parse(t.getItem(n)||"{}")}catch(i){}return{}}function a(e){var t={dontPersist:!0};if(!e.key)return void n(3).each(n(3).values(d.local).concat(n(3).values(d.session)),function(e){e.reset(t)});c.lastIndex=0;var i=c.exec(e.key)||[],r=i[1],o=i[2];r&&o&&!function(){var e=d[r][o];if(e){var i=s(e),a=Object.keys(i);n(3).each(i,function(n,i){e.set(i,n,t)}),n(3).difference(e.keys(),a).forEach(function(n){e.unset(n,t)})}}()}var l="V2",u="::",c=new RegExp("^"+l+u+"(\\S+?)"+u+"(\\S+)");window.addEventListener("storage",a,!1);var d={local:{},session:{}};e.exports=new(n(21))({storage:null,keyName:null,type:null,namespace:null,around:{initialize:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?"local":arguments[2];return d[r][t]?d[r][t]:(d[r][t]=this,e(),this.type=r,this.namespace=t,this.storage=o(r,t),this.keyName=i(r,t),this._store=s(this),void(this.length=n(3).keys(this._store).length))}},after:{set:function(e,t,n){n&&n.dontPersist||r(this)},unset:function(e,t){t&&t.dontPersist||r(this)},reset:function(e){e&&e.dontPersist||r(this)}},dispose:function(){this.storage&&this.storage.removeItem(this.keyName),this.reset({dontPersist:!0}),delete d[this.type][this.namespace]},write:function(){r(this)}})},function(e,t,n){"use strict";e.exports=new(n(21))({onCleanup:null,onIncrement:null,onDecrement:null,after:{initialize:function(e){this._counts={},this._totalCount=0,this._needsGC=!1,e=e||{},this._autoCleanup=!!e.autoCleanup,this.onCleanup=e.onCleanup,this.onIncrement=e.onIncrement,this.onDecrement=e.onDecrement},reset:function(){this._counts={},this._totalCount=0,this._needsGC=!1},set:function(e,t){this._counts[e]||(this._counts[e]=1,this._totalCount+=1,this.onIncrement&&this.onIncrement(t,e,1))},unset:function(e){this._totalCount-=this.countFor(e),delete this._counts[e]}},before:{reset:function(){this.onCleanup&&this.forEach(this.onCleanup)}},countFor:function(e){return this._counts[e]||0},totalCount:function(){return this._totalCount},increment:function(e,t){return this.has(e)&&(t="number"==typeof t?t:1,t>0?(this._totalCount+=t,this._counts[e]=(this._counts[e]||0)+t,this.onIncrement&&this.onIncrement(this.get(e),e,t)):0>t&&this.decrement(e,-t)),this},decrement:function(e,t){return this.has(e)&&(t="number"==typeof t?t:1,t>0?(this._totalCount-=t,this._counts[e]=(this._counts[e]||1)-t,this.onDecrement&&this.onDecrement(this.get(e),e,t),this._counts[e]<=0&&(this._needsGC=!0,this._autoCleanup&&this.cleanup())):0>t&&this.increment(e,-t)),this},cleanup:function(){var e,t,n=this.onCleanup,i=!1;if(this._needsGC){for(e in this._counts)this._counts.hasOwnProperty(e)&&this._counts[e]<=0&&(n&&(t=this.get(e),n.call(t,t,e)),i=!0,this.unset(e));this._needsGC=!1}return i},changeKey:function(e,t){if(e!==t){var n=this.get(e),i=this.countFor(e);this.unset(e),this.set(t,n),this.increment(t,i-1)}}})},,,,,,,,,function(e,t,n){"use strict";e.exports=function(){function e(){V.toggleState("globalPlayLock",N.isBlockedFromSkipping())}function t(){this.layoutInfo=a()}function i(){S.call(this,this.source).done(function(e){e&&e.isPlayable()&&N.prefetchAudioAd(e)})}function r(e,t,n){var i,r=t.getCurrentSound(),o=this.getCurrentSound()!==r;V.getState("globalPlayLock")||(i=x.call(this,e,n.restoreUrl,{silent:!0}),T.call(this,t),o&&this.pauseCurrent(n),r&&(i||o)&&this._addToHistory(r,e),i&&this.trigger("change:source",e),r?this.playCurrent(n):this.playNext(n))}function o(e,t){e&&e===this.getCurrentSound()&&(e.playlist&&e.playlist.setCurrentSound(e),e.isPlayable()?(V._addToPlayHistory(e),e.play(t),n(196).addSound(e,t),e.playlist&&e===this.source&&(x.call(this,e.playlist,t&&t.restoreUrl),T.call(this,0))):v.call(this,e))}function s(e){var t,n,i=e.sound;i.isPlaying()&&(n=function(){i.off("pause",n),window.clearTimeout(t)},t=window.setTimeout(function(){n(),V.playNext()},j),i.on("pause",n))}function a(){var e=n(54).get("router").getLayoutInfo();return{args:e.args,layoutName:e.layoutName,url:window.location.href.replace(/^https?:\/\/[^\/]+\//,"")}}function l(){var e=this.source;e&&(u(e)&&(this.listenTo(e,"add",c).listenTo(e,"remove",d).listenTo(e,"reset",h),e.isPopulated()||e.fetch()),e.hold())}function u(e){return e instanceof n(72)}function c(e,t){var n=t.indexOf(e);n<=this.sourceCursor&&T.call(this,this.sourceCursor+1)}function d(e,t,n){n.index<=this.sourceCursor&&T.call(this,this.sourceCursor-1)}function h(){T.call(this,-1)}function p(e){e.sound.release()}function f(e){e.sound.hold()}function g(e,t){t[e]("finish",m,this)[e]("change:playable",_,this)}function m(e){y.call(this,e.sound)}function _(){var e=this.getCurrentSound();e&&!e.isPlayable()&&v.call(this,e)}function v(e){g.call(this,"off",e),y.call(this,e),L.call(this,e)}function y(e){this.playNext({userInitiated:!1}),e.playlist&&e===e.playlist.getLastSound()&&e.playlist.rewind(),e.seek(0)}function b(){if(!this.FallbackSource)return null;var e=this.getCurrentSound();return e&&e.isPublic()?new this.FallbackSource(null,{resource_id:e.id,resource_type:e.resource_type}):null}function w(e,t){return u(t)?e>-1&&e<t.length?(t.audibleAt||t.at).call(t,e):void 0:0===e?t:void 0}function x(e,t,n){var i=this,r=this.source;if(r===e)return!1;var o=e&&e.getAudioCursor?e.getAudioCursor():-1;return this.source=e,this.restoreUrl=t,l.call(this),T.call(this,o),r&&(this.stopListening(r),r.release()),n&&n.silent||this.trigger("change:source",this.source,r),this._autoplay&&!this._autoplayTimeout&&(this._autoplayTimeout=window.setTimeout(function(){i._autoplay=!1,i._autoplayTimeout=null,i.playCurrent({userInitiated:!1})},400)),!0}function k(e,t){t=t||{},x.call(this,e,t.restoreUrl)?this.playNext(t):this._fetchDeferred||this.playCurrent(t)}function S(e,t,i,r,o){var s,a,l,c,d,h,p=this,f=i||n(55).defer(),g=null==r?H:r;if(t=t||{},d={source:e},"pending"===f.state()){if(this._fetchDeferred&&this._fetchDeferred!==f&&this._fetchDeferred.reject(),this._fetchDeferred||(this._fetchDeferred=f,f.always(function(){p._fetchDeferred=null})),!t.userInitiated&&this.getState("repeating")&&(s=this.getCurrentSound()))s.isPlayable()?(d.historyCursor=this.historyCursor,f.resolve(s,d)):f.reject();else if(this.historyCursor<this.history.length-1)d.historyCursor=this.historyCursor+1,f.resolve(this.history[this.historyCursor+1].sound,d);else if(this.queue.length)d.queueIndex=0,f.resolve(this.queue[0],d);else if(e&&u(e)){for(h=-1,l=this.source===e?this.sourceCursor:0;!a&&l+ ++h<e.length;)if(a=l+h>-1&&w(l+h,e)){if(O(a))break;a=h>0||o?a.getFirstSound():a.getNextSound()}a&&O(a)?a.fetch().fail(f.reject).done(function(){S.call(p,e,t,f,r,o)}):a?(d.sourceCursor=l+h,d.initialFallback=!!o,f.resolve(a,d)):!e.isFullyPopulated()&&g?e.fetch({add:!0,remove:!1}).fail(f.reject).done(function(){S.call(p,e,t,f,g-1)}):e.isLooping&&e.length?(T.call(this,-1),S.call(this,e,t,f,g,o)):(c=b.call(this))&&c!==e?S.call(this,c,t,f,g,!0):f.resolve(void 0)}else e?(a="playlist"===e.resource_type&&e.getState("repeating")&&!e.getNextSound()?e.getFirstSound():-1===this.sourceCursor?e.getFirstSound():e.getNextSound(),a?(d.sourceCursor=0,f.resolve(a,d)):S.call(this,b.call(this),t,f,g,!0)):f.reject();return f}}function T(e){"number"==typeof e?this.sourceCursor=e:u(this.source)?this.sourceCursor=this.indexOfAudibleInSource(e,this.source):this.sourceCursor=0,this.source&&this.source.setAudioCursor&&this.source.setAudioCursor(this.sourceCursor)}function E(e){var t,n=this.getCurrentSound();this.historyCursor!==e&&(n&&g.call(this,"off",n),this.historyCursor=e,t=this.getCurrentSound(),t&&g.call(this,"on",t),this.trigger("change:currentSound",{prev:n,current:t}))}function A(e,t,i,r,o){return t instanceof A?t:(this.sound=e,this.layoutInfo=n(3).clone(i),this.sourceInfo=t&&t.getSourceInfo()||{},this.queryPosition=o,this.restoreUrl=r,this.reposterUrn=C(t),void(this.promotedInfo=D(e,t)))}function C(e){var t,i=I(e);return i&&(t=n(100).generate("user",i.get("user").id)),t}function I(e){var t=e&&e.at&&e.at(V.sourceCursor),i=t&&n(3).isFunction(t.get)&&/repost$/.test(t.get("type"));return i&&t}function D(e,t){if(!u(t))return null;var i=V.indexOfAudibleInSource(e,t),r=t.at(i);return n(3).result(r,"isPromoted")?n(80).extractPromotedAttrs(r):null}function P(e){L.call(this,e),F.call(this,e),M.call(this,e)}function M(e){var t=this.source;t&&(u(t)?(t.remove(e),e.release()):"sound"===t.resource_type&&(t.release(),this.unsetInitialSource(t)))}function R(e,t,n){for(var i=e.length;i--;)e[i].sound===t&&(p(e[i]),n&&(this.historyCursor>i||this.historyCursor===i&&i===e.length-1)&&this.historyCursor--,e.splice(i,1))}function L(e){R.call(this,this.history,e,!0)}function F(e){R.call(this,this.queue,e)}function O(e){return e&&e.hasDataForPlay&&!e.hasDataForPlay()}var N=void 0,B=void 0,$=void 0,U=5e3,z=3,H=3,j=2500,V=n(3).assign({},n(22).Events,{states:{globalPlayLock:{initial:!1},repeating:{initial:!1}},history:[],historyCursor:-1,source:null,sourceCursor:-1,initialSourcePriority:-(1/0),queue:[],layoutInfo:{},restoreUrl:null,FallbackSource:null,_fetchDeferred:null,_sessionPlays:0,_autoplay:!1,_autoplayTimeout:null,_cancelHistorySoundTimer:n(3).noop,initialize:function(t,n,i){N=t,B=n,$=i,V.listenTo(N,"state:isInRequiredListenPeriod",e).listenTo(N,"state:isAllowedToSkipImmediately",e).listenTo(B,"destroy",function(e){var t=e.targetType,n=e.targetModel;"sound"===t&&P.call(this,n)}).listenTo($,"geoBlocked",s)},setInitialSource:function(e,n,i){n=n||0,-1===this.sourceCursor&&n>this.initialSourcePriority&&(this.initialSourcePriority=n,t.call(this),x.call(this,e,i))},unsetInitialSource:function(e){-1===this.sourceCursor&&this.source===e&&(x.call(this,null),this.initialSourcePriority=-(1/0))},indexOfAudibleInSource:function(e,t){var n=-1;return u(t)?(t.any(function(i,r){var o=w(r,t);return o&&(o===e||o.getSoundIndex(e)>-1)?(n=r,!0):void 0}),n):t===e?0:t.getSoundIndex(e)},hasNextSound:function(){var e=this.source,t=this.getCurrentSound(),n=u(e);return!!(this.historyCursor<this.history.length-1||this.queue.length>0||e&&n&&(!e.isFullyPopulated()||e.length&&this.sourceCursor<e.length-1)||e&&!n&&(this.sourceCursor<0?e.getFirstSound():e.getNextSound())||t&&t.isPublic()&&this.FallbackSource)},isSourcePlaying:function(e){var t=V.getCurrentSound();return!!t&&t.isPlaying()&&V.isSourceActive(e)},isSourceActive:function(e){var t=V.getCurrentMetadata(),i=t&&t.sourceInfo;return n(3).isEqual(i,e.getSourceInfo())},hasCurrentSound:function(){return!(!this.getCurrentSound()&&!this.hasNextSound())},getCurrentSound:function(){var e=this.history[this.historyCursor];return e&&e.sound},_getPrevSound:function(){var e=this.history[this.historyCursor-1];return e&&e.sound},_addToHistory:function(e,t){var i,r,o,s,a,l=e!==this.getCurrentSound();i=this.historyCursor+(l?1:0),r=n(54).get("playHistoryLength"),a=this.source&&this.source.getQueryPosition?this.source.getQueryPosition():this.sourceCursor,s=new A(e,t,this.layoutInfo,this.restoreUrl,a),this.history.splice(i).forEach(p),this.history.push(s),f(s),o=Math.max(0,this.history.length-r),o&&(this.history.splice(0,o).forEach(p),this.historyCursor-=o),E.call(this,this.history.length-1)},enableAutoplay:function(){this.source?this.playCurrent({userInitiated:!1}):this._autoplay=!0},play:function(e,n){n=n||{};var i=n.keepSource&&this.source||n.source||e.playlist||e;t.call(this),O(e)?e.fetch().done(r.bind(this,i,e,n)):r.call(this,i,e,n)},pause:function(e,t){e.pause(t)},playCurrent:function(e){var n=this.getCurrentSound();n?(e=e||{},N.isUserAdConsumer()?(N.whenAdFinished(n,e).always(o.bind(this,n,e)),i.call(this)):o.call(this,n,e)):(t.call(this),V.playNext(e))},pauseCurrent:function(e){var t=this.getCurrentSound();t&&t.pause(e)},toggleSource:function(e,n){var i=this.getCurrentSound();this.source===e&&this.sourceCursor>-1&&i&&i.isPlaying()?this.pauseCurrent(n):(t.call(this),k.call(this,e,n))},toggleCurrent:function(e){var t,n=this.getCurrentSound();if(V.getState("globalPlayLock"))return t=N.isUserAdConsumer()&&N.getCurrentSound(),void(t&&t.toggle(e));if(n){if(N.isUserAdConsumer()&&(t=N.getCurrentSound()))return void t.toggle(e);n.toggle(e)}else this.playCurrent(e)},playNext:function(e){var t=this;return e=n(3).assign({seek:0,isRepeating:V.getState("repeating")},e),N.isUserAdConsumer()&&N.getCurrentSound()?(N.skip(),n(55).resolve()):(this.pauseCurrent(),S.call(this,this.source,e).done(function(n,i){if(i){var r,o,s=i.source;r=t.FallbackSource&&s instanceof t.FallbackSource?t.fallbackRestoreFn(t.getCurrentSound()):e.restoreUrl,x.call(t,s,r,e),n&&(null!=i.historyCursor?E.call(t,i.historyCursor):(null!=i.queueIndex?o=t.queue.shift():null!=i.sourceCursor&&(T.call(t,i.sourceCursor),o=t.source,u(s)&&i.sourceCursor>=s.length-z&&!s.isFullyPopulated()&&s.fetch({add:!0,remove:!1})),t._addToHistory(n,o)),t.playCurrent(e),i.initialFallback&&t.trigger("fallback"))}}))},playPrev:function(e){var t=this.getCurrentSound(),i=this._getPrevSound();N.isUserAdConsumer()&&N.getCurrentSound()&&N.skip(),e=n(3).assign({seek:0},e),!i||t&&t.currentTime()>U?(t.seek(0),t.isPlaying()||t.play(e)):i&&(this.pauseCurrent(),E.call(this,this.historyCursor-1),this.playCurrent(e))},setFallbackSource:function(e,t){this.FallbackSource=e,this.fallbackRestoreFn=t},restoreState:function(){var e,t=this._getCurrentRestoreUrl(),i=this.getCurrentSound(),r=n(54).get("router");t?(e=i.playlist||i,r.navigate(t,{trigger:!0}),n(54).set("restoreToSound",e.resource_type+e.resource_id)):i&&r.navigateToRoute("listen",[i],{trigger:!0})},_getCurrentRestoreUrl:function(){var e=this.history[this.historyCursor];return e&&e.restoreUrl||""},getCurrentMetadata:function(){var e=N.isUserAdConsumer()?N.getCurrentSound():null;return e?new A(e,this.source,a(),null):this.history[this.historyCursor]},_addToPlayHistory:function(e){var t=this;if(n(54).get("me").id){var i=function(){t._cancelHistorySoundTimer(),n(919).waitForPlayThreshold(e,V.getCurrentMetadata()).then(function(e){var t=e.soundId,n=e.playContext;B.addToPlayHistory(t,n,!0)})};e.on("time",i),this._cancelHistorySoundTimer(),this._cancelHistorySoundTimer=function(){e.off("time",i),t._cancelHistorySoundTimer=n(3).noop}}}});return n(322).applyTo(V),V}},function(e,t,n){"use strict";var i=9e5;e.exports=n(72).extend({defaults:{pollingInterval:i},url:function(){return n(3).result(this,"baseUrl")},parse:function(e){return e},fetch:function(e){var t=e&&e.url||n(3).result(this,"url");return t?n(22).Collection.prototype.fetch.call(this,e):n(55).defer().done(e&&e.success).resolve([])},bulkFetch:function(){return this.fetch()},setLimit:n(3).noop,isFullyPopulated:function(){return!1},startPolling:function(){this.isPolling()||this._pollingId||(this._pollingId=window.setInterval(this.fetch.bind(this),this.options.pollingInterval))},stopPolling:function(){window.clearInterval(this._pollingId),this._pollingId=null},isPolling:function(){return!!this._pollingId}})},function(e,t,n){"use strict";function i(){this.setDirty(!0)}e.exports=n(329).extend({className:"g-box-full sceneLayer",addNode:function(e){var t=e[0],r=n(3).assign({el:this.el,scale:this.scale},e[1]),o=new t(r);o.className&&this.$el.addClass(o.className),this.addSubview(o).on("dirty",i,this).render()},onCanvasResize:function(){n(3).invoke(this.subviews,"onResize")},setDirty:function(e){(this.isDirty=e)&&this.trigger("dirty")},update:function(){if(!this.disposed&&this.isDirty){var e,t,n=!1;for(this.context.clearRect(0,0,this.el.width,this.el.height),e=0;t=this.subviews[e];++e)t.draw(),n=n||t.isDirty;this.setDirty(n)}}})},function(e,t,n){"use strict";function i(){r.call(this)}function r(){this._raf||(this._raf=window.requestAnimationFrame(this.update))}e.exports=n(156).extend([n(22).Events,{_layers:null,_raf:null,initialize:function(){this._layers=[],this.update=this.update.bind(this)},teardown:function(){window.cancelAnimationFrame(this._raf),this._raf=null;for(var e;e=this._layers.pop();)this.stopListening(e)},getLayers:function(){return this._layers},addLayer:function(e){this._layers.push(e),this.listenTo(e,"dirty",i),e.isDirty&&r.call(this)},update:function(){this._raf=null;var e,t;for(e=0;t=this._layers[e];++e)t.isDirty&&t.update()}}])},function(e,t,n){"use strict";function i(){var e=n(54).get("me"),t=r(e.getConsumerPlan()),i=r(e.getPlan()),o=n(1292).or(t,i);return"number"==typeof o&&n(192).set(n(3).assign({},f,{value:o,expirationInDays:30})),o}function r(e){var t=0;switch(e){case h:case u:t=16;break;case p:case c:t=32;break;case s:t=64;break;case a:case d:case l:t=0}return t}var o=n(69).productIds,s=o.CONSUMER_SUBSCRIPTION_HIGH_TIER,a=o.CONSUMER_SUBSCRIPTION_FREE,l=o.CREATOR_SUBSCRIPTION_FREE,u=o.CREATOR_SUBSCRIPTION_PRO,c=o.CREATOR_SUBSCRIPTION_PRO_UNLIMITED,d=o.CREATOR_GIFT_FREE,h=o.CREATOR_GIFT_PRO,p=o.CREATOR_GIFT_PRO_UNLIMITED,f={name:"ja",domainStrict:!1,secure:!1};e.exports={_subsCookie:null,initialize:function(){var e=this;n(63).isLoggedIn()&&(this._subsCookie=i()),n(56).once("connect:hasUserData",function(){e._subsCookie=i()}),n(56).once("connect:logout",function(){n(192).unset(f),e._subsCookie=null})}}},function(e,t,n){"use strict";e.exports={include:function(){n(3).each({id:1014549368,language:"en",format:"3",color:"ffffff",label:"zEeoCJCauAIQ-Jbj4wM",value:0},function(e,t){window["google_conversion_"+t]=e}),n(148).insertScript("//www.googleadservices.com/pagead/conversion.js")}}},function(e,t,n){"use strict";e.exports={include:function(){var e=window._comscore=window._comscore||[];e.push({c1:"2",c2:"16601931"}),n(148).insertScript("https://sb.scorecardresearch.com/beacon.js",{removeAfterLoad:!0})}}},function(e,t,n){"use strict";e.exports={include:function(){var e=window._gaq=window._gaq||[];e.push(["_setAccount","UA-2519404-22"],["_gat._anonymizeIp"],["_setSampleRate","1"],["_trackPageview"],["_trackPageLoadTime"]),n(148).insertScript("https://ssl.google-analytics.com/ga.js")}}},function(e,t,n){"use strict";e.exports={include:function(){var e=n(54).get("geoip"),t=e&&e.get("country_code");"GB"===t&&n(148).insertScript("//cdn.krxd.net/controltag?confid=Kn2GCuRg")}}},function(e,t,n){"use strict";e.exports={include:function(){window._qoptions={qacct:"p-47_zcqmJsLHXQ"},n(148).insertScript("//secure.quantserve.com/quant.js")}}},function(e,t,n){"use strict";var i=n(96).INITIAL,r=n(96).CURRENT_COMMENT,o=n(96).CURRENT_TIMESTAMP,s=n(96).ACTIVE_TIMESTAMP,a=300,l=3e3,u=1e3,c=function(){this.setup.apply(this,arguments)};c.extend=n(22).Model.extend,n(3).assign(c.prototype,n(22).Events,{constructor:c,currentComment:null,activeTimestamp:null,currentTimestamp:null,commentQuotaTimeout:null,commentQuotaExceeded:!0,commentIntervalTimeout:null,commentIntervalExceeded:!0,currentState:i,interactingWithComments:!1,setup:function(e,t,a){this.collection=new(n(475))(null,{sound_id:e,secret_token:a}),this.listenTo(this,i,this.onInitialState).listenTo(this,r,this.onCurrentComment).listenTo(this,o,this.onCurrentTimestamp).listenTo(this,s,this.onActiveTimestamp),this.sound=new(n(64))({id:e,resource_id:t}),this.listenTo(this.sound,"time",this.onAudioTime)},dispose:function(){this.stopListening(),this.sound.release(),this.collection.release()},onInitialState:function(){this.activeTimestamp=null,this.currentComment=null,this.currentTimestamp=null},onCurrentComment:function(e,t){this.activeTimestamp=null,this.currentComment=t,this.currentTimestamp=null},onCurrentTimestamp:function(e){this.activeTimestamp=null,this.currentComment=null,this.currentTimestamp=e},onActiveTimestamp:function(e){this.activeTimestamp=e,this.currentComment=null,this.currentTimestamp=null},goToState:function(e){var t=this.canGoToState.apply(this,arguments);return t&&(this.currentState=e,this.trigger.apply(this,arguments)),t},canGoToState:function(e){var t=this.activeTimestamp&&this.currentState===s;switch(e){case o:return!t;case r:return this.commentIntervalExceeded&&arguments[1]!==this.currentComment&&!t;case i:return!0;case s:var n=arguments[1];return n!==this.activeTimestamp&&n<=this.sound.getMediaDuration();default:return!1}},onAudioTime:n(3).throttle(function(e){var t=this;if(!this.disposed){var n,i=e.sound.currentTime(),s=window;!this.interactingWithComments&&this.sound.isPlaying()&&(n=this.collection.getCommentAtTimestamp(i,a),n?this.goToState(r,i,n)&&(s.clearTimeout(this.commentIntervalTimeout),this.commentIntervalExceeded=!1,s.setTimeout(function(){t.commentIntervalExceeded=!0},u),s.clearTimeout(this.commentQuotaTimeout),this.commentQuotaExceeded=!1,this.commentQuotaTimeout=s.setTimeout(function(){t.commentQuotaExceeded=!0,t.onAudioTime(e)},l)):this.commentQuotaExceeded&&this.goToState(o,i))}},a)}),e.exports=n(522).applyTo(c,{onCleanup:function(e){e.dispose()},cleanupInstantly:!0,hashFn:function(e){return e}})},function(e,t,n){(function(t){"use strict";function i(e){function t(e){return u=!e&&u?Math.min(1e4,1.5*u):1e3}function i(e){c=window.setTimeout(r,t(e))}function r(){l=o(e).done(s).fail(a)}function s(e){switch(e.status){case n(290).QUEUED:case n(290).PREPARING:i();break;case n(290).TRANSCODING:i(e.percentage===d),d=e.percentage,h.notify(d);break;case n(290).FINISHED:h.resolve();break;case n(290).NOT_FOUND:case n(290).FAILURE:h.reject()}}function a(e){500===e.status?i():h.reject()}var l,u,c,d,h=n(55).defer(),p=h.promise();return i(),p.abort=function(){window.clearTimeout(c),l&&l.abort()},p}function r(e){var i,r;return r=t.ajax({url:"transcodings",type:"POST",data:{uid:e},contentType:"application/json"}),i=r.then(null,function(e){return 500===e.status?n(55).resolve():void 0}),i.abort=r.abort.bind(r),i}function o(e){return t.getJSON("transcodings/"+e)}e.exports=function(e){var t,n,o;return t=r(e),o=t.then(function(){return n=i(e)}),o.abort=function(){t.abort(),n&&n.abort()},o}}).call(t,n(1))},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";e.exports=n(65).extend({_audible:null,setup:function(){var e,t=this.get("urn");t&&(e=n(100).getAsAttributes(t),this._audible=new(n(76))({resource_type:e.resource_type,id:e.id}),this.addSubmodel(this._audible))},getAudible:function(){return this._audible}})},function(e,t,n){"use strict";function i(){var e=Math.min(this.getRequiredListenPeriod(),this.sound.getMediaDuration()),t=this.sound.currentTime();return e-t}function r(e){this._monetizableTrack.trigger("ad:"+e.type,e)}var o=function(e,t){return t.reduce(function(e,t){return e&&e[t]},e)};e.exports=n(65).extend({resource_type:"audio_ad",submodelMap:{sound:n(64)},_monetizableTrack:null,baseUrl:function(){return n(80).getAudioAdsUrl({trackId:this.getMonetizableTrack().id})},setup:function(){this.options.requiredListenPeriod=this.options.requiredListenPeriod||0},createSubmodel:function(e,t){var i;"sound"===t?(i=this.get("sound"),this.sound=new(n(64))(n(3).assign(i,{resource_id:{ad_target_id:this.resource_id,sound_id:i.id}})),this.sound.setMonetizableTrack(this._monetizableTrack),this.listenTo(this.sound,"buffering:start buffering:end",r)):n(65).prototype.createSubmodel.apply(this,arguments)},parse:function(e){if(!e||!e.promoted)return{};var t=e.promoted;n(80).parseResponse({promoted:[t]});var i=e.track,r=o(t,["data","audio"]),s=o(t,["data","companion_display"])||{},a=function(){return{audio:r,companion_display:s,sound:n(3).assign({ad_type:"internal"},i),user:i.user}},l=function(){return{audio:r,companion_display:s,sound:n(3).extend({ad_type:"external"},n(3).pick(r,["url","duration"]))}};return i?a():r&&r.url?l():{}},isPopulated:function(){var e="MONETIZE"===this.getMonetizableTrack().get("policy");return e?n(65).prototype.isPopulated.call(this):!0},getMsUntilCanSkip:function(){return Math.max(i.call(this),0)},getRequiredListenPeriod:function(){return this.get("audio").skippable?this.options.requiredListenPeriod:this.sound.get("duration")},isSkippableRightNow:function(){return i.call(this)<=0},getMonetizableTrack:function(){return this._monetizableTrack},configureMonetizableTrack:function(e){this._monetizableTrack=e},getLandingPage:function(){var e=this.get("companion_display")||{},t=e.landing_page;return t}})},,,function(e,t,n){"use strict";var i=[n(173).anySCLinkRegex,/^https:\/\/play.google.com\/.*id\=com\.soundcloud\.android/,/^https:\/\/itunes.apple.com\/.*\/soundcloud\//,/^https:\/\/soundcloudcontests.com\b/,/^https:\/\/docs.google.com\/a\/soundcloud\.com\//];e.exports=n(65).extend({resource_type:"dashbox",baseUrl:function(){return n(80).getDashboxUrl(this.options.adZone,n(51).getLocale())},parse:function(e){return n(80).parseDashboxResponse(e)},isAd:function(){var e=this.get("click_through_url")||this.get("landing_page");return e?!i.some(e.match,e):!1},isStandardDashbox:function(){return!!this.get("body")},isVisualDashbox:function(){return!!this.get("ad_visual")},hasContent:function(){return this.isStandardDashbox()||this.isVisualDashbox()}})},function(e,t,n){"use strict";e.exports=n(65).extend({},{neverRelease:!0,hashFn:function(){return 1}})},,function(e,t,n){"use strict";e.exports=n(65).extend({resource_type:"soundVisual",hasDataForView:function(){return!0},baseUrl:n(3).noop},{hashFn:function(e){return e.urn}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-collection>.l-nav{margin:30px 0}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-messages-left{position:fixed;top:45px;bottom:0;width:350px;overflow:hidden}.l-messages-main{padding-left:380px}@media (max-width:1079px){.l-messages-left{width:270px}.l-messages-main{padding-left:300px}}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".listen-about .l-main{min-height:230px}@media (max-width:1079px){.listen-about>.l-sidebar-left{display:none}}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-listen-wrapper{position:relative}.l-listen-wrapper .l-about-main{margin-right:330px;padding-top:20px}.l-listen-wrapper .l-about-rows{padding-right:30px;border-right:1px solid #f2f2f2}.l-listen-wrapper .l-about-row{margin-bottom:20px}.l-listen-wrapper .l-about-row:last-child{margin-bottom:0}.l-listen-wrapper .l-about-top>.listenEngagement{padding-top:0}.l-listen-wrapper .l-sidebar-right{top:30px;right:0;position:absolute;bottom:auto;width:300px;margin-bottom:50px}.l-listen__mainContent{position:relative}.l-listen__mainContent>.l-about-left{position:absolute;top:0;left:0;width:120px}.l-listen__mainContent>.l-about-right{padding-left:150px}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-oscp{display:-webkit-flex;display:-ms-flexbox;display:flex}.l-oscp.m-about{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.l-oscp>.l-main{-webkit-flex:1;-ms-flex:1;flex:1}.l-oscp__mainContainer{-webkit-flex:3;-ms-flex:3;flex:3}.l-oscp>.l-sidebar{padding-left:30px;padding-top:30px;border-left:1px solid #f2f2f2;-webkit-flex:1;-ms-flex:1;flex:1}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-premium-content{padding-top:30px}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-search{position:relative}.l-search .l-fixed-top{position:absolute;top:0;left:0}.l-search .l-fixed-left{position:absolute;top:94px;left:0;bottom:0;width:200px}.l-search .l-main{margin:0 0 0 230px;padding-top:84px}@media (max-width:1079px){.l-search .l-main{margin-left:220px}}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,"@media (max-width:1079px){.l-settings-layout .l-fluid-fixed .l-main{margin-right:0;padding-right:0;border-right:0}.l-settings-layout .l-fluid-fixed .l-sidebar-right{display:none}}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-signin .l-main{width:400px;height:500px;margin:30px auto;padding:0 30px;border:1px solid #e5e5e5}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-station-wrapper{position:relative}.l-station-wrapper .l-about-main{margin-right:330px;padding-top:20px}.l-station-wrapper .l-about-rows{padding-right:30px;border-right:1px solid #f2f2f2}.l-station-wrapper .l-about-row{margin-bottom:20px}.l-station-wrapper .l-about-row:last-child{margin-bottom:0}.l-station-wrapper .l-sidebar-right{top:30px;right:0;position:absolute;bottom:auto;width:300px;margin-bottom:50px}.l-station__mainContent{position:relative}.l-station__mainContent>.l-about-left{position:absolute;top:0;left:0;width:120px}.l-station__mainContent>.l-about-right{padding-left:150px}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-two-column-sound-hero{position:relative}.l-two-column-sound-hero .l-sidebar-right{position:absolute;top:30px;bottom:0;right:0;width:300px}.l-two-column-sound-hero .l-sidebar-right .l-fixed{width:300px;overflow:hidden}.l-two-column-sound-hero .l-sidebar-right .l-footer{position:relative;top:-30px;padding-bottom:30px}.l-two-column-sound-hero .l-main{padding:0 30px 0 0;margin:0 330px 0 0}.l-two-column-sound-hero .l-listen-content{position:relative;padding:20px 0 0 0;margin:0}@media (max-width:1079px){.l-two-column-sound-hero .l-main{padding-right:20px;margin-right:320px}}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,"",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-fluid-fixed .l-user-main{margin-top:20px;padding-top:0}.l-fluid-fixed .l-user-sidebar-right{top:0}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".calloutBackground{position:fixed;top:0;left:0;bottom:0;right:0}.calloutBackground.m-hidden{opacity:0}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".callout{position:absolute;top:0;left:0;bottom:0;right:0;display:none}.callout.m-active{display:block}.callout__bubble{position:absolute;background-color:#fff;width:300px;padding:25px;box-sizing:border-box;border-radius:4px;transition:opacity .3s ease-in-out,-webkit-transform .3s ease-in-out;transition:opacity .3s ease-in-out,transform .3s ease-in-out}.callout.m-hidden .callout__bubble{opacity:0;-webkit-transform:translateY(-8px);transform:translateY(-8px)}.callout__bubble::before{content:'';position:absolute;bottom:-8px;left:40px;padding:10px;border-radius:2px;width:0;background-color:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.callout__button{float:right}.callout__title{margin-bottom:10px}.callout__bubble.ui-flipped-bottom::before{bottom:auto;top:-8px}.callout__bubble.ui-flipped-left::before{left:auto;right:40px}.callout.m-hidden .callout__bubble.ui-flipped-bottom{-webkit-transform:translateY(8px);transform:translateY(8px)}.callout__bubble.ui-flipped-bottom{-webkit-transform:translateY(0);transform:translateY(0)}",""]);
},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-fixed-fluid{position:relative}.l-fixed-fluid .l-sidebar-left{position:absolute;top:30px;bottom:0;left:0;width:200px}.l-fixed-fluid .l-sidebar-left .l-fixed{width:200px}.l-fixed-fluid .l-main{margin:0 0 0 230px;padding-top:30px}.l-fixed-fluid .l-sidebar-left>.l-footer{position:fixed;bottom:0;width:200px}@media (max-width:1079px){.l-fixed-fluid .l-main{margin-left:220px}}",""])},,function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-fluid-fixed{position:relative}.l-fluid-fixed .l-sidebar-right{position:absolute;top:30px;bottom:0;right:0;width:300px}.l-fluid-fixed .l-sidebar-right .l-fixed{width:300px}.l-fluid-fixed .l-sidebar-right .l-footer{position:relative;padding-bottom:80px}.l-fluid-fixed .l-sidebar-right .sidebarModule.mobileApps{margin-bottom:0;border-bottom:none}.l-fluid-fixed .l-main{padding:30px 30px 0 0;margin:0 330px 0 0}@media (max-width:1079px){.l-fluid-fixed .l-main{padding-right:20px;margin-right:320px}}",""])},,function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".l-one-column>.l-main{padding:30px 0}",""])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){/** @license
	 * eventsource.js
	 * Available under MIT License (MIT)
	 * https://github.com/Yaffle/EventSource/
	 */
!function(e){"use strict";function t(){this.data={}}function n(){this.listeners=new t}function i(e){c(function(){throw e},0)}function r(e){this.type=e,this.target=void 0}function o(e,t){r.call(this,e),this.data=t.data,this.lastEventId=t.lastEventId}function s(e,t){var n=e;return n!==n&&(n=t),E>n?E:n>A?A:n}function a(e,t,n){try{"function"==typeof t&&t.call(e,n)}catch(r){i(r)}}function l(t,i){function l(){z=y,void 0!=N&&(N.abort(),N=void 0),0!==B&&(d(B),B=0),0!==$&&(d($),$=0),R.readyState=y}function u(e){var n="";if(z===v||z===_)try{n=N.responseText}catch(i){}var u=void 0,h=!1;if(z===_){var p=0,f="",g=void 0;if("contentType"in N)""!==e&&"error"!==e&&(p=200,f="OK",g=N.contentType);else try{p=N.status,f=N.statusText,g=N.getResponseHeader("Content-Type")}catch(i){p=0,f="",g=void 0}if(void 0==g&&(g=""),0===p&&""===f&&"load"===e&&""!==n&&(p=200,f="OK",""===g)){var E=/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(t);void 0!=E&&(g=E[1])}if(200===p&&T.test(g)){if(z=v,F=!0,L=D,R.readyState=v,u=new r("open"),R.dispatchEvent(u),a(R,R.onopen,u),z===y)return}else if(0!==p&&(200!==p||""!==g)){var C="";C=200!==p?"EventSource's response has a status "+p+" "+f.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+g.replace(/\s+/g," ")+". Aborting the connection.",c(function(){throw new Error(C)},0),h=!0}}if(z===v){n.length>U&&(F=!0);for(var I=U-1,O=n.length,$="\n";++I<O;)if($=n.charAt(I),W===b&&"\n"===$)W=w;else if(W===b&&(W=w),"\r"===$||"\n"===$){if("data"===G?H.push(Y):"id"===G?j=Y:"event"===G?V=Y:"retry"===G?(D=s(Number(Y),D),L=D):"heartbeatTimeout"===G&&(P=s(Number(Y),P),0!==B&&(d(B),B=c(q,P))),Y="",G="",W===w){if(0!==H.length&&(M=j,""===V&&(V="message"),u=new o(V,{data:H.join("\n"),lastEventId:j}),R.dispatchEvent(u),"message"===V&&a(R,R.onmessage,u),z===y))return;H.length=0,V=""}W="\r"===$?b:w}else W===w&&(W=x),W===x?":"===$?W=k:G+=$:W===k?(" "!==$&&(Y+=$),W=S):W===S&&(Y+=$);U=O}z!==v&&z!==_||!("load"===e||"error"===e||h||U>1048576||0===B&&!F)?0===B&&(F=!1,B=c(q,P)):(h?l():(""!==e||0!==B||F||c(function(){throw new Error("No activity within "+P+" milliseconds. Reconnecting.")},0),z=m,N.abort(),0!==B&&(d(B),B=0),L>16*D&&(L=16*D),L>A&&(L=A),B=c(q,L),L=2*L+1,R.readyState=_),u=new r("error"),R.dispatchEvent(u),a(R,R.onerror,u))}function h(){u("progress")}function p(){u("load")}function E(){u("error")}function C(){u(4===N.readyState?0===N.status?"error":"load":"progress")}t=t.toString();var I=f&&void 0!=i&&Boolean(i.withCredentials),D=s(1e3,0),P=s(45e3,0),M="",R=this,L=D,F=!1,O=void 0!=i&&void 0!=i.Transport?i.Transport:g,N=new O,B=0,$=0,U=0,z=m,H=[],j="",V="",q=void 0,W=w,G="",Y="";"readyState"in N&&void 0!=e.opera&&($=c(function K(){3===N.readyState&&u("progress"),$=c(K,500)},0)),q=function(){if(B=0,z!==m)return void u("");if((!("ontimeout"in N)||"sendAsBinary"in N||"mozAnon"in N)&&void 0!=e.document&&void 0!=e.document.readyState&&"complete"!==e.document.readyState)return void(B=c(q,4));N.onload=p,N.onerror=E,"onabort"in N&&(N.onabort=E),"onprogress"in N&&(N.onprogress=h),"onreadystatechange"in N&&(N.onreadystatechange=C),F=!1,B=c(q,P),U=0,z=_,H.length=0,V="",j=M,Y="",G="",W=w;var n=t.slice(0,5);n="data:"!==n&&"blob:"!==n?t+((-1===t.indexOf("?",0)?"?":"&")+"lastEventId="+encodeURIComponent(M)+"&r="+(Math.random()+1).toString().slice(2)):t,N.open("GET",n,!0),"withCredentials"in N&&(N.withCredentials=I),"responseType"in N&&(N.responseType="text"),"setRequestHeader"in N&&N.setRequestHeader("Accept","text/event-stream"),N.send(void 0)},n.call(this),this.close=l,this.url=t,this.readyState=_,this.withCredentials=I,this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,q()}function u(){this.CONNECTING=_,this.OPEN=v,this.CLOSED=y}var c=e.setTimeout,d=e.clearTimeout;t.prototype.get=function(e){return this.data[e+"~"]},t.prototype.set=function(e,t){this.data[e+"~"]=t},t.prototype["delete"]=function(e){delete this.data[e+"~"]},n.prototype.dispatchEvent=function(e){e.target=this;var t=e.type.toString(),n=this.listeners,r=n.get(t);if(void 0!=r)for(var o=r.length,s=-1,a=void 0;++s<o;){a=r[s];try{a.call(this,e)}catch(l){i(l)}}},n.prototype.addEventListener=function(e,t){e=e.toString();var n=this.listeners,i=n.get(e);void 0==i&&(i=[],n.set(e,i));for(var r=i.length;--r>=0;)if(i[r]===t)return;i.push(t)},n.prototype.removeEventListener=function(e,t){e=e.toString();var n=this.listeners,i=n.get(e);if(void 0!=i){for(var r=i.length,o=[],s=-1;++s<r;)i[s]!==t&&o.push(i[s]);0===o.length?n["delete"](e):n.set(e,o)}},o.prototype=r.prototype;var h=e.XMLHttpRequest,p=e.XDomainRequest,f=void 0!=h&&void 0!=(new h).withCredentials,g=f||void 0!=h&&void 0==p?h:p,m=-1,_=0,v=1,y=2,b=3,w=4,x=5,k=6,S=7,T=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,E=1e3,A=18e6;u.prototype=n.prototype,l.prototype=new u,u.call(l),f&&(l.prototype.withCredentials=void 0);var C=function(){return void 0!=e.EventSource&&"withCredentials"in e.EventSource.prototype};void 0!=g&&(void 0==e.EventSource||f&&!C())&&(e.NativeEventSource=e.EventSource,e.EventSource=l)}("undefined"!=typeof window?window:this)},,,,function(e,t,n){e.exports=n.p+"assets/images/buttons/hero/buffering-d977ce.gif"},function(e,t,n){e.exports=n.p+"assets/images/buttons/hero/buffering@2x-44e635.gif"},function(e,t,n){e.exports=n.p+"assets/images/buttons/hero/pause-1f3f22.svg"},function(e,t,n){e.exports=n.p+"assets/images/buttons/hero/play-69601b.svg"},function(e,t,n){e.exports=n.p+"assets/images/close-announcement-ed6150.png"},function(e,t,n){e.exports=n.p+"assets/images/close-announcement@2x-65dcea.png"},function(e,t,n){e.exports=n.p+"assets/images/close-modal-light-1161ba.svg"},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/drag-handle-a403f9.png"},,function(e,t,n){e.exports=n.p+"assets/images/empty-states/comments-1267be.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/comments@2x-30296a.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/following-f6990b.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/following@2x-65b4cc.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/history-ccb532.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/history@2x-6eaa4e.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/likes-3bcb16.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/likes@2x-0ea46c.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/playlists@2x-81659e.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/reposts-357430.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/reposts@2x-34af13.png"},function(e,t,n){e.exports=n.p+"assets/images/empty-states/stations-96e82b.svg"},,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/header/activities-66caaa.svg"},function(e,t,n){e.exports=n.p+"assets/images/header/dropdown-cf3420.svg"},function(e,t,n){e.exports=n.p+"assets/images/header/header-icons-1afa05.png"},function(e,t,n){e.exports=n.p+"assets/images/header/messages-f517d0.svg"},function(e,t,n){e.exports=n.p+"assets/images/header/more-0e9e75.svg"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/follow_light-006bc6.png"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/following_light-4c851d.png"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/likes_light-b79fe9.png"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/premium_light-0f2add.png"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/sets_light-eb43b8.png"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/sounds_light-9699a1.png"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/stations_light-0c5b74.png"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/stations_light@2x-474487.png"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/stats_light-53c6d3.png"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/track_manager_light-e8f84d.png"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/track_manager_light@2x-49a9db.png"},function(e,t,n){e.exports=n.p+"assets/images/header/profile/user_light-dd6863.png"},,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/loader-dark-45940a.gif"},,function(e,t,n){e.exports=n.p+"assets/images/messages/recipientRemove-929f8f.png"},,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/playback/pause-b172a6.svg"},function(e,t,n){e.exports=n.p+"assets/images/playback/play-c9d2fb.svg"},function(e,t,n){e.exports=n.p+"assets/images/playback/prev-34697d.svg"},function(e,t,n){e.exports=n.p+"assets/images/playback/repeat-track-active-525e7e.svg"},function(e,t,n){e.exports=n.p+"assets/images/playback/repeat-track-b45f6e.svg"},function(e,t,n){e.exports=n.p+"assets/images/playback/skip-3aac31.svg"},,,function(e,t,n){e.exports=n.p+"assets/images/playlist-cover-bg_small-1e4020.png"},function(e,t,n){e.exports=n.p+"assets/images/playlist-cover-bg_small@2x-c437aa.png"},,,,,,function(e,t,n){e.exports=n.p+"assets/images/premium/error-305b36.png"},,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/stations/station-overlay-small-a969a0.svg"},function(e,t,n){e.exports=n.p+"assets/images/stations/station-overlay-3eaed4.svg"},,function(e,t,n){e.exports=n.p+"assets/images/stopper-9d4f27.png"},function(e,t,n){e.exports=n.p+"assets/images/throbber-repeat-605910.png"},,,function(e,t,n){e.exports=n.p+"assets/images/upload/big-checkbox-583f9f.png"},function(e,t,n){e.exports=n.p+"assets/images/upload/big-checkbox@2x-a39eff.png"},,,,,,,,,,,function(e,t,n){e.exports=n.p+"assets/images/upsell/pulse-upsell-phones-c9c5ea.png"},function(e,t,n){e.exports=n.p+"assets/images/upsell/pulse-upsell-phones@2x-0a7a02.png"},,,function(e,t,n){e.exports=n.p+"assets/images/warnings/gs-logo-1c66fa.png"},function(e,t,n){e.exports=n.p+"assets/images/warnings/sc-logo-849899.png"},function(e,t,n){e.exports=n.p+"assets/images/who-to-follow/refresh-8000d5.png"},function(e,t,n){e.exports=n.p+"assets/images/widgets/colors-0c8fa8.png"},,,,,,function(e,t,n){e.exports=n.p+"assets/images/widgets/tabs/classic-3212ff.png"},function(e,t,n){e.exports=n.p+"assets/images/widgets/tabs/mini-450a78.png"},function(e,t,n){e.exports=n.p+"assets/images/widgets/tabs/visual-b7ef66.png"},function(e,t,n){e.exports=n.p+"assets/swf/flashAudio-ccac65.swf"},function(e,t,n){e.exports=n.p+"assets/swf/flashAudio_debug-64e67d.swf"},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-two-column-sound-hero">\n  <div class="l-main sc-border-light-right">\n    <div class="l-listen-sound sc-clearfix"></div>\n    <div class="l-listen-engagement"></div>\n    <div class="l-listen-content"></div>\n  </div>\n  <div class="l-sidebar-right">\n\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,i,r,o){var s,a=null!=t?t:{},l=i.helperMissing,u=e.escapeExpression,c=e.lambda;return u((n(52)||t&&t.$view||l).call(a,n(1270),{name:"$view",hash:{delay:null!=(s=null!=t?t._options:t)?s.delay:s,$targetEl:null!=(s=null!=t?t._options:t)?s.$targetEl:s,key:"background"},data:o}))+'\n\n<div class="callout__bubble">\n  <h2 class="callout__title">'+u(c(null!=(s=null!=t?t._options:t)?s.title:s,t))+'</h2>\n  <p class="sc-type-small">'+u(c(null!=(s=null!=t?t._options:t)?s.body:s,t))+'</p>\n  <div class="callout__button">\n    <button class="sc-button sc-button-cta sc-button-medium">'+u((n(50)||t&&t.$t||l).call(a,"OK, got it",{name:"$t",hash:{},data:o}))+"</button>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-fixed-fluid">\n  <div class="l-sidebar-left">\n\n  </div>\n  <div class="l-main">\n\n  </div>\n</div>\n'},useData:!0})},,function(e,t,n){var i=n(20);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<div class="l-fluid-fixed">\n  <div class="l-main sc-border-light-right">\n\n  </div>\n  <div class="l-sidebar-right">\n\n  </div>\n</div>\n'},useData:!0})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports={africa:{DZ:"Algeria",AO:"Angola",AG:"Antigua And Barbuda",BJ:"Benin",BT:"Bhutan",BW:"Botswana",BF:"Burkina Faso",BI:"Burundi",CM:"Cameroon",CV:"Cape Verde",CF:"Central African Republic",TD:"Chad",KM:"Comoros",CG:"Congo",CD:"Democratic Republic of the Congo",CI:"Cote d'Ivoire",EG:"Egypt",GQ:"Equatorial Guinea",ER:"Eritrea",ET:"Ethiopia",GF:"French Guiana",GA:"Gabon",GM:"Gambia",GH:"Ghana",GN:"Guinea",GW:"Guinea-Bissau",KE:"Kenya",LS:"Lesotho",LR:"Liberia",MW:"Malawi",ML:"Mali",MR:"Mauritania",YT:"Mayotte",MA:"Morocco",MZ:"Mozambique",NA:"Namibia",NE:"Niger",NG:"Nigeria",QA:"Qatar",RW:"Rwanda",ST:"Sao Tome And Principe",SN:"Senegal",SC:"Seychelles",SL:"Sierra Leone",SO:"Somalia",ZA:"South Africa",SD:"Sudan",SR:"Suriname",SZ:"Swaziland",TZ:"United Republic of Tanzania",TG:"Togo",TT:"Trinidad And Tobago",UG:"Uganda",EH:"Western Sahara",ZM:"Zambia",ZW:"Zimbabwe"},asia:{AF:"Afghanistan",BH:"Bahrain",BD:"Bangladesh",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",KH:"Cambodia",CN:"China",DJ:"Djibouti",HK:"Hong Kong",IN:"India",ID:"Indonesia",IR:"Islamic Republic of Iran",IQ:"Iraq",IL:"Israel",JP:"Japan",JO:"Jordan",KP:"Democratic People's Republic of Korea",KR:"Republic of Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LY:"Libyan Arab Jamahiriya",MO:"Macao",MY:"Malaysia",MN:"Mongolia",MM:"Myanmar",NP:"Nepal",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PH:"Philippines",SA:"Saudi Arabia",SG:"Singapore",SB:"Solomon Islands",SS:"South Sudan",LK:"Sri Lanka",SY:"Syrian Arab Republic",TW:"Taiwan, Province of China",TJ:"Tajikistan",TH:"Thailand",TL:"Timor-Leste",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",AE:"United Arab Emirates",UZ:"Uzbekistan",VN:"Viet Nam",YE:"Yemen"},australasia:{AS:"American Samoa",AU:"Australia",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CK:"Cook Islands",FJ:"Fiji",PF:"French Polynesia",HM:"Heard Island And McDonald Islands",KI:"Kiribati",MG:"Madagascar",MV:"Maldives",MH:"Marshall Islands",MU:"Mauritius",FM:"Federated States of Micronesia",NR:"Nauru",NC:"New Caledonia",NZ:"New Zealand",NU:"Niue",MP:"Northern Mariana Islands",PG:"Papua New Guinea",WS:"Samoa",TK:"Tokelau",TO:"Tonga",TV:"Tuvalu",VU:"Vanuatu",WF:"Wallis And Futuna",AQ:"Antarctica"},europe:{AX:"Aaland Islands",AL:"Albania",AD:"Andorra",AM:"Armenia",AT:"Austria",AZ:"Azerbaijan",BY:"Belarus",BE:"Belgium",BA:"Bosnia And Herzegovina",BV:"Bouvet Island",BG:"Bulgaria",HR:"Croatia",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",EE:"Estonia",FO:"Faroe Islands",FI:"Finland",FR:"France",TF:"French Southern Territories",GE:"Georgia",DE:"Germany",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GP:"Guadeloupe",GG:"Guernsey",VA:"Holy See (Vatican City State)",HU:"Hungary",IS:"Iceland",IE:"Ireland",IM:"Isle of Man",IT:"Italy",JE:"Jersey",KZ:"Kazakhstan",LV:"Latvia",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MK:"The Former Yugoslav Republic of Macedonia",MT:"Malta",MQ:"Martinique",MD:"Republic of Moldova",MC:"Monaco",ME:"Montenegro",MS:"Montserrat",NL:"Netherlands",NF:"Norfolk Island",NO:"Norway",PL:"Poland",PT:"Portugal",RE:"Reunion",RO:"Romania",RU:"Russian Federation",SH:"Saint Helena, Ascension And Tristan Da Cunha",SM:"San Marino",RS:"Serbia",SX:"Sint Maarten (Dutch Part)",SK:"Slovakia",SI:"Slovenia",GS:"South Georgia And The South Sandwich Islands",ES:"Spain",SJ:"Svalbard And Jan Mayen",SE:"Sweden",CH:"Switzerland",UA:"Ukraine",GB:"United Kingdom",VG:"Virgin Islands, British"},latin_america:{AR:"Argentina",AW:"Aruba",BB:"Barbados",BZ:"Belize",BM:"Bermuda",BO:"Plurinational State of Bolivia",BQ:"Bonaire, Sint Eustatius And Saba",BR:"Brazil",CL:"Chile",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CW:"Curacao",EC:"Ecuador",SV:"El Salvador",FK:"Falkland Islands (Malvinas)",GD:"Grenada",GT:"Guatemala",GY:"Guyana",HN:"Honduras",JM:"Jamaica",MX:"Mexico",NI:"Nicaragua",PA:"Panama",PY:"Paraguay",PE:"Peru",PN:"Pitcairn",PR:"Puerto Rico",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",UY:"Uruguay",VE:"Bolivarian Republic of Venezuela"},north_america:{AI:"Anguilla",BS:"Bahamas",CA:"Canada",KY:"Cayman Islands",DM:"Dominica",DO:"Dominican Republic",GU:"Guam",HT:"Haiti",BL:"Saint Barthelemy",MF:"Saint Martin (French Part)",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And The Grenadines",TC:"Turks And Caicos Islands",US:"United States",UM:"United States Minor Outlying Islands",VI:"Virgin Islands, U.S."}}},function(e,t){"use strict";function n(e){return e in s?s[e]:null}function i(e,t){return s[e]=t,!0}function r(e){var t=e in s;return t?delete s[e]:!1}function o(){return s={},!0}var s={};e.exports={getItem:n,setItem:i,removeItem:r,clear:o}},function(e,t){(function(t){"use strict";function n(){t.addEventListener?t.addEventListener("storage",i,!1):t.attachEvent?t.attachEvent("onstorage",i):t.onstorage=i}function i(e){function n(t){t(JSON.parse(e.newValue),JSON.parse(e.oldValue),e.url||e.uri)}e||(e=t.event);var i=s[e.key];i&&i.forEach(n)}function r(e,t){s[e]?s[e].push(t):s[e]=[t],a===!1&&n()}function o(e,t){var n=s[e];n.length>1?n.splice(n.indexOf(t),1):s[e]=[]}var s={},a=!1;e.exports={on:r,off:o}}).call(t,function(){return this}())},function(e,t,n){function i(e,t){return null==t?e:r(t,o(t),e)}var r=n(2671),o=n(1112);e.exports=i},function(e,t){function n(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}e.exports=n},function(e,t){function n(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,s){return e.call(t,n,i,r,o,s)}}return function(){return e.apply(t,arguments)}}function i(e){return e}e.exports=n},function(e,t,n){function i(e){return s(function(t,n){var i=-1,s=null==t?0:n.length,a=s>2?n[s-2]:void 0,l=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=r(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),l&&o(n[0],n[1],l)&&(a=3>s?void 0:a,s=1);++i<s;){var c=n[i];c&&e(t,c,a)}return t})}var r=n(2672),o=n(2675),s=n(2678);e.exports=i},function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function r(e){return o(e)&&h.call(e)==a}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:r(e)?p.test(c.call(e)):n(e)&&l.test(e)}var a="[object Function]",l=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,h=u.toString,p=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function i(e){return null!=e&&s(c(e))}function r(e,t){return e="number"==typeof e||l.test(e)?+e:-1,t=null==t?u:t,e>-1&&e%1==0&&t>e}function o(e,t,n){if(!a(n))return!1;var o=typeof t;if("number"==o?i(n)&&r(t,n.length):"string"==o&&t in n){var s=n[t];return e===e?e===s:s!==s}return!1}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=/^\d+$/,u=9007199254740991,c=n("length");e.exports=o},function(e,t){function n(e){return r(e)&&f.call(e,"callee")&&(!m.call(e,"callee")||g.call(e)==c)}function i(e){return null!=e&&s(e.length)&&!o(e)}function r(e){return l(e)&&i(e)}function o(e){var t=a(e)?g.call(e):"";return t==d||t==h}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return!!e&&"object"==typeof e}var u=9007199254740991,c="[object Arguments]",d="[object Function]",h="[object GeneratorFunction]",p=Object.prototype,f=p.hasOwnProperty,g=p.toString,m=p.propertyIsEnumerable;e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&_>=e}function o(e){return s(e)&&f.call(e)==u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:o(e)?g.test(h.call(e)):n(e)&&c.test(e)}var l="[object Array]",u="[object Function]",c=/^\[object .+?Constructor\]$/,d=Object.prototype,h=Function.prototype.toString,p=d.hasOwnProperty,f=d.toString,g=RegExp("^"+h.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=i(Array,"isArray"),_=9007199254740991,v=m||function(e){return n(e)&&r(e.length)&&f.call(e)==l};e.exports=v},function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=r(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(i=-1;++i<t;)a[i]=n[i];return a[t]=s,e.apply(this,a)}}var i="Expected a function",r=Math.max;e.exports=n},function(e,t,n){/*!
	 * Remixin v1.0.1
	 * (c) SoundCloud 2015
	 * Remixin may be freely distributed under the MIT license.
	 */
!function(t){var i=t(n(46));e.exports=i}(function(e){function t(){this.mixins=e.initial(arguments),this.properties=e.last(arguments)}function n(e,t){this.applyTo=function(n){e.applyTo(n,t)}}function i(e,t){return null==e?t.slice():r(l(e),t)}function r(t,n){return t.concat(e.difference(n,t))}function o(e,t){return null==e?t:i(a(e),a(t)).join(" ")}function s(t,n){return e.extend({},n,t)}function a(t){return e.compact(t.split(c))}function l(t){return e.isArray(t)?t:[t]}var u=["before","after","around","requires","override","defaults","applyTo","requirePrototype","merge"],c=/\s+/;return e.extend(t.prototype,{applyTo:function(t,n){var i=this.properties;this.defaults(t,i.defaults),this.extend(t,i),this.merge(t,i.merge),e.invoke(this.mixins,"applyTo",t),["requires","requirePrototype","override","before","after","around"].forEach(function(e){this[e](t,i[e])},this),i.applyTo&&i.applyTo.call(this,t,n)},withOptions:function(e){return new n(this,e)},before:function(t,n){e.each(n,function(e,n){var i=t[n];t[n]=function(){return e.apply(this,arguments),i.apply(this,arguments)}})},after:function(t,n){e.each(n,function(e,n){var i=t[n];t[n]=function(){var t=i.apply(this,arguments);return e.apply(this,arguments),t}})},around:function(t,n){e.each(n,function(e,n){var i=t[n];t[n]=function(){var t=0,n=arguments.length,r=Array(n+1);for(r[0]=i.bind(this);n>t;++t)r[t+1]=arguments[t];return e.apply(this,r)}})},override:function(t,n){e.extend(t,n)},defaults:function(t,n){e.each(n,function(e,n){t.hasOwnProperty(n)||(t[n]=e)})},merge:function(t,n){e.each(n,function(n,r){if(null!=n){var a=t[r];t[r]=e.isArray(n)?i(a,n):e.isString(n)?o(a,n):s(a,n)}})},extend:function(t,n){var i=e.omit(n,u);e.extend(t,i)},requires:e.noop,requirePrototype:e.noop}),n.prototype=t.prototype,t})},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerDecorator("inline",function(e,t,n,r){var o=e;return t.partials||(t.partials={},o=function(r,o){var s=n.partials;n.partials=i.extend({},s,t.partials);var a=e(r,o);return n.partials=s,a}),t.partials[r.args[0]]=r.fn,o})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,o=n.fn;if(t===!0)return o(this);if(t===!1||null==t)return r(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var s=i.createFrame(n.data);s.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:s}}return o(t,n)})},e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(4),o=n(5),s=i(o);t["default"]=function(e){e.registerHelper("each",function(e,t){function n(t,n,o){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!o,c&&(u.contextPath=c+t)),l+=i(e[t],{data:u,blockParams:r.blockParams([e[t],t],[c+t,null])})}if(!t)throw new s["default"]("Must pass iterator to #each");var i=t.fn,o=t.inverse,a=0,l="",u=void 0,c=void 0;if(t.data&&t.ids&&(c=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),r.isFunction(e)&&(e=e.call(this)),t.data&&(u=r.createFrame(t.data)),e&&"object"==typeof e)if(r.isArray(e))for(var d=e.length;d>a;a++)a in e&&n(a,a,a===e.length-1);else{var h=void 0;for(var p in e)e.hasOwnProperty(p)&&(void 0!==h&&n(h,a-1),h=p,a++);void 0!==h&&n(h,a-1,!0)}return 0===a&&(l=o(this)),l})},e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(5),o=i(r);t["default"]=function(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerHelper("if",function(e,t){return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),t[0]=r,e.log.apply(e,t)})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerHelper("with",function(e,t){i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&(r=i.createFrame(t.data),r.contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:i.blockParams([e],[r&&r.contextPath])})})},e.exports=t["default"]},function(e,t,n){var i=n(1761);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1763);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1764);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},function(e,t,n){var i=n(1765);"string"==typeof i&&(i=[[e.id,i,""]]);n(7)(i,{})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}}]);